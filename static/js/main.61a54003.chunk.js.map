{"version":3,"sources":["timeline/logReader/index.js","timeline/logReader/logReader.worker.js","icons/auth_apple.png","icons/auth_github.png","icons/auth_google.png","icons/pin-car.svg","icons/pin-marker.svg","icons/pin-pinned.svg","icons/pin-home.svg","icons/pin-work.svg","icons/icon-chffr-wheel.svg","timeline/playback.js","timeline/cache.js","url.js","timeline/segments.js","timeline/reducers/globalState.js","timeline/reducers/index.js","demo/index.js","timeline/actions/types.js","timeline/store.js","timeline/actions/index.js","timeline/startup.js","timeline/commands.js","timeline/timeline.js","timeline/index.js","colors.js","components/AppHeader/TimeFilter.js","icons/index.js","components/ResizeHandler/index.js","components/AppHeader/index.js","actions/index.js","actions/types.js","utils/index.js","api/geocode.js","components/Timeline/thumbnails.js","theme.js","components/Timeline/index.js","components/Dashboard/DriveListItem.js","utils/conversions.js","components/Dashboard/DriveList.js","api/stripe.js","components/Prime/PrimePayment.js","components/Prime/PrimeManage.js","components/Prime/util.js","components/Prime/PrimeChecklist.js","components/Prime/PrimeCheckout.js","components/Prime/index.js","components/Prime/PrimeBanner.js","components/Navigation/index.js","components/DeviceInfo/index.js","components/Dashboard/index.js","components/DriveMap/index.js","components/DriveVideo/canvas.js","components/DriveVideo/buffering.js","components/DriveVideo/index.js","components/TimeDisplay/index.js","components/DriveView/Media.js","components/DriveView/index.js","components/Dashboard/DeviceSettingsModal.js","components/DriveView/shopButton.js","components/DriveView/commaTwoUpsell.js","components/Dashboard/DeviceList.js","components/AppDrawer/index.js","components/explorer.js","components/anonymous.js","reducers/workerState.js","reducers/zoom.js","reducers/index.js","devtools.js","store.js","analytics.js","App.js","registerServiceWorker.js","index.js","timeline/initialState.js","timeline/logIndex.js"],"names":["Event","require","LogReaderWorker","DataEvent","logReader","handleMessage","msg","broadcast","relayMessage","port","postMessage","data","getWorker","Error","channel","MessageChannel","logPort","port1","apiPort","port2","onmessage","module","exports","onData","listen","Worker","initialState","currentOffset","state","playSpeed","isBufferingData","isBufferingVideo","desiredPlaySpeed","offset","Date","now","startTime","loop","loopOffset","start","duration","cachePort","ExpireEvent","onExpire","command","getEntry","route","segment","touch","dongleIdRegex","RegExp","getDongleID","pathname","parts","split","filter","m","length","test","getZoom","Number","end","getPrimeNav","getCurrentSegment","o","undefined","segments","i","len","thisSegment","segmentIndex","Math","floor","url","routeOffset","startOffset","events","deviceType","videoAvailableBetweenOffsets","hpgps","hasVideo","hasDriverCamera","cameraStreamSegCount","distanceMiles","getNextSegment","finishSegment","lastEngage","vidAvail","lastVideoRange","slice","sort","a","b","route_offset_millis","route_offset_nanos","forEach","event","type","end_offset_nanos","offset_nanos","end_offset_millis","offset_millis","end_route_offset_nanos","end_route_offset_millis","segmentsFromMetadata","segmentsData","curSegment","curVideoStartOffset","proc_log","proc_qlog","segmentHasDriverCamera","proc_dcamera","segmentHasVideo","proc_camera","canonical_route_name","isFinite","pop","join","start_time_utc_millis","startCoord","start_lng","start_lat","replace","devicetype","locStart","locEnd","push","max","canonical_name","concat","endCoord","end_lng","end_lat","API","hasSegmentMetadata","devices","segmentData","dongleId","console","log","parseSegmentMetadata","_segments","routeStartTimes","map","_segment","round","segmentNum","end_time_utc_millis","JSON","parse","events_json","plannedDisengageEvents","should_take_control","_event","timestamp","canonical_segment_name","is_planned","alert","reduce","closestAlert","nextAlert","closestAlertDiff","abs","alertText2","warn","id","time","hasCameraAtOffset","some","int","updateSegments","fetchSegmentMetadata","promise","insertSegmentMetadata","SEGMENT_LENGTH","reducer","_state","action","currentSegment","nextSegment","range","isDemoCached","reducers","globalState","deviceIndex","device","fetched_at","parseInt","dongle_id","find","alias","create_time","device_type","imei","is_owner","serial","profile","primeNav","subscription","findIndex","d","last_athena_ping","paymentMethod","store","createStore","reduceReducers","speed","min","buffering","Boolean","Segments","Reducers","isDemoQuery","qs","window","location","search","demo","init","localforage","getItem","isDemo","selectDevice","primeGetSubscriptionAction","primeGetPaymentMethodAction","primeNavAction","nav","demoProfile","demoDevices","dispatch","Devices","listDevices","Account","getProfile","dev","superuser","Billing","getSubscription","then","catch","err","message","indexOf","prime","getPaymentMethod","resp","status","initAuthPromise","Auth","token","Request","configure","hasGottenSegmentData","hasGottenSegmentDataPromise","Promise","resolve","segmentDataHandler","Demo","selectDeviceAction","all","subscribe","getState","commands","close","play","Playback","pause","seek","bufferVideo","isBuffering","bufferData","hello","selectTimeRange","selectTimeRangeAction","selectLoop","updateDevice","updateDeviceAction","ports","setCachePort","Cache","stop","primeGetSubscription","primeGetPaymentMethod","resetPlayback","updateDeviceOnline","updateDeviceOnlineAction","demoSegments","BroadcastEvent","DataLogEvent","SegmentTimerStore","CreateStore","segmentsRequest","scheduleSegmentUpdate","timeUntilNext","stopTimer","clearTimeout","curTime","timeUntilLoop","loopStartOffset","loopStartSegment","setTimeout","checkSegmentMetadata","Drives","getSegmentMetadata","error","stack","ensureSegmentDataTimer","ensureSegmentData","entry","StateEvent","IndexEvent","InitEvent","InitPromise","startPath","timeline","options","onStateChange","onIndexed","this","buffers","requestId","openRequests","initPromise","expire","bind","hasInit","readyPromise","zoom","AuthStorage","getCommaAccessToken","reject","handleData","setState","LogIndex","getStartMonoTime","index","getIndex","currentLogMonoTime","logIndex","lastEvents","_eventCount","logMonoTime","getLogIndex","curIndex","eventCount","Array","u","getEvent","getNextLogIndex","_logIndex","buffer","capnp","getRoot","CapnpEvent","toJSON","firstFrameTime","EventWhich","ROAD_CAMERA_STATE","RoadCameraState","TimestampEof","currentInitData","curSegLog","INIT_DATA","currentModel","getEventByType","MODEL","currentModelV2","MODEL_V2","currentRadarState","RADAR_STATE","currentMPC","LIVE_MPC","currentCarState","CAR_STATE","currentControlsState","CONTROLS_STATE","currentThumbnail","THUMBNAIL","currentLiveCalibration","LIVE_CALIBRATION","which","maxTimeDiff","monoTime","curSegNum","getCalibration","indexes","keys","Object","calibrations","Colors","transparent","white","white10","white12","white20","white30","white40","white50","white60","white70","white80","white90","black","blue50","blue100","blue200","blue300","blue400","blue500","blue600","blue700","blue800","blue900","blue950","blue999","lightBlue50","lightBlue100","lightBlue200","lightBlue300","lightBlue400","lightBlue500","lightBlue600","lightBlue700","lightBlue800","lightBlue900","desatBlue800","red50","red100","red200","red300","red400","red500","red600","red700","red800","red900","lightRed50","lightRed100","lightRed200","lightRed300","lightRed400","lightRed500","lightRed600","lightRed700","lightRed800","lightRed900","lightRed950","lightRed999","green50","green100","green200","green300","green400","green500","green600","green700","green800","green900","lightGreen50","lightGreen100","lightGreen200","lightGreen300","lightGreen400","lightGreen500","lightGreen600","lightGreen700","lightGreen800","lightGreen900","orange50","orange100","orange200","orange300","orange400","orange500","orange600","orange700","orange800","orange900","lightOrange50","lightOrange100","lightOrange200","TimeSelect","props","handleSelectChange","handleClose","changeStart","changeEnd","handleSave","showPicker","e","selection","target","value","setHours","getHours","Timelineworker","getTime","valueAsNumber","selectedOption","timeRange","lastWeekText","weekAgo","fecha","format","last2WeeksText","twoWeeksAgo","last24HoursText","render","classes","minDate","toISOString","substr","maxDate","startDate","endDate","name","onChange","className","headerDropdown","aria-labelledby","aria-describedby","open","onClose","modal","datePickerContainer","variant","label","buttonGroup","cancelButton","onClick","saveButton","Component","stateToProps","Obstruction","connect","withStyles","styles","theme","root","position","padding","spacing","unit","width","maxWidth","margin","left","top","transform","outline","marginTop","textAlign","fontWeight","marginRight","display","marginBottom","backgroundColor","grey200","color","grey400","grey800","auth_apple","auth_github","auth_google","pin_car","pin_marker","pin_pinned","pin_home","pin_work","AccountIcon","HistoryBackIcon","HistoryForwardIcon","chevronPath","rotation","ChevronIcon","DownArrow","UpArrow","RightArrow","ResizeHandler","resizeTimeout","handleResize","componentWillMount","addEventListener","componentWillUnmount","removeEventListener","onResize","innerWidth","innerHeight","AppHeader","handleClickedAccount","handleLogOut","toggleDrawer","anchorEl","windowWidth","handleDrawerStateChanged","drawerIsOpen","currentTarget","removeItem","MyCommaAuth","logOut","annotating","showDrawerButton","reorderWideStyle","order","justifyContent","elevation","ref","forwardRef","header","titleContainer","aria-label","hamburger","Link","to","logoImgLink","alt","src","logoImg","logo","logoText","headerWideItem","style","TimeFilter","aria-owns","aria-haspopup","accountIcon","anchorOrigin","vertical","horizontal","transformOrigin","accountListItem","accountListEmail","email","points","accountMenuItem","component","href","borderBottom","flexDirection","alignItems","flexWrap","textDecoration","lineHeight","height","fontSize","selectRange","workerState","curPath","document","desiredPath","urlForState","primeFetchSubscription","fetchDeviceOnline","DevicesApi","fetchDevice","prime_nav","path","deviceTypePretty","deviceIsOnline","mbxGeocoding","mbxDirections","geocodeCache","Map","geocodingClient","directionsClient","geocodeApi","getFilteredContexts","context","include_ctxs","ctx","c","getContextString","short_code","text","priorityGetContext","contexts","prio","noCacheReverseLookup","coords","reverseGeocode","query","limit","send","response","features","body","place","details","shift","Raven","captureException","reverseLookup","cacheKey","stringify","has","get","res","set","forwardLookup","proximity","viewport","params","apiKey","process","q","at","bbox","WebMercatorViewport","getBounds","vals","in","fetch","method","ok","json","items","networkPositioning","req","headers","Headers","getDirections","waypoints","p","coordinates","annotations","geometries","overview","routes","accessToken","Thumbnails","thumbnail","imgStyles","imgCount","ceil","gutter","imgArr","percentToOffset","seconds","blank","imageIndex","endImage","startImage","endOffset","renderImage","key","marginLeft","backgroundSize","backgroundRepeat","backgroundImage","backgroundPosition","createMuiTheme","typography","fontFamily","overrides","MuiButton","textTransform","MuiPaper","MuiDrawer","paper","overflowY","paperAnchorDockedLeft","borderRight","MuiSelect","select","paddingRight","background","selectMenu","icon","MuiInput","border","borderRadius","overflow","input","opacity","boxShadow","MuiInputLabel","shrink","MuiFormLabel","MuiFormHelperText","MuiTab","minHeight","MuiListItem","disableUnderline","IconComponent","palette","placeholder","default","grey999","primary","light","grey50","main","grey900","dark","states","drivingBlue","engagedGreen","alertOrange","alertRed","grey","50","100","grey100","200","300","grey300","400","500","grey500","600","grey600","700","grey700","800","900","950","grey950","999","lightGrey","lightGrey200","10","12","20","30","40","AlertStatusCodes","percentFromMouseEvent","boundingBox","getBoundingClientRect","pageX","Timeline","getOffset","handleClick","handleMouseMove","handleMouseDown","handleMouseUp","handleMouseLeave","renderSegment","sendSeek","debounce","offsetValue","React","createRef","rulerRemaining","rulerRemainingHovered","dragBar","hoverBead","zoomOverride","dragStart","mouseX","hoverPercent","isHovered","stopListening","TimelineWorker","forceUpdate","componentDidMount","mounted","raf","componentWillReceiveProps","seekIndex","percent","offsetToPercent","current","parentElement","isDragSelecting","noseek","dragSelection","querySelector","base","dragEnd","selectedArea","startPercent","endPercent","endTime","x","toFixed","perc","zoomed","renderDragger","draggerStyle","dragHighlight","renderZoom","expanded","endColor","zoomStart","zoomEnd","barStyle","colored","startPerc","widthPerc","zoomDuration","renderSegmentEvents","uncoloredSegment","localStorage","showCurrentEvent","eventStart","eventEnd","statusCls","alertStatus","segmentColor","hasThumbnails","tooltipped","hasRuler","rounded","hasGradient","hoverOffset","timeString","isNaN","timestampAtOffset","roundedCls","hasRulerCls","hasThumbnailsCls","role","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","ruler","statusGradient","title","bounds","rect","measureRef","thumbnails","seg","mapStateToProps","bottom","borderLeft","pointerEvents","whiteSpace","userSelect","DriveListDrive","startLocation","endLocation","handleDriveClicked","drive","GeocodeApi","small","formatDriveDuration","milliseconds","minutes","hours","getDrivePoints","gridStyle","date","flexBasis","dur","dist","origin","dest","arrow","driveHeader","container","driveGridItem","firstLine","toString","driveArrow","driveTimeline","driveHeaderIntro","flexGrow","driveHeaderIntroSmall","DriveList","filterShortDrives","deviceAliasSaved","ride","driveList","lastEnd","lastSegmentEnd","curRideChunk","unshift","drivesTable","renderZeroRides","drives","DriveListItem","zeroRidesEle","containerPadding","zeroState","isSuperUser","flex","settingsArea","settingsButton","settingsButtonIcon","stripe","loadStripe","PrimePayment","cardNumber","cardExpiry","cardCvc","zipCode","activating","handleCardInput","handleZipInput","submitPayment","tokenize","activate","updatePayment","card","elementType","onError","ev","cardNumberElement","elements","getElement","CardNumberElement","activateFunc","isUpdate","createToken","address_zip","simId","payForPrime","payResp","onActivated","cardElement","updatePaymentMethod","disabled","onCancel","disableFields","canCheckout","complete","buttonText","stripeStyle","lightGrey500","buttonSmallStyle","block","fieldLabel","stripeCardNumber","showIcon","stripeCardOther","required","InputProps","inputRoot","buttonsContainer","buttons","defaultProps","_","borderTopLeftRadius","borderTopRightRadius","borderTop","borderBottomLeftRadius","borderBottomRightRadius","InjectedCheckoutForm","PrimeManage","cancelError","cancelModal","canceling","cancelPrime","modalClose","onPaymentUpdated","success","cancelSuccess","description","activated","brand","last4","joinDate","moment","unix","subscribed_at","nextPaymentDate","next_charge_at","simInfo","sim_id","primeBox","primeContainer","history","back","overviewBlock","manageItem","deviceId","overviewBlockSuccess","overviewBlockError","paymentElement","cancelModalButton","closeButton","primeBlock","float","payload","jsonrpc","Athena","postJsonRpcPayload","simIdIsValid","listItems","PrimeChecklist","moreInfo","collapsed","checkList","listItemText","checkListItem","secondary","learnMore","rel","alignSelf","PrimeCheckout","simInfoLoading","new_subscription","onPrimeActivated","fetchSimInfo","result","isTrialClaimable","trial_claimable","firstChargeDate","trial_end","claimEndDate","trial_claim_end","chargeText","introLine","overviewBlockLoading","size","deviceBlock","txt","is_prime_sim","moreInfoContainer","leftMargin","Prime","PrimeBanner","activateButton","moreInfoButton","hasFocus","carLastLocation","carLastLocationTime","carNetworkLocation","carNetworkLocationAccuracy","favoriteLocations","geoLocateCoords","searchSelect","searchLooking","noFly","saveAsMenu","savingAs","savedAs","Navigation","longitude","latitude","searchInputRef","searchSelectBoxRef","overlayRef","carPinTooltipRef","navigateFakeButtonRef","flyToMarkers","renderOverlay","renderSearchOverlay","renderResearchArea","onGeolocate","onSearch","onFocus","onSearchSelect","researchArea","onFavoriteSelect","onSearchBlur","focus","updateFavoriteLocations","getFavoriteLabelIcon","formatDistance","formatDuration","navigate","toggleCarPinTooltip","clearSearch","formatSearchName","formatSearchDetails","itemLoc","itemLngLat","saveSearchAs","deleteFavorite","viewportChange","getDeviceLastLocation","getDeviceNetworkLocation","getCarLocation","carLocationCircle","clearSearchSelect","componentDidUpdate","prevProps","prevState","fetchLocation","lng","lat","hasNav","AthenaApi","accuracy","NavigationAPI","getLocationsData","favorites","loc","save_type","pos","searchInput","vp","carLoc","item","includes","resultType","favoriteId","favoriteIcon","place_name","address","place_details","relatedTarget","carLocation","apply","right","fitBounds","maxZoom","meters","distance","metric","legs","admins","adm","iso_3166_1","mins","comma","addrLabelName","access","settingDest","setDestination","saved_next","visible","tooltip","as","putLocationSave","deleteLocationSave","interactionState","isPanning","isZooming","isRotating","theta","y","km","distanceX","cos","PI","distanceY","sin","cardStyle","carPinTooltipStyle","project","mapContainer","onViewportChange","onContextMenu","mapStyle","onNativeClick","maxPitch","mapboxApiAccessToken","attributionControl","dragRotate","geolocateControl","positionOptions","enableHighAccuracy","showAccuracyCircle","auto","fitBoundsOptions","trackUserLocation","geometry","layout","paint","entries","offsetLeft","offsetTop","captureDrag","captureClick","captureDoubleClick","favoritePin","pin","onMouseEnter","carPinTooltip","fromNow","source","pinClick","redraw","captureScroll","capturePointerMove","overlay","tabIndex","onBlur","fullWidth","inputRef","overlayTextfield","endAdornment","overlayClearButton","overlaySearchButton","overlaySearchResults","overlaySearchNoLocation","overlaySearchNoResults","overlaySearchItem","overlaySearchDetails","noRoute","searchSelectBox","searchSelectBoxHeader","searchSelectBoxTitle","bold","searchSelectBoxDetails","searchSelectBoxButtons","searchSelectButton","noWrap","saveAsMenuItem","searchSelectButtonFake","placement","savedNextPopover","maxHeight","cursor","minWidth","deviceStats","carHealth","snapshot","DeviceInfo","fetchDeviceInfo","fetchDeviceCarHealth","takeSnapshot","snapshotType","renderButtons","renderStats","renderSnapshotImage","fetching","fetchDeviceStats","jpegBack","jpegFront","showFront","largeSnapshotPadding","paddingLeft","row","spaceAround","snapshotContainer","snapshotContainerLarge","snapshotImageContainerLarge","autoPlay","interval","showThumbs","showStatus","showArrows","deviceStat","batteryVoltage","batteryBackground","pandaState","voltage","buttonClass","snapshotButton","snapshotButtonSmall","buttonOffline","carBattery","button","isFront","snapshotImage","snapshotImageError","paddingTop","lightGrey600","Dashboard","DriveMap","populateMap","isLoadingCoords","routeSigUrl","DerivedDataApi","getCoords","coordsArr","coord","setPath","initMap","posAtOffset","updateMarkerPos","nextRoute","nextProps","shouldFlyTo","getMarkerSource","getMap","getSource","markerSource","setData","moveViewportTo","_data","transitionDuration","transitionInterpolator","LinearInterpolator","properties","offsetSeconds","offsetFractionalPart","coordIdx","nextCoordIdx","floorLng","floorLat","mapComponent","on","addSource","addLayer","dragPan","roundedRectPath","radius","K","SQRT2","beginPath","moveTo","lineTo","bezierCurveTo","Buffering","zIndex","thickness","Hls","wheelImg","Image","tici_intrinsic","tici_vwp_w","tici_vwp_h","eon_intrinsic","eon_vwp_w","eon_vwp_h","DriveVideo","checkDataBuffer","shouldShowUI","isDataBuffering","monoTimeLength","lastEvent","nextEvent","LogMonoTime","nextEventTime","monSec","syncVideo","videoPlayer","visibleSegment","getDuration","internalPlayer","getInternalPlayer","hasSufficientBuffer","getSecondsLoaded","getCurrentTime","newPlaybackRate","playbackRate","desiredVideoTime","currentVideoTime","curVideoTime","timeDiff","seekTo","paused","playRes","updatePreview","canvas_road","canvas_lead","canvas_carstate","canvas_maxspeed","canvas_speed","canvas_face","intrinsic","vwp_w","vwp_h","frame","rafLoop","updateVideoSource","cancel","prevSegment","videoApi","VideoApi","getQcameraStreamIndex","getQcameraStreamIndexUrl","getRearCameraStreamIndexUrl","renderCanvas","calibration","lastCalibrationTime","extrinsic","LiveCalibration","ExtrinsicMatrix","init_data","is_tici","InitData","DeviceType","live_calibration","shouldScale","model","modelv2","mpc","controlsState","renderEventToCanvas","drawLaneFull","radarState","renderLeadCars","carState","renderCarState","initData","renderMaxSpeed","renderSpeed","canvas","renderEvent","logTime","monoIndex","getContext","setTransform","clearRect","_events","needsRender","eventsSig","scale","lastRadarStateMonoTime","leadOne","RadarState","LeadOne","leadTwo","LeadTwo","Status","renderLeadCar","leadData","is2ndCar","drel","DRel","vrel","VRel","yrel","YRel","carSpaceToImageSpace","sz","fillAlpha","fillStyle","lineWidth","g_xo","g_yo","fill","drawLaneBoundaryV2","ModelV2","LaneLines","LaneLineProbs","RoadEdges","RoadEdgeStds","drawLaneTrackV2","Position","drawLaneBoundary","Model","LeftLane","RightLane","drawLaneTrack","Path","LiveMpc","isMpc","isEnabled","ControlsState","Enabled","lane","Prob","Points","Poly","drawLaneLine","Std","off","isGhost","started","px","py","closePath","strokeStyle","stroke","lines","certainty","isStds","rgba","drawLaneLineV2","X","Y","pz","Z","track_bg","path_height","createLinearGradient","addColorStop","drawCarStateBorder","drawCarStateWheel","CarState","drawSpeed","VEgo","metricParam","Params","Entries","Key","isMetric","Value","textBaseline","font","fillText","drawMaxSpeed","maxSpeed","VCruise","maxSpeedCalc","isCruiseSet","fillRoundedRect","bdr_s","strokeRoundedRect","strokeWidth","arc","translate","rotate","SteeringAngleDeg","drawImage","strokeRect","matmul","matrix","b0","b1","b2","b3","videoContainer","playsinline","muted","playing","config","hlsOptions","enableWorker","disablePtsDtsCorrectionInMp4Remux","onBuffer","onBufferEnd","onPlay","videoUiCanvas","hidden","videoImage","timerSteps","TimeDisplay","textHolder","updateTime","togglePause","increaseSpeed","decreaseSpeed","displayTime","getDisplayTime","newDisplayTime","isPaused","isExpandedCls","isThinCls","isThin","iconBox","iconButton","jumpBack","amount","jumpForward","align","currentTime","desiredPlaySpeedContainer","tinyArrowIcon","playButtonBox","transition","paddingBottom","demoFiles","MediaType","Media","inView","windowHeight","downloadMenu","moreInfoMenu","renderMediaOptions","renderMenus","copySegmentName","downloadSegmentFile","openInCabana","openInUseradmin","navigator","clipboard","writeText","segmentKeyPath","files","RawApi","getRouteFiles","seekTime","routeStartTime","win","onebox","menusOnly","showMapAlways","mediaContainerStyle","mapContainerStyle","timeDisplay","mediaOptionsRoot","mediaOptions","mediaOption","mediaOptionText","alwaysOpen","mediaOptionDisabled","mediaOptionIcon","mediaSource","mediaSourceSelect","DriveView","viewerPadding","viewEndTime","headerText","headerContext","headerInfo","headerTimeline","DeviceSettingsModal","deviceAlias","loadingDeviceAlias","loadingDeviceShare","hasSavedAlias","shareEmail","unpairConfirm","unpaired","onPrimeSettings","handleAliasChange","handleEmailChange","callOnEnter","setDeviceAlias","shareDevice","unpairDevice","closeUnpair","hasShared","trim","grantDeviceReadPermission","statusCode","intv","doPrimeNav","clearInterval","stateDevice","setInterval","loadingUnpair","unpair","isOpen","topButtonGroup","primeManageButton","form","formRow","textField","onKeyPress","wrapper","fabProgress","helperText","modalUnpair","ShopButton","link","shopLink","CommaTwoUpsell","xs","imageContainer","eon","content","hook","DeviceList","showDeviceSettingsModal","deviceSettingsModalDevice","renderDevice","handleOpenedSettingsModal","handleClosedSettingsModal","selectedDevice","editingDevice","stopPropagation","preventDefault","found","onlyHasAppDevice","shared","deviceList","headerHeight","filterDrivingDevice","isSelectedCls","offlineCls","deviceOffline","handleDeviceSelected","deviceInfo","deviceOnline","deviceName","editDeviceIcon","nameField","AppDrawer","toggleDrawerOff","isPermanent","selectedDongleId","PaperProps","drawerContent","sidebarHeader","ExplorerApp","settingDongle","headerRef","pairLoading","pairError","pairDongleId","updateHeaderRef","closePair","checkProps","pairToken","pilotPair","isZoomed","wasZoomed","drawerOpen","curDongle","isLarge","sidebarWidth","containerStyles","drawerStyles","DEMO_LINK","AnonymousLanding","sessionStorage","redirectURL","script","createElement","appendChild","onload","AppleID","auth","clientId","AuthConfig","APPLE_CLIENT_ID","scope","APPLE_SCOPES","redirectURI","APPLE_REDIRECT_URI","usePopup","async","APPLE_REDIRECT_PATH","code","detail","authorization","baseContainer","tagline","GOOGLE_REDIRECT_LINK","logInButton","buttonImage","signIn","GITHUB_REDIRECT_LINK","demoLink","demoLinkText","composeEnhancers","getComposeEnhancers","REACT_APP_DEVTOOLS","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createBrowserHistory","initGoogleAnalytics","gtag","page_title","page_location","page_path","Redux","connectRouter","thunk","routerMiddleware","updateState","App","initialized","pair","setItem","GOOGLE_REDIRECT_PATH","GITHUB_REDIRECT_PATH","AuthApi","refreshAccessToken","GOOGLE_REDIRECT_URI","GItHUB_REDIRECT_URI","setCommaAccessToken","isAuthenticated","redirectLink","authRoutes","Switch","Route","Redirect","Explorer","ananymousRoutes","renderLoading","isLocalhost","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","environment","install","REACT_APP_SERVICEWORKER","URL","checkValidServiceWorker","ready","unregister","reload","ReactDOM","Theme","getElementById","getDefaultStartDate","getDefaultEndDate","binSearch","milis","nanos","searchIndex","indexBuffer","bufferIndex","lastIndex","byteLength","messageBuff","BufferUtils","readMessage","getLogMonoTime","messageSize","incAmount","splice","createIndex","_buffer","Buffer","from","addToIndex","_index","_newBuff","newBuff","findMonoTime","curMillis","MAX_SAFE_INTEGER"],"mappings":"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","file":"static/js/main.61a54003.chunk.js","sourcesContent":["const Event = require('geval/event');\nconst LogReaderWorker = require('./logReader.worker');\n// const LogReaderSharedWorker = require('./logReader.sharedworker');\n\nconst DataEvent = Event();\n\nlet logReader = null;\n\nfunction handleMessage(msg) {\n  DataEvent.broadcast(msg);\n}\n\nfunction relayMessage(msg) {\n  const port = logReader.port || logReader;\n  port.postMessage(msg.data);\n}\n\nfunction getWorker() {\n  if (logReader) {\n    return logReader;\n  }\n  // if (typeof LogReaderSharedWorker === 'function' && typeof SharedWorker === 'function') {\n  // logReader = new LogReaderSharedWorker();\n  if (typeof LogReaderWorker === 'function') {\n    logReader = new LogReaderWorker();\n  } else {\n    throw new Error('Don\\'t');\n  }\n  const port = logReader.port || logReader;\n\n  const channel = new MessageChannel();\n  const logPort = channel.port1;\n  const apiPort = channel.port2;\n\n  logPort.onmessage = relayMessage;\n  port.onmessage = handleMessage;\n\n  return apiPort;\n}\n\nmodule.exports = getWorker;\n\ngetWorker.onData = DataEvent.listen;\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"c88ed9691f5cc495bee3.worker.js\");\n};","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/pin-car.e2cea424.svg\";","module.exports = __webpack_public_path__ + \"static/media/pin-marker.f23cf751.svg\";","module.exports = __webpack_public_path__ + \"static/media/pin-pinned.8e0cdc8d.svg\";","module.exports = __webpack_public_path__ + \"static/media/pin-home.76fbb1ef.svg\";","module.exports = __webpack_public_path__ + \"static/media/pin-work.149766da.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-chffr-wheel.368fbfd6.svg\";","// basic helper functions for controlling playback\n// we shouldn't want to edit the raw state most of the time, helper functions are better\n\nconst initialState = require('./initialState');\n\nconst ACTION_SEEK = 'action_seek';\nconst ACTION_PAUSE = 'action_pause';\nconst ACTION_PLAY = 'action_play';\nconst ACTION_LOOP = 'action_loop';\nconst ACTION_BUFFER_VIDEO = 'action_buffer_video';\nconst ACTION_BUFFER_DATA = 'action_buffer_data';\nconst ACTION_RESET = 'action_reset';\n\n// fetch current playback offset\nexport function currentOffset(state) {\n  let playSpeed = (state.isBufferingData || state.isBufferingVideo) ? 0 : state.desiredPlaySpeed;\n  let offset = state.offset + ((Date.now() - state.startTime) * playSpeed);\n\n  if (state.loop && state.loop.startTime) {\n    // respect the loop\n    const loopOffset = state.loop.startTime - state.start;\n    if (offset > loopOffset + state.loop.duration) {\n      offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n    }\n  }\n\n  return offset;\n}\n\nexport function reducer(_state = initialState, action) {\n  let state = { ..._state };\n  let loopOffset = null;\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n  }\n  switch (action.type) {\n    case ACTION_SEEK:\n      state = {\n        ...state,\n        offset: action.offset,\n        startTime: Date.now(),\n        isBufferingData: true,\n      };\n\n      if (loopOffset !== null) {\n        if (state.offset < loopOffset || state.offset > (loopOffset + state.loop.duration)) {\n          // a seek outside of loop should break out of the loop\n          state.loop = { startTime: null, duration: null };\n          state.loopOffset = null;\n        } else {\n          if (state.offset > (loopOffset + state.loop.duration)) {\n            state.offset = (loopOffset + state.loop.duration) - 1000; // 1 second before end\n          }\n          // intentionally second in case we're in a sub-1-second loop (madness)\n          if (state.offset < loopOffset) {\n            state.offset = loopOffset;\n          }\n        }\n      }\n      break;\n    case ACTION_PAUSE:\n      state = {\n        ...state,\n        offset: currentOffset(state),\n        startTime: Date.now(),\n        desiredPlaySpeed: 0,\n      };\n      break;\n    case ACTION_PLAY:\n      if (action.speed !== state.desiredPlaySpeed) {\n        state = {\n          ...state,\n          offset: currentOffset(state),\n          desiredPlaySpeed: action.speed,\n          startTime: Date.now(),\n        };\n      }\n      break;\n    case ACTION_LOOP:\n      state = {\n        ...state,\n        loop: {\n          startTime: action.startTime,\n          duration: action.duration,\n        }\n      };\n      if (action.duration > 0 && action.startTime > 0) {\n        state.start = Math.min(action.startTime, state.start);\n        state.end = Math.max(action.startTime + action.duration, state.end);\n      }\n      break;\n    case ACTION_BUFFER_VIDEO:\n      state = {\n        ...state,\n        isBufferingVideo: action.buffering,\n        offset: currentOffset(state),\n        startTime: Date.now(),\n      }\n      break;\n    case ACTION_BUFFER_DATA:\n      state = {\n        ...state,\n        isBufferingData: action.buffering,\n        offset: currentOffset(state),\n        startTime: Date.now(),\n      }\n      break;\n    case ACTION_RESET:\n      state = {\n        ...state,\n        desiredPlaySpeed: 1,\n        isBufferingVideo: false,\n        isBufferingData: true,\n        offset: 0,\n        startTime: Date.now(),\n      };\n      break;\n    default:\n      break;\n  }\n\n  let playSpeed = (state.isBufferingData || state.isBufferingVideo) ? 0 : state.desiredPlaySpeed;\n  const offset = state.offset + (Date.now() - state.startTime) * playSpeed;\n  // normalize over loop\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n    // has loop, trap offset within the loop\n    if (offset < loopOffset) {\n      state.startTime = Date.now();\n      state.offset = loopOffset;\n    } else if (offset > loopOffset + state.loop.duration) {\n      state.offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n      state.startTime = Date.now();\n    }\n  }\n\n  state.isBufferingData = Boolean(state.isBufferingData);\n  state.isBufferingVideo = Boolean(state.isBufferingVideo);\n\n  return state;\n}\n\n// seek to a specific offset\nexport function seek(offset) {\n  return {\n    type: ACTION_SEEK,\n    offset\n  };\n}\n\n// pause the playback\nexport function pause() {\n  return {\n    type: ACTION_PAUSE\n  };\n}\n\n// resume / change play speed\nexport function play(speed = 1) {\n  return {\n    type: ACTION_PLAY,\n    speed\n  };\n}\n\nexport function selectLoop(startTime, duration) {\n  return {\n    type: ACTION_LOOP,\n    startTime,\n    duration\n  };\n}\n\n// update video buffering state\nexport function bufferVideo(buffering = true) {\n  return {\n    type: ACTION_BUFFER_VIDEO,\n    buffering\n  };\n}\n\n// update data buffering state\nexport function bufferData(buffering = true) {\n  return {\n    type: ACTION_BUFFER_DATA,\n    buffering\n  };\n}\n\nexport function resetPlayback() {\n  return {\n    type: ACTION_RESET,\n  };\n}\n","import Event from 'geval/event';\n// cache all of the data\n\nlet cachePort = null;\n\nconst ExpireEvent = Event();\nexport const onExpire = ExpireEvent.listen;\n\nfunction handleMessage(msg) {\n  if (!msg || !msg.data) {\n    return;\n  }\n  switch (msg.data.command) {\n    case 'expire':\n      ExpireEvent.broadcast(msg.data.data);\n      break;\n    default:\n      break;\n  }\n}\n\nexport function setCachePort(port) {\n  if (cachePort) {\n    cachePort.onmessage = null;\n  }\n  cachePort = port;\n  cachePort.onmessage = handleMessage;\n}\n\nfunction start(route, segment) {\n  cachePort.postMessage({\n    command: 'start',\n    data: { route, segment }\n  });\n}\n\nfunction touch(route, segment) {\n  cachePort.postMessage({\n    command: 'touch',\n    data: { route, segment }\n  });\n}\n\nexport function getEntry(route, segment) {\n  touch(route, segment);\n  return {\n    start: () => start(route, segment),\n  };\n}\n","const dongleIdRegex = new RegExp('[a-f0-9]{16}');\n\nexport function getDongleID(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (!dongleIdRegex.test(parts[0])) {\n    return null;\n  }\n\n  return parts[0] || null;\n}\n\nexport function getZoom(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts.length >= 3 && parts[0] !== 'auth') {\n    return {\n      start: Number(parts[1]),\n      end: Number(parts[2])\n    };\n  }\n  return {\n    start: null,\n    end: null\n  };\n}\n\nexport function getPrimeNav(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts.length == 2 && parts[0] !== 'auth' && parts[1] === 'prime') {\n    return true;\n  }\n  return false;\n}\n","import initialState from './initialState';\nimport { currentOffset } from './playback';\n\nconst ACTION_UPDATE_SEGMENTS = 'update_segments';\nconst ACTION_LOAD_SEGMENT_METADATA = 'load_segment_metadata';\nconst ACTION_SEGMENT_METADATA = 'segment_metadata';\n\nconst SEGMENT_LENGTH = 1000 * 60;\n\n/*\nsegments look like, but can contain additional data if they want\nfor example, caching url metadata\n{\n  route: 'dongleid|date',\n  segment: 5\n}\n*/\n\nfunction getCurrentSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: segmentIndex,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset + segmentIndex * SEGMENT_LENGTH,\n        duration: thisSegment.duration,\n        events: thisSegment.events,\n        deviceType: thisSegment.deviceType,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n    }\n  }\n  return null;\n}\n\nfunction getNextSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: 0,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset,\n        events: thisSegment.events,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        deviceType: thisSegment.deviceType,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n      // already returned, unreachable code\n      // break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      if (segmentIndex + 1 < thisSegment.segments) {\n        return {\n          url: thisSegment.url,\n          route: thisSegment.route,\n          segment: segmentIndex + 1,\n          routeOffset: thisSegment.offset,\n          startOffset: thisSegment.offset + (segmentIndex + 1) * SEGMENT_LENGTH,\n          duration: thisSegment.duration,\n          events: thisSegment.events,\n          deviceType: thisSegment.deviceType,\n          videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n          hpgps: thisSegment.hpgps,\n          hasVideo: thisSegment.hasVideo,\n          hasDriverCamera: thisSegment.hasDriverCamera,\n          cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n          distanceMiles: thisSegment.distanceMiles,\n        };\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction finishSegment(segment) {\n  let lastEngage = null;\n\n  if (segment.hasVideo) {\n    const vidAvail = segment.videoAvailableBetweenOffsets;\n    let lastVideoRange = vidAvail[vidAvail.length - 1];\n    if (!lastVideoRange) {\n      lastVideoRange = [segment.offset, segment.offset + segment.duration];\n    }\n    segment.videoAvailableBetweenOffsets = [ // eslint-disable-line no-param-reassign\n      ...vidAvail.slice(0, vidAvail.length - 1),\n      [lastVideoRange[0], segment.offset + segment.duration]\n    ];\n  }\n  segment.events = segment.events.sort((a, b) => { // eslint-disable-line no-param-reassign\n    if (a.route_offset_millis === b.route_offset_millis) {\n      return a.route_offset_nanos - b.route_offset_nanos;\n    }\n    return a.route_offset_millis - b.route_offset_millis;\n  });\n  segment.events.forEach((event) => {\n    // NOTE sometimes theres 2 disengages in a row and that is NONSENSE\n    switch (event.type) {\n      case 'engage':\n        lastEngage = event;\n        break;\n      case 'disengage':\n        if (lastEngage) {\n          lastEngage.data = {\n            end_offset_nanos: event.offset_nanos,\n            end_offset_millis: event.offset_millis,\n            end_route_offset_nanos: event.route_offset_nanos,\n            end_route_offset_millis: event.route_offset_millis\n          };\n        }\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nfunction segmentsFromMetadata(segmentsData) {\n  let curSegment = null;\n  let curVideoStartOffset = null;\n  const segments = [];\n  segmentsData.segments.forEach((segment) => {\n    if (!segment.url) {\n      return;\n    }\n    if (!(segment.proc_log === 40 || segment.proc_qlog === 40)) {\n      return;\n    }\n    const segmentHasDriverCamera = (segment.proc_dcamera >= 0);\n    const segmentHasVideo = (segment.proc_camera >= 0);\n    if (segmentHasVideo && curVideoStartOffset === null) {\n      curVideoStartOffset = segment.offset;\n    }\n    /*\n      route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n      offset: 41348000,\n      duration: 214000,\n      segments: 4\n    */\n    if (!curSegment || curSegment.route !== segment.canonical_route_name) {\n      if (curSegment) {\n        finishSegment(curSegment);\n      }\n      let { url } = segment;\n      const parts = url.split('/');\n\n      if (Number.isFinite(Number(parts.pop()))) {\n        // url has a number at the end\n        url = parts.join('/');\n      }\n      curSegment = {\n        offset: segment.offset - (segment.segment * SEGMENT_LENGTH),\n        route: segment.canonical_route_name,\n        startTime: segment.start_time_utc_millis,\n        startCoord: [segment.start_lng, segment.start_lat],\n        duration: 0,\n        segments: 0,\n        url: url.replace('chffrprivate.blob.core.windows.net', 'chffrprivate-vzn.azureedge.net'),\n        events: [],\n        videoAvailableBetweenOffsets: [],\n        hasVideo: segmentHasVideo,\n        deviceType: segment.devicetype,\n        hpgps: segment.hpgps,\n        hasDriverCamera: segmentHasDriverCamera,\n        locStart: '',\n        locEnd: '',\n        distanceMiles: 0.0,\n        cameraStreamSegCount: 0,\n      };\n      segments.push(curSegment);\n    }\n    if (curSegment.startCoord[0] === 0 && curSegment.startCoord[1] === 0) {\n      curSegment.startCoord = [segment.start_lng, segment.start_lat];\n    }\n    if (!segmentHasVideo && curVideoStartOffset !== null) {\n      curSegment.videoAvailableBetweenOffsets.push([curVideoStartOffset, segment.offset]);\n      curVideoStartOffset = null;\n    }\n    curSegment.hasVideo = (curSegment.hasVideo || segmentHasVideo);\n    curSegment.hasDriverCamera = (curSegment.hasDriverCamera || segmentHasDriverCamera);\n    curSegment.hpgps = (curSegment.hpgps || segment.hpgps);\n    curSegment.duration = (segment.offset - curSegment.offset) + segment.duration;\n    curSegment.segments = Math.max(curSegment.segments, Number(segment.canonical_name.split('--').pop()) + 1);\n    curSegment.events = curSegment.events.concat(segment.events);\n    curSegment.distanceMiles += segment.length;\n    curSegment.cameraStreamSegCount += Math.floor(segmentHasVideo);\n    if (!curSegment.endCoord || segment.end_lng !== 0 || segment.end_lat !== 0) {\n      curSegment.endCoord = [segment.end_lng, segment.end_lat];\n    }\n  });\n\n  if (curSegment) {\n    finishSegment(curSegment);\n  }\n\n  return segments;\n}\n\nfunction reducer(_state = initialState, action) {\n  let state = { ..._state };\n  switch (action.type) {\n    case ACTION_LOAD_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: {\n          promise: action.promise,\n          start: action.start,\n          end: action.end,\n          dongleId: state.dongleId\n        }\n      };\n      break;\n    case ACTION_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: action.data,\n        segments: action.segments\n      };\n      break;\n    case ACTION_UPDATE_SEGMENTS:\n      state = {\n        ...state,\n      }\n    default:\n      break;\n  }\n  const currentSegment = getCurrentSegment(state);\n  const nextSegment = getNextSegment(state);\n\n  if (currentSegment) {\n    state.route = currentSegment.route;\n    state.segment = currentSegment.segment;\n  } else if (nextSegment) {\n    state.route = nextSegment.route;\n    state.segment = nextSegment.segment;\n  } else {\n    state.route = false;\n    state.segment = 0;\n  }\n\n  state.currentSegment = currentSegment;\n  state.nextSegment = nextSegment;\n\n  state.range = state.end - state.start;\n\n  return state;\n}\n\nfunction updateSegments() {\n  return {\n    type: ACTION_UPDATE_SEGMENTS\n  };\n}\n\nfunction fetchSegmentMetadata(start, end, promise) {\n  return {\n    type: ACTION_LOAD_SEGMENT_METADATA,\n    start,\n    end,\n    promise\n  };\n}\n\nfunction insertSegmentMetadata(data) {\n  return {\n    type: ACTION_SEGMENT_METADATA,\n    segments: segmentsFromMetadata(data),\n    data\n  };\n}\n\nfunction parseSegmentMetadata(state, _segments) {\n  const routeStartTimes = {};\n  let segments = _segments;\n  segments = segments.map((_segment) => {\n    const segment = _segment;\n    segment.offset = Math.round(segment.start_time_utc_millis) - state.start;\n    if (!routeStartTimes[segment.canonical_route_name]) {\n      const segmentNum = Number(segment.canonical_name.split('--')[2]);\n      segment.segment = segmentNum;\n      routeStartTimes[segment.canonical_route_name] = segment.offset;\n      if (segmentNum > 0) {\n        routeStartTimes[segment.canonical_route_name] -= (SEGMENT_LENGTH * segmentNum);\n      }\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    } else {\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    }\n\n    segment.duration = Math.round(segment.end_time_utc_millis - segment.start_time_utc_millis);\n    segment.events = JSON.parse(segment.events_json) || [];\n    const plannedDisengageEvents = segment.events.filter((event) => event.type === 'alert' && event.data && event.data.should_take_control);\n\n    segment.events.forEach((_event) => {\n      const event = _event;\n      event.timestamp = segment.start_time_utc_millis + event.offset_millis;\n      // segment.start_time_utc_millis + event.offset_millis\n      // segment.start_time_utc_millis - state.start + state.start\n\n      event.canonical_segment_name = segment.canonical_name;\n\n      if (event.data && event.data.is_planned) {\n        let reason;\n\n        const alert = plannedDisengageEvents.reduce((closestAlert, nextAlert) => {\n          const closestAlertDiff = Math.abs(closestAlert.offset_millis - event.offset_millis);\n          if (Math.abs(nextAlert.offset_millis - event.offset_millis) < closestAlertDiff) {\n            return nextAlert;\n          }\n          return closestAlert;\n        }, plannedDisengageEvents[0]);\n        if (alert) {\n          reason = alert.data.alertText2;\n        } else {\n          console.warn('Expected alert corresponding to planned disengagement', event);\n          reason = 'Planned disengagement';\n        }\n\n        event.id = `planned_disengage_${event.time}`;\n      }\n    });\n    return segment;\n  });\n\n  return {\n    start: state.start,\n    dongleId: state.dongleId,\n    end: state.end,\n    segments\n  };\n}\n\nfunction hasSegmentMetadata(state) {\n  if (!state) {\n    return false;\n  }\n  if (state.devices && state.devices.length === 0) {\n    // new users without devices won't have segment metadata\n    return true;\n  }\n  if (!state.segmentData) {\n    console.log('No segment data at all');\n    return false;\n  }\n  if (!state.segmentData.segments) {\n    console.log('Still loading...');\n    return false;\n  }\n  if (state.dongleId !== state.segmentData.dongleId) {\n    console.log('Bad dongle id');\n    return false;\n  }\n  if (state.start < state.segmentData.start) {\n    console.log('Bad start offset');\n    return false;\n  }\n  if (state.end > state.segmentData.end) {\n    console.log('Bad end offset');\n    return false;\n  }\n\n  return true;\n}\n\nfunction hasCameraAtOffset(segment, offset) {\n  return segment.videoAvailableBetweenOffsets.some((int) => offset >= int[0] && offset <= int[1]);\n}\n\nconst API = {\n  // helpers\n  getCurrentSegment,\n  getNextSegment,\n  hasSegmentMetadata,\n  parseSegmentMetadata,\n  hasCameraAtOffset,\n\n  // actions\n  updateSegments,\n  fetchSegmentMetadata,\n  insertSegmentMetadata,\n\n  // constants\n  SEGMENT_LENGTH,\n\n  // reducer\n  reducer\n};\nexport default API;\n","import {\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_STARTUP_DATA,\n  ACTION_UPDATE_DEVICE,\n  ACTION_PRIME_NAV,\n  ACTION_PRIME_SUBSCRIPTION,\n  ACTION_PRIME_PAYMENTMETHOD,\n  ACTION_UPDATE_DEVICE_ONLINE,\n} from '../actions/types';\n\nconst initialState = {};\n\nexport default function reducer(_state = initialState, action) {\n  let state = { ..._state };\n  let deviceIndex = null;\n  switch (action.type) {\n    case ACTION_STARTUP_DATA:\n      let devices = action.devices.map((device) => {\n        return {\n          ...device,\n          fetched_at: parseInt(Date.now() / 1000),\n        };\n      });\n      if (!state.dongleId && devices.length > 0) {\n        state = {\n          ...state,\n          dongleId: devices[0].dongle_id,\n          device: devices[0]\n        };\n      } else {\n        state = {\n          ...state,\n          device: devices.find((device) => device.dongle_id === state.dongleId)\n        };\n        if (!state.device) {\n          state.device = {\n            alias: null,\n            create_time: 1513041169,\n            device_type: 'unknown',\n            dongle_id: '0000000000000000',\n            imei: '000000000000000',\n            is_owner: false,\n            serial: '00000000'\n          };\n        }\n      }\n      state.devices = devices;\n      state.profile = action.profile;\n      break;\n    case ACTION_SELECT_DEVICE:\n      state = {\n        ...state,\n        dongleId: action.dongleId,\n        primeNav: false,\n        subscription: null,\n      };\n      if (state.devices) {\n        state.device = state.devices.find((device) => device.dongle_id === action.dongleId);\n      }\n      if (state.segmentData && state.segmentData.dongleId !== state.dongleId) {\n        state.segmentData = null;\n        state.segments = [];\n      }\n      break;\n    case ACTION_SELECT_TIME_RANGE:\n      state = {\n        ...state,\n        start: action.start,\n        end: action.end,\n        segmentData: null,\n        segments: [],\n      };\n      break;\n    case ACTION_UPDATE_DEVICE:\n      state = {\n        ...state,\n        devices: [...state.devices],\n      };\n      deviceIndex = state.devices.findIndex((d) => d.dongle_id === action.device.dongle_id);\n      if (deviceIndex !== -1) {\n        state.devices[deviceIndex] = action.device;\n      } else {\n        state.devices.push(action.device);\n      }\n      break;\n    case ACTION_UPDATE_DEVICE_ONLINE:\n      state = {\n        ...state,\n        devices: [...state.devices],\n      };\n      deviceIndex = state.devices.findIndex((d) => d.dongle_id === action.dongleId);\n\n      if (deviceIndex !== -1) {\n        state.devices[deviceIndex] = {\n          ...state.devices[deviceIndex],\n          last_athena_ping: action.last_athena_ping,\n          fetched_at: action.fetched_at,\n        };\n      }\n\n      if (state.device.dongle_id === action.dongleId) {\n        state.device = {\n          ...state.device,\n          last_athena_ping: action.last_athena_ping,\n          fetched_at: action.fetched_at,\n        };\n      }\n      break;\n    case ACTION_PRIME_NAV:\n      state = {\n        ...state,\n        primeNav: action.primeNav,\n      };\n      break;\n    case ACTION_PRIME_SUBSCRIPTION:\n      if (action.dongleId != state.dongleId) { // ignore outdated info\n        break;\n      }\n      state = {\n        ...state,\n        subscription: action.subscription,\n      };\n      break;\n    case ACTION_PRIME_PAYMENTMETHOD:\n      state = {\n        ...state,\n        paymentMethod: action.paymentMethod,\n      };\n      break;\n    default:\n      return state;\n  }\n  return state;\n}\n","import globalState from './globalState';\n\nconst reducers = {\n  globalState,\n};\nexport default reducers;\n","import qs from 'query-string';\nimport window from 'global/window';\nimport localforage from 'localforage';\n\nlet isDemoCached;\nexport function isDemoQuery() {\n  return qs.parse(window.location.search).demo === '1';\n}\nexport async function init() {\n  if (isDemoCached !== undefined) return isDemoCached;\n\n  isDemoCached = await localforage.getItem('isDemo') === '1' || isDemoQuery();\n  return isDemoCached;\n}\nexport function isDemo() {\n  return isDemoQuery() || isDemoCached;\n}\n","// init\nexport const ACTION_STARTUP_DATA = 'ACTION_STARTUP_DATA';\n\n// global state management\nexport const ACTION_SELECT_DEVICE = 'ACTION_SELECT_DEVICE';\nexport const ACTION_SELECT_TIME_RANGE = 'ACTION_SELECT_TIME_RANGE';\nexport const ACTION_UPDATE_DEVICE = 'ACTION_UPDATE_DEVICE';\nexport const ACTION_UPDATE_DEVICE_ONLINE = 'ACTION_UPDATE_DEVICE_ONLINE';\nexport const ACTION_PRIME_NAV = 'ACTION_PRIME_NAV';\nexport const ACTION_PRIME_SUBSCRIPTION = 'ACTION_PRIME_SUBSCRIPTION';\nexport const ACTION_PRIME_PAYMENTMETHOD = 'ACTION_PRIME_PAYMENTMETHOD';\n","import { createStore } from 'redux';\nimport reduceReducers from 'reduce-reducers';\n\nimport { reducer as playbackReducer } from './playback';\nimport Segments from './segments';\nimport Reducers from './reducers';\n\nconst store = createStore(reduceReducers(playbackReducer, Segments.reducer, Reducers.globalState));\n\nexport default store;\n","import {\n  ACTION_PRIME_NAV,\n  ACTION_PRIME_PAYMENTMETHOD,\n  ACTION_PRIME_SUBSCRIPTION,\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_UPDATE_DEVICE,\n  ACTION_UPDATE_DEVICE_ONLINE,\n} from './types';\n\nexport function updateDevice(device) {\n  return {\n    type: ACTION_UPDATE_DEVICE,\n    device,\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return {\n    type: ACTION_SELECT_DEVICE,\n    dongleId\n  };\n}\n\nexport function selectTimeRange(start, end) {\n  return {\n    type: ACTION_SELECT_TIME_RANGE,\n    start,\n    end\n  };\n}\n\nexport function primeGetSubscriptionAction(dongleId, subscription) {\n  return {\n    type: ACTION_PRIME_SUBSCRIPTION,\n    dongleId,\n    subscription,\n  };\n}\n\nexport function primeGetPaymentMethodAction(paymentMethod) {\n  return {\n    type: ACTION_PRIME_PAYMENTMETHOD,\n    paymentMethod,\n  };\n}\n\nexport function primeNavAction(nav) {\n  return {\n    type: ACTION_PRIME_NAV,\n    primeNav: nav,\n  };\n}\n\nexport function updateDeviceOnlineAction(dongleId, last_athena_ping, fetched_at) {\n  return {\n    type: ACTION_UPDATE_DEVICE_ONLINE,\n    dongleId,\n    last_athena_ping,\n    fetched_at,\n  };\n}\n","import { devices as Devices, account as Account, billing as Billing } from '@commaai/comma-api';\n\nimport store from './store';\nimport { ACTION_STARTUP_DATA } from './actions/types';\nimport { primeGetPaymentMethodAction, primeGetSubscriptionAction } from './actions';\nimport { getDongleID, getPrimeNav } from '../url';\n\nconst demoProfile = require('../demo/profile.json');\nconst demoDevices = require('../demo/devices.json');\n\nexport default async function init(isDemo) {\n  if (isDemo) {\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile: demoProfile,\n      devices: demoDevices,\n    });\n  } else {\n    console.log('Fetching devices!');\n    let devices = Devices.listDevices();\n    let profile = Account.getProfile();\n    devices = await devices;\n    profile = await profile;\n    console.log('Device list:', devices);\n\n    if (devices.length > 0) {\n      const dongleId = getDongleID(window.location.pathname) || devices[0].dongle_id;\n      const device = devices.find((dev) => dev.dongle_id === dongleId);\n      if (device && (device.is_owner || profile.superuser)) {\n        Billing.getSubscription(dongleId).then((subscription) => {\n          store.dispatch(primeGetSubscriptionAction(dongleId, subscription));\n        }).catch((err) => {\n          if (!err.message || err.message.indexOf('404') !== 0) {\n            console.log(err);\n          }\n        });\n      }\n    }\n\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile,\n      devices,\n      primeNav: getPrimeNav(window.location.pathname),\n    });\n\n    if (profile.prime) {\n      Billing.getPaymentMethod().then((paymentMethod) => {\n        store.dispatch(primeGetPaymentMethodAction(paymentMethod));\n      }).catch((err) => {\n        if (!err.resp || err.resp.status !== 400) {\n          console.log(err.message);\n        }\n      });\n    }\n  }\n}\n","import Auth from '@commaai/my-comma-auth';\nimport { request as Request } from '@commaai/comma-api'; // eslint-disable-line\n\nimport {\n  selectDevice as selectDeviceAction,\n  selectTimeRange as selectTimeRangeAction,\n  updateDevice as updateDeviceAction,\n  primeGetSubscriptionAction,\n  primeGetPaymentMethodAction,\n  primeNavAction,\n  updateDeviceOnlineAction,\n} from './actions';\nimport Segments from './segments';\nimport init from './startup';\nimport * as Playback from './playback';\nimport store from './store';\nimport * as Cache from './cache';\nimport * as Demo from '../demo';\n\n// fire off init method / construct init promises\nexport const initAuthPromise = Auth.init().then((token) => {\n  Request.configure(token);\n});\nlet hasGottenSegmentData = null;\nconst hasGottenSegmentDataPromise = new Promise(((resolve) => {\n  hasGottenSegmentData = function segmentDataHandler() {\n    hasGottenSegmentData = null;\n    resolve();\n  };\n}));\n\nstore.subscribe(() => {\n  const state = store.getState();\n\n  if (hasGottenSegmentData && Segments.hasSegmentMetadata(state)) {\n    hasGottenSegmentData();\n  }\n});\n\nfunction seek(offset) {\n  store.dispatch(Playback.seek(offset));\n}\n\nfunction pause(/* port */) {\n  store.dispatch(Playback.pause());\n}\n\nfunction play(speed) {\n  store.dispatch(Playback.play(speed));\n}\n\nfunction bufferVideo(isBuffering) {\n  store.dispatch(Playback.bufferVideo(isBuffering));\n}\n\nfunction bufferData(isBuffering) {\n  store.dispatch(Playback.bufferData(isBuffering));\n}\n\nasync function hello(data) {\n  await Demo.init();\n  await initAuthPromise;\n  store.dispatch(selectDeviceAction(data.dongleId));\n\n  await Promise.all([\n    init(Demo.isDemo()),\n    hasGottenSegmentDataPromise\n  ]);\n\n  return 'hello';\n}\n\nfunction selectDevice(dongleId) {\n  store.dispatch(selectDeviceAction(dongleId));\n}\n\nfunction updateDevice(device) {\n  store.dispatch(updateDeviceAction(device));\n}\n\nfunction selectTimeRange(data) {\n  const { start, end } = data;\n  store.dispatch(selectTimeRangeAction(start, end));\n}\n\nfunction selectLoop(data) {\n  const { startTime, duration } = data;\n  store.dispatch(Playback.selectLoop(startTime, duration));\n}\n\nfunction cachePort(data, ports) {\n  console.log('Was handed this port!', ports);\n  Cache.setCachePort(ports[0]);\n}\n\nfunction primeGetSubscription(dongleId, subscription) {\n  store.dispatch(primeGetSubscriptionAction(dongleId, subscription));\n}\n\nfunction primeGetPaymentMethod(paymentMethod) {\n  store.dispatch(primeGetPaymentMethodAction(paymentMethod));\n}\n\nfunction primeNav(nav = true) {\n  store.dispatch(primeNavAction(nav));\n}\n\nfunction resetPlayback() {\n  store.dispatch(Playback.resetPlayback());\n}\n\nfunction updateDeviceOnline(dongleId, last_athena_ping, fetched_at) {\n  store.dispatch(updateDeviceOnlineAction(dongleId, last_athena_ping, fetched_at));\n}\n\nfunction stop() {\n  console.log('Stopping worker!');\n  // if (SegmentTimerStore(state).stopTimer) {\n  //   SegmentTimerStore(state).stopTimer();\n  //   SegmentTimerStore(state).stopTimer = null;\n  // }\n}\n\nexport const commands = {\n  close,\n  play,\n  pause,\n  seek,\n  bufferVideo,\n  bufferData,\n  hello,\n  selectDevice,\n  selectTimeRange,\n  selectLoop,\n  updateDevice,\n  cachePort,\n  stop,\n  primeGetSubscription,\n  primeGetPaymentMethod,\n  primeNav,\n  resetPlayback,\n  updateDeviceOnline,\n};\n","import Event from 'geval/event';\nimport CreateStore from 'weakmap-shim/create-store';\n\nimport { drives as Drives } from '@commaai/comma-api'; // eslint-disable-line\n\nimport { currentOffset } from './playback';\nimport Segments from './segments';\nimport * as Cache from './cache';\nimport store from './store';\nimport * as Demo from '../demo';\nimport { commands, initAuthPromise } from './commands';\n\nconst demoSegments = require('../demo/segments.json');\n\nconst BroadcastEvent = Event();\nconst DataLogEvent = Event();\nconst SegmentTimerStore = CreateStore();\n\nlet segmentsRequest = null;\n\nexport function getState() {\n  return store.getState();\n}\n\nfunction scheduleSegmentUpdate(state) {\n  let timeUntilNext = 30000;\n  const offset = currentOffset(state);\n\n  if (SegmentTimerStore(state).stopTimer) {\n    clearTimeout(SegmentTimerStore(state).stopTimer);\n    SegmentTimerStore(state).stopTimer = null;\n  }\n  if (state.nextSegment) {\n    timeUntilNext = state.nextSegment.startOffset - offset;\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.currentSegment) {\n    const time = (state.currentSegment.routeOffset + state.currentSegment.duration) - offset;\n    timeUntilNext = Math.min(time, timeUntilNext);\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.loop && state.loop.startTime) {\n    const curTime = state.start + offset;\n    // curTime will be between start and end because we used currentOffset to get it\n    // currentOffset takes into account loops using modulo over duration\n    const timeUntilLoop = 1 + state.loop.startTime + state.loop.duration - curTime;\n    const loopStartOffset = state.loop.startTime - state.start;\n    const loopStartSegment = Segments.getCurrentSegment(state, loopStartOffset);\n    if (!state.currentSegment\n      || !loopStartSegment\n      || loopStartSegment.startOffset !== state.currentSegment.startOffset) {\n      timeUntilNext = Math.min(timeUntilLoop, timeUntilNext);\n    }\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n\n  if (timeUntilNext > 0) {\n    timeUntilNext = Math.min(30000, Math.max(200, timeUntilNext));\n    console.log('Waiting', timeUntilNext, 'for something to change...');\n    SegmentTimerStore(state).stopTimer = setTimeout(() => {\n      // empty action to churn the butter\n      // store.dispatch(Segments.updateSegments());\n    }, timeUntilNext);\n  } else {\n    console.log('There is not task i think its worth waiting for...', timeUntilNext);\n    // debugger;\n  }\n}\n\nasync function checkSegmentMetadata(state) {\n  if (!state.dongleId) {\n    return;\n  }\n  if (Segments.hasSegmentMetadata(state)) {\n    // already has metadata, don't bother\n    return;\n  }\n  await Demo.init();\n  if (segmentsRequest) {\n    return;\n  }\n  console.log('We need to update the segment metadata...');\n  const { dongleId } = state;\n  const { start } = state;\n  const { end } = state;\n\n  let segmentData = null;\n  if (Demo.isDemo()) {\n    segmentsRequest = Promise.resolve(demoSegments);\n  } else {\n    segmentsRequest = Drives.getSegmentMetadata(start, end, dongleId);\n  }\n  store.dispatch(Segments.fetchSegmentMetadata(start, end));\n\n  try {\n    segmentData = await segmentsRequest;\n  } catch (e) {\n    console.error('Failure fetching segment metadata', e.stack || e);\n    // /@TODO retry this call!\n    return;\n  } finally {\n    segmentsRequest = null;\n  }\n  if (state.start !== start || state.end !== end || state.dongleId !== dongleId) {\n    checkSegmentMetadata(getState());\n    return;\n  }\n\n  segmentData = Segments.parseSegmentMetadata(state, segmentData);\n  // broken\n  store.dispatch(Segments.insertSegmentMetadata(segmentData));\n  // ensureSegmentData(getState());\n}\n\nlet ensureSegmentDataTimer = null;\nasync function ensureSegmentData(state) {\n  if (ensureSegmentDataTimer) {\n    clearTimeout(ensureSegmentDataTimer);\n    ensureSegmentDataTimer = null;\n  }\n\n  let entry = null;\n  if (Date.now() - state.startTime < 1000) {\n    ensureSegmentDataTimer = setTimeout(() => {\n      ensureSegmentDataTimer = null;\n      return ensureSegmentData(getState());\n    }, 1100 - (Date.now() - state.startTime));\n    return;\n  }\n  if (state.route) {\n    entry = Cache.getEntry(state.route, state.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n    if (state.segment !== 0) {\n      entry = Cache.getEntry(state.route, 0, DataLogEvent.broadcast);\n      if (entry) {\n        entry.start();\n      }\n    }\n  }\n  const { nextSegment } = state;\n  if (nextSegment) {\n    entry = Cache.getEntry(nextSegment.route, nextSegment.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n  }\n}\n\nexport function init() {\n  // set up initial schedules\n  initAuthPromise.then(() => {\n    scheduleSegmentUpdate(getState());\n    checkSegmentMetadata(getState());\n  });\n\n  store.subscribe(() => {\n    const state = getState();\n    checkSegmentMetadata(state);\n    scheduleSegmentUpdate(state);\n    ensureSegmentData(state);\n\n    BroadcastEvent.broadcast({\n      command: 'state',\n      data: state\n    });\n  });\n}\n\nexport async function handleMessage(port, msg) {\n  if (msg.data.command) {\n    if (!commands[msg.data.command]) {\n      console.error('Invalid command!', msg.data);\n      return;\n    }\n    let result = commands[msg.data.command](port, msg.data.data, msg.ports);\n    if (result && msg.data.requestId) {\n      result = await result;\n      if (result) {\n        port.postMessage({\n          requestId: msg.data.requestId,\n          command: 'return-value',\n          data: result\n        });\n      }\n    }\n  }\n}\n","/* eslint-disable class-methods-use-this */\nimport window from 'global/window';\nimport Event from 'geval/event';\nimport * as capnp from 'capnp-ts';\nimport { Event as CapnpEvent, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\nimport toJSON from '@commaai/capnp-json';\n\nimport { storage as AuthStorage } from '@commaai/my-comma-auth';\nimport * as Playback from './playback';\nimport * as LogIndex from './logIndex';\nimport * as Cache from './cache';\nimport { getDongleID, getPrimeNav, getZoom } from '../url';\nimport { getState, init as initTimeline } from './timeline';\nimport { commands } from './commands';\nimport store from './store';\n\nconst LogReaderWorker = require('./logReader');\n\nconst StateEvent = Event();\nconst IndexEvent = Event();\nconst InitEvent = Event();\nconst InitPromise = new Promise(((resolve) => {\n  InitEvent.listen(resolve);\n}));\n\nconst startPath = window.location ? window.location.pathname : '';\n\n// helper functions\n\nexport class TimelineInterface {\n  constructor(options) {\n    this.options = options || {};\n    this.buffers = {};\n    this.requestId = 1;\n    this.openRequests = {};\n    this.initPromise = InitPromise;\n\n    this.expire = this.expire.bind(this);\n  }\n\n  onStateChange = StateEvent.listen\n\n  onIndexed = IndexEvent.listen\n\n  async init(isDemo) {\n    if (!this.hasInit) {\n      this.hasInit = true;\n      this.isDemo = isDemo;\n\n      initTimeline();\n\n      this.readyPromise = commands.hello({\n        dongleId: getDongleID(startPath),\n        zoom: getZoom(startPath),\n        primeNav: getPrimeNav(startPath),\n      });\n\n      const token = await AuthStorage.getCommaAccessToken();\n      if (!(token || isDemo)) {\n        return new Promise((resolve, reject) => reject(Error('No auth')));\n      }\n\n      // if (false && typeof TimelineSharedWorker === 'function') {\n      //   worker = new TimelineSharedWorker();\n      //   t.isShared = true;\n      //   t.logReader = new LogReaderWorker();\n      if (typeof LogReaderWorker === 'function') {\n        this.logReader = new LogReaderWorker();\n      }\n\n      // broadcast message\n      // handle message\n      // cache port\n      commands.cachePort(null, [this.logReader.port || this.logReader]);\n\n      LogReaderWorker.onData((msg) => {\n        this.handleData(msg);\n      });\n\n      Cache.onExpire(this.expire);\n      this.setState(getState());\n      store.subscribe(() => {\n        const state = store.getState();\n        this.setState(state);\n      });\n\n      InitEvent.broadcast(token);\n    }\n    return this.readyPromise;\n  }\n\n  async stop() {\n    if (!this.hasInit) {\n      return;\n    }\n    await commands.stop();\n    this.hasInit = false;\n    if (this.logReader) {\n      this.logReader = null;\n    }\n  }\n\n  async seek(offset) {\n    return commands.seek(Math.round(offset));\n  }\n\n  async play(speed = 1) {\n    return commands.play(speed);\n  }\n\n  async pause() {\n    return commands.pause();\n  }\n\n  async bufferVideo(isBuffering = true) {\n    return commands.bufferVideo(isBuffering);\n  }\n\n  async bufferData(isBuffering = true) {\n    return commands.bufferData(isBuffering);\n  }\n\n  async selectTimeRange(start, end) {\n    return commands.selectTimeRange({ start, end });\n  }\n\n  async selectLoop(startTime, duration) {\n    return commands.selectLoop({ startTime, duration });\n  }\n\n  async selectDevice(dongleId) {\n    await this.readyPromise;\n    if (this.state.dongleId === dongleId) {\n      return true;\n    }\n    return commands.selectDevice(dongleId);\n  }\n\n  async updateDevice(device) {\n    return commands.updateDevice(device,);\n  }\n\n  async primeGetSubscription(dongleId, subscription) {\n    return commands.primeGetSubscription(dongleId, subscription);\n  }\n\n  async primeGetPaymentMethod(paymentMethod) {\n    return commands.primeGetPaymentMethod(paymentMethod);\n  }\n\n  async primeNav(nav) {\n    return commands.primeNav(nav);\n  }\n\n  async resetPlayback() {\n    return commands.resetPlayback();\n  }\n\n  async updateDeviceOnline(dongleId, last_athena_ping, fetched_at) {\n    return commands.updateDeviceOnline(dongleId, last_athena_ping, fetched_at);\n  }\n\n  setState(state) {\n    this.state = state;\n    StateEvent.broadcast(state);\n    if (this.logReader) {\n      const port = this.logReader.port || this.logReader;\n      if (this.state.route) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.route,\n            segment: this.state.segment,\n          }\n        });\n      }\n      if (this.state.nextSegment) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.nextSegment.route,\n            segment: this.state.nextSegment.segment,\n          }\n        });\n      }\n    }\n  }\n\n  expire(data) {\n    console.log('Expiring cache entry', data);\n    if (this.buffers[data.route] && this.buffers[data.route][data.segment]) {\n      delete this.buffers[data.route][data.segment];\n    }\n  }\n\n  async handleData(msg) {\n    if (!this.buffers[msg.data.route]) {\n      this.buffers[msg.data.route] = {};\n    }\n    if (!this.buffers[msg.data.route][msg.data.segment]) {\n      this.buffers[msg.data.route][msg.data.segment] = LogIndex.createIndex(msg.data.data);\n    } else {\n      LogIndex.addToIndex(this.buffers[msg.data.route][msg.data.segment], msg.data.data);\n    }\n    IndexEvent.broadcast(msg.data.route);\n  }\n\n  getStartMonoTime(route, segment = 0) {\n    if (!this.buffers[route]\n      || !this.buffers[route][segment]\n      || !this.buffers[route][segment].index) {\n      return 0;\n    }\n    return this.buffers[route][segment].index[0][0];\n  }\n\n  getIndex() {\n    if (!this.state || !this.state.route) {\n      return [];\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return [];\n    }\n\n    return this.buffers[this.state.route][this.state.segment].index;\n  }\n\n  currentLogMonoTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    const logIndex = this.buffers[this.state.route][this.state.segment];\n    if (!segment) {\n      return null;\n    }\n    offset -= segment.offset;\n    const startTime = logIndex.index[0][0];\n\n    return offset + startTime;\n  }\n\n  lastEvents(_eventCount = 10) {\n    const logMonoTime = this.currentLogMonoTime();\n    if (!logMonoTime) {\n      return [];\n    }\n    const logIndex = this.getLogIndex();\n\n    const curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n    const eventCount = Math.min(_eventCount, curIndex);\n\n    return [...Array(eventCount)].map((u, i) => this.getEvent(curIndex - i, logIndex));\n  }\n\n  getLogIndex() {\n    return this.buffers[this.state.route]\n      ? this.buffers[this.state.route][this.state.segment]\n      : null;\n  }\n\n  getNextLogIndex() {\n    if (!this.state.nextSegment) {\n      return null;\n    }\n    return this.buffers[this.state.nextSegment.route]\n      ? this.buffers[this.state.nextSegment.route][this.state.nextSegment.segment]\n      : null;\n  }\n\n  getEvent(index, _logIndex) {\n    // millis, nanos, offset, len, buffer\n    const logIndex = _logIndex || this.buffers[this.state.route][this.state.segment];\n    if (index < 0 || index >= logIndex.index.length) {\n      // console.log('Invalid event index', index);\n      return null;\n    }\n    const entry = logIndex.index[index];\n    const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentOffset() {\n    if (this.state) {\n      return Playback.currentOffset(this.state);\n    }\n    return 0;\n  }\n\n  firstFrameTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][0]) {\n      return null;\n    }\n\n    const logIndex = this.buffers[this.state.route][0];\n    for(let i = 0; i < logIndex.index.length; i++) {\n      const entry = logIndex.index[i];\n      if (entry[5] === EventWhich.ROAD_CAMERA_STATE) {\n        const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n        const msg = new capnp.Message(buffer, false);\n        const event = toJSON(msg.getRoot(CapnpEvent));\n        return event.RoadCameraState.TimestampEof / 1e9;\n      }\n    }\n    return null;\n  }\n\n  currentInitData() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    // check if any buffered logs have the initdata packet\n    const curSegLog = this.buffers[this.state.route][this.state.segment];\n    const entry = curSegLog.index[0];\n    if (entry[5] !== EventWhich.INIT_DATA) {\n      return null;\n    }\n\n    const buffer = curSegLog.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentModel() {\n    return this.getEventByType(EventWhich.MODEL, 1000);\n  }\n\n  currentModelV2() {\n    return this.getEventByType(EventWhich.MODEL_V2, 1000);\n  }\n\n  currentRadarState() {\n    return this.getEventByType(EventWhich.RADAR_STATE, 1000);\n  }\n\n  currentMPC() {\n    return this.getEventByType(EventWhich.LIVE_MPC, 1000);\n  }\n\n  currentCarState() {\n    return this.getEventByType(EventWhich.CAR_STATE, 1000);\n  }\n\n  currentControlsState() {\n    return this.getEventByType(EventWhich.CONTROLS_STATE);\n  }\n\n  currentThumbnail() {\n    return this.getEventByType(EventWhich.THUMBNAIL, 6000);\n  }\n\n  currentLiveCalibration() {\n    return this.getEventByType(EventWhich.LIVE_CALIBRATION, 1000);\n  }\n\n  getEventByType(which, maxTimeDiff = -1) {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    const monoTime = this.currentLogMonoTime();\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    for (let curSegNum = this.state.segment; curSegNum >= 0; --curSegNum) {\n      const logIndex = this.buffers[this.state.route][curSegNum];\n      if (!logIndex) {\n        return null;\n      }\n      offset -= segment.offset;\n      const startTime = logIndex.index[0][0];\n      const logMonoTime = offset + startTime;\n      let curIndex = logIndex.index.length - 1;\n      if (curSegNum === this.state.segment) {\n        curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n      }\n\n      for (curIndex; curIndex >= 0; --curIndex) {\n        const entry = logIndex.index[curIndex];\n        if (maxTimeDiff !== -1 && monoTime - entry[0] > maxTimeDiff) {\n          return null;\n        }\n        if (entry[5] === which) {\n          const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n          const msg = new capnp.Message(buffer, false);\n          const event = msg.getRoot(CapnpEvent);\n          return toJSON(event);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  getCalibration() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    const indexes = this.buffers[this.state.route];\n\n    if (!indexes) {\n      return null;\n    }\n\n    for (let i = 0, keys = Object.keys(indexes), len = keys.length; i < len; ++i) {\n      const index = indexes[keys[i]];\n      if (index.calibrations && index.calibrations.length) {\n        return index.calibrations[index.calibrations.length - 1];\n      }\n    }\n    return null;\n  }\n}\n// create instance and expose it\nconst timeline = new TimelineInterface();\nexport default timeline;\n","const Colors = {\n  transparent: 'transparent',\n  white: '#fff',\n  white10: 'rgba(255, 255, 255, 0.1)',\n  white12: 'rgba(255, 255, 255, 0.12)',\n  white20: 'rgba(255, 255, 255, 0.2)',\n  white30: 'rgba(255, 255, 255, 0.3)',\n  white40: 'rgba(255, 255, 255, 0.4)',\n  white50: 'rgba(255, 255, 255, 0.5)',\n  white60: 'rgba(255, 255, 255, 0.6)',\n  white70: 'rgba(255, 255, 255, 0.7)',\n  white80: 'rgba(255, 255, 255, 0.8)',\n  white90: 'rgba(255, 255, 255, 0.9)',\n  black: '#030404',\n  blue50: '#258FDA',\n  blue100: '#2284c9',\n  blue200: '#1f79b8',\n  blue300: '#1c6ea8',\n  blue400: '#1a6397',\n  blue500: '#175886',\n  blue600: '#144d75',\n  blue700: '#114265',\n  blue800: '#0e3754',\n  blue900: '#0b2c43',\n  blue950: '#061622',\n  blue999: '#030b11',\n  lightBlue50: '#eef6fc',\n  lightBlue100: '#ddeef9',\n  lightBlue200: '#cde5f6',\n  lightBlue300: '#bcddf4',\n  lightBlue400: '#abd4f1',\n  lightBlue500: '#9acbee',\n  lightBlue600: '#8ac3eb',\n  lightBlue700: '#79bae8',\n  lightBlue800: '#68b1e5',\n  lightBlue900: '#57a9e3',\n  desatBlue800: '#657f92',\n  red50: '#da2535',\n  red100: '#c92231',\n  red200: '#b81f2d',\n  red300: '#971a25',\n  red400: '#861721',\n  red500: '#75141d',\n  red600: '#651118',\n  red700: '#540e14',\n  red800: '#430b10',\n  red900: '#32090c',\n  lightRed50: '#fceeef',\n  lightRed100: '#f9dde0',\n  lightRed200: '#f6cdd0',\n  lightRed300: '#f4bcc1',\n  lightRed400: '#f1abb1',\n  lightRed500: '#ee9aa2',\n  lightRed600: '#eb8a92',\n  lightRed700: '#e87983',\n  lightRed800: '#e56873',\n  lightRed900: '#e35764',\n  lightRed950: '#e04754',\n  lightRed999: '#dd3645',\n  green50: '#22c967',\n  green100: '#20b85f',\n  green200: '#1da756',\n  green300: '#1a974e',\n  green400: '#178645',\n  green500: '#14753c',\n  green600: '#116534',\n  green700: '#0e542b',\n  green800: '#0c4323',\n  green900: '#09321a',\n  lightGreen50: '#eefcf4',\n  lightGreen100: '#def9e9',\n  lightGreen200: '#cdf6de',\n  lightGreen300: '#bcf4d3',\n  lightGreen400: '#abf1c8',\n  lightGreen500: '#9beebd',\n  lightGreen600: '#8aebb2',\n  lightGreen700: '#79e8a7',\n  lightGreen800: '#68e59c',\n  lightGreen900: '#25da70',\n  orange50: '#da6f25',\n  orange100: '#c96722',\n  orange200: '#b85e1f',\n  orange300: '#a7551c',\n  orange400: '#964d19',\n  orange500: '#864417',\n  orange600: '#753c14',\n  orange700: '#643311',\n  orange800: '#532b0e',\n  orange900: '#42220b',\n  lightOrange50: '#fcf4ee',\n  lightOrange100: '#f9e8dd',\n  lightOrange200: '#f6ddcc',\n  lightOrange200: '#f4d2bb',\n  lightOrange300: '#f1c7aa',\n  lightOrange400: '#eebc9a',\n  lightOrange500: '#ebb189',\n  lightOrange600: '#e8a678',\n  lightOrange700: '#e59b67',\n  lightOrange800: '#e08546',\n  lightOrange900: '#dd7a35',\n  yellow50: '#f1ebaa',\n  yellow100: '#eee79a',\n  yellow200: '#ebe389',\n  yellow300: '#e8df78',\n  yellow400: '#e5db67',\n  yellow500: '#e3d756',\n  yellow600: '#e0d346',\n  yellow700: '#ddcf35',\n  yellow800: '#daca25',\n  yellow900: '#c9bb22',\n  grey50: '#6e7d84',\n  grey100: '#65737a',\n  grey200: '#5c696f',\n  grey300: '#535f64',\n  grey400: '#4b5559',\n  grey500: '#424a4f',\n  grey600: '#394044',\n  grey700: '#303639',\n  grey800: '#272c2f',\n  grey900: '#1e2224',\n  grey950: '#151819',\n  grey999: '#0c0e0f',\n  lightGrey50: '#f8f9f9',\n  lightGrey100: '#eeeff0',\n  lightGrey200: '#e3e6e8',\n  lightGrey300: '#d8dcdf',\n  lightGrey400: '#cdd3d6',\n  lightGrey500: '#c3c9cd',\n  lightGrey600: '#b8c0c4',\n  lightGrey700: '#adb6bb',\n  lightGrey800: '#a3adb2',\n  lightGrey900: '#98a3a9',\n  lightGrey950: '#8d9aa1',\n  lightGrey999: '#77878f',\n};\n\nexport default Colors;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Modal from '@material-ui/core/Modal';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\n\nimport Timelineworker from '../../timeline';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  root: {},\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    margin: '0 auto',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    outline: 'none',\n  },\n  buttonGroup: {\n    marginTop: 20,\n    textAlign: 'right'\n  },\n  headerDropdown: {\n    fontWeight: 500,\n    marginRight: 12,\n    width: 310,\n    maxWidth: '90%',\n    textAlign: 'center',\n  },\n  datePickerContainer: {\n    display: 'flex',\n    marginBottom: 20,\n    '& aside': { width: 100 },\n  },\n  cancelButton: {\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  saveButton: {\n    backgroundColor: Colors.white,\n    color: Colors.grey800,\n    '&:hover': {\n      backgroundColor: Colors.white70,\n    },\n  },\n});\n\nconst LOOKBACK_WINDOW_MILLIS = 365 * 24 * 3600 * 1000; // 30 days\n\nclass TimeSelect extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.changeStart = this.changeStart.bind(this);\n    this.changeEnd = this.changeEnd.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n\n    this.state = {\n      showPicker: false\n    };\n  }\n\n  handleSelectChange(e) {\n    const selection = e.target.value;\n    const d = new Date();\n    d.setHours(d.getHours() + 1, 0, 0, 0);\n\n    switch (selection) {\n      case '24-hours':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24), d.getTime());\n        break;\n      case '1-week':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 7), d.getTime());\n        break;\n      case '2-weeks':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 14), d.getTime());\n        break;\n      case 'custom':\n        this.setState({\n          showPicker: true,\n          start: this.props.start,\n          end: this.props.end\n        });\n        break;\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showPicker: false\n    });\n  }\n\n  changeStart(event) {\n    this.setState({ start: event.target.valueAsNumber });\n  }\n\n  changeEnd(event) {\n    this.setState({ end: event.target.valueAsNumber });\n  }\n\n  handleSave() {\n    Timelineworker.selectTimeRange(this.state.start, this.state.end);\n    this.setState({\n      showPicker: false,\n      start: null,\n      end: null\n    });\n  }\n\n  selectedOption() {\n    const timeRange = this.props.end - this.props.start;\n\n    if (Math.abs(this.props.end - Date.now()) < 1000 * 60 * 60) {\n      // ends right around now\n      if (timeRange === 1000 * 60 * 60 * 24 * 14) {\n        return '2-weeks';\n      } if (timeRange === 1000 * 60 * 60 * 24 * 7) {\n        return '1-week';\n      } if (timeRange === 1000 * 60 * 60 * 24) {\n        return '24-hours';\n      }\n    }\n\n    return 'custom';\n  }\n\n  lastWeekText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const weekAgo = Date.now() - (1000 * 60 * 60 * 24 * 7);\n    return `Last Week${\n      fecha.format(new Date(weekAgo), ' (MMM Do - ')\n    }${fecha.format(new Date(), 'MMM Do)')}`;\n  }\n\n  last2WeeksText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const twoWeeksAgo = Date.now() - (1000 * 60 * 60 * 24 * 14);\n    return `2 Weeks${\n      fecha.format(new Date(twoWeeksAgo), ' (M/D - ')\n    }${fecha.format(new Date(), 'M/D)')}`;\n  }\n\n  last24HoursText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n    return 'Last 24 Hours';\n  }\n\n  render() {\n    const { classes } = this.props;\n    const minDate = new Date(Date.now() - LOOKBACK_WINDOW_MILLIS).toISOString().substr(0, 10);\n    const maxDate = new Date().toISOString().substr(0, 10);\n    const startDate = new Date(this.state.start || this.props.start || 0).toISOString().substr(0, 10);\n    const endDate = new Date(this.state.end || this.props.end || 0).toISOString().substr(0, 10);\n\n    return (\n      <>\n        <FormControl>\n          <Select\n            name=\"timerange\"\n            value={this.selectedOption()}\n            onChange={this.handleSelectChange}\n            className={classes.headerDropdown}\n          >\n            <MenuItem value=\"custom\">Custom</MenuItem>\n            <MenuItem value=\"24-hours\">{ this.last24HoursText() }</MenuItem>\n            <MenuItem value=\"1-week\">{ this.lastWeekText() }</MenuItem>\n            <MenuItem value=\"2-weeks\">{ this.last2WeeksText() }</MenuItem>\n          </Select>\n        </FormControl>\n        <Modal aria-labelledby=\"simple-modal-title\" aria-describedby=\"simple-modal-description\"\n          open={this.state.showPicker} onClose={this.handleClose}>\n          <Paper className={classes.modal}>\n            <div className={ classes.datePickerContainer }>\n              <Typography variant=\"body2\">Start date:</Typography>\n              <input label=\"Start date\" type=\"date\" min={ minDate } max={ maxDate } onChange={this.changeStart}\n                value={ startDate } />\n            </div>\n            <div className={ classes.datePickerContainer }>\n              <Typography variant=\"body2\">End date:</Typography>\n              <input label=\"End date\" type=\"date\" min={ minDate } max={ maxDate } onChange={this.changeEnd}\n                value={ endDate } />\n            </div>\n            <Divider />\n            <div className={classes.buttonGroup}>\n              <Button variant=\"contained\" className={ classes.cancelButton } onClick={this.handleClose}>\n                Cancel\n              </Button>\n              &nbsp;\n              <Button variant=\"contained\" className={ classes.saveButton } onClick={this.handleSave}>\n                Save\n              </Button>\n            </div>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  end: 'workerState.end',\n  start: 'workerState.start'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeSelect));\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport const auth_apple = require('./auth_apple.png');\nexport const auth_github = require('./auth_github.png');\nexport const auth_google = require('./auth_google.png');\n\nexport const pin_car = require('./pin-car.svg');\nexport const pin_marker = require('./pin-marker.svg');\nexport const pin_pinned = require('./pin-pinned.svg');\nexport const pin_home = require('./pin-home.svg');\nexport const pin_work = require('./pin-work.svg');\n\nexport function AccountIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"translate(-198.000000, -189.000000)\">\n        <path d=\"M210,189 C203.381053,189 198,194.381053 198,201 C198,207.618947 203.381053,213 210,213 C216.618947,213 222,207.618947 222,201 C222,194.381053 216.618947,189 210,189 Z M216.724916,207.352941 C216.374763,206.716762 215.824522,206.182371 215.099204,205.902453 L212.623121,204.808224 C211.972836,204.553753 211.522639,203.917573 211.472617,203.205053 L211.422595,202.747004 C212.573099,201.856353 213.348438,200.125945 213.348438,198.293749 C213.348438,195.647243 211.697716,193.815047 209.671829,193.815047 C207.645942,193.815047 205.99522,195.647243 205.99522,198.293749 C205.99522,200.125945 206.770559,201.830905 207.921063,202.747004 L207.871041,203.205053 C207.821019,203.917573 207.370822,204.528305 206.720537,204.808224 L204.244453,205.902453 C203.544147,206.182371 202.968895,206.716762 202.618742,207.352941 C201.068063,205.622534 200.117647,203.332288 200.117647,200.813019 C200.117647,195.469113 204.394519,191.117647 209.646818,191.117647 C214.899117,191.117647 219.175989,195.469113 219.175989,200.813019 C219.201,203.332288 218.250584,205.622534 216.724916,207.352941 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nexport function HistoryBackIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n      <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n    </SvgIcon>\n  );\n}\nexport function HistoryForwardIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"matrix(-1, 0, 0, 1, 24, 0)\">\n        <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n        <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\nexport function CommaIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"scale(0.35, 0.35)\">\n        <path d=\"M2.3325273,44 C2.3325273,42.9819019 2.25294268,42.1290181 2.37000751,41.3070321 C2.41990001,40.9564305 2.82901847,40.5810595 3.16268975,40.3693706 C4.78942848,39.3369727 6.55659633,38.5126886 8.07113779,37.32861 C12.9769087,33.4931864 15.8847893,28.4440632 16.0437152,21.8852845 C16.0887401,20.0229846 15.4041177,19.5577289 13.8399272,20.2831908 C9.32477801,22.3776079 4.46938637,21.1496084 1.87814052,17.2574961 C-0.947721751,13.012484 -0.549798677,7.36046894 2.83607643,3.65221184 C7.16090397,-1.08410221 14.2770341,-1.22582393 19.1842653,3.29752453 C22.1237851,6.00709044 23.5205316,9.50570155 23.8688055,13.4851451 C25.0365333,26.8169447 18.349722,37.8056121 6.17936039,42.6328324 C4.97488253,43.1103451 3.73973905,43.5025696 2.3325273,44\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nfunction chevronPath(rotation = 270) {\n  return (\n    <path transform={`rotate(${rotation}, 12.3, 12)`}\n      d=\"M16.8625817,0.35528597 C16.3546389,-0.125475313 15.550396,-0.125475313 15.0847818,0.398991541 L5.3492107,11.1068565 C4.88359643,11.6313233 4.88359643,12.4180236 5.3492107,12.8987849 L15.0847818,23.6066499 C15.3387532,23.8688833 15.6773817,24 16.0160103,24 C16.3123103,24 16.6509389,23.8688833 16.9049103,23.6503554 C17.4128531,23.1695941 17.4551817,22.3391883 16.9472388,21.8147214 L7.97358203,12.0246735 L16.9049103,2.19091996 C17.3705245,1.66645311 17.3705245,0.836047253 16.8625817,0.35528597 Z\"/>\n  );\n}\n\nexport function ChevronIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(270) }\n    </SvgIcon>\n  );\n}\nexport const DownArrow = ChevronIcon;\n\nexport function UpArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(90) }\n    </SvgIcon>\n  );\n}\n\nexport function RightArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(180) }\n    </SvgIcon>\n  );\n}\n","import { Component } from 'react';\n\nclass ResizeHandler extends Component {\n  constructor(props) {\n    super(props);\n\n    this.resizeTimeout = null;\n    this.handleResize = this.handleResize.bind(this);\n  }\n\n  componentWillMount() {\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n    }\n  }\n\n  handleResize() {\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n    }\n    this.resizeTimeout = setTimeout(() => {\n      this.props.onResize(window.innerWidth, window.innerHeight);\n      this.resizeTimeout = null;\n    }, 150);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default ResizeHandler;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Obstruction from 'obstruction';\nimport localforage from 'localforage';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { Divider, Typography, Menu, MenuItem, ListItem, IconButton, Icon, AppBar } from '@material-ui/core';\n\nimport MyCommaAuth from '@commaai/my-comma-auth';\n\nimport TimeFilter from './TimeFilter';\nimport { AccountIcon } from '../../icons';\nimport Colors from '../../colors';\nimport ResizeHandler from '../ResizeHandler';\n\nconst styles = (theme) => ({\n  header: {\n    backgroundColor: '#1D2225',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 7.5,\n    flexWrap: 'wrap',\n  },\n  titleContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'nowrap',\n  },\n  hamburger: {\n    marginRight: 10,\n  },\n  logo: {\n    alignItems: 'center',\n    display: 'flex',\n    maxWidth: 200,\n    textDecoration: 'none',\n  },\n  logoImgLink: {\n    lineHeight: 0,\n  },\n  logoImg: {\n    height: '34px',\n    margin: '0px 28px',\n    width: 'auto',\n  },\n  logoText: {\n    fontSize: 20,\n    fontWeight: 800,\n  },\n  accountIcon: {\n    color: Colors.white30,\n    height: 34,\n    width: 34,\n  },\n  accountListEmail: {\n    fontWeight: 'bold',\n  },\n  accountListItem: {\n    color: Colors.white,\n  },\n  accountMenuItem: {\n    padding: '12px 16px',\n  },\n});\n\nclass AppHeader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickedAccount = this.handleClickedAccount.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogOut = this.handleLogOut.bind(this);\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n    this.onResize = this.onResize.bind(this);\n\n    this.state = {\n      anchorEl: null,\n      windowWidth: window.innerWidth,\n    };\n  }\n\n  toggleDrawer() {\n    this.props.handleDrawerStateChanged(!this.props.drawerIsOpen);\n  }\n\n  handleClickedAccount(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  handleClose() {\n    this.setState({ anchorEl: null });\n  }\n\n  handleLogOut() {\n    this.handleClose();\n    localforage.removeItem('isDemo');\n    MyCommaAuth.logOut();\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  render() {\n    const { profile, classes, annotating, showDrawerButton, primeNav } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    let reorderWideStyle = {};\n    if (this.state.windowWidth < 640) {\n      reorderWideStyle = {\n        order: 4,\n        width: '100%',\n        display: 'flex',\n        justifyContent: 'center',\n      };\n    }\n\n    if (!profile) {\n      return [];\n    }\n\n    return (\n      <>\n        <ResizeHandler onResize={ this.onResize } />\n        <AppBar position=\"sticky\" elevation={ 1 }>\n          <div ref={ this.props.forwardRef } className={ classes.header }>\n            <div className={classes.titleContainer}>\n              { showDrawerButton ?\n                <IconButton aria-label=\"menu\" className={classes.hamburger} onClick={this.toggleDrawer}>\n                  <Icon>menu</Icon>\n                </IconButton>\n              :\n                <Link to=\"/\" className={ classes.logoImgLink }>\n                  <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n                </Link>\n              }\n              <Link to=\"/\" className={classes.logo}>\n                <Typography className={classes.logoText}>\n                  explorer\n                </Typography>\n              </Link>\n            </div>\n            <div className={ classes.headerWideItem } style={ reorderWideStyle }>\n              { !primeNav && !annotating && <TimeFilter /> }\n            </div>\n            <IconButton aria-owns={open ? 'menu-appbar' : null} aria-haspopup=\"true\" onClick={this.handleClickedAccount}>\n              <AccountIcon className={classes.accountIcon} />\n            </IconButton>\n          </div>\n        </AppBar>\n        <Menu id=\"menu-appbar\" open={open} onClose={this.handleClose} anchorEl={anchorEl}\n          anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n          transformOrigin={{ vertical: 'top', horizontal: 'right' }}>\n          <ListItem className={ `${classes.accountListItem} ${classes.accountListEmail}` }>{ profile.email }</ListItem>\n          <ListItem className={ classes.accountListItem }>{ profile.points } points</ListItem>\n          <Divider />\n          <MenuItem className={ classes.accountMenuItem } component=\"a\" href=\"/useradmin/\" target=\"_blank\">\n            Manage Account\n          </MenuItem>\n          <MenuItem className={ classes.accountMenuItem } onClick={this.handleLogOut}>Log out</MenuItem>\n        </Menu>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  start: 'workerState.start',\n  end: 'workerState.end',\n  profile: 'workerState.profile',\n  primeNav: 'workerState.primeNav',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AppHeader));\n","import { push } from 'connected-react-router';\nimport document from 'global/document';\nimport * as Types from './types';\nimport Timelineworker from '../timeline';\nimport { getDongleID } from '../url';\nimport { billing as Billing, devices as DevicesApi } from '@commaai/comma-api';\n\nexport function updateState(data) {\n  return {\n    type: Types.WORKER_STATE_UPDATE,\n    data\n  };\n}\n\nexport function selectRange(start, end) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (!state.workerState.dongleId) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n      return;\n    }\n    if (state.workerState.primeNav) {\n      dispatch(primeNav(false));\n    }\n    const curPath = document.location.pathname;\n    const dongleId = getDongleID(curPath) || state.workerState.dongleId;\n    const desiredPath = urlForState(dongleId, start, end, false);\n\n    if (state.zoom.start !== start || state.zoom.end !== end) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n    }\n\n    if (!state.workerState.loop.startTime\n      || !state.workerState.loop.duration\n      || state.workerState.loop.startTime < start\n      || state.workerState.loop.startTime + state.workerState.loop.duration > end\n      || state.workerState.loop.duration < end - start) {\n      Timelineworker.resetPlayback();\n      Timelineworker.selectLoop(start, end - start);\n    }\n\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (state.workerState.dongleId !== dongleId) {\n      Timelineworker.selectDevice(dongleId).then(() => {\n        dispatch(selectRange(null, null))\n        dispatch(primeFetchSubscription());\n        dispatch(fetchDeviceOnline(dongleId));\n      });\n    } else {\n      dispatch(primeNav(false));\n    }\n\n    const curPath = document.location.pathname;\n    const desiredPath = urlForState(dongleId, state.zoom.start, state.zoom.end, null);\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function primeFetchSubscription() {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if ((state.workerState.device && state.workerState.device.is_owner) || state.workerState.profile.superuser) {\n      Billing.getSubscription(state.workerState.dongleId).then((subscription) => {\n        Timelineworker.primeGetSubscription(state.workerState.dongleId, subscription);\n      }).catch((err) => {\n        if (!err.message || err.message.indexOf('404') !== 0) {\n          console.log(err);\n        }\n      });\n    }\n  };\n}\n\nexport function primeNav(nav = true) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (state.workerState.primeNav != nav) {\n      Timelineworker.primeNav(nav);\n    }\n\n    const curPath = document.location.pathname;\n    const desiredPath = urlForState(state.workerState.dongleId, null, null, nav);\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function fetchDeviceOnline(dongleId) {\n  return (dispatch, getState) => {\n    DevicesApi.fetchDevice(dongleId).then((resp) => {\n      if (resp.dongle_id === dongleId) {\n        Timelineworker.updateDeviceOnline(dongleId, resp.last_athena_ping, parseInt(Date.now() / 1000));\n      }\n    }).catch(console.log);\n  };\n}\n\nfunction urlForState(dongleId, start, end, prime_nav) {\n  const path = [dongleId];\n\n  if (start && end) {\n    path.push(start);\n    path.push(end);\n  } else if (prime_nav) {\n    path.push('prime');\n  }\n\n  return `/${path.join('/')}`;\n}\n","export const WORKER_STATE_UPDATE = 'workerstate';\nexport const TIMELINE_SELECTION_CHANGED = 'timeline_selection_changed';\n","export function filterEvent(event) {\n  return (event.type === 'disengage' || event.type === 'disengage_steer');\n}\n\nexport function formatDriveDuration(duration) {\n  const milliseconds = Math.floor((duration % 1000) / 100);\n  let seconds = Math.floor((duration / 1000) % 60);\n  let minutes = Math.floor((duration / (1000 * 60)) % 60);\n  let hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n  hours = (hours < 10) ? hours : hours;\n  minutes = (minutes < 10) ? minutes : minutes;\n  seconds = (seconds < 10) ? seconds : seconds;\n  return {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n  };\n}\n\nexport function getDrivePoints(duration) {\n  const minutes = Math.floor(duration / (1000 * 60));\n  const points = Math.floor(minutes * 1.5); // panda\n  return points;\n}\n\nexport function deviceTypePretty(deviceType) {\n  if (deviceType === 'neo') {\n    return 'EON';\n  } else if (deviceType === 'freon') {\n    return 'freon';\n  } else if (deviceType === 'unknown') {\n    return 'unknown';\n  } else {\n    return `comma ${deviceType}`;\n  }\n}\n\nexport function deviceIsOnline(device) {\n  if (!device.last_athena_ping) {\n    return false;\n  }\n  return device.last_athena_ping >= (device.fetched_at - 120);\n}\n","import Raven from 'raven-js';\nimport qs from 'query-string';\nimport { WebMercatorViewport } from 'react-map-gl';\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\nconst mbxDirections = require('@mapbox/mapbox-sdk/services/directions');\nconst geocodeCache = new Map();\n\nlet geocodingClient = null;\nlet directionsClient = null;\nif (process.env.REACT_APP_MAPBOX_TOKEN) {\n  geocodingClient = mbxGeocoding({ accessToken: process.env.REACT_APP_MAPBOX_TOKEN });\n  directionsClient = mbxDirections({ accessToken: process.env.REACT_APP_MAPBOX_TOKEN });\n} else {\n  console.warn('Missing mapbox token');\n}\n\nexport default function geocodeApi() {\n  function getFilteredContexts(context) {\n    const include_ctxs = ['region', 'district', 'place', 'locality', 'neighborhood'];\n    return context.filter((ctx) => {\n      return include_ctxs.some((c) => ctx.id.indexOf(c) !== -1);\n    });\n  }\n\n  function getContextString(context) {\n    if (context.id.indexOf('region') !== -1 && context.short_code) {\n      if (context.short_code.indexOf('US-') !== -1) {\n        return context.short_code.substr(3);\n      }\n      return context.short_code;\n    }\n    return context.text;\n  }\n\n  function priorityGetContext(contexts) {\n    for (const prio of ['place', 'locality', 'district']) {\n      for (const ctx of contexts) {\n        if (ctx.id.indexOf(prio) !== -1) {\n          return ctx;\n        }\n      }\n    }\n  }\n\n  async function noCacheReverseLookup(coords) {\n    const response = await geocodingClient.reverseGeocode({\n      query: [coords[0], coords[1]],\n      limit: 1,\n    }).send();\n\n    try {\n      const { features } = response.body;\n      if (features.length && features[0].context) {\n        let contexts = getFilteredContexts(features[0].context);\n        let place = '';\n        let details = '';\n        if (contexts.length > 0) {\n          place = getContextString(contexts.shift());\n        }\n        if (contexts.length > 0) {\n          details = getContextString(contexts.pop());\n        }\n        if (contexts.length > 0) {\n          details = `${getContextString(priorityGetContext(contexts))}, ${details}`;\n        }\n        return { place, details };\n      }\n    } catch (err) {\n      Raven.captureException(err);\n    }\n  }\n\n  return {\n    async reverseLookup(coords) {\n      if (geocodingClient === null) {\n        return null;\n      }\n\n      // round for better caching\n      coords[0] = Math.round(coords[0] * 1000) / 1000;\n      coords[1] = Math.round(coords[1] * 1000) / 1000;\n\n      const cacheKey = JSON.stringify(coords);\n      if (geocodeCache.has(cacheKey)) {\n        return await geocodeCache.get(cacheKey);\n      }\n\n      const res = noCacheReverseLookup(coords);\n      geocodeCache.set(cacheKey, res);\n      return await res;\n    },\n\n    async forwardLookup(query, proximity, viewport) {\n      let params = {\n        apiKey: process.env.REACT_APP_HERE_API_KEY,\n        q: query,\n        limit: 20,\n        details: '1',\n      };\n      if (proximity) {\n        params.at = `${proximity[1]},${proximity[0]}`;\n      } else if (viewport) {\n        const bbox = new WebMercatorViewport(viewport).getBounds();\n        let vals = [\n          Math.max(-180, bbox[0][0]),\n          Math.max(-90,  bbox[0][1]),\n          Math.min( 180, bbox[1][0]),\n          Math.min( 90,  bbox[1][1]),\n        ];\n        params.in = 'bbox:' + vals.join(',');\n      } else {\n        params.in = 'bbox:-180,-90,180,90';\n      }\n\n      const resp = await fetch(`https://autosuggest.search.hereapi.com/v1/autosuggest?${qs.stringify(params)}`, {\n        method: 'GET',\n      });\n      if (!resp.ok) {\n        console.log(resp);\n        return [];\n      }\n\n      const json = await resp.json();\n      return json.items;\n    },\n\n    async networkPositioning(req) {\n      const key = process.env.REACT_APP_HERE_API_KEY;\n      const resp = await fetch(`https://positioning.hereapi.com/v2/locate?apiKey=${key}&fallback=any,singleWifi`, {\n        method: 'POST',\n        headers: new Headers({ 'Content-Type': 'application/json' }),\n        body: JSON.stringify(req),\n      });\n      if (!resp.ok) {\n        console.log(resp);\n        return null;\n      }\n      const json = await resp.json();\n      return json.location;\n    },\n\n    async getDirections(points) {\n      if (!directionsClient) {\n        return null;\n      }\n\n      const resp = await directionsClient.getDirections({\n        profile: 'driving-traffic',\n        waypoints: points.map((p) => { return { coordinates: p }; }),\n        annotations: ['distance', 'duration'],\n        geometries: 'geojson',\n        overview: 'full',\n      }).send();\n\n      return resp.body.routes;\n    },\n  };\n}\n","import React from 'react';\n\nconst gutter = 0;\n\nfunction renderImage(imgStyles, data, i) {\n  if (data.blank) {\n    return (\n      <div\n        key={i}\n        className=\"thumbnailImage blank\"\n        style={{\n          ...imgStyles,\n          width: imgStyles.width * data.length,\n        }}\n      />\n    );\n  }\n  return (\n    <div\n      key={i}\n      className=\"thumbnailImage images\"\n      style={{\n        ...imgStyles,\n        width: imgStyles.width * data.length,\n        marginLeft: gutter,\n        backgroundSize: `auto ${imgStyles.height}px`,\n        backgroundRepeat: 'repeat-x',\n        backgroundImage: `url(${data.url})`,\n        backgroundPosition: `${data.startImage * imgStyles.width}px`\n      }}\n    />\n  );\n}\n\nexport default function Thumbnails(props) {\n  const { thumbnail } = props;\n  const imgStyles = {\n    display: 'inline-block',\n    height: thumbnail.height,\n    width: (1164 / 874) * thumbnail.height,\n  };\n  // console.log('Thumbnail props', props);\n  const imgCount = Math.ceil(thumbnail.width / imgStyles.width);\n  imgStyles.marginRight = gutter / 2;\n\n  const imgArr = [];\n  let currentSegment = null;\n\n  if (!Number.isFinite(imgCount)) {\n    return [];\n  }\n  for (let i = 0; i < imgCount; ++i) {\n    const offset = props.percentToOffset((i + 0.5) / imgCount);\n    const segment = props.getCurrentSegment(offset);\n    if (!segment) {\n      if (currentSegment && !currentSegment.blank) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n      if (!currentSegment) {\n        currentSegment = {\n          blank: true,\n          length: 0\n        };\n      }\n      currentSegment.length += 1;\n    } else {\n      // 12 per file, 5s each\n      let seconds = Math.floor((offset - segment.routeOffset) / 1000);\n      const url = `${segment.url}/${segment.segment}/sprite.jpg`;\n      seconds %= 60;\n\n      if (currentSegment && (currentSegment.blank || currentSegment.segment !== segment.segment)) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n\n      const imageIndex = Math.floor(seconds / 5);\n\n      if (currentSegment) {\n        if (imageIndex === currentSegment.endImage + 1) {\n          currentSegment.endImage = imageIndex;\n        } else {\n          imgArr.push(currentSegment);\n          currentSegment = null;\n        }\n      }\n\n      if (!currentSegment) {\n        currentSegment = {\n          segment: segment.segment,\n          startOffset: seconds,\n          startImage: imageIndex,\n          endImage: imageIndex,\n          length: 0,\n          url\n        };\n      }\n\n      currentSegment.length += 1;\n      currentSegment.endOffset = seconds;\n    }\n  }\n\n  if (currentSegment) {\n    imgArr.push(currentSegment);\n  }\n\n  return imgArr.map((data, i) => renderImage(imgStyles, data, i));\n}\n","import { createMuiTheme } from '@material-ui/core/styles';\nimport Colors from './colors';\nimport { ChevronIcon } from './icons';\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: \"'Inter', sans-serif\",\n  },\n  overrides: {\n    MuiButton: {\n      root: {\n        textTransform: 'none',\n      },\n    },\n    MuiPaper: {\n      root: {\n        backgroundColor: '#30373B'\n      },\n    },\n    MuiDrawer: {\n      paper: {\n        overflowY: null,\n      },\n      paperAnchorDockedLeft: {\n        borderRight: 'none',\n      },\n    },\n    MuiSelect: {\n      select: {\n        padding: '12px',\n        paddingRight: '48px',\n        margin: '0px',\n        '&>div': {\n          margin: '0',\n        },\n        '&:focus': {\n          background: 'inherit',\n        },\n      },\n      selectMenu: {\n        paddingRight: 54,\n      },\n      icon: {\n        marginRight: 20,\n        color: Colors.white30,\n      }\n    },\n    MuiInput: {\n      root: {\n        position: 'relative',\n        border: `1px solid ${Colors.grey800}`,\n        borderRadius: 20,\n        overflow: 'hidden'\n      },\n      input: {\n        padding: '12px 16px',\n        '&::placeholder': {\n          opacity: 1,\n          color: Colors.white30\n        },\n        '&:focus': {\n          outline: 'none',\n          boxShadow: 'none',\n        },\n      },\n    },\n    MuiInputLabel: {\n      shrink: {\n        transform: 'translate(0, -2px) scale(0.75)',\n      },\n    },\n    MuiFormLabel: {\n      root: {\n        marginLeft: 16,\n        marginTop: 4,\n      }\n    },\n    MuiFormHelperText: {\n      root: {\n        marginLeft: 8,\n        marginTop: 4,\n      },\n    },\n    MuiTab: {\n      root: {\n        minHeight: 40,\n      }\n    },\n    MuiListItem: {\n      root: {\n        '&:focus': {\n          outline: 'none',\n          boxShadow: 'none',\n        },\n      },\n    },\n  },\n  props: {\n    MuiSelect: {\n      disableUnderline: true,\n      IconComponent: ChevronIcon\n    },\n    MuiInput: {\n      disableUnderline: true\n    }\n  },\n  palette: {\n    type: 'dark',\n    placeholder: Colors.white30,\n    background: {\n      default: Colors.grey999\n    },\n    primary: {\n      light: Colors.grey50,\n      main: Colors.grey900,\n      dark: Colors.grey999\n    },\n    states: {\n      drivingBlue: Colors.blue500,\n      engagedGreen: Colors.green400,\n      alertOrange: Colors.orange50,\n      alertRed: Colors.red100,\n    },\n    grey: {\n      50: Colors.grey50,\n      100: Colors.grey100,\n      200: Colors.grey200,\n      300: Colors.grey300,\n      400: Colors.grey400,\n      500: Colors.grey500,\n      600: Colors.grey600,\n      700: Colors.grey700,\n      800: Colors.grey800,\n      900: Colors.grey900,\n      950: Colors.grey950,\n      999: Colors.grey999\n    },\n    lightGrey: {\n      200: Colors.lightGrey200,\n    },\n    white: {\n      10: Colors.white10,\n      12: Colors.white12,\n      20: Colors.white20,\n      30: Colors.white30,\n      40: Colors.white40,\n      50: Colors.white50,\n    },\n    error: {\n      main: 'rgba(209,106,35,0.72)'\n    }\n  }\n});\n\nexport default theme;\n","// timeline minimap\n// rapidly change high level timeline stuff\n// rapid seeking, etc\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport debounce from 'debounce';\nimport document from 'global/document';\nimport fecha from 'fecha';\nimport PropTypes from 'prop-types';\n\nimport Measure from 'react-measure';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport Thumbnails from './thumbnails';\nimport theme from '../../theme';\nimport TimelineWorker from '../../timeline';\nimport Segments from '../../timeline/segments';\nimport { selectRange } from '../../actions';\n\nconst styles = (/* theme */) => ({\n  base: {\n    backgroundColor: '#1D2225',\n    minHeight: '32px',\n    overflow: 'hidden',\n    position: 'relative',\n    width: '100%',\n    '&.hasThumbnails.hasRuler': {\n      minHeight: '80px',\n    },\n  },\n  rounded: {\n    borderRadius: '10px 10px 0px 0px'\n  },\n  segments: {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    width: '100%',\n    height: '100%',\n    '&.hasThumbnails': {\n      height: '40%'\n    },\n    '&.hasThumbnails.hasRuler': {\n      height: '100%',\n    },\n  },\n  segment: {\n    position: 'relative',\n    height: '100%',\n    background: theme.palette.states.drivingBlue,\n  },\n  ruler: {\n    background: '#272D30d9',\n    bottom: 0,\n    position: 'absolute',\n    top: 12,\n    width: '100%',\n  },\n  rulerRemaining: {\n    background: '#1D2225',\n    borderLeft: '1px solid #D8DDDF',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    opacity: 0.45,\n    pointerEvents: 'none',\n    width: '100%',\n  },\n  statusGradient: {\n    background: 'linear-gradient(rgba(0, 0, 0, 0.0) 4%, rgba(255, 255, 255, 0.025) 10%, rgba(0, 0, 0, 0.1) 25%, rgba(0, 0, 0, 0.4))',\n    height: 12,\n    left: 0,\n    pointerEvents: 'none',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  segmentColor: {\n    position: 'absolute',\n    display: 'inline-block',\n    height: '100%',\n    width: '100%',\n    '&.active': {},\n    '&.engage': {\n      background: theme.palette.states.engagedGreen,\n    },\n    '&.alert': {\n      '&.userPrompt': {\n        background: theme.palette.states.alertOrange,\n      },\n      '&.critical': {\n        background: theme.palette.states.alertRed,\n      }\n    }\n  },\n  uncoloredSegment: {\n    background: theme.palette.states.drivingBlue,\n    height: '100%',\n    width: '100%',\n  },\n  hoverBead: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: 50,\n    height: '100%'\n  },\n  dragHighlight: {\n    background: 'rgba(255, 255, 255, 0.1)',\n    position: 'absolute',\n    height: '100%',\n  },\n  thumbnails: {\n    position: 'absolute',\n    height: '60%',\n    top: 12,\n    width: '100%',\n    whiteSpace: 'nowrap',\n    userSelect: 'none',\n    '& img': {\n      pointerEvents: 'none',\n    },\n    '&.hasRuler': {\n      height: '30%',\n    },\n    '& > div': {\n      display: 'inline-block'\n    }\n  },\n});\n\nconst AlertStatusCodes = [\n  'normal',\n  'userPrompt',\n  'critical'\n];\n\nfunction percentFromMouseEvent(e) {\n  const boundingBox = e.currentTarget.getBoundingClientRect();\n  const x = e.pageX - boundingBox.left;\n  return x / boundingBox.width;\n}\n\nclass Timeline extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getOffset = this.getOffset.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.percentToOffset = this.percentToOffset.bind(this);\n    this.renderSegment = this.renderSegment.bind(this);\n    this.sendSeek = debounce(this.sendSeek.bind(this), 1000 / 60);\n\n\n    this.offsetValue = React.createRef();\n    this.rulerRemaining = React.createRef();\n    this.rulerRemainingHovered = React.createRef();\n    this.dragBar = React.createRef();\n    this.hoverBead = React.createRef();\n    // this.canvas_speed = React.createRef();\n    const { zoomOverride, zoom } = this.props;\n    this.state = {\n      dragStart: null,\n      zoom: zoomOverride || zoom,\n      mouseX: 0,\n      hoverPercent: 0,\n      isHovered: false,\n      thumbnail: {\n        height: 0,\n        width: 0\n      }\n    };\n  }\n\n  componentWillMount() {\n    document.addEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening = TimelineWorker.onIndexed(() => this.forceUpdate());\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.getOffset);\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({\n      zoom: props.zoomOverride || props.zoom\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening();\n  }\n\n  getOffset() {\n    if (!this.mounted) {\n      return;\n    }\n    raf(this.getOffset);\n    let offset = TimelineWorker.currentOffset();\n    if (this.seekIndex) {\n      offset = this.seekIndex;\n    }\n    offset = Math.floor(offset);\n    const percent = this.offsetToPercent(offset);\n    if (this.rulerRemaining.current && this.rulerRemaining.current.parentElement) {\n      this.rulerRemaining.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n    const { isHovered } = this.state;\n    if (!isHovered\n      && this.rulerRemainingHovered.current\n      && this.rulerRemainingHovered.current.parentElement) {\n      this.rulerRemainingHovered.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n  }\n\n  handleClick(e) {\n    if (this.isDragSelecting) {\n      console.log('Is a drag event');\n      this.isDragSelecting = false;\n      return;\n    }\n    const { noseek } = this.props;\n    if (noseek) {\n      return;\n    }\n    const percent = percentFromMouseEvent(e);\n\n    TimelineWorker.seek(this.percentToOffset(percent));\n  }\n\n  handleMouseDown(e) {\n    const { classes, dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    // make sure they're clicking & dragging and not just moving the mouse around\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return;\n    }\n\n    const percent = percentFromMouseEvent(e);\n    this.setState({\n      dragStart: percent,\n      dragEnd: percent\n    });\n  }\n\n  handleMouseUp(e) {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    if (!dragStart) {\n      return;\n    }\n    const selectedArea = Math.abs(dragStart - dragEnd) * 100;\n    const startPercent = Math.min(dragStart, dragEnd);\n    const endPercent = Math.max(dragStart, dragEnd);\n    const startOffset = Math.round(this.percentToOffset(startPercent));\n    const endOffset = Math.round(this.percentToOffset(endPercent));\n\n    if (selectedArea > 0.1) {\n      const currentOffset = TimelineWorker.currentOffset();\n      if (currentOffset < startOffset || currentOffset > endOffset) {\n        TimelineWorker.seek(startOffset);\n      }\n      const { start, dispatch } = this.props;\n      const startTime = startOffset + start;\n      const endTime = endOffset + start;\n\n      this.isDragSelecting = true;\n      setTimeout(() => { this.isDragSelecting = false; });\n      dispatch(selectRange(startTime, endTime));\n    } else if (e.currentTarget !== document) {\n      this.handleClick(e);\n    }\n\n    this.setState({\n      dragStart: null,\n      dragEnd: null\n    });\n  }\n\n  handleMouseMove(e) {\n    const boundingBox = e.currentTarget.getBoundingClientRect();\n    const x = e.pageX - boundingBox.left;\n    const percent = x / boundingBox.width;\n\n    this.setState({\n      mouseX: x,\n      hoverPercent: percent,\n      isHovered: true,\n    });\n\n    // mouseover highlight\n    if (this.rulerRemainingHovered.current && this.rulerRemainingHovered.current.parentElement) {\n      let { hoverPercent } = this.state;\n      hoverPercent = (hoverPercent * 100).toFixed(2);\n      this.rulerRemainingHovered.current.style.left = `${hoverPercent}%`;\n    }\n\n    const { classes, dragSelection } = this.props;\n    const { dragStart } = this.state;\n    // drag highlight\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return; // ignore mouseover\n    }\n    if (!dragSelection) {\n      this.seekIndex = this.percentToOffset(percent);\n      this.sendSeek();\n    } if (dragStart) {\n      this.setState({\n        dragEnd: percent\n      });\n    }\n    // do other things for drag selection!\n  }\n\n  handleMouseLeave() {\n    this.setState({ isHovered: false });\n  }\n\n  percentToOffset(perc) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return perc * (zoom.end - zoom.start) + (zoom.start - start);\n    }\n    return perc * range;\n  }\n\n  offsetToPercent(offset) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return (offset - (zoom.start - start)) / (zoom.end - zoom.start);\n    }\n    return offset / range;\n  }\n\n  sendSeek() {\n    if (this.seekIndex) {\n      TimelineWorker.seek(this.seekIndex);\n      this.seekIndex = null;\n    }\n  }\n\n  renderDragger() {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection, classes } = this.props;\n    if (!dragSelection || !dragStart) {\n      return [];\n    }\n    const draggerStyle = {\n      left: `${100 * Math.min(dragStart, dragEnd)}%`,\n      width: `${100 * Math.abs(dragStart - dragEnd)}%`,\n    };\n    return (\n      <div\n        ref={this.dragBar}\n        className={classes.dragHighlight}\n        style={draggerStyle}\n      />\n    );\n  }\n\n  renderZoom() {\n    const {\n      zoom, dragSelection, zoomed, start, range\n    } = this.props;\n    if (!dragSelection || !zoom.expanded || zoomed) {\n      return [];\n    }\n    const color = `${theme.palette.grey[50]}cc`;\n    const endColor = `${theme.palette.grey[200]}aa`;\n    const zoomStart = (zoom.start - start) / range;\n    const zoomEnd = (zoom.end - start) / range;\n    const barStyle = {\n      background: `linear-gradient(to left,${color},${endColor},${color})`,\n      left: `${100 * Math.min(zoomStart, zoomEnd)}%`,\n      width: `${100 * Math.abs(zoomStart - zoomEnd)}%`,\n    };\n    return (\n      <div\n        style={barStyle}\n      />\n    );\n  }\n\n  renderSegment(segment) {\n    const {\n      classes, range, zoomed, start, colored\n    } = this.props;\n    const { zoom } = this.state;\n    let startPerc = (100 * segment.offset) / range;\n    let widthPerc = (100 * segment.duration) / range;\n    if (zoomed) {\n      const startOffset = zoom.start - start;\n      const endOffset = zoom.end - start;\n      const zoomDuration = endOffset - startOffset;\n      if (segment.offset > endOffset) {\n        return [];\n      }\n      if (segment.offset + segment.duration < startOffset) {\n        return [];\n      }\n      startPerc = (100 * (segment.offset - startOffset)) / zoomDuration;\n      widthPerc = (100 * segment.duration) / zoomDuration;\n    }\n    const style = {\n      position: 'absolute',\n      width: `${widthPerc}%`,\n      left: `${startPerc}%`,\n    };\n    return (\n      <div\n        key={segment.route + segment.offset}\n        className={classes.segment}\n        style={style}\n      >\n        { colored ? this.renderSegmentEvents(segment) : (\n          <div className={classes.uncoloredSegment} />\n        ) }\n      </div>\n    );\n  }\n\n  renderSegmentEvents(segment) {\n    const { classes } = this.props;\n    return segment.events\n      .filter((event) => event.data && event.data.end_route_offset_millis)\n      .map((event) => {\n        const style = {\n          left: `${(event.route_offset_millis / segment.duration) * 100}%`,\n          width: `${((event.data.end_route_offset_millis - event.route_offset_millis) / segment.duration) * 100}%`,\n        };\n        if (localStorage.showCurrentEvent) {\n          const time = TimelineWorker.currentOffset();\n          const eventStart = event.route_offset_millis + segment.offset;\n          const eventEnd = event.data.end_route_offset_millis + segment.offset;\n          if (time > eventStart && time < eventEnd) {\n            console.log('Current event:', event);\n          }\n        }\n        const statusCls = event.data.alertStatus ? `${AlertStatusCodes[event.data.alertStatus]}` : '';\n        return (\n          <div\n            key={segment.route + event.time + event.type}\n            style={style}\n            className={ `${classes.segmentColor} ${event.type} ${statusCls}` }\n          />\n        );\n      });\n  }\n\n  render() {\n    const {\n      classes,\n      hasThumbnails,\n      tooltipped,\n      hasRuler,\n      start,\n      className,\n      style,\n      rounded,\n      segments,\n      hasGradient\n    } = this.props;\n    const { hoverPercent, thumbnail, mouseX } = this.state;\n    const hoverOffset = this.percentToOffset(hoverPercent);\n    let timeString = null;\n    if (tooltipped) {\n      if (Number.isNaN(hoverOffset)) {\n        timeString = 'N/A';\n      } else {\n        const timestampAtOffset = start + hoverOffset;\n        timeString = fecha.format(timestampAtOffset, 'M/D HH:mm:ss');\n      }\n    }\n    const roundedCls = rounded ? 'rounded' : '';\n    const hasRulerCls = hasRuler ? 'hasRuler' : '';\n    const hasThumbnailsCls = hasThumbnails ? 'hasThumbnails' : '';\n    return (\n      <div\n        className={className}\n        style={style}\n      >\n        <div\n          role=\"presentation\"\n          className={ `${classes.base} ${roundedCls} ${hasRulerCls} ${hasThumbnailsCls}` }\n          onMouseDown={this.handleMouseDown}\n          onMouseUp={this.handleMouseUp}\n          onMouseMove={this.handleMouseMove}\n          onMouseLeave={this.handleMouseLeave}\n          onClick={this.handleClick}\n        >\n          <div className={ `${classes.segments} ${hasRulerCls} ${hasThumbnailsCls}` }>\n            { segments && segments.map(this.renderSegment) }\n            { hasRuler && (\n              <div className={classes.ruler}>\n                <div\n                  ref={this.rulerRemaining}\n                  className={classes.rulerRemaining}\n                />\n                <div\n                  ref={this.rulerRemainingHovered}\n                  className={classes.rulerRemaining}\n                />\n              </div>\n            ) }\n            { hasGradient && <div className={ `${classes.statusGradient} ${hasRulerCls}` } /> }\n            { this.renderDragger() }\n            { this.renderZoom() }\n          </div>\n          { tooltipped\n            && (\n            <Tooltip title={timeString}>\n              <div\n                ref={this.hoverBead}\n                className={classes.hoverBead}\n                style={{ left: mouseX - 25 }}\n              />\n            </Tooltip>\n            )}\n          { hasThumbnails\n            && (\n            <Measure\n              bounds\n              onResize={(rect) => this.setState({ thumbnail: rect.bounds })}\n            >\n              { (options) => (\n                <div ref={options.measureRef} className={ `${classes.thumbnails} ${hasRulerCls}` }>\n                  <Thumbnails\n                    getCurrentSegment={ (seg) => Segments.getCurrentSegment(this.props, seg) }\n                    percentToOffset={this.percentToOffset}\n                    thumbnail={thumbnail}\n                    className={classes.thumbnail}\n                    hasRuler={hasRuler}\n                  />\n                </div>\n              )}\n            </Measure>\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n\nTimeline.propTypes = {\n  zoom: PropTypes.object.isRequired,\n  zoomOverride: PropTypes.object,\n  zoomed: PropTypes.bool,\n  colored: PropTypes.bool,\n  start: PropTypes.number.isRequired,\n  range: PropTypes.number.isRequired,\n  classes: PropTypes.object.isRequired,\n  dragSelection: PropTypes.bool,\n  hasThumbnails: PropTypes.bool,\n  hasRuler: PropTypes.bool,\n  tooltipped: PropTypes.bool,\n  hasGradient: PropTypes.bool,\n  rounded: PropTypes.bool,\n  segments: PropTypes.array.isRequired,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  dispatch: PropTypes.func.isRequired,\n  noseek: PropTypes.bool,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.workerState,\n    zoom: state.zoom,\n  };\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(Timeline));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nimport { selectRange } from '../../actions';\nimport { formatDriveDuration, getDrivePoints } from '../../utils';\nimport GeocodeApi from '../../api/geocode';\nimport Timeline from '../Timeline';\nimport { RightArrow } from '../../icons';\nimport { KM_PER_MI } from '../../utils/conversions';\n\nconst styles = (theme) => ({\n  drive: {\n    background: 'rgba(255, 255, 255, 0.0)',\n    background: 'linear-gradient(to bottom, #30373B 0%, #1D2225 100%)',\n    borderTop: '1px solid rgba(255, 255, 255, .05)',\n    borderRadius: 8,\n    cursor: 'pointer',\n    display: 'flex',\n    flexDirection: 'column',\n    marginBottom: 12,\n    overflow: 'hidden',\n    padding: 0,\n    transition: 'background .2s',\n    '&:hover': {}\n  },\n  driveHeader: {\n    alignItems: 'center',\n  },\n  driveHeaderIntro: {\n    display: 'flex',\n  },\n  driveGridItem: {\n    flexGrow: 1,\n  },\n  driveHeaderIntroSmall: {\n    justifyContent: 'center',\n  },\n  driveTimeline: {},\n  driveArrow: {\n    color: '#404B4F',\n    height: '100%',\n    marginLeft: '25%',\n    width: 32,\n  },\n  firstLine: {\n    fontWeight: 600,\n  },\n});\n\nclass DriveListDrive extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startLocation: null,\n      endLocation: null,\n    };\n\n    this.handleDriveClicked = this.handleDriveClicked.bind(this);\n  }\n\n  componentDidMount() {\n    const { drive } = this.props;\n    this.mounted = true;\n    GeocodeApi().reverseLookup(drive.startCoord).then((startLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ startLocation });\n    });\n    GeocodeApi().reverseLookup(drive.endCoord).then((endLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ endLocation });\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDriveClicked(drive) {\n    const startTime = drive.startTime - 1000;\n    const endTime = drive.startTime + drive.duration + 1000;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  render() {\n    const { drive, classes, windowWidth } = this.props;\n\n    const small = windowWidth < 640;\n\n    const { startLocation, endLocation } = this.state;\n    const startTime = fecha.format(new Date(drive.startTime), 'HH:mm');\n    const startDate = fecha.format(new Date(drive.startTime), small ? 'ddd, MMM D' : 'dddd, MMM D');\n    const endTime = fecha.format(new Date(drive.startTime + drive.duration + 1000), 'HH:mm');\n    const duration = formatDriveDuration(drive.duration);\n    const points = getDrivePoints(drive.duration);\n\n    const gridStyle = small ? {\n      date:   { order: 1, maxWidth: '50%', flexBasis: '50%', marginBottom: 12 },\n      dur:    { order: 2, maxWidth: '28%', flexBasis: '28%', marginBottom: 12 },\n      dist:   { order: 3, maxWidth: '22%', flexBasis: '22%', marginBottom: 12 },\n      origin: { order: 4, maxWidth: '50%', flexBasis: '50%' },\n      dest:   { order: 5, maxWidth: '50%', flexBasis: '50%' },\n    } : {\n      date:   { order: 1, maxWidth: '26%', flexBasis: '26%' },\n      dur:    { order: 2, maxWidth: '14%', flexBasis: '14%' },\n      origin: { order: 3, maxWidth: '22%', flexBasis: '22%' },\n      dest:   { order: 4, maxWidth: '22%', flexBasis: '22%' },\n      dist:   { order: 5, maxWidth: '10%', flexBasis: '10%' },\n      arrow:  { order: 6, maxWidth: '6%',  flexBasis: '6%' },\n    };\n    return (\n      <li key={drive.startTime} className={ `${classes.drive} DriveEntry` }\n        onClick={ () => this.handleDriveClicked(drive) }>\n        <div className={classes.driveHeader} style={ !small ? { padding: '18px 32px' } : { padding: 18 } }>\n          <Grid container>\n            <div className={ classes.driveGridItem } style={ gridStyle.date }>\n              <Typography className={ classes.firstLine }>\n                { startDate }\n              </Typography>\n              <Typography>\n                { startTime } to { endTime }\n              </Typography>\n            </div>\n            <div className={ classes.driveGridItem } style={ gridStyle.dur }>\n              <Typography className={ classes.firstLine }>\n                { duration.hours > 0 && `${duration.hours.toString()}hr ` }\n                { `${duration.minutes} min` }\n              </Typography>\n              <Typography>\n                { `${points} points` }\n              </Typography>\n            </div>\n            <div className={ classes.driveGridItem } style={ gridStyle.origin }>\n              <Typography className={ classes.firstLine }>\n                { startLocation && startLocation.place }\n              </Typography>\n              <Typography>\n                { startLocation && startLocation.details }\n              </Typography>\n            </div>\n            <div className={ classes.driveGridItem } style={ gridStyle.dest }>\n              <Typography className={ classes.firstLine }>\n                { endLocation && endLocation.place }\n              </Typography>\n              <Typography>\n                { endLocation && endLocation.details }\n              </Typography>\n            </div>\n            <div className={ classes.driveGridItem } style={ gridStyle.dist }>\n              <Typography className={ classes.firstLine }>\n                { `${+drive.distanceMiles.toFixed(1)} mi` }\n              </Typography>\n              <Typography>\n                { `${+(drive.distanceMiles * KM_PER_MI).toFixed(1)} km` }\n              </Typography>\n            </div>\n            { !small &&\n              <div className={ classes.driveGridItem } style={ gridStyle.arrow }>\n                <RightArrow className={classes.driveArrow} />\n              </div>\n            }\n          </Grid>\n        </div>\n        <Timeline\n          className={classes.driveTimeline}\n          zoomed\n          colored\n          hasThumbnails\n          hasGradient\n          zoomOverride={{\n            start: drive.startTime,\n            end: drive.startTime + drive.duration\n          }}\n        />\n      </li>\n    );\n  }\n}\n\nexport default connect(() => ({}))(withStyles(styles)(DriveListDrive));\n","export const KM_PER_MI = 1.60934;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport Colors from '../../colors';\n\nimport { withStyles, Typography, Grid } from '@material-ui/core';\nimport DriveListItem from './DriveListItem';\nimport ResizeHandler from '../ResizeHandler';\n\nconst MIN_TIME_BETWEEN_ROUTES = 60000; // 1 minute\n\nconst styles = (theme) => ({\n  header: {\n    alignItems: 'center',\n    borderBottom: `1px solid ${Colors.white10}`,\n    padding: '16px 48px',\n    flexGrow: 0,\n  },\n  drivesTable: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n  },\n  drives: {\n    margin: 0,\n    padding: 16,\n    flex: '1',\n  },\n  zeroState: {\n    flex: '0',\n  },\n  settingsArea: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  settingsButton: {\n    position: 'relative',\n    left: 12,\n    border: `1px solid ${Colors.white40}`\n  },\n  settingsButtonIcon: {\n    color: Colors.white40,\n  },\n});\n\nclass DriveList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.filterShortDrives = this.filterShortDrives.bind(this);\n    this.onResize = this.onResize.bind(this);\n\n    this.state = {\n      windowWidth: window.innerWidth,\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.device && !this.state.deviceAliasSaved) {\n      this.setState({ deviceAliasSaved: props.device.alias });\n    }\n  }\n\n  filterShortDrives(ride) {\n    return ride.duration > 60000;\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    const driveList = [];\n    let lastEnd = 0;\n    let lastSegmentEnd = 0;\n    let curRideChunk = null;\n    this.props.segments.forEach((segment) => {\n      if (!curRideChunk || segment.startTime - lastEnd > MIN_TIME_BETWEEN_ROUTES) {\n        curRideChunk = {\n          segments: 0,\n          startTime: segment.startTime,\n          offset: segment.offset,\n          duration: 0,\n          startCoord: segment.startCoord,\n          endCoord: segment.endCoord,\n          distanceMiles: segment.distanceMiles,\n        };\n        driveList.unshift(curRideChunk);\n        lastSegmentEnd = segment.startTime;\n      }\n      curRideChunk.duration += segment.startTime - lastSegmentEnd;\n      curRideChunk.duration += segment.duration;\n      lastSegmentEnd = segment.startTime + segment.duration;\n      curRideChunk.segments++;\n      lastEnd = segment.startTime + segment.duration;\n    });\n\n    return (\n      <div className={ classes.drivesTable }>\n        <ResizeHandler onResize={ this.onResize } />\n        { driveList.length === 0 && this.renderZeroRides() }\n        <ul className={classes.drives}>\n          { driveList.filter(this.filterShortDrives).map((drive) => (\n            <DriveListItem key={drive.startTime} drive={drive} windowWidth={ this.state.windowWidth }/>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n\n  renderZeroRides() {\n    const { classes, device, segmentData } = this.props;\n    const { windowWidth } = this.state;\n    let zeroRidesEle = null;\n\n    if (device && (segmentData === null || typeof segmentData.segments === 'undefined')) {\n      zeroRidesEle = <Typography>Loading...</Typography>;\n    } else if (segmentData && segmentData.segments && segmentData.segments.length === 0) {\n      zeroRidesEle = ( <Typography>Looks like you haven{'\\''}t driven in the selected time range.</Typography> );\n    }\n\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n    return (\n      <div className={classes.zeroState} style={{ padding: `16px ${containerPadding}px` }}>\n        <Grid container>\n          { zeroRidesEle }\n        </Grid>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  segmentData: 'workerState.segmentData',\n  start: 'workerState.start',\n  device: 'workerState.device',\n  dongleId: 'workerState.dongleId',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveList));\n","import { loadStripe } from '@stripe/stripe-js';\n\nconst stripe = loadStripe(process.env.REACT_APP_STRIPE_TOKEN);\n\nexport default stripe;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { withStyles, Button, Typography, TextField } from '@material-ui/core';\nimport stripe from '../../api/stripe'\nimport { Elements, ElementsConsumer, CardNumberElement, CardExpiryElement, CardCvcElement } from '@stripe/react-stripe-js';\n\nimport { billing as Billing } from '@commaai/comma-api';\nimport Colors from '../../colors';\nimport ResizeHandler from '../ResizeHandler';\n\nconst styles = () => ({\n  block: {\n    marginBottom: 10,\n  },\n  stripeCardNumber: {\n    '& > div': {\n      padding: '10px 16px',\n      border: `1px solid ${Colors.grey500}`,\n      borderTopLeftRadius: 10,\n      borderTopRightRadius: 10,\n    }\n  },\n  stripeCardOther: {\n    display: 'flex',\n    '& > div': {\n      flexGrow: 1,\n      padding: '10px 16px',\n      border: `1px solid ${Colors.grey500}`,\n      borderTop: 'none',\n      '&:first-child': {\n        borderRight: 'none',\n        borderBottomLeftRadius: 10,\n      },\n      '&:last-child': {\n        borderBottomRightRadius: 10,\n      },\n    },\n  },\n  buttons: {\n    marginTop: 10,\n    background: Colors.white,\n    borderRadius: 18,\n    color: '#404B4F',\n    textTransform: 'none',\n    width: 200,\n    '&:hover': {\n      backgroundColor: Colors.white70,\n      color: '#404B4F',\n    },\n    '&:disabled': {\n      backgroundColor: Colors.white70,\n      color: '#404B4F',\n    },\n    '&:disabled:hover': {\n      backgroundColor: Colors.white70,\n      color: '#404B4F',\n    }\n  },\n  cancelButton: {\n    color: Colors.white,\n    background: 'transparent',\n    border: `1px solid ${Colors.grey500}`,\n    '&:hover': {\n      backgroundColor: Colors.white10,\n      color: Colors.white,\n    },\n  },\n  buttonsContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n  },\n  inputRoot: {\n    border: `1px solid ${Colors.grey500}`,\n    borderRadius: 10,\n  },\n  input: {\n    padding: '10px 16px',\n    '&::placeholder': { color: Colors.lightGrey500 },\n    '&:disabled::placeholder': { color: Colors.grey500 },\n  },\n  fieldLabel: {\n    fontSize: '0.8rem',\n  },\n});\n\nclass PrimePayment extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      windowWidth: window.innerWidth,\n      cardNumber: null,\n      cardExpiry: null,\n      cardCvc: null,\n      zipCode: null,\n      activating: false,\n    };\n\n    this.onResize = this.onResize.bind(this);\n    this.handleCardInput = this.handleCardInput.bind(this);\n    this.handleZipInput = this.handleZipInput.bind(this);\n    this.submitPayment = this.submitPayment.bind(this);\n    this.tokenize = this.tokenize.bind(this);\n    this.activate = this.activate.bind(this);\n    this.updatePayment = this.updatePayment.bind(this);\n  }\n\n  static defaultProps = {\n    buttonText: 'Activate',\n    onError: () => {},\n    onActivated: (_) => {},\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  handleCardInput(card) {\n    let state = {};\n    state[card.elementType] = card;\n    this.setState(state);\n\n    if (card.error) {\n      this.props.onError(card.error.message);\n    } else {\n      this.props.onError();\n    }\n  }\n\n  handleZipInput(ev) {\n    this.setState({ zipCode: ev.target.value });\n  }\n\n  submitPayment() {\n    const { elements } = this.props;\n    const cardNumberElement = elements.getElement(CardNumberElement);\n\n    let activateFunc = this.props.isUpdate ? this.updatePayment : this.activate;\n\n    this.setState({ activating: true });\n    activateFunc(cardNumberElement).then((res) => {\n      this.setState({ activating: false });\n    }).catch((err) => {\n      this.setState({ activating: false });\n      this.props.onError(err.message);\n    });\n  }\n\n  async tokenize(cardNumberElement) {\n    const { stripe } = this.props;\n    const resp = await stripe.createToken(cardNumberElement, {\n      address_zip: this.state.zipCode,\n    });\n    if (resp.error) {\n      throw new Error(\"An error occured while creating payment token\");\n    }\n    return resp.token.id;\n  }\n\n  async activate(cardNumberElement) {\n    const { dongleId, simId } = this.props;\n    const token = await this.tokenize(cardNumberElement);\n    let payResp;\n    try {\n      payResp = await Billing.payForPrime(dongleId, simId, token);\n    } catch(err) {\n      console.log('server error', err);\n      throw new Error('An error occurred');\n    }\n    if ('error' in payResp) {\n      if (payResp['error'] === \"Subscription already active\") {\n        this.props.onActivated(payResp);\n        return;\n      } else if (payResp['error'] === 'Payment failed') {\n        throw new Error('Card declined');\n      } else if (payResp['error'] === 'Invalid SIM') {\n        throw new Error('Invalid SIM. Make sure you have an unactivated comma SIM inserted');\n      } else {\n        console.log('unknown error', payResp);\n        throw new Error(payResp.error);\n      }\n    } else if (payResp['success']) {\n      this.props.onActivated(payResp);\n      return;\n    } else {\n      // wtf\n      console.log('unknown error', payResp);\n      throw new Error('An error occurred');\n    }\n  }\n\n  async updatePayment(cardElement) {\n    const token = await this.tokenize(cardElement);\n    let payResp;\n    try {\n      payResp = await Billing.updatePaymentMethod(token);\n    } catch(err) {\n      console.log('server error', err);\n      throw new Error('An error occurred');\n    }\n    if (payResp.error) {\n      let err = new Error();\n      if (typeof payResp.error === 'string') {\n        err.message = payResp.error;\n      } else {\n        err.message = 'Server error. Please try again';\n      }\n      throw err;\n    }\n    this.props.onActivated(payResp);\n  }\n\n  render() {\n    const { classes, simId, isUpdate, disabled, onCancel } = this.props;\n    const { activating, cardNumber, cardCvc, cardExpiry, zipCode, windowWidth } = this.state;\n\n    const disableFields = !simId && !isUpdate;\n    const canCheckout = !activating && (simId || isUpdate) && cardNumber && cardNumber.complete &&\n      cardCvc && cardCvc.complete && cardExpiry && cardExpiry.complete && zipCode && zipCode.length >= 3;\n\n    let buttonText = isUpdate ? 'Update' : 'Activate now';\n    if (activating) {\n      buttonText = isUpdate ? 'Updating...' : 'Activating...';\n    }\n\n    const stripeStyle = {\n      base: {\n        fontSize: '16px',\n        color: disableFields ? Colors.white20 : Colors.white,\n        '::placeholder': { color: disableFields ? Colors.grey400 : Colors.lightGrey500 },\n      },\n    };\n\n    const buttonSmallStyle = windowWidth < 514 ? { width: '100%' } : {};\n\n    return (\n      <>\n        <ResizeHandler onResize={ this.onResize } />\n        <div className={ classes.block }>\n          <Typography className={ classes.fieldLabel }>Card information</Typography>\n          <div className={ classes.stripeCardNumber }>\n            <CardNumberElement onChange={ this.handleCardInput } options={{\n              disabled: disableFields,\n              showIcon: true,\n              style: stripeStyle,\n            }} />\n          </div>\n          <div className={ classes.stripeCardOther }>\n            <CardExpiryElement onChange={ this.handleCardInput } options={{\n              disabled: disableFields,\n              style: stripeStyle,\n            }} />\n            <CardCvcElement onChange={ this.handleCardInput } options={{\n              disabled: disableFields,\n              style: stripeStyle,\n            }} />\n          </div>\n        </div>\n        <div className={ classes.block }>\n          <Typography className={ classes.fieldLabel }>Zipcode</Typography>\n          <TextField required style={{ maxWidth: '100%', width: 150 }} onChange={ this.handleZipInput }\n            disabled={ disableFields } InputProps={{ classes: { root: classes.inputRoot, input: classes.input }}}\n            placeholder=\"00000\" />\n        </div>\n        <div className={ classes.buttonsContainer }>\n          <Button disabled={ !canCheckout || disabled } className={ classes.buttons }\n            onClick={ this.submitPayment } style={ buttonSmallStyle }>\n            { buttonText }\n          </Button>\n          { onCancel &&\n            <Button className={ `${classes.buttons} ${classes.cancelButton}` } onClick={ onCancel }\n              style={ buttonSmallStyle }>\n              Cancel subscription\n            </Button> }\n        </div>\n      </>\n    );\n  }\n}\n\nconst InjectedCheckoutForm = (props) => {\n  return (\n    <Elements stripe={ stripe }>\n      <ElementsConsumer>\n        {({elements, stripe}) => (\n          <PrimePayment elements={ elements } stripe={ stripe } {...props} />\n        )}\n      </ElementsConsumer>\n    </Elements>\n  );\n};\n\nlet stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(InjectedCheckoutForm));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport moment from 'moment';\nimport ErrorIcon from '@material-ui/icons/ErrorOutline';\nimport { withStyles, Typography, Button, Modal, Paper, IconButton } from '@material-ui/core';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\n\nimport { billing as Billing} from '@commaai/comma-api'\nimport PrimePayment from './PrimePayment';\nimport { deviceTypePretty } from '../../utils';\nimport Timelineworker from '../../timeline';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  primeBox: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  primeContainer: {\n    borderBottom: `1px solid ${Colors.white10}`,\n    color: '#fff',\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  overviewBlock: {\n    marginTop: 20,\n  },\n  overviewBlockError: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockSuccess: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 255, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  manageItem: {\n    marginLeft: 10,\n  },\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    '& p': {\n      marginTop: 10,\n    },\n  },\n  closeButton: {\n    marginTop: 10,\n    float: 'right',\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  cancelModalButton: {\n    marginTop: 10,\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n    '&:disabled': {\n      backgroundColor: Colors.grey400,\n    },\n    '&:disabled:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  cancelError: {\n    backgroundColor: 'rgba(255, 0, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  cancelSuccess: {\n    backgroundColor: 'rgba(0, 255, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  paymentElement: {\n    maxWidth: 450,\n  },\n});\n\nclass PrimeManage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      cancelError: null,\n      cancelModal: false,\n      canceling: false,\n      windowWidth: window.innerWidth,\n    };\n\n    this.cancelPrime = this.cancelPrime.bind(this);\n    this.modalClose = this.modalClose.bind(this);\n    this.onPaymentUpdated = this.onPaymentUpdated.bind(this);\n  }\n\n  cancelPrime() {\n    this.setState({ canceling: true });\n    Billing.cancelPrime(this.props.dongleId).then((resp) => {\n      if (resp.success) {\n        this.setState({ canceling: false, cancelError: null, cancelSuccess: 'Cancelled subscription.' });\n      } else if (resp.error) {\n        this.setState({ canceling: false, cancelError: resp.description });\n      } else {\n        this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.'})\n      }\n    }).catch((err) => {\n      this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.' });\n    });\n  }\n\n  modalClose() {\n    if (this.state.cancelSuccess) {\n      window.location = window.location.origin;\n    } else {\n      this.setState({ cancelModal: false });\n    }\n  }\n\n  onPaymentUpdated(paymentMethod) {\n    Timelineworker.primeGetPaymentMethod(paymentMethod);\n    this.setState({ activated: true, error: null });\n  }\n\n  render() {\n    const { dongleId, subscription, classes, device } = this.props;\n    const { windowWidth } = this.state;\n    if (!subscription) {\n      console.log('device has prime, but no subscription found');\n      return ( <></> );\n    }\n\n    let paymentMethod = this.props.paymentMethod;\n    if (!paymentMethod) {\n      paymentMethod = {\n        brand: \"\",\n        last4: \"0000\",\n      };\n    }\n\n    let joinDate = moment.unix(subscription.subscribed_at).format('MMMM Do, YYYY');\n    let nextPaymentDate = moment.unix(subscription.next_charge_at).format('MMMM Do, YYYY');\n\n    const alias = device.alias || deviceTypePretty(device.device_type);\n    const simId = this.state.simInfo ? this.state.simInfo.sim_id : null;\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n\n    return (\n      <>\n        <ResizeHandler onResize={ (windowWidth) => this.setState({ windowWidth }) } />\n        <div className={ classes.primeBox }>\n          <div className={ classes.primeContainer } style={{ padding: `8px ${containerPadding}px` }}>\n            <IconButton aria-label=\"Go Back\" onClick={() => window.history.back()}>\n              <KeyboardBackspaceIcon />\n            </IconButton>\n          </div>\n          <div className={ classes.primeContainer } style={{ padding: `16px ${containerPadding}px` }}>\n            <Typography variant=\"title\">comma prime</Typography>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Device</Typography>\n              <div className={ classes.manageItem }>\n                <Typography variant=\"body2\">{ alias }</Typography>\n                <Typography variant=\"caption\" className={classes.deviceId}>({ device.dongle_id })</Typography>\n              </div>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Joined</Typography>\n              <Typography className={ classes.manageItem }>{ joinDate }</Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Payment method</Typography>\n              <Typography className={ classes.manageItem }>\n                { paymentMethod.brand }    { paymentMethod.last4 }\n              </Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Next payment</Typography>\n              <Typography className={ classes.manageItem }>{ nextPaymentDate }</Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Amount</Typography>\n              <Typography className={ classes.manageItem }>$24.00</Typography>\n            </div>\n          </div>\n          <div className={ classes.primeContainer } style={{ padding: `16px ${containerPadding}px` }}>\n            <Typography variant=\"title\">Update payment method</Typography>\n            { this.state.activated && <div className={ classes.overviewBlockSuccess }>\n              <Typography>Payment updated</Typography>\n            </div> }\n            { this.state.error && <div className={ classes.overviewBlockError }>\n              <ErrorIcon />\n              <Typography>{ this.state.error }</Typography>\n            </div> }\n            <div className={ classes.overviewBlock + \" \" + classes.paymentElement }>\n              <PrimePayment disabled={ Boolean(this.state.activated) } simId={ simId } isUpdate={ true }\n                onActivated={ this.onPaymentUpdated }\n                onError={ (err) => this.setState({error: err}) }\n                onCancel={ () => this.setState({ cancelModal: true }) } />\n            </div>\n          </div>\n        </div>\n        <Modal open={ this.state.cancelModal } onClose={ this.modalClose }>\n          <Paper className={classes.modal}>\n            <Typography variant=\"title\">Cancel prime subscription</Typography>\n            { this.state.cancelError && <div className={ classes.cancelError }>\n              <Typography>{ this.state.cancelError }</Typography>\n            </div> }\n            { this.state.cancelSuccess && <div className={ classes.cancelSuccess }>\n              <Typography>{ this.state.cancelSuccess }</Typography>\n            </div> }\n            <Typography>Device: {alias} ({ dongleId })</Typography>\n            <Typography>We're sorry to see you go.</Typography>\n            <Typography>\n              Cancelling will immediately suspend billing and comma prime membership benefits.\n            </Typography>\n            <Button variant=\"contained\" className={ classes.cancelModalButton } onClick={ this.cancelPrime }\n              disabled={ Boolean(this.state.cancelSuccess || this.state.canceling) }>\n              { this.state.canceling ? 'Canceling...' : 'Cancel subscription' }\n            </Button>\n            <Button variant=\"contained\" className={ classes.closeButton }\n              onClick={ this.modalClose }>\n              Close\n            </Button>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n  subscription: 'workerState.subscription',\n  paymentMethod: 'workerState.paymentMethod',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeManage));\n","import { athena as Athena } from '@commaai/comma-api';\n\nexport async function fetchSimInfo(dongleId) {\n  let payload = { method: 'getSimInfo', jsonrpc: '2.0', id: 0 };\n  return Athena.postJsonRpcPayload(dongleId, payload).then(\n    function(response) {\n      return new Promise(function(resolve, reject) {\n        let simInfo = response['result'];\n        let simIdIsValid = simInfo && simInfo.sim_id !== null && simInfo.sim_id.length >= 19 && simInfo.sim_id.length <= 22;\n\n        if ('error' in response || !simIdIsValid) {\n          let err = new Error();\n          if (!simIdIsValid) {\n            err.message = \"No SIM detected. Ensure SIM is securely inserted and try again.\";\n          } else if (response['error'] === \"Device not registered\" || response['error'] === \"Timed out\") {\n            err.message = \"Could not reach device.\\nConnect device to the internet and try again.\";\n          } else if(typeof response['error'] === 'object' && response['error']['message'] === \"Method not found\") {\n            err.message = \"Activation requires device version 0.6.1 or newer. Please upgrade and try again.\";\n          } else {\n            err.message = \"Server error. Please try again.\";\n          }\n          reject(err);\n        } else {\n          resolve({ simInfo });\n        }\n      })\n    }\n  ).catch(function(err) {\n    return new Promise(function(_, reject) {\n      if (err.message.indexOf('404') !== -1 || err.message.indexOf('408') !== -1) {\n        err.message = \"Could not reach your device.\\nConnect device to WiFi and try again.\";\n      } else if (err.message.indexOf('500') !== -1) {\n        err.message = \"Unexpected server error.\\nPlease try again.\";\n      }\n      reject(err);\n    })\n  });\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport {\n  withStyles,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\n\nimport CheckIcon from '@material-ui/icons/Check';\n\nconst styles = () => ({\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '7px 0',\n    '& svg': { alignSelf: 'flex-start' },\n  },\n  learnMore: {\n    marginBottom: 10,\n    '& a': { color: 'white' }\n  },\n});\n\nconst listItems = [\n  ['Real-time car location', null],\n  ['Take pictures remotely', null],\n  ['1 year storage of drive videos', null],\n  ['Simple SSH for developers', null],\n  ['24/7 connectivity', null],\n  ['Unlimited data at 512kbps', 'only offered in United States'],\n];\n\nclass PrimeChecklist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      moreInfo: (!props.collapsed),\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <>\n        <List className={ classes.checkList }>\n          { listItems.map((listItemText, i) => {\n            return <ListItem key={ i } className={ classes.checkListItem }>\n              <ListItemIcon><CheckIcon /></ListItemIcon>\n              <ListItemText primary={ listItemText[0] } secondary={ listItemText[1] } />\n            </ListItem>;\n          }) }\n        </List>\n        <Typography className={ classes.learnMore }>\n          Learn more about comma prime from our <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://comma.ai/faq\">FAQ</a>\n        </Typography>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeChecklist));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport moment from 'moment';\nimport { withStyles, Typography, IconButton, Modal, Paper, Button, CircularProgress } from '@material-ui/core';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\nimport ErrorIcon from '@material-ui/icons/ErrorOutline';\n\nimport { billing as Billing } from '@commaai/comma-api';\n\nimport { deviceTypePretty } from '../../utils';\nimport { fetchSimInfo } from './util';\nimport PrimeChecklist from './PrimeChecklist';\nimport PrimePayment from './PrimePayment';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  primeBox: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  primeContainer: {\n    borderBottom: `1px solid ${Colors.white10}`,\n    color: '#fff',\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  moreInfoContainer: {\n    '& p': { display: 'inline' },\n    '& button': { display: 'inline', marginLeft: '15px' },\n  },\n  introLine: {\n    lineHeight: '23px',\n  },\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '5px 0',\n    '& svg': { margin: 0 },\n  },\n  deviceId: {\n    color: '#525E66',\n  },\n  leftMargin: {\n    marginLeft: 10,\n  },\n  deviceBlock: {\n    marginLeft: 10,\n    '& aside': { display: 'inline', marginRight: 5, },\n    '& span': { display: 'inline', },\n  },\n  overviewBlock: {\n    marginTop: 20,\n  },\n  overviewBlockError: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockLoading: {\n    marginTop: 15,\n    padding: 10,\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  paymentElement: {\n    maxWidth: 400,\n  },\n  chargeText: {\n    marginBottom: 10,\n  },\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    '& p': {\n      marginTop: 10,\n    },\n  },\n  closeButton: {\n    marginTop: 10,\n    float: 'right',\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n});\n\nclass PrimeCheckout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      simInfo: null,\n      simInfoLoading: false,\n      activated: null,\n      new_subscription: null,\n      windowWidth: window.innerWidth,\n    };\n\n    this.onPrimeActivated = this.onPrimeActivated.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ simInfoLoading: true });\n    fetchSimInfo(this.props.dongleId).then((result) => {\n      this.setState({ simInfo: result.simInfo, simInfoLoading: false });\n    }).catch((err) => {\n      this.setState({ error: err.message, simInfoLoading: false });\n    });\n  }\n\n  isTrialClaimable() {\n    return this.props.subscription && this.props.subscription.trial_claimable;\n  }\n\n  firstChargeDate() {\n    if (this.props.subscription) {\n      return moment.unix(this.props.subscription.trial_end).format(\"MMMM Do\")\n    } else {\n      return null;\n    }\n  }\n\n  claimEndDate() {\n    if (this.props.subscription && this.props.subscription.trial_claim_end) {\n      return moment.unix(this.props.subscription.trial_claim_end).format(\"MMMM Do\")\n    } else {\n      return null;\n    }\n  }\n\n  onPrimeActivated(resp) {\n    if (resp.success) {\n      this.setState({ activated: resp, error: null });\n      Billing.getSubscription(this.props.dongleId).then((subscription) => {\n        this.setState({ new_subscription: subscription });\n      });\n    } else if (resp.error) {\n      this.setState({ error: resp.error });\n    }\n  }\n\n  render() {\n    const { classes, device, dongleId } = this.props;\n    const { new_subscription, windowWidth, activated, simInfo, simInfoLoading, error } = this.state;\n\n    const alias = device.alias || deviceTypePretty(device.device_type);\n\n    let chargeText = ['You will be charged $24.00 today and monthly thereafter.'];\n    if (this.isTrialClaimable()) {\n      chargeText = [`Fill in your payment information to claim your trial.`,\n        `You will be charged $24.00 on ${this.firstChargeDate()} and monthly thereafter.`];\n      if (this.claimEndDate()) {\n        chargeText.push(`Offer only valid until ${this.claimEndDate()}.`);\n      }\n    }\n\n    const simId = simInfo ? simInfo.sim_id : null;\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n\n    return ( <>\n      <div className={ classes.primeBox }>\n        <ResizeHandler onResize={ (windowWidth) => this.setState({ windowWidth }) } />\n        <div className={ classes.primeContainer } style={{ padding: `8px ${containerPadding}px` }}>\n          <IconButton aria-label=\"Go Back\" onClick={() => window.history.back()}>\n            <KeyboardBackspaceIcon />\n          </IconButton>\n        </div>\n        <div className={ classes.primeContainer } style={{ padding: `16px ${containerPadding}px` }}>\n          <Typography variant=\"title\">comma prime</Typography>\n          <Typography className={ classes.introLine }>Become a comma prime member today for only $24/month</Typography>\n          <PrimeChecklist />\n        </div>\n        <div className={ classes.primeContainer } style={{ padding: `16px ${containerPadding}px` }}>\n          <Typography variant=\"title\">checkout</Typography>\n          { error && <div className={ classes.overviewBlockError }>\n            <ErrorIcon />\n            <Typography>{ error }</Typography>\n          </div> }\n          { simInfoLoading && <div className={ classes.overviewBlockLoading }>\n            <CircularProgress size={ 19 } style={{ color: Colors.white }} />\n            <Typography>Fetching SIM data</Typography>\n          </div> }\n          <div className={ classes.overviewBlock }>\n            <Typography variant=\"subheading\">Device</Typography>\n            <div className={ classes.deviceBlock }>\n              <Typography variant=\"body2\">{ alias }</Typography>\n              <Typography variant=\"caption\" className={classes.deviceId}>({ device.dongle_id })</Typography>\n            </div>\n          </div>\n          <div className={ classes.overviewBlock }>\n            { chargeText.map((txt, i) => {\n              return <Typography key={i} className={ classes.chargeText }>{ txt }</Typography>\n            }) }\n          </div>\n          <div className={ classes.overviewBlock + \" \" + classes.paymentElement }>\n            <PrimePayment disabled={ Boolean(activated) } simId={ simId }\n              onActivated={ this.onPrimeActivated }\n              onError={ (err) => this.setState({ error: err }) } />\n          </div>\n        </div>\n      </div>\n      <Modal open={ Boolean(activated) } onClose={ () => window.location = window.location.origin }>\n        <Paper className={classes.modal}>\n          <Typography variant=\"title\">comma prime activated</Typography>\n          <Typography>Device: {alias} ({ dongleId })</Typography>\n          { activated && new_subscription && new_subscription.is_prime_sim &&\n            <Typography>\n              Connectivity will be enabled as soon as activation propagates to your local cell tower. Rebooting your device may help.\n            </Typography>\n          }\n          <Button variant=\"contained\" className={ classes.closeButton }\n            onClick={ () => window.location = window.location.origin }>\n            Close\n          </Button>\n        </Paper>\n      </Modal>\n    </> );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n  subscription: 'workerState.subscription',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeCheckout));\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport PrimeManage from './PrimeManage';\nimport PrimeCheckout from './PrimeCheckout';\nimport { Typography } from '@material-ui/core';\n\nclass Prime extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    if (!this.props.device.is_owner && !this.props.isSuperUser) {\n      return ( <Typography>No access</Typography> );\n    }\n    if (this.props.device.prime) {\n      return ( <PrimeManage /> );\n    }\n    return ( <PrimeCheckout /> );\n  }\n}\n\nconst stateToProps = Obstruction({\n  subscription: 'workerState.subscription',\n  device: 'workerState.device',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(Prime);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { withStyles, Typography, Button } from '@material-ui/core';\n\nimport { primeNav } from '../../actions';\nimport PrimeChecklist from './PrimeChecklist';\nimport Colors from '../../colors';\nimport ResizeHandler from '../ResizeHandler';\n\nconst styles = () => ({\n  primeContainer: {\n    padding: 16,\n    borderBottom: `1px solid ${Colors.white10}`,\n    color: Colors.white,\n  },\n  introLine: {\n    display: 'inline',\n    lineHeight: '23px',\n  },\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '5px 0',\n    '& svg': { margin: 0 },\n  },\n  moreInfoButton: {\n    borderRadius: 30,\n    minHeight: 'unset',\n    padding: '2px 8px',\n    marginLeft: '15px',\n    display: 'inline',\n  },\n  activateButton: {\n    backgroundColor: Colors.white,\n    borderRadius: 30,\n    color: '#404B4F',\n    textTransform: 'none',\n    width: 300,\n    maxWidth: '100%',\n    '&:hover': {\n      backgroundColor: Colors.white70,\n      color: '#404B4F',\n    }\n  },\n});\n\nclass PrimeBanner extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      moreInfo: (!props.collapsed),\n      windowWidth: window.innerWidth,\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { windowWidth, moreInfo } = this.state;\n\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n\n    return (\n      <div className={ classes.primeContainer } style={{ padding: `16px ${containerPadding}px` }}>\n        <ResizeHandler onResize={ (windowWidth) => this.setState({ windowWidth }) } />\n        <Typography variant=\"title\">comma prime</Typography>\n        <Typography classes={{ root: classes.introLine }}>\n          Become a comma prime member today for only $24/month\n        </Typography>\n        { moreInfo ? <>\n          <PrimeChecklist />\n          <Button size=\"large\" className={ classes.activateButton }\n            onClick={ () => this.props.dispatch(primeNav()) }>\n            Activate comma prime\n          </Button>\n        </> :\n          <Button onClick={ () => this.setState({ moreInfo: true }) } className={ classes.moreInfoButton }>\n            More info\n          </Button>\n        }\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeBanner));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport debounce from 'debounce';\nimport ReactMapGL, { GeolocateControl, HTMLOverlay, Marker, Source, WebMercatorViewport, Layer} from 'react-map-gl';\nimport { withStyles, TextField, InputAdornment, Typography, Button, Menu, MenuItem, CircularProgress, Popper }\n  from '@material-ui/core';\nimport { Search, Clear, Refresh } from '@material-ui/icons';\nimport moment from 'moment';\n\nimport { devices as Devices, navigation as NavigationAPI, athena as AthenaApi } from '@commaai/comma-api';\nimport Colors from '../../colors';\nimport GeocodeApi from '../../api/geocode';\nimport { pin_car, pin_marker, pin_home, pin_work, pin_pinned } from '../../icons';\nimport ResizeHandler from '../ResizeHandler';\nimport * as Demo from '../../demo';\n\nconst MAP_STYLE = 'mapbox://styles/commaai/cjj4yzqk201c52ss60ebmow0w';\nconst styles = () => ({\n  noWrap: {\n    whiteSpace: 'nowrap',\n  },\n  mapContainer: {\n    borderBottom: `1px solid ${Colors.white10}`,\n  },\n  geolocateControl: {\n    display: 'none',\n  },\n  overlay: {\n    color: Colors.white,\n    borderRadius: 22,\n    padding: '12px 16px',\n    border: `1px solid ${Colors.white10}`,\n    backgroundColor: Colors.grey800,\n    maxHeight: 'calc(60vh - 20px)',\n    display: 'flex',\n    flexDirection: 'column',\n    outline: 'none !important',\n  },\n  overlayTextfield: {\n    borderRadius: 0,\n    '& input': {\n      padding: 0,\n      height: 24,\n    },\n  },\n  overlaySearchButton: {\n    color: Colors.white30,\n  },\n  overlayClearButton: {\n    color: Colors.white30,\n    cursor: 'pointer',\n  },\n  overlaySearchResults: {\n    marginTop: 5,\n    borderTop: `1px solid ${Colors.white20}`,\n    flexGrow: 1,\n    overflow: 'auto',\n  },\n  overlaySearchItem: {\n    cursor: 'pointer',\n    marginTop: 15,\n  },\n  overlaySearchNoResults: {\n    marginTop: 10,\n    fontSize: 14,\n  },\n  overlaySearchNoLocation: {\n    marginTop: 10,\n    fontSize: 14,\n    color: Colors.orange100,\n  },\n  overlaySearchDetails: {\n    color: Colors.white40,\n  },\n  searchSelectBox: {\n    borderRadius: 22,\n    padding: '12px 16px',\n    border: `1px solid ${Colors.white10}`,\n    backgroundColor: Colors.grey800,\n    color: Colors.white,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  searchSelectBoxHeader: {\n    display: 'flex',\n    width: '100%',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 10,\n  },\n  searchSelectBoxTitle: {\n    flexBasis: 'auto',\n  },\n  searchSelectBoxButtons: {\n    display: 'flex',\n    flexWrap: 'wrap-reverse',\n    justifyContent: 'flex-end',\n    alignItems: 'flex-end',\n  },\n  bold: {\n    fontWeight: 600,\n  },\n  searchSelectButton: {\n    marginLeft: 8,\n    padding: '6px 12px',\n    backgroundColor: Colors.white,\n    borderRadius: 15,\n    color: '#404B4F',\n    textTransform: 'none',\n    minHeight: 'unset',\n    flexGrow: 1,\n    maxWidth: 125,\n    '&:hover': {\n      background: '#ddd',\n      color: '#404B4F',\n    },\n    '&:disabled': {\n      background: '#ddd',\n      color: '#404B4F',\n    },\n  },\n  searchSelectButtonFake: {\n    background: '#ddd',\n    minWidth: 81.4,\n    textAlign: 'center',\n    display: 'inline-flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 10,\n    '& p': {\n      color: '#404B4F',\n      lineHeight: '1.4em',\n      fontWeight: 500,\n    },\n  },\n  searchSelectBoxDetails: {\n    color: Colors.white40,\n  },\n  pin: {\n    width: 20,\n    height: 32,\n  },\n  pinClick: {\n    width: 22.5,\n    height: 32,\n    cursor: 'pointer',\n  },\n  favoritePin: {\n    width: 15,\n    height: 24,\n    cursor: 'pointer',\n  },\n  carPinTooltip: {\n    textAlign: 'center',\n    borderRadius: 14,\n    fontSize: '0.8em',\n    padding: '6px 8px',\n    border: `1px solid ${Colors.white10}`,\n    backgroundColor: Colors.grey800,\n    color: Colors.white,\n  },\n  saveAsMenuItem: {\n    justifyContent: 'center',\n  },\n  savedNextPopover: {\n    borderRadius: 22,\n    padding: '8px 16px',\n    border: `1px solid ${Colors.white10}`,\n    backgroundColor: Colors.grey800,\n    marginTop: 5,\n    textAlign: 'center',\n    '& p:first-child': {\n      fontWeight: 500,\n    },\n  },\n  researchArea: {\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 18,\n    padding: '6px 16px',\n    border: `1px solid ${Colors.white10}`,\n    backgroundColor: Colors.grey800,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey900,\n    },\n    '& svg': {\n      marginRight: 6,\n    }\n  },\n  clearSearchSelect: {\n    padding: 5,\n    fontSize: 20,\n    cursor: 'pointer',\n    position: 'absolute',\n    left: -6,\n    top: -8,\n    height: 24,\n    width: 24,\n    borderRadius: 12,\n    backgroundColor: Colors.grey900,\n    color: Colors.white,\n    border: `1px solid ${Colors.grey600}`,\n    '&:hover': {\n      backgroundColor: Colors.grey700,\n    },\n  },\n});\n\nconst initialState = {\n  hasFocus: false,\n  carLastLocation: null,\n  carLastLocationTime: null,\n  carNetworkLocation: null,\n  carNetworkLocationAccuracy: null,\n  favoriteLocations: [],\n  geoLocateCoords: null,\n  search: null,\n  route: null,\n  searchSelect: null,\n  searchLooking: false,\n  noFly: false,\n  windowWidth: window.innerWidth,\n  saveAsMenu: null,\n  savingAs: false,\n  savedAs: false,\n}\n\nclass Navigation extends Component {\n  constructor(props) {\n    super(props);\n    this.mounted = null;\n    this.state = {\n      ...initialState,\n      viewport: {\n        longitude: -117.20,\n        latitude: 32.73,\n        zoom: 5,\n      },\n      windowWidth: window.innerWidth,\n    };\n\n    this.searchInputRef = React.createRef();\n    this.searchSelectBoxRef = React.createRef();\n    this.overlayRef = React.createRef();\n    this.carPinTooltipRef = React.createRef();\n    this.navigateFakeButtonRef = React.createRef();\n\n    this.flyToMarkers = this.flyToMarkers.bind(this);\n    this.renderOverlay = this.renderOverlay.bind(this);\n    this.renderSearchOverlay = this.renderSearchOverlay.bind(this);\n    this.renderResearchArea = this.renderResearchArea.bind(this);\n    this.onGeolocate = this.onGeolocate.bind(this);\n    this.onSearch = debounce(this.onSearch.bind(this), 200);\n    this.onFocus = this.onFocus.bind(this);\n    this.onSearchSelect = this.onSearchSelect.bind(this);\n    this.researchArea = this.researchArea.bind(this);\n    this.onFavoriteSelect = this.onFavoriteSelect.bind(this);\n    this.onSearchBlur = this.onSearchBlur.bind(this);\n    this.focus = this.focus.bind(this);\n    this.updateDevice = this.updateDevice.bind(this);\n    this.updateFavoriteLocations = this.updateFavoriteLocations.bind(this);\n    this.getFavoriteLabelIcon = this.getFavoriteLabelIcon.bind(this);\n    this.formatDistance = this.formatDistance.bind(this);\n    this.formatDuration = this.formatDuration.bind(this);\n    this.navigate = this.navigate.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.toggleCarPinTooltip = this.toggleCarPinTooltip.bind(this);\n    this.clearSearch = this.clearSearch.bind(this);\n    this.formatSearchName = this.formatSearchName.bind(this);\n    this.formatSearchDetails = this.formatSearchDetails.bind(this);\n    this.itemLoc = this.itemLoc.bind(this);\n    this.itemLngLat = this.itemLngLat.bind(this);\n    this.saveSearchAs = this.saveSearchAs.bind(this);\n    this.deleteFavorite = this.deleteFavorite.bind(this);\n    this.viewportChange = this.viewportChange.bind(this);\n    this.getDeviceLastLocation = this.getDeviceLastLocation.bind(this);\n    this.getDeviceNetworkLocation = this.getDeviceNetworkLocation.bind(this);\n    this.getCarLocation = this.getCarLocation.bind(this);\n    this.carLocationCircle = this.carLocationCircle.bind(this);\n    this.clearSearchSelect = this.clearSearchSelect.bind(this);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.componentDidUpdate({}, {});\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { dongleId } = this.props;\n    const { geoLocateCoords, search, carLastLocation, carNetworkLocation, searchSelect } = this.state;\n\n    if ((carLastLocation && !prevState.carLastLocation) || (carNetworkLocation && !prevState.carNetworkLocation) ||\n      (geoLocateCoords && !prevState.geoLocateCoords) || (searchSelect && prevState.searchSelect !== searchSelect) ||\n      (search && prevState.search !== search))\n    {\n      this.flyToMarkers();\n    }\n\n    if (prevProps.dongleId !== dongleId) {\n      this.setState({\n        ...initialState,\n        windowWidth: window.innerWidth,\n      });\n      if (this.searchInputRef.current) {\n        this.searchInputRef.current.value = '';\n      }\n      this.updateDevice();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  updateDevice() {\n    if (Demo.isDemo()) {\n      return;\n    }\n\n    this.getDeviceLastLocation();\n    this.getDeviceNetworkLocation();\n    this.updateFavoriteLocations();\n  }\n\n  async getDeviceLastLocation() {\n    const { dongleId } = this.props;\n    try {\n      const resp = await Devices.fetchLocation(dongleId);\n      if (this.mounted && dongleId === this.props.dongleId) {\n        this.setState({\n          carLastLocation: [resp.lng, resp.lat],\n          carLastLocationTime: resp.time,\n        }, this.flyToMarkers);\n      }\n    } catch(err) {\n      if (!err.message || err.message.indexOf('no_segments_uploaded') === -1) {\n        console.log(err);\n      }\n    }\n  }\n\n  async getDeviceNetworkLocation() {\n    const { dongleId, hasNav } = this.props;\n    if (!hasNav) {\n      return;\n    }\n\n    const payload = {\n      method: \"getNetworks\",\n      jsonrpc: \"2.0\",\n      id: 0,\n    };\n    try {\n      let resp = await AthenaApi.postJsonRpcPayload(dongleId, payload);\n      if (!resp.result) {\n        return;\n      }\n      resp = await GeocodeApi().networkPositioning(resp.result);\n      if (resp && this.mounted && dongleId === this.props.dongleId) {\n        this.setState({\n          carNetworkLocation: [resp.lng, resp.lat],\n          carNetworkLocationAccuracy: resp.accuracy,\n        }, this.flyToMarkers);\n      }\n    } catch (err) {\n      if (!err.message || err.message.indexOf('{\"error\": \"Device not registered\"}') === -1) {\n        console.log(err);\n      }\n    }\n  }\n\n  getCarLocation() {\n    const { carLastLocation, carLastLocationTime, carNetworkLocation, carNetworkLocationAccuracy } = this.state;\n\n    if (carNetworkLocation && carNetworkLocationAccuracy <= 10000 &&\n      (carNetworkLocationAccuracy <= 100 || !carLastLocation))\n    {\n      return {\n        location: carNetworkLocation,\n        accuracy: carNetworkLocationAccuracy,\n        time: Date.now(),\n      };\n    }\n    if (carLastLocation) {\n      return {\n        location: carLastLocation,\n        accuracy: 0,\n        time: carLastLocationTime,\n      };\n    }\n    return null;\n  }\n\n  updateFavoriteLocations() {\n    const { dongleId, hasNav } = this.props;\n    if (!hasNav || Demo.isDemo()) {\n      return;\n    }\n\n    NavigationAPI.getLocationsData(dongleId).then((resp) => {\n      if (this.mounted && dongleId === this.props.dongleId) {\n        let favorites = {};\n        resp.forEach((loc) => {\n          if (loc.save_type === 'favorite') {\n            favorites[loc.id] = {\n              ...loc,\n              icon: this.getFavoriteLabelIcon(loc.label),\n            };\n          }\n        });\n        this.setState({ favoriteLocations: favorites });\n      }\n    }).catch(console.log);\n  }\n\n  getFavoriteLabelIcon(label) {\n    switch (label) {\n      case 'home':\n        return pin_home;\n      case 'work':\n        return pin_work;\n      default:\n        return pin_pinned;\n      }\n  }\n\n  onGeolocate(pos) {\n    if (pos && pos.coords) {\n      this.setState({ geoLocateCoords: [pos.coords.longitude, pos.coords.latitude] });\n    }\n  }\n\n  onSearch() {\n    const searchInput = this.searchInputRef.current;\n    this.focus();\n    if (searchInput && searchInput.value.length >= 3) {\n      const vp = this.state.viewport;\n      const carLoc = this.getCarLocation();\n      const proximity = (carLoc ? carLoc.location : null) || this.state.geoLocateCoords || [vp.longitude, vp.latitude];\n      GeocodeApi().forwardLookup(searchInput.value, proximity).then((features) => {\n        this.setState({\n          noFly: false,\n          searchSelect: null,\n          search: features.filter((item) =>\n            !(['categoryQuery', 'chainQuery', 'administrativeArea'].includes(item.resultType))).slice(0, 10),\n          searchLooking: false,\n          savingAs: false,\n          savedAs: false,\n        });\n      }).catch((err) => {\n        console.log(err);\n      });\n    } else {\n      this.setState({\n        noFly: false,\n        searchSelect: null,\n        search: null,\n        searchLooking: false,\n        savingAs: false,\n        savedAs: false\n      });\n    }\n  }\n\n  onFocus() {\n    const searchInput = this.searchInputRef.current;\n    this.focus();\n    if (searchInput && searchInput.value.length >= 3) {\n      this.setState({\n        noFly: false,\n        searchSelect: null,\n        searchLooking: false,\n        savingAs: false,\n        savedAs: false,\n      });\n    } else {\n      this.setState({\n        noFly: false,\n        searchSelect: null,\n        search: null,\n        searchLooking: false,\n        savingAs: false,\n        savedAs: false\n      });\n    }\n  }\n\n  onSearchSelect(item) {\n    this.setState({\n      noFly: false,\n      searchSelect: item,\n      searchLooking: false,\n    });\n    const carLoc = this.getCarLocation();\n    const startLocation = (carLoc ? carLoc.location : null) || this.state.geoLocateCoords || null;\n    if (startLocation) {\n      GeocodeApi().getDirections([startLocation, this.itemLngLat(item)]).then((route) => {\n        this.setState({\n          searchSelect: {\n            ...item,\n            route: route[0],\n          },\n          searchLooking: false,\n        });\n      });\n    }\n  }\n\n  onFavoriteSelect(id, loc) {\n    this.focus();\n    const item = {\n      favoriteId: id,\n      favoriteIcon: loc.icon,\n      title: loc.place_name,\n      address: {\n        label: `${loc.place_name}, ${loc.place_details}`,\n      },\n      resultType: 'place',\n      position: {\n        lat: loc.latitude,\n        lng: loc.longitude,\n      },\n    };\n    this.onSearchSelect(item);\n  }\n\n  onSearchBlur(ev) {\n    if (this.state.search && this.searchInputRef.current &&\n      this.overlayRef.current && this.overlayRef.current !== ev.relatedTarget)\n    {\n      this.setState({ searchLooking: true });\n    }\n  }\n\n  clearSearch() {\n    if (this.searchInputRef.current) {\n      this.searchInputRef.current.value = '';\n      this.searchInputRef.current.focus();\n    }\n    this.setState({\n      noFly: false,\n      search: null,\n      route: null,\n      searchSelect: null,\n      searchLooking: false,\n      savingAs: false,\n      savedAs: false,\n    });\n  }\n\n  clearSearchSelect() {\n    this.setState({\n      noFly: false,\n      route: null,\n      searchSelect: null,\n      searchLooking: false,\n      savingAs: false,\n      savedAs: false,\n    });\n    this.onSearch();\n  }\n\n  flyToMarkers() {\n    const { hasNav } = this.props;\n    const { noFly, geoLocateCoords, search, searchSelect, windowWidth, viewport } = this.state;\n    const carLocation = this.getCarLocation();\n\n    if (noFly) {\n      return;\n    }\n\n    const bounds = [];\n    if (geoLocateCoords) {\n      bounds.push([geoLocateCoords, geoLocateCoords]);\n    }\n    if (carLocation) {\n      bounds.push([carLocation.location, carLocation.location]);\n    }\n    if (searchSelect) {\n      bounds.push(this.itemLngLat(searchSelect, true));\n    } else if (search) {\n      search.forEach((item) => bounds.push(this.itemLngLat(item, true)));\n    }\n\n    if (bounds.length) {\n      const bbox = [[\n        Math.min.apply(null, bounds.map((e) => e[0][0])),\n        Math.min.apply(null, bounds.map((e) => e[0][1])),\n      ], [\n        Math.max.apply(null, bounds.map((e) => e[1][0])),\n        Math.max.apply(null, bounds.map((e) => e[1][1])),\n      ]];\n\n      const bottomBoxHeight = (this.searchSelectBoxRef.current && viewport.height > 200) ?\n        this.searchSelectBoxRef.current.getBoundingClientRect().height + 10 : 0\n      const padding = {\n        left: (windowWidth < 600 || !search) ? 20 : 390,\n        right: 20,\n        top: hasNav ? 82 : 20,\n        bottom: bottomBoxHeight + 20,\n      };\n      if (viewport.width) {\n        this.setState({\n          viewport: new WebMercatorViewport(viewport).fitBounds(bbox, { padding: padding, maxZoom: 10 })\n        });\n      }\n    }\n  }\n\n  focus() {\n    if (!this.state.hasFocus) {\n      this.setState({ hasFocus: true });\n    }\n  }\n\n  formatDistance(route) {\n    const meters = route.distance;\n\n    let metric = true;\n    try {\n      route.legs[0].admins.forEach((adm) => {\n        if (['US', 'GB'].includes(adm.iso_3166_1)) {\n          metric = false;\n        }\n      });\n    } catch (err) {\n      metric = false;\n    }\n\n    if (metric) {\n      return (meters / 1000.0).toFixed(1) + \" km\";\n    }\n    return (meters / 1609.34).toFixed(1) + \" mi\";\n  }\n\n  formatDuration(route) {\n    const seconds = route.duration;\n    let mins = Math.round(seconds / 60.0);\n    let res = '';\n    if (mins >= 60) {\n      const hours = Math.floor(mins / 60.0);\n      mins -= hours * 60;\n      res += `${hours} hr `;\n    }\n    return `${res}${mins} min`;\n  }\n\n  formatSearchName(item) {\n    if (item.resultType === 'place') {\n      return item.title;\n    } else {\n      return item.title.split(',', 1)[0];\n    }\n  }\n\n  formatSearchDetails(item, comma=false) {\n    const name = this.formatSearchName(item);\n    const addrLabelName = item.address.label.split(',', 1)[0];\n    let res;\n    if (name.substr(0, addrLabelName.length) === addrLabelName) {\n      res = item.address.label.split(', ').slice(1).join(', ');\n    } else {\n      res = item.address.label;\n    }\n    if (res.length) {\n      return (comma ? ', ' : '') + res;\n    }\n  }\n\n  itemLoc(item) {\n    if (item.access && item.access.length) {\n      return item.access[0];\n    }\n    return item.position;\n  }\n\n  itemLngLat(item, bounds=false) {\n    const pos = this.itemLoc(item);\n    const res = [pos.lng, pos.lat];\n    return bounds ? [res, res] : res;\n  }\n\n  navigate() {\n    const { dongleId, hasNav } = this.props;\n    const { searchSelect } = this.state;\n\n    if (!hasNav) {\n      return;\n    }\n\n    this.setState({ searchSelect: {\n      ...searchSelect,\n      settingDest: true,\n      success: false,\n    }});\n\n    const pos = this.itemLoc(searchSelect);\n    NavigationAPI.setDestination(dongleId, pos.lat, pos.lng,\n      this.formatSearchName(searchSelect), this.formatSearchDetails(searchSelect))\n    .then((resp) => {\n      if (resp.error) {\n        throw new Error(resp.error);\n      }\n\n      this.setState({ searchSelect: {\n        ...searchSelect,\n        settingDest: true,\n        success: resp.success,\n        saved_next: resp.saved_next,\n      }});\n    }).catch((err) => {\n      console.log(`failed to set destination: ${err.message}`);\n      this.setState({ searchSelect: {\n        ...searchSelect,\n        settingDest: false,\n        success: false,\n      }});\n    });\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  toggleCarPinTooltip(visible) {\n    const tooltip = this.carPinTooltipRef.current;\n    if (tooltip) {\n      tooltip.style.display = visible ? 'block' : 'none';\n    }\n  }\n\n  saveSearchAs(as) {\n    const { dongleId } = this.props;\n    const { searchSelect } = this.state;\n    this.setState({ saveAsMenu: null, savingAs: true });\n\n    const pos = this.itemLoc(searchSelect);\n    const label = as === 'pin' ? undefined : as;\n    NavigationAPI.putLocationSave(dongleId, pos.lat, pos.lng,\n      this.formatSearchName(searchSelect), this.formatSearchDetails(searchSelect), 'favorite', label)\n    .then((resp) => {\n      this.updateFavoriteLocations();\n      this.setState({\n        savingAs: false,\n        savedAs: true,\n        searchSelect: {\n          ...searchSelect,\n          favoriteIcon: this.getFavoriteLabelIcon(label),\n        },\n      });\n    }).catch((err) => {\n      console.log(err);\n      this.setState({ savingAs: false, savedAs: false });\n    });\n  }\n\n  deleteFavorite() {\n    const { dongleId } = this.props;\n    const { searchSelect } = this.state;\n    if (searchSelect.favoriteId) {\n      this.setState({ savingAs: true });\n      NavigationAPI.deleteLocationSave(dongleId, searchSelect.favoriteId).then((resp) => {\n        this.updateFavoriteLocations();\n        this.setState({\n          savingAs: false,\n          savedAs: true,\n          searchSelect: {\n            ...searchSelect,\n            favoriteIcon: undefined,\n          },\n        });\n      }).catch((err) => {\n        console.log(err);\n        this.setState({ savingAs: false, savedAs: false });\n      });\n    }\n  }\n\n  researchArea() {\n    const { viewport, windowWidth } = this.state;\n    const searchInput = this.searchInputRef.current;\n\n    GeocodeApi().forwardLookup(searchInput.value, null, viewport).then((features) => {\n      this.setState({\n        noFly: true,\n        searchSelect: null,\n        search: features.filter((item) =>\n          !(['categoryQuery', 'chainQuery', 'administrativeArea'].includes(item.resultType))).slice(0, 10),\n        searchLooking: windowWidth < 600,\n        savingAs: false,\n        savedAs: false,\n      });\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  viewportChange(viewport, interactionState) {\n    const { search, searchSelect, searchLooking } = this.state;\n    this.setState({ viewport });\n\n    if (interactionState.isPanning || interactionState.isZooming || interactionState.isRotating) {\n      this.focus();\n\n      if (search && !searchSelect && !searchLooking) {\n        this.setState({ searchLooking: true, noFly: true });\n      }\n    }\n  }\n\n  carLocationCircle(carLocation) {\n    const points = 128;\n    const km = carLocation.accuracy / 1000;\n\n    const distanceX = km / (111.320 * Math.cos(carLocation.location[1] * Math.PI / 180));\n    const distanceY = km / 110.574;\n\n    let res = [];\n    let theta, x, y;\n    for (let i = 0; i < points; i++) {\n      theta = (i / points) * (2 * Math.PI);\n      x = distanceX * Math.cos(theta);\n      y = distanceY * Math.sin(theta);\n\n      res.push([carLocation.location[0] + x, carLocation.location[1] + y]);\n    }\n    res.push(res[0]);\n\n    return {\n      \"type\": \"FeatureCollection\",\n      \"features\": [{\n        \"type\": \"Feature\",\n        \"geometry\": {\n          \"type\": \"Polygon\",\n          \"coordinates\": [res],\n        }\n      }],\n    };\n  };\n\n  render() {\n    const { classes, hasNav } = this.props;\n    const { hasFocus, search, searchLooking, searchSelect, favoriteLocations, viewport, windowWidth } = this.state;\n    const carLocation = this.getCarLocation();\n\n    const cardStyle = windowWidth < 600 ?\n      { width: 'auto', height: 'auto', top: 'auto', bottom: 'auto', left: 10, right: 10 } :\n      { width: 360, height: 'auto', top: 'auto', bottom: 'auto', left: 10 };\n\n    let carPinTooltipStyle = { transform: 'translate(calc(-50% + 10px), -4px)' };\n    if (carLocation) {\n      const pixelsAvailable = viewport.height - new WebMercatorViewport(viewport).project(carLocation.location)[1];\n      if (pixelsAvailable < 50) {\n        carPinTooltipStyle = { transform: 'translate(calc(-50% + 10px), -81px)' };\n      }\n    }\n\n    return (\n      <div className={ classes.mapContainer } style={{ height: (hasFocus && hasNav) ? '60vh' : 200 }}>\n        <ResizeHandler onResize={ this.onResize } />\n        <ReactMapGL { ...viewport } onViewportChange={ this.viewportChange } onContextMenu={ null }\n          mapStyle={ MAP_STYLE } width=\"100%\" height=\"100%\" onNativeClick={ this.focus } maxPitch={ 0 }\n          mapboxApiAccessToken={ process.env.REACT_APP_MAPBOX_TOKEN } attributionControl={ false } dragRotate={ false }>\n          <GeolocateControl className={ classes.geolocateControl } positionOptions={{ enableHighAccuracy: true }}\n            showAccuracyCircle={ false } onGeolocate={ this.onGeolocate } auto={ hasFocus }\n            fitBoundsOptions={{ maxZoom: 10 }} trackUserLocation={true} onViewportChange={ () => {} } />\n          { searchSelect && searchSelect.route &&\n            <Source id=\"my-data\" type=\"geojson\" data={ searchSelect.route.geometry }>\n              <Layer type=\"line\" layout={{ 'line-cap': 'round', 'line-join': 'bevel' }}\n                paint={{ 'line-color': '#31a1ee', 'line-width': 3, 'line-blur': 1 }}  />\n            </Source>\n          }\n          { !search && !searchSelect && favoriteLocations && Object.entries(favoriteLocations).map(([id, loc]) =>\n            <Marker latitude={ loc.latitude } longitude={ loc.longitude } key={ id } offsetLeft={ -7.5 }\n              offsetTop={ -24 } captureDrag={ false } captureClick={ false } captureDoubleClick={ false }>\n              <img className={ classes.favoritePin } src={ loc.icon } onClick={ () => this.onFavoriteSelect(id, loc) } />\n            </Marker>\n          )}\n          { carLocation &&\n            <Marker latitude={ carLocation.location[1] } longitude={ carLocation.location[0] } offsetLeft={ -10 }\n              offsetTop={ -30 } captureDrag={ false } captureClick={ true } captureDoubleClick={ false }>\n              <img className={ classes.pin } src={ pin_car } onMouseEnter={ () => this.toggleCarPinTooltip(true) }\n                onMouseLeave={ () => this.toggleCarPinTooltip(false) } />\n              <div className={ classes.carPinTooltip } ref={ this.carPinTooltipRef }\n                style={{ ...carPinTooltipStyle, display: 'none' }}>\n                { moment(carLocation.time).format('LT') },<br />{ moment(carLocation.time).fromNow() }\n              </div>\n            </Marker>\n          }\n          { carLocation && Boolean(carLocation.accuracy) &&\n            <Source type=\"geojson\" data={ this.carLocationCircle(carLocation) }>\n              <Layer id=\"polygon\" type=\"fill\" source=\"polygon\" layout={{}}\n                paint={{ 'fill-color': '#31a1ee', 'fill-opacity': 0.3 }} />\n            </Source>\n          }\n          { search && !searchSelect && search.map((item) =>\n            <Marker latitude={ this.itemLoc(item).lat } longitude={ this.itemLoc(item).lng } key={ item.id }\n              offsetLeft={ -10 } offsetTop={ -30 } captureDrag={ false } captureClick={ false }\n              captureDoubleClick={ false }>\n              <img className={ classes.pinClick } src={ pin_marker } onClick={ () => this.onSearchSelect(item) } />\n            </Marker>\n          )}\n          { searchSelect &&\n            <Marker latitude={ this.itemLoc(searchSelect).lat } longitude={ this.itemLoc(searchSelect).lng }\n              offsetLeft={ -10 } offsetTop={ -30 } captureDrag={ false } captureClick={ false }\n              captureDoubleClick={ false }>\n              <img className={ classes.pin } src={ searchSelect.favoriteIcon ? searchSelect.favoriteIcon : pin_marker } />\n            </Marker>\n          }\n          { hasNav &&\n            <HTMLOverlay redraw={ this.renderOverlay } style={{ ...cardStyle, top: 10 }}\n              captureScroll={ true } captureDrag={ true } captureClick={ true } captureDoubleClick={ true }\n              capturePointerMove={ true } />\n          }\n          { searchSelect &&\n            <HTMLOverlay redraw={ this.renderSearchOverlay } captureScroll={ true } captureDrag={ true }\n              captureClick={ true } captureDoubleClick={ true } capturePointerMove={ true }\n              style={{ ...cardStyle, bottom: 10 }} />\n          }\n          { search && searchLooking && !searchSelect &&\n            <HTMLOverlay redraw={ this.renderResearchArea } captureScroll={ true } captureDrag={ true }\n              captureClick={ true } captureDoubleClick={ true } capturePointerMove={ true }\n              style={{ ...cardStyle, bottom: 10, left: '50%', width: 180, transform: 'translate(-50%, 0)' }} />\n          }\n        </ReactMapGL>\n      </div>\n    );\n  }\n\n  renderOverlay() {\n    const { classes } = this.props;\n    const { search, searchSelect, searchLooking, geoLocateCoords } = this.state;\n    const carLocation = this.getCarLocation();\n\n    return (\n      <div className={ classes.overlay } ref={ this.overlayRef } tabIndex={ -1 } onBlur={ this.onSearchBlur }\n        onClick={ this.focus }>\n        <TextField onChange={ this.onSearch } fullWidth={ true } inputRef={ this.searchInputRef }\n          placeholder=\"search\"\n          InputProps={{\n            onFocus: this.onFocus,\n            onBlur: this.onSearchBlur,\n            classes: { root: classes.overlayTextfield },\n            endAdornment: <>\n              { this.searchInputRef.current && this.searchInputRef.current.value &&\n                <InputAdornment position=\"end\">\n                  <Clear className={ classes.overlayClearButton } onClick={ this.clearSearch } />\n                </InputAdornment>\n              }\n              <InputAdornment position=\"end\"><Search className={ classes.overlaySearchButton } /></InputAdornment>\n            </>\n          }} />\n        { search && !searchSelect && !searchLooking &&\n          <div className={ `${classes.overlaySearchResults} scrollstyle` }>\n            { !geoLocateCoords && !carLocation &&\n              <Typography className={ classes.overlaySearchNoLocation }>\n                location unknown, turn on device for better results\n              </Typography> }\n            { search.length === 0 &&\n              <Typography className={ classes.overlaySearchNoResults }>no search results</Typography> }\n            { search.map((item) => (\n              <div key={ item.id } className={ classes.overlaySearchItem } onClick={ () => this.onSearchSelect(item) }>\n                <Typography>\n                  { this.formatSearchName(item) }\n                  <span className={ classes.overlaySearchDetails }>\n                    { this.formatSearchDetails(item, true) }\n                  </span>\n                </Typography>\n              </div>\n            )) }\n          </div>\n        }\n      </div>\n    );\n  }\n\n  renderSearchOverlay() {\n    const { classes, device } = this.props;\n    const { searchSelect, geoLocateCoords, saveAsMenu, savingAs, savedAs } = this.state;\n    const carLocation = this.getCarLocation();\n\n    const noRoute = !searchSelect.route && (carLocation || geoLocateCoords);\n\n    return (\n      <div className={ classes.searchSelectBox } ref={ this.searchSelectBoxRef }>\n        <Clear className={ classes.clearSearchSelect } onClick={ this.clearSearchSelect } />\n        <div className={ classes.searchSelectBoxHeader }>\n          <div className={ classes.searchSelectBoxTitle }>\n            <Typography className={ classes.bold }>{ this.formatSearchName(searchSelect) }</Typography>\n            { searchSelect.route &&\n              <Typography className={ classes.searchSelectBoxDetails }>\n                { this.formatDistance(searchSelect.route) } (\n                { this.formatDuration(searchSelect.route) })\n              </Typography>\n            }\n          </div>\n          <div className={ classes.searchSelectBoxButtons }>\n            { searchSelect.favoriteId ?\n              <Button disabled={ savingAs || savedAs } onClick={ this.deleteFavorite }\n                classes={{ root: classes.searchSelectButton, label: classes.noWrap }}>\n                { savingAs ? '...' : (savedAs ? 'deleted' :  'delete') }\n              </Button>\n            :\n              <Button disabled={ savingAs || savedAs }\n                onClick={ (ev) => this.setState({ saveAsMenu: ev.target }) }\n                classes={{ root: classes.searchSelectButton, label: classes.noWrap }}>\n                { savingAs ? '...' : (savedAs ? 'saved' :  'save as') }\n              </Button>\n            }\n            <Menu id=\"menu-save-as\" open={ Boolean(saveAsMenu) } anchorEl={ saveAsMenu }\n              onClose={ () => this.setState({ saveAsMenu: null }) }\n              anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n              transformOrigin={{ vertical: 'top', horizontal: 'right' }}>\n              <MenuItem classes={{ root: classes.saveAsMenuItem }} onClick={ () => this.saveSearchAs('home') }>\n                home\n              </MenuItem>\n              <MenuItem classes={{ root: classes.saveAsMenuItem }} onClick={ () => this.saveSearchAs('work') }>\n                work\n              </MenuItem>\n              <MenuItem classes={{ root: classes.saveAsMenuItem }} onClick={ () => this.saveSearchAs('pin') }>\n                favorite\n              </MenuItem>\n            </Menu>\n            { searchSelect.settingDest ?\n              <div className={ `${classes.searchSelectButton} ${classes.searchSelectButtonFake}` }\n                ref={ this.navigateFakeButtonRef }>\n                { searchSelect.success ?\n                  <Typography>destination set</Typography> :\n                  <CircularProgress size={ 19 } /> }\n                <Popper open={ Boolean(searchSelect.success && searchSelect.saved_next) } placement=\"bottom\"\n                  anchorEl={ this.navigateFakeButtonRef.current } className={ classes.savedNextPopover }>\n                  <Typography>device offline</Typography>\n                  <Typography>destination will be set once device is online</Typography>\n                </Popper>\n              </div>\n            :\n              <Button disabled={ Boolean(noRoute) } onClick={ this.navigate }\n                classes={{ root: classes.searchSelectButton }} style={{ marginBottom: 8 }}>\n                { noRoute ? 'no route' : 'navigate' }\n              </Button>\n            }\n          </div>\n        </div>\n        <Typography className={ classes.searchSelectBoxDetails }>\n          { this.formatSearchDetails(searchSelect, false) }\n        </Typography>\n      </div>\n    );\n  }\n\n  renderResearchArea() {\n    const { classes } = this.props;\n\n    return (\n      <Button className={ classes.researchArea } onClick={ this.researchArea }>\n        <Refresh />\n        search this area\n      </Button>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  device: 'workerState.device',\n  dongleId: 'workerState.dongleId',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Navigation));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { withStyles, Typography, Button, CircularProgress } from '@material-ui/core';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\nimport { Carousel } from 'react-responsive-carousel';\n\nimport * as Demo from '../../demo';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\nimport { deviceTypePretty, deviceIsOnline } from '../../utils'\nimport { devices as DevicesApi, athena as AthenaApi } from '@commaai/comma-api';\n\nconst styles = () => ({\n  container: {\n    borderBottom: `1px solid ${Colors.white10}`,\n    paddingTop: 8,\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: 64,\n    justifyContent: 'center',\n  },\n  row: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  bold: {\n    fontWeight: 600,\n  },\n  button: {\n    backgroundColor: Colors.white,\n    color: Colors.grey800,\n    color: '#404B4F',\n    textTransform: 'none',\n    minHeight: 'unset',\n    '&:hover': {\n      background: '#ddd',\n      color: '#404B4F',\n    },\n    '&:disabled': {\n      background: '#ddd',\n      color: '#404B4F',\n    },\n    '&:disabled:hover': {\n      background: '#ddd',\n      color: '#404B4F',\n    },\n  },\n  buttonOffline: {\n    background: Colors.grey400,\n    color: Colors.lightGrey600,\n    '&:disabled': {\n      background: Colors.grey400,\n      color: Colors.lightGrey600,\n    },\n    '&:disabled:hover': {\n      background: Colors.grey400,\n      color: Colors.lightGrey600,\n    },\n  },\n  spaceAround: {\n    display: 'flex',\n    justifyContent: 'space-around',\n  },\n  deviceStat: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    maxWidth: 80,\n  },\n  carBattery: {\n    padding: '5px 16px',\n    borderRadius: 15,\n    margin: '0 10px',\n    textAlign: 'center',\n    '& p': {\n      fontSize: 14,\n      fontWeight: 500,\n      lineHeight: '1.4em',\n    },\n  },\n  snapshotButton: {\n    minWidth: 130,\n    padding: '5px 16px',\n    borderRadius: 15,\n  },\n  snapshotButtonSmall: {\n    minWidth: 90,\n    padding: '5px 10px',\n    borderRadius: 15,\n  },\n  snapshotContainer: {\n    borderBottom: `1px solid ${Colors.white10}`,\n  },\n  snapshotContainerLarge: {\n    maxWidth: 1050,\n    margin: '0 auto',\n    display: 'flex',\n  },\n  snapshotImageContainerLarge: {\n    width: '50%',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  snapshotImage: {\n    display: 'block',\n    width: '450px !important',\n    maxWidth: '100%',\n  },\n  snapshotImageError: {\n    width: 450,\n    maxWidth: '100%',\n    backgroundColor: Colors.grey950,\n    padding: '0 80px',\n    margin: '0 auto',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    '& p': {\n      textAlign: 'center',\n      fontSize: '1rem',\n      '&:first-child': {\n        fontWeight: 600,\n      },\n    },\n  },\n});\n\nconst initialState = {\n  deviceStats: {},\n  carHealth: {},\n  snapshot: {},\n}\n\nclass DeviceInfo extends Component {\n  constructor(props) {\n    super(props);\n    this.mounted = null;\n    this.state = {\n      ...initialState,\n      windowWidth: window.innerWidth,\n    };\n\n    this.onResize = this.onResize.bind(this);\n    this.fetchDeviceInfo = this.fetchDeviceInfo.bind(this);\n    this.fetchDeviceCarHealth = this.fetchDeviceCarHealth.bind(this);\n    this.takeSnapshot = this.takeSnapshot.bind(this);\n    this.snapshotType = this.snapshotType.bind(this);\n    this.renderButtons = this.renderButtons.bind(this);\n    this.renderStats = this.renderStats.bind(this);\n    this.renderSnapshotImage = this.renderSnapshotImage.bind(this);\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.componentDidUpdate({});\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { dongleId } = this.props;\n\n    if (prevProps.dongleId !== dongleId) {\n      this.setState(initialState);\n\n      if (!Demo.isDemo()) {\n        this.fetchDeviceInfo();\n        this.fetchDeviceCarHealth();\n      }\n    }\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  async fetchDeviceInfo() {\n    const { dongleId } = this.props;\n    this.setState({ deviceStats: { fetching: true }});\n    try {\n      const resp = await DevicesApi.fetchDeviceStats(dongleId);\n      if (this.mounted && dongleId === this.props.dongleId) {\n        this.setState({ deviceStats: { result: resp }});\n      }\n    } catch(err) {\n      this.setState({ deviceStats: { error: err.message }});\n    }\n  }\n\n  async fetchDeviceCarHealth() {\n    const { dongleId, device } = this.props;\n    if (!deviceIsOnline(device)) {\n      return;\n    }\n\n    this.setState({ carHealth: { fetching: true }});\n    try {\n      const payload = {\n        method: 'getMessage',\n        params: {'service': 'pandaState', 'timeout': 5000},\n        jsonrpc: '2.0',\n        id: 0,\n      };\n      const resp = await AthenaApi.postJsonRpcPayload(dongleId, payload);\n      if (this.mounted && dongleId === this.props.dongleId) {\n        this.setState({ carHealth: resp });\n      }\n    } catch(err) {\n      this.setState({ carHealth: { error: err.message }});\n    }\n  }\n\n  async takeSnapshot() {\n    const { dongleId } = this.props;\n    const { snapshot } = this.state;\n    this.setState({ snapshot: { ...snapshot, fetching: true }});\n    try {\n      const payload = {\n        method: \"takeSnapshot\",\n        jsonrpc: \"2.0\",\n        id: 0,\n      };\n      let resp = await AthenaApi.postJsonRpcPayload(dongleId, payload);\n      if (resp.result && !resp.result.jpegBack && !resp.result.jpegFront) {\n        resp = await AthenaApi.postJsonRpcPayload(dongleId, payload);\n      }\n      if (resp.result && !resp.result.jpegBack && !resp.result.jpegFront) {\n        throw new Error('unable to fetch snapshot');\n      }\n      if (dongleId === this.props.dongleId) {\n        this.setState({ snapshot: resp });\n      }\n    } catch(err) {\n      this.setState({ snapshot: { error: err.message }});\n    }\n  }\n\n  snapshotType(showFront) {\n    const { snapshot } = this.state;\n    this.setState({ snapshot: { ...snapshot, showFront }});\n  }\n\n  render() {\n    const { classes, device } = this.props;\n    const { snapshot, deviceStats, windowWidth } = this.state;\n\n    const containerPadding = windowWidth > 520 ? 36 : 16;\n    const largeSnapshotPadding = windowWidth > 1440 ? '12px 0' : 0;\n\n    return (\n      <>\n        <ResizeHandler onResize={ this.onResize } />\n        <div className={ classes.container } style={{ paddingLeft: containerPadding, paddingRight: containerPadding }}>\n          { windowWidth >= 768 ?\n            <div className={ classes.row }>\n              <Typography variant=\"title\">{ device.alias || deviceTypePretty(device.device_type) }</Typography>\n              { this.renderStats() }\n              { this.renderButtons() }\n            </div>\n          : <>\n            <div className={ classes.row }>\n              <Typography variant=\"title\">{ device.alias || deviceTypePretty(device.device_type) }</Typography>\n              { this.renderButtons() }\n            </div>\n            { deviceStats.result &&\n              <div className={ `${classes.row} ${classes.spaceAround}` }>\n                { this.renderStats() }\n              </div>\n            }\n          </> }\n        </div>\n        { snapshot.result &&\n          <div className={ classes.snapshotContainer }>\n            { windowWidth >= 640 ?\n              <div className={ classes.snapshotContainerLarge } style={{ padding: largeSnapshotPadding }}>\n                <div className={ classes.snapshotImageContainerLarge }>\n                  { this.renderSnapshotImage(snapshot.result.jpegBack, false) }\n                </div>\n                <div className={ classes.snapshotImageContainerLarge }>\n                  { this.renderSnapshotImage(snapshot.result.jpegFront, true) }\n                </div>\n              </div>\n            :\n              <Carousel autoPlay={ false } interval={ 2147483647 } showThumbs={ false } showStatus={ false }\n                showArrows={ false }>\n                { this.renderSnapshotImage(snapshot.result.jpegBack, false) }\n                { this.renderSnapshotImage(snapshot.result.jpegFront, true) }\n              </Carousel>\n            }\n          </div>\n        }\n      </>\n    );\n  }\n\n  renderStats() {\n    const { classes } = this.props;\n    const { deviceStats } = this.state;\n\n    if (!deviceStats.result) {\n      return <>\n        <div></div>\n        <div></div>\n        <div></div>\n      </>;\n    }\n\n    return (\n      <>\n        <div className={ classes.deviceStat }>\n          <Typography variant=\"subheading\" className={ classes.bold }>\n            { Math.round(deviceStats.result.all.distance) }\n          </Typography>\n          <Typography variant=\"subheading\">miles</Typography>\n        </div>\n        <div className={ classes.deviceStat }>\n          <Typography variant=\"subheading\" className={ classes.bold }>\n            { deviceStats.result.all.routes }\n          </Typography>\n          <Typography variant=\"subheading\">drives</Typography>\n        </div>\n        <div className={ classes.deviceStat }>\n          <Typography variant=\"subheading\" className={ classes.bold }>\n            { Math.round(deviceStats.result.all.minutes / 60.0) }\n          </Typography>\n          <Typography variant=\"subheading\">hours</Typography>\n        </div>\n      </>\n    );\n  }\n\n  renderButtons() {\n    const { classes, device } = this.props;\n    const { snapshot, carHealth, windowWidth } = this.state;\n\n    let batteryVoltage;\n    let batteryBackground = Colors.grey400;\n    if (deviceIsOnline(device) && carHealth.result && carHealth.result.pandaState &&\n      carHealth.result.pandaState.voltage)\n    {\n      batteryVoltage = carHealth.result.pandaState.voltage / 1000.0;\n      batteryBackground = batteryVoltage < 11.0 ? Colors.red400: Colors.green400;\n    }\n\n    const buttonClass = windowWidth >= 520 ? classes.snapshotButton : classes.snapshotButtonSmall;\n    const buttonOffline = deviceIsOnline(device) ? '' : classes.buttonOffline;\n\n    return (\n      <>\n        <div className={ classes.carBattery } style={{ backgroundColor: batteryBackground }}>\n          <Typography>\n            { deviceIsOnline(device) ?\n              (windowWidth >= 520 ? 'car ' : '') +\n              'battery: ' +\n              (batteryVoltage ? batteryVoltage.toFixed(1) + '\\u00a0V' : 'N/A')\n            :\n              'device offline'\n            }\n          </Typography>\n        </div>\n        <Button onClick={ this.takeSnapshot } disabled={ Boolean(snapshot.fetching || !deviceIsOnline(device)) }\n          classes={{ root: `${classes.button} ${buttonClass} ${buttonOffline}` }}>\n          { snapshot.fetching ?\n            <CircularProgress size={ 19 } /> :\n            'take snapshot'\n          }\n        </Button>\n      </>\n    );\n  }\n\n  renderSnapshotImage(src, isFront) {\n    const { classes } = this.props;\n    if (!src) {\n      return (\n        <div className={ classes.snapshotImageError }>\n          <Typography>{ isFront && 'Interior' } snapshot not available</Typography>\n          { isFront &&\n            <Typography>\n              Enable \"Record and Upload Driver Camera\" on your device for interior camera snapshots\n            </Typography>\n          }\n        </div>\n      );\n    }\n\n    return ( <img src={ `data:image/jpeg;base64,${src}` } className={ classes.snapshotImage } /> );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceInfo));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport DriveList from './DriveList';\nimport Prime from '../Prime';\nimport PrimeBanner from '../Prime/PrimeBanner';\nimport Navigation from '../Navigation';\nimport DeviceInfo from '../DeviceInfo';\n\nconst styles = (/* theme */) => ({\n  base: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nclass Dashboard extends Component {\n  render() {\n    const { classes, primeNav, device, dongleId } = this.props;\n\n    if (!device || !dongleId) {\n      return null;\n    }\n\n    return (\n      <div className={classes.base}>\n        { primeNav ?\n          <Prime /> :\n          <>\n            <Navigation hasNav={ device.prime && device.device_type === 'three' } />\n            { !device.prime && device.is_owner && <PrimeBanner collapsed /> }\n            <DeviceInfo />\n            <DriveList />\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  dongleId: 'workerState.dongleId',\n  primeNav: 'workerState.primeNav',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Dashboard));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ReactMapGL, { LinearInterpolator } from 'react-map-gl';\n\nimport { derived as DerivedDataApi } from '@commaai/comma-api';\nimport TimelineWorker from '../../timeline';\n\nconst MAP_STYLE = 'mapbox://styles/commaai/cjj4yzqk201c52ss60ebmow0w';\n\nconst styles = {\n  mapContainer: {\n    height: '100%',\n    cursor: 'default !important',\n    '& div': {\n      height: '100% !important',\n      width: '100% !important',\n      minHeight: 300,\n    },\n  }\n};\n\nclass DriveMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.initMap = this.initMap.bind(this);\n    this.populateMap = this.populateMap.bind(this);\n    this.posAtOffset = this.posAtOffset.bind(this);\n    this.setPath = this.setPath.bind(this);\n    this.updateMarkerPos = this.updateMarkerPos.bind(this);\n\n    const nextRoute = props.currentSegment && props.currentSegment.route;\n\n    this.isLoadingCoords = false;\n    this.state = {\n      viewport: {\n        latitude: 37.7577,\n        longitude: -122.4376,\n        zoom: 15,\n      },\n      route: nextRoute,\n      coords: [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextRoute = nextProps.currentSegment && nextProps.currentSegment.route;\n    if (nextRoute !== this.state.route) {\n      if (this.state.coords.length > 0) {\n        this.setPath([]);\n      }\n    }\n\n    const coordsNeedRefresh = nextRoute !== this.state.route || this.state.coords.length === 0;\n    const shouldRefreshMap = coordsNeedRefresh && this.map != null && !this.isLoadingCoords;\n    if (shouldRefreshMap) {\n      this.setState({ route: nextRoute }, this.populateMap.bind(this, nextProps));\n    }\n\n    if (nextProps.startTime !== this.props.startTime) {\n      this.shouldFlyTo = true;\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.updateMarkerPos();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getMarkerSource() {\n    return this.map && this.map.getMap().getSource('seekPoint');\n  }\n\n  updateMarkerPos() {\n    if (!this.mounted) {\n      return;\n    }\n\n    const markerSource = this.getMarkerSource();\n    if (markerSource) {\n      if (this.props.currentSegment && this.state.coords.length > 0) {\n        const { routeOffset } = this.props.currentSegment;\n        const offset = TimelineWorker.currentOffset();\n\n        const pos = this.posAtOffset(offset - routeOffset);\n        if (pos) {\n          markerSource.setData({\n            type: 'Point',\n            coordinates: pos\n          });\n          this.moveViewportTo(pos);\n        }\n      } else if (markerSource._data && markerSource._data.coordinates.length > 0) {\n        markerSource.setData({\n          type: 'Point',\n          coordinates: []\n        });\n      }\n    }\n\n    raf(this.updateMarkerPos);\n  }\n\n  moveViewportTo(pos) {\n    const viewport = {\n      ...this.state.viewport,\n      longitude: pos[0],\n      latitude: pos[1],\n    };\n    if (this.shouldFlyTo) {\n      viewport.transitionDuration = 200;\n      viewport.transitionInterpolator = new LinearInterpolator();\n      this.shouldFlyTo = false;\n    }\n\n    this.setState({ viewport });\n  }\n\n  populateMap = async (props) => {\n    if (!props) props = this.props;\n\n    if (!this.map || !props.currentSegment || !this.state.route) {\n      return;\n    }\n    this.isLoadingCoords = true;\n\n    const { route } = this.state;\n    const routeSigUrl = props.currentSegment.url;\n\n    try {\n      const coords = await DerivedDataApi(routeSigUrl).getCoords();\n\n      if (this.state.route !== route) {\n        // handle race, if route changes while coords request was in flight\n        return;\n      }\n\n      const coordsArr = coords.map((coord) => [coord.lng, coord.lat]);\n      this.setPath(coordsArr);\n    } finally {\n      this.isLoadingCoords = false;\n    }\n  }\n\n  setPath(coords) {\n    const map = this.map && this.map.getMap();\n    this.setState({ coords });\n\n    if (map) {\n      map.getSource('route').setData({\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'LineString',\n          coordinates: coords,\n        }\n      });\n    }\n  }\n\n  posAtOffset(offset) {\n    const offsetSeconds = Math.floor(offset / 1e3);\n    const offsetFractionalPart = (offset % 1e3) / 1000.0;\n    const coordIdx = Math.min(\n      offsetSeconds,\n      this.state.coords.length - 1\n    );\n    const nextCoordIdx = Math.min(\n      offsetSeconds + 1,\n      this.state.coords.length - 1\n    );\n    if (!this.state.coords[coordIdx]) {\n      return null;\n    }\n\n    const [floorLng, floorLat] = this.state.coords[coordIdx];\n    const [ceilLng, ceilLat] = this.state.coords[nextCoordIdx];\n\n    return [\n      floorLng + ((ceilLng - floorLng) * offsetFractionalPart),\n      floorLat + ((ceilLat - floorLat) * offsetFractionalPart)\n    ];\n  }\n\n  initMap(mapComponent) {\n    if (!mapComponent) {\n      this.map = null;\n      return;\n    }\n\n    const map = mapComponent.getMap();\n\n    map.on('load', () => {\n      map.addSource('route', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: [],\n          }\n        }\n      });\n      map.addSource('seekPoint', {\n        type: 'geojson',\n        data: {\n          type: 'Point',\n          coordinates: []\n        }\n      });\n\n      const lineGeoJson = {\n        id: 'routeLine',\n        type: 'line',\n        source: 'route',\n        layout: {\n          'line-join': 'round',\n          'line-cap': 'round'\n        },\n        paint: {\n          'line-color': '#888',\n          'line-width': 8\n        }\n      };\n      map.addLayer(lineGeoJson);\n\n      const markerGeoJson = {\n        id: 'marker',\n        type: 'circle',\n        paint: {\n          'circle-radius': 10,\n          'circle-color': '#007cbf'\n        },\n        source: 'seekPoint'\n      };\n\n      map.addLayer(markerGeoJson);\n\n      this.map = mapComponent;\n\n      if (this.state.route && this.props.currentSegment) {\n        this.populateMap();\n      }\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={ classes.mapContainer }>\n        <ReactMapGL width=\"100%\" height=\"100%\" {...this.state.viewport} mapStyle={MAP_STYLE}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN} ref={this.initMap}\n          onViewportChange={(viewport) => this.setState({ viewport })} attributionControl={false} dragPan={false} />\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  offset: 'workerState.offset',\n  route: 'workerState.route',\n  segments: 'workerState.segments',\n  segmentNum: 'workerState.segment',\n  currentSegment: 'workerState.currentSegment',\n  startTime: 'workerState.startTime'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveMap));\n","export function strokeRoundedRect(ctx, left, top, width, height, radius, strokeWidth, strokeStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n\n  ctx.lineWidth = strokeWidth;\n  ctx.strokeStyle = strokeStyle;\n  ctx.stroke();\n  ctx.closePath();\n}\n\nexport function fillRoundedRect(ctx, left, top, width, height, radius, fillStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n  ctx.fillStyle = fillStyle;\n  ctx.fill();\n  ctx.closePath();\n}\n\nfunction roundedRectPath(ctx, left, top, width, height, radius) {\n  const right = left + width;\n  const bottom = top + height;\n  const K = 4 * (Math.SQRT2 - 1) / 3;\n\n  ctx.beginPath();\n  ctx.moveTo(left + radius, top);\n  ctx.lineTo(right - radius, top);\n  ctx.bezierCurveTo(right + radius * (K - 1), top, right, top + radius * (1 - K), right, top + radius);\n  ctx.lineTo(right, bottom - radius);\n  ctx.bezierCurveTo(right, bottom + radius * (K - 1), right + radius * (K - 1), bottom, right - radius, bottom);\n  ctx.lineTo(left + radius, bottom);\n  ctx.bezierCurveTo(left + radius * (1 - K), bottom, left, bottom + radius * (K - 1), left, bottom - radius);\n  ctx.lineTo(left, top + radius);\n  ctx.bezierCurveTo(left, top + radius * (1 - K), left + radius * (1 - K), top, left + radius, top);\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function Buffering(props) {\n  const parts = [];\n  if (props.isBufferingVideo) {\n    parts.push('video');\n  }\n  if (props.isBufferingData) {\n    parts.push('data');\n  }\n  const message = `Buffering ${parts.join(' and ')}`;\n  return (\n    <div\n      style={{\n        zIndex: 50,\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        backgroundColor: '#16181Aaa',\n      }}\n    >\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: 'calc(50% - 25px)'\n      }}\n      >\n        <CircularProgress\n          color=\"secondary\"\n          thickness={6}\n          size={50}\n        />\n      </div>\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: '50%',\n      }}\n      >\n        <Typography>\n          { message }\n        </Typography>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable camelcase */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport debounce from 'debounce';\nimport Obstruction from 'obstruction';\nimport ReactPlayer from 'react-player'\nimport Hls from '@commaai/hls.js';\n\nimport { video as VideoApi } from '@commaai/comma-api';\n\nimport theme from '../../theme';\nimport TimelineWorker from '../../timeline';\nimport * as LogIndex from '../../timeline/logIndex';\nimport { strokeRoundedRect, fillRoundedRect } from './canvas';\nimport Buffering from './buffering';\n\nwindow.Hls = Hls;\n\n// UI Assets\nconst wheelImg = new Image();\nwheelImg.src = require('../../icons/icon-chffr-wheel.svg');\n\n// these constants are named this way so that the names are the same in python and js\n// do not refactor them to have js style or more descriptive names\n// UI Measurements\n\nconst tici_vwp_w = 1928;\nconst tici_vwp_h = 1208;\nconst tici_focal = 2648;\n\nconst eon_vwp_w = 1164;\nconst eon_vwp_h = 874;\nconst eon_focal = 910;\n\nconst tici_intrinsic = [\n  tici_focal, 0, tici_vwp_w/2, 0,\n  0, tici_focal, tici_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\nconst eon_intrinsic = [\n  eon_focal, 0, eon_vwp_w/2, 0,\n  0, eon_focal, eon_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\n\nconst bdr_s = 30;\n// driver monitoring constants\n\nconst styles = (theme) => ({\n  hidden: {\n    display: 'none'\n  },\n  videoContainer: {\n    minHeight: 200,\n    position: 'relative',\n    maxWidth: 964,\n    margin: '0 auto',\n  },\n  videoImage: {\n    height: 'auto',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    zIndex: 1\n  },\n  videoUiCanvas: {\n    height: '100%',\n    left: 0,\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n});\n\nfunction is_tici(init_data) {\n  return init_data.InitData.DeviceType == 4;\n}\n\nclass DriveVideo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePreview = this.updatePreview.bind(this);\n    this.visibleSegment = this.visibleSegment.bind(this);\n\n    this.videoPlayer = React.createRef();\n    this.canvas_road = React.createRef();\n    this.canvas_lead = React.createRef();\n    this.canvas_carstate = React.createRef();\n    this.canvas_maxspeed = React.createRef();\n    this.canvas_speed = React.createRef();\n    this.canvas_face = React.createRef();\n\n    this.intrinsic = eon_intrinsic;\n    this.vwp_w = eon_vwp_w;\n    this.vwp_h = eon_vwp_h;\n\n    this.frame = 0;\n\n    this.state = {\n      src: null,\n    };\n  }\n\n  componentDidMount() {\n    const { playSpeed } = this.props;\n    if (this.videoPlayer.current) {\n      this.videoPlayer.current.playbackRate = playSpeed || 1;\n    }\n    this.rafLoop = raf(this.updatePreview);\n    this.updateVideoSource({});\n    this.syncVideo();\n    this.checkDataBuffer();\n  }\n\n  componentDidUpdate(prevProps) {\n    this.updateVideoSource(prevProps);\n    this.syncVideo();\n    this.checkDataBuffer();\n  }\n\n  componentWillUnmount() {\n    if (this.rafLoop) {\n      raf.cancel(this.rafLoop);\n      this.rafLoop = null;\n    }\n  }\n\n  visibleSegment(props = this.props) {\n    if (props.currentSegment) {\n      return props.currentSegment;\n    }\n    const offset = TimelineWorker.currentOffset();\n    if (props.nextSegment && props.nextSegment.startOffset - offset < 5000) {\n      return props.nextSegment;\n    }\n    return null;\n  }\n\n  updateVideoSource(prevProps) {\n    const segment = this.visibleSegment();\n    if (!segment) {\n      if (this.state.src !== '') {\n        this.setState({ src: '' });\n      }\n      return;\n    }\n\n    const prevSegment = this.visibleSegment(prevProps);\n    if (this.state.src === '' || !prevSegment || prevSegment.route !== segment.route) {\n      let videoApi = VideoApi(segment.url, process.env.REACT_APP_VIDEO_CDN);\n      videoApi.getQcameraStreamIndex().then(() => {\n        let src = videoApi.getQcameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`\n        if (src !== this.state.src) {\n          this.setState({src});\n          this.syncVideo();\n        }\n      }).catch((err) => {\n        console.log(err);\n        let src = videoApi.getRearCameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`;\n        if (src !== this.state.src) {\n          this.setState({src});\n          this.syncVideo();\n        }\n      });\n    }\n  }\n\n  updatePreview() {\n    // schedule next run right away so that we can return early\n    this.rafLoop = raf(this.updatePreview);\n\n    this.frame++;\n    if (this.frame % 30 === 0) {\n      this.syncVideo();\n    }\n    if (this.frame % 6 === 0) {\n      this.checkDataBuffer();\n    }\n    if (this.frame % 6 === 3) {\n      this.renderCanvas();\n    }\n  }\n\n  checkDataBuffer = debounce(() => {\n    if (!this.props.shouldShowUI) {\n      if (this.props.isBufferingData) {\n        TimelineWorker.bufferData(false);\n      }\n      return;\n    }\n\n    const logIndex = TimelineWorker.getLogIndex();\n    if (!logIndex) {\n      return;\n    }\n\n    let isDataBuffering = true;\n    const monoTime = TimelineWorker.currentLogMonoTime();\n    const monoTimeLength = (`${monoTime}`).length;\n    const curIndex = LogIndex.findMonoTime(logIndex, monoTime);\n    const lastEvent = TimelineWorker.getEvent(curIndex, logIndex);\n    let nextEvent = TimelineWorker.getEvent(curIndex + 1, logIndex);\n\n    if (!nextEvent) {\n      nextEvent = TimelineWorker.getEvent(0, TimelineWorker.getNextLogIndex());\n    }\n\n    if (nextEvent && nextEvent.LogMonoTime) {\n      const nextEventTime = Number(nextEvent.LogMonoTime.substr(0, monoTimeLength));\n      const timeDiff = Math.abs(nextEventTime - monoTime);\n\n      isDataBuffering = timeDiff > 1000;\n    }\n    if (isDataBuffering && lastEvent && lastEvent.LogMonoTime) {\n      const monSec = lastEvent.LogMonoTime.substr(0, monoTimeLength);\n      const timeDiff = Math.abs(monoTime - Number(monSec));\n      // 3 seconds of grace\n      isDataBuffering = timeDiff > 3000;\n    }\n\n    if (isDataBuffering !== this.props.isBufferingData) {\n      TimelineWorker.bufferData(isDataBuffering);\n    }\n  }, 100)\n\n  syncVideo = debounce(() => {\n    const videoPlayer = this.videoPlayer.current;\n    if (!videoPlayer || !this.visibleSegment() || !videoPlayer.getDuration()) {\n      return;\n    }\n\n    const internalPlayer = videoPlayer.getInternalPlayer();\n\n    // sanity check required for ios\n    const hasSufficientBuffer = videoPlayer.getSecondsLoaded() - videoPlayer.getCurrentTime() > 30;\n    if (hasSufficientBuffer && this.props.isBufferingVideo) {\n      TimelineWorker.bufferVideo(false);\n    }\n\n    let newPlaybackRate = this.props.isBufferingData ? 0 : this.props.desiredPlaySpeed;\n    if (!this.props.isBufferingData || internalPlayer.playbackRate === 0) {\n      let desiredVideoTime = this.currentVideoTime();\n      const curVideoTime = videoPlayer.getCurrentTime();\n      const timeDiff = desiredVideoTime - curVideoTime;\n      if (Math.abs(timeDiff) <= 0.3) {\n        newPlaybackRate = Math.max(0, newPlaybackRate + timeDiff)\n      } else if (desiredVideoTime === 0 && timeDiff < 0 && curVideoTime !== videoPlayer.getDuration()) {\n        // logs start ealier than video, so skip to video ts 0\n        TimelineWorker.seek(TimelineWorker.currentOffset() - (timeDiff * 1000));\n      } else {\n        videoPlayer.seekTo(desiredVideoTime, 'seconds');\n      }\n    }\n\n    newPlaybackRate = Math.round(newPlaybackRate * 10) / 10;\n    if (internalPlayer.playbackRate !== newPlaybackRate) {\n      internalPlayer.playbackRate = newPlaybackRate;\n    }\n\n    // pausing and unpausing is required on some browsers\n    if (internalPlayer.paused && internalPlayer.playbackRate !== 0 && hasSufficientBuffer) {\n      const playRes = internalPlayer.play();\n      if (playRes) {\n        playRes.catch(() => console.log('play interrupted by pause'));\n      }\n    } else if (!internalPlayer.paused && internalPlayer.playbackRate === 0) {\n      internalPlayer.pause();\n    }\n  }, 100)\n\n  renderCanvas() {\n    const calibration = TimelineWorker.getCalibration(this.props.route);\n    if (!calibration) {\n      this.lastCalibrationTime = false;\n      return;\n    }\n\n    if (!this.props.shouldShowUI) {\n      return;\n    }\n\n    if (calibration) {\n      if (this.lastCalibrationTime !== calibration.LogMonoTime) {\n        this.extrinsic = [...calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n      }\n      this.lastCalibrationTime = calibration.LogMonoTime;\n    }\n    let init_data = TimelineWorker.currentInitData();\n    if (init_data){\n      if (is_tici(init_data)) {\n        this.intrinsic = tici_intrinsic;\n        this.vwp_w = tici_vwp_w;\n        this.vwp_h = tici_vwp_h;\n      }\n    }\n\n    let live_calibration = TimelineWorker.currentLiveCalibration();\n    if (live_calibration) {\n      this.extrinsic = [...live_calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n    }\n\n    if (this.canvas_road.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        model: TimelineWorker.currentModel,\n        modelv2: TimelineWorker.currentModelV2,\n        mpc: TimelineWorker.currentMPC,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_road.current, params, events, this.drawLaneFull\n      );\n    }\n    if (this.canvas_lead.current) {\n      const params = { calibration, shouldScale: true };\n      const events = { radarState: TimelineWorker.currentRadarState };\n      this.renderEventToCanvas(\n        this.canvas_lead.current, params, events, this.renderLeadCars\n      );\n    }\n    if (this.canvas_carstate.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_carstate.current, params, events, this.renderCarState\n      );\n    }\n    if (this.canvas_maxspeed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        controlsState: TimelineWorker.currentControlsState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_maxspeed.current, params, events, this.renderMaxSpeed\n      );\n    }\n    if (this.canvas_speed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_speed.current, params, events, this.renderSpeed\n      );\n    }\n  }\n\n  renderEventToCanvas(canvas, params, events, renderEvent) {\n    const { width, height } = canvas.getBoundingClientRect();\n\n    if (!params.calibration) {\n      const ctx = canvas.getContext('2d');\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, width, height);\n      return; // loading calibration from logs still...\n    }\n\n    let logTime; let\n      monoIndex;\n    const _events = {};\n    let needsRender = false;\n    const eventsSig = Object.keys(events).join(',');\n    Object.keys(events).map((key) => {\n      const event = events[key].apply(TimelineWorker);\n      monoIndex = `${events[key].name}MonoTime${eventsSig}`;\n\n      if (!event) {\n        if (this[monoIndex]) {\n          this[monoIndex] = false;\n          const ctx = canvas.getContext('2d');\n          ctx.setTransform(1, 0, 0, 1, 0, 0);\n          ctx.clearRect(0, 0, width, height);\n          // we have to force re-render when one is missing\n          // this is because there's more than one event being rendered through this flow\n          // this should be re-broken apart such that this isn't an issue\n          // fixing that will also reduce the rendering complexity\n          needsRender = true;\n        }\n      } else {\n        logTime = event ? event.LogMonoTime : null;\n        needsRender = needsRender || logTime !== this[monoIndex];\n        this[monoIndex] = logTime;\n        _events[key] = event;\n      }\n    });\n\n    if (!needsRender) {\n      return;\n    }\n    // will render!\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // clear all the data\n    ctx.clearRect(0, 0, width, height);\n    // reset transform before anything, just in case\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    // scale original coords onto our current size\n    if (params.shouldScale) {\n      ctx.scale(width / this.vwp_w, height / this.vwp_h);\n    }\n\n    renderEvent.apply(this, [{ width, height, ctx }, _events]);\n  }\n\n  renderLeadCars(options, events) {\n    if (!events.radarState) {\n      return;\n    }\n    this.lastRadarStateMonoTime = events.radarState.LogMonoTime;\n    const { width, height, ctx } = options;\n\n    const leadOne = events.radarState.RadarState.LeadOne;\n    const leadTwo = events.radarState.RadarState.LeadTwo;\n\n    if (leadOne.Status) {\n      this.renderLeadCar(options, leadOne);\n    }\n    if (leadTwo.Status) {\n      this.renderLeadCar(options, leadTwo, true);\n    }\n  }\n\n  renderLeadCar(options, leadData, is2ndCar) {\n    const { width, height, ctx } = options;\n\n    const drel = leadData.DRel;\n    const vrel = leadData.VRel;\n    const yrel = leadData.YRel;\n\n    var x = drel + 2.7;\n    var y = yrel;\n\n    var [x, y, z] = this.carSpaceToImageSpace([drel + 2.7, yrel, 0, 1]);\n\n    if (x < 0 || y < 0) {\n      return;\n    }\n\n    let sz = 25 * 30;\n    sz /= ((drel + 2.7) / 3 + 30);\n    sz = Math.min(Math.max(sz, 15), 30);\n    if (is2ndCar) {\n      sz /= 1.2;\n    }\n\n    let fillAlpha = 0;\n    const speedBuff = 10;\n    const leadBuff = 40;\n\n    if (drel < leadBuff) {\n      fillAlpha = 255 * (1 - (drel / leadBuff));\n      if (vrel < 0) {\n        fillAlpha += 255 * (-1 * (vrel / speedBuff));\n      }\n      fillAlpha = Math.min(fillAlpha, 255) / 255;\n    }\n\n    // glow\n    if (is2ndCar) {\n      ctx.fillStyle = 'rgba(218, 202, 37, 0.5)';\n    } else {\n      ctx.fillStyle = 'rgb(218, 202, 37)';\n    }\n    ctx.lineWidth = 5;\n    const g_xo = sz / 5;\n    const g_yo = sz / 10;\n    ctx.beginPath();\n    ctx.moveTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.lineTo(x, y - g_xo);\n    ctx.lineTo(x - (sz * 1.35) - g_xo, y + sz + g_yo);\n    ctx.lineTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.fill();\n\n    if (fillAlpha > 0) {\n      if (is2ndCar) {\n        fillAlpha /= 1.5;\n      }\n      ctx.fillStyle = `rgba(201, 34, 49, ${fillAlpha})`;\n\n      ctx.beginPath();\n      ctx.moveTo(x + (sz * 1.25), y + sz);\n      ctx.lineTo(x, y);\n      ctx.lineTo(x - (sz * 1.25), y + sz);\n      ctx.lineTo(x + (sz * 1.25), y + sz);\n      ctx.fill();\n    }\n  }\n\n  drawLaneFull(options, events) { // ui_draw_vision_lanes\n    const { ctx } = options;\n    if (events) {\n      if (events.modelv2) {\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.LaneLines, events.modelv2.ModelV2.LaneLineProbs, false);\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.RoadEdges, events.modelv2.ModelV2.RoadEdgeStds, true);\n        this.drawLaneTrackV2(ctx, events.modelv2.ModelV2.Position);\n      } else if (events.model) {\n        this.drawLaneBoundary(ctx, events.model.Model.LeftLane);\n        this.drawLaneBoundary(ctx, events.model.Model.RightLane);\n        this.drawLaneTrack(options, events.model.Model.Path);\n      } else if (events.mpc && events.controlsState) {\n        this.drawLaneTrack(options, events.mpc.LiveMpc, {\n          isMpc: true,\n          isEnabled: events.controlsState.ControlsState.Enabled,\n        });\n      }\n    }\n  }\n\n  drawLaneBoundary(ctx, lane) { // ui_draw_lane\n    let color = `rgba(255, 255, 255,${lane.Prob})`;\n\n    let points;\n    if (lane.Points.length > 0) {\n      points = lane.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(lane.Poly[0] * (i * i * i) + lane.Poly[1] * (i * i) + lane.Poly[2] * i + lane.Poly[3]);\n      }\n    }\n    this.drawLaneLine(ctx, points, 0.035 * lane.Prob, color, false);\n    const offset = Math.min(lane.Std, 0.7);\n    color = `rgba(255, 255, 255,${lane.Prob})`;\n    this.drawLaneLine(ctx, points, -offset, color, true);\n    this.drawLaneLine(ctx, points, offset, color, true);\n  }\n\n  drawLaneLine(ctx, points, off, color, isGhost) { // ui_draw_lane_line\n    ctx.beginPath();\n    let started = false;\n    const line_height = 49;\n    for (let i = 0; i < line_height; i++) {\n      const px = i;\n      const py = points[i] - off;\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = line_height; i > 0; i--) {\n      const px = i == line_height ? line_height : i;\n      const py = isGhost ? (points[i] - off) : (points[i] + off);\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneBoundaryV2(ctx, lines, certainty, isStds) {\n    for (let i = 0; i < lines.length; i++) {\n      const opacity = !isStds ? certainty[i] : 1.0 - certainty[i];\n      const color = !isStds ? \"255, 255, 255\" : \"255, 0, 0\";\n      const rgba = `rgba(${color}, ${Math.min(Math.max(opacity, 0.0), 1.0)})`;\n      this.drawLaneLineV2(ctx, lines[i], 0.035, rgba);\n    }\n  }\n\n  drawLaneLineV2(ctx, points, off, color, isGhost) {\n    ctx.beginPath();\n    let started = false;\n    let z_off = 1.22;\n\n    for (let i = 0; i < points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - off;\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = isGhost ? (-points.Y[i] - off) : (-points.Y[i] + off);\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneTrack(options, path, params) {\n    const { ctx } = options;\n    let isMpc; let\n      isEnabled;\n    if (params) {\n      isMpc = params.isMpc;\n      isEnabled = params.isEnabled;\n    }\n    ctx.beginPath();\n    let started = false;\n    const offset = isMpc ? 0.3 : 0.5;\n    const path_height = isMpc ? 20 : 49;\n    let points;\n    if (path.Points.length > 0) {\n      points = path.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(path.Poly[0] * (i * i * i) + path.Poly[1] * (i * i) + path.Poly[2] * i + path.Poly[3]);\n      }\n    }\n    for (let i = 0; i <= path_height; i++) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] - offset;\n      } else {\n        px = i;\n        py = points[i] - offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = path_height; i >= 0; i--) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] + offset;\n      } else {\n        px = i;\n        py = points[i] + offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    let track_bg;\n    if (isMpc) {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h - 40, this.vwp_w, this.vwp_h * 0.4);\n      if (isEnabled) {\n        track_bg.addColorStop(0, 'rgba(23, 134, 68, 0.8)');\n        track_bg.addColorStop(1, 'rgba(14, 89, 45, 0.8)');\n      } else {\n        track_bg.addColorStop(0, 'rgba(23, 88, 134, 0.6)');\n        track_bg.addColorStop(1, 'rgba(15, 58, 89, 0.6)');\n      }\n    } else {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n      track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n      track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    }\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  drawLaneTrackV2(ctx, points) {\n    ctx.beginPath();\n    let started = false;\n    const offset = 0.5;\n\n    for (let i = 0; i <= points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = -points.Y[i] + offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n\n    let track_bg;\n    track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n    track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n    track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  renderCarState(options, events) {\n    if (events && events.carState && events.controlsState) {\n      this.drawCarStateBorder(options, events.controlsState.ControlsState);\n      this.drawCarStateWheel(options, events.carState.CarState, events.controlsState.ControlsState);\n    }\n  }\n\n  renderSpeed(options, events) {\n    if (events && events.carState && events.initData) {\n      this.drawSpeed(options, events.carState.CarState, events.initData.InitData);\n    }\n  }\n\n  drawSpeed(options, CarState, InitData) {\n    const { ctx } = options;\n\n    let speed = CarState.VEgo;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    const isMetric = metricParam && metricParam.Value === '1';\n    if (isMetric) {\n      speed = Math.floor(speed * 3.6 + 0.5);\n    } else {\n      speed = Math.floor(speed * 2.2369363 + 0.5);\n    }\n\n    const x = this.vwp_w / 2;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.font = '700 128px \\'Open Sans\\', sans-serif';\n    ctx.fillStyle = 'rgb(255,255,255)';\n    ctx.fillText(speed, x, 140);\n\n    ctx.font = '400 48px \\'Open Sans\\', sans-serif';\n    ctx.fillStyle = 'rgba(255,255,255,200)';\n    if (isMetric) {\n      ctx.fillText('km/h', x, 210);\n    } else {\n      ctx.fillText('mph', x, 210);\n    }\n  }\n\n  renderMaxSpeed(options, events) {\n    if (events && events.controlsState && events.initData) {\n      this.drawMaxSpeed(options, events.controlsState.ControlsState, events.initData.InitData);\n    }\n  }\n\n  drawMaxSpeed(options, ControlsState, InitData) {\n    const { ctx } = options;\n\n    const maxSpeed = ControlsState.VCruise;\n    let maxSpeedCalc = maxSpeed * 0.6225 + 0.5;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    if (metricParam && metricParam.Value === '1') {\n      maxSpeedCalc = maxSpeed + 0.5;\n    }\n\n    const isCruiseSet = !isNaN(ControlsState.VCruise) && ControlsState.VCruise != 0 && ControlsState.VCruise != 255;\n\n    const width = Math.floor(184 * (2 / 3));\n    let height = Math.floor(202 * (2 / 3));\n\n    let left = bdr_s * 2;\n    let top = bdr_s * 2;\n\n    // background\n    fillRoundedRect(ctx, left, top, width, height, 30, 'rgba(0, 0, 0, 0.392)');\n\n    // border\n    strokeRoundedRect(ctx, left, top, width, height, 30, 10, 'rgba(255, 255, 255, 0.392)');\n\n    const textTopY = top + (26 * 4 / 3);\n    const textBottomY = textTopY + (48 * (4 / 3));\n    // MAX text\n    ctx.font = `${26 * (4 / 3)}px \\'Open Sans\\', sans-serif`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    if (isCruiseSet) {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.784)';\n    } else {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n    }\n\n    ctx.fillText('MAX', left + width / 2, textTopY);\n\n    // max speed text\n    if (isCruiseSet) {\n      ctx.font = `700 ${48 * (4 / 3)}px \\'Open Sans\\', sans-serif`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';\n      ctx.fillText(Math.floor(maxSpeedCalc), 2 + left + width / 2, textBottomY);\n    } else {\n      ctx.font = `600 ${42 * (4 / 3)}px \\'Open Sans\\', sans-serif`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n      ctx.fillText('N/A', left + width / 2, textBottomY);\n    }\n  }\n\n  drawCarStateWheel(options, CarState, ControlsState) {\n    const { ctx } = options;\n\n    const radius = 80;\n    const wheelRadius = radius - (bdr_s / 2);\n    const x = this.vwp_w - radius - (bdr_s * 2);\n    const y = radius + (bdr_s * 2);\n\n    // Wheel Background\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, 2 * Math.PI, false);\n    if (ControlsState.Enabled) {\n      ctx.fillStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.fillStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.closePath();\n    ctx.fill();\n\n    // Rotate Wheel\n    ctx.translate(x, y);\n    ctx.rotate(0 - CarState.SteeringAngleDeg * Math.PI / 180);\n    ctx.translate(-x, -y);\n\n    // Wheel Image\n    ctx.drawImage(wheelImg, x - wheelRadius, y - wheelRadius, 2 * wheelRadius, 2 * wheelRadius);\n  }\n\n  drawCarStateBorder(options, ControlsState) {\n    const { ctx } = options;\n    ctx.lineWidth = bdr_s * 2;\n\n    if (ControlsState.Enabled) {\n      ctx.strokeStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.strokeStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.strokeRect(0, 0, this.vwp_w, this.vwp_h);\n  }\n\n  carSpaceToImageSpace(coords) {\n    coords = this.matmul(this.extrinsic, coords);\n    coords = this.matmul(this.intrinsic, coords);\n\n    // project onto 3d with Z\n    coords[0] /= coords[2];\n    coords[1] /= coords[2];\n    return coords;\n  }\n\n  matmul(matrix, coord) {\n    const b0 = coord[0]; const b1 = coord[1]; const b2 = coord[2]; const\n      b3 = coord[3];\n\n    coord[0] = b0 * matrix[0] + b1 * matrix[1] + b2 * matrix[2] + b3 * matrix[3];\n    coord[1] = b0 * matrix[4] + b1 * matrix[5] + b2 * matrix[6] + b3 * matrix[7];\n    coord[2] = b0 * matrix[8] + b1 * matrix[9] + b2 * matrix[10] + b3 * matrix[11];\n    coord[3] = b0 * matrix[12] + b1 * matrix[13] + b2 * matrix[14] + b3 * matrix[15];\n\n    return coord;\n  }\n\n  currentVideoTime(offset = TimelineWorker.currentOffset()) {\n    if (!this.visibleSegment()) {\n      return 0;\n    }\n    offset -= this.visibleSegment().routeOffset;\n    offset = offset / 1000;\n\n    let initData = TimelineWorker.currentInitData();\n    let firstFrameTime = TimelineWorker.firstFrameTime();\n\n    if (initData !== null && firstFrameTime !== null) {\n      offset -= (firstFrameTime - initData.LogMonoTime/1e9);\n    }\n\n    return Math.max(0, offset);\n  }\n\n  render() {\n    const { classes, isBufferingData, isBufferingVideo } = this.props;\n    const playSpeed = isBufferingData ? 0 : this.props.desiredPlaySpeed;\n    return (\n      <div className={ classes.videoContainer }>\n        { (isBufferingData || isBufferingVideo) &&\n          <Buffering isBufferingVideo={ isBufferingVideo } isBufferingData={ isBufferingData } />\n        }\n        <ReactPlayer ref={ this.videoPlayer } url={ this.state.src } playsinline={ true } muted={ true }\n          width=\"100%\" height=\"unset\" playing={ Boolean(this.visibleSegment()) && Boolean(playSpeed) }\n          config={{ hlsOptions: { enableWorker: false, disablePtsDtsCorrectionInMp4Remux: false } }}\n          playbackRate={ playSpeed }\n          onBuffer={ () => TimelineWorker.bufferVideo(true) }\n          onBufferEnd={ () => TimelineWorker.bufferVideo(false) }\n          onPlay={ () => TimelineWorker.bufferVideo(false) } />\n        { this.props.shouldShowUI &&\n          <>\n            <canvas style={{ zIndex: 3 }} className={ `${classes.videoUiCanvas} hudRoadCanvas` }\n              ref={this.canvas_road} />\n            <canvas className={classes.videoUiCanvas} style={{ zIndex: 4 }} ref={this.canvas_lead} />\n            <canvas className={classes.videoUiCanvas} style={{ zIndex: 5 }} ref={this.canvas_carstate} />\n            <canvas className={classes.videoUiCanvas} style={{ zIndex: 6 }} ref={this.canvas_maxspeed} />\n            <canvas className={classes.videoUiCanvas} style={{ zIndex: 7 }} ref={this.canvas_speed} />\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  currentSegment: 'workerState.currentSegment',\n  nextSegment: 'workerState.nextSegment',\n  desiredPlaySpeed: 'workerState.desiredPlaySpeed',\n  route: 'workerState.route',\n  segment: 'workerState.segment',\n  offset: 'workerState.offset',\n  startTime: 'workerState.startTime',\n  isBufferingVideo: 'workerState.isBufferingVideo',\n  isBufferingData: 'workerState.isBufferingData',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveVideo));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport fecha from 'fecha';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Pause from '@material-ui/icons/Pause';\n\nimport {\n  DownArrow, UpArrow, HistoryForwardIcon, HistoryBackIcon\n} from '../../icons';\n\nimport TimelineWorker from '../../timeline';\n\nconst timerSteps = [\n  0.1,\n  0.25,\n  0.5,\n  1,\n  2,\n  3,\n  4,\n  5\n];\n\nfunction jumpBack(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() - amount);\n}\n\nfunction jumpForward(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() + amount);\n}\nconst styles = (theme) => ({\n  base: {\n    display: 'flex',\n    alignItems: 'center',\n    backgroundColor: theme.palette.grey[999],\n    height: '64px',\n    borderRadius: '32px',\n    padding: theme.spacing.unit,\n    width: 400,\n    maxWidth: '100%',\n    margin: '0 auto',\n    opacity: 0,\n    pointerEvents: 'none',\n    transition: 'opacity 0.1s ease-in-out',\n    '&.isExpanded': {\n      opacity: 1,\n      pointerEvents: 'auto',\n    },\n    '&.isThin': {\n      height: 50,\n      paddingBottom: 0,\n      paddingTop: 0,\n    },\n  },\n  desiredPlaySpeedContainer: {\n    marginRight: theme.spacing.unit * 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  icon: {\n    width: '98%',\n    height: '98%',\n    '&.dim': {\n      color: theme.palette.grey[700]\n    },\n    '&.small': {\n      width: '60%',\n      height: '60%',\n    },\n    '&.circle': {\n      border: `1px solid ${theme.palette.grey[900]}`,\n      borderRadius: '50%'\n    }\n  },\n  tinyArrowIcon: {\n    width: 12,\n    height: 12,\n    color: theme.palette.grey[700]\n  },\n  iconBox: {\n    borderRight: `1px solid ${theme.palette.grey[900]}`\n  },\n  playButtonBox: {\n    borderLeft: `1px solid ${theme.palette.grey[900]}`\n  },\n  currentTime: {\n    margin: `0 ${theme.spacing.unit * 1}px`,\n    fontSize: 15,\n    fontWeight: 500,\n    display: 'block',\n    flexGrow: 1,\n  }\n});\n\nclass TimeDisplay extends Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.desiredPlaySpeed !== 0 && props.desiredPlaySpeed !== state.desiredPlaySpeed) {\n      return {\n        ...state,\n        desiredPlaySpeed: props.desiredPlaySpeed\n      };\n    }\n    return state;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.textHolder = React.createRef();\n\n    this.updateTime = this.updateTime.bind(this);\n    this.togglePause = this.togglePause.bind(this);\n    this.increaseSpeed = this.increaseSpeed.bind(this);\n    this.decreaseSpeed = this.decreaseSpeed.bind(this);\n\n    this.state = {\n      desiredPlaySpeed: 1,\n      displayTime: this.getDisplayTime()\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.updateTime);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getDisplayTime() {\n    const currentOffset = TimelineWorker.currentOffset();\n    const { start } = this.props;\n    if (!Number.isFinite(start)) {\n      return '...';\n    }\n    const now = new Date(currentOffset + start);\n    const dateString = fecha.format(now, 'ddd, D MMM @ HH:mm:ss');\n\n    return dateString;\n  }\n\n  updateTime() {\n    if (!this.mounted || !this.textHolder.current) {\n      return;\n    }\n    const newDisplayTime = this.getDisplayTime();\n    const { displayTime } = this.state;\n    if (newDisplayTime !== displayTime) {\n      this.setState({ displayTime: newDisplayTime });\n    }\n\n    raf(this.updateTime);\n  }\n\n  decreaseSpeed() {\n    const { desiredPlaySpeed } = this.state;\n    let curIndex = timerSteps.indexOf(desiredPlaySpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.max(0, curIndex - 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  increaseSpeed() {\n    const { desiredPlaySpeed } = this.state;\n    let curIndex = timerSteps.indexOf(desiredPlaySpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.min(timerSteps.length - 1, curIndex + 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  togglePause(e) {\n    const { desiredPlaySpeed } = this.props;\n    if (desiredPlaySpeed === 0) {\n      TimelineWorker.play(this.state.desiredPlaySpeed);\n    } else {\n      TimelineWorker.pause();\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const isPaused = this.props.desiredPlaySpeed === 0;\n    const isExpandedCls = this.props.expanded ? 'isExpanded' : '';\n    const isThinCls = this.props.isThin ? 'isThin' : '';\n    return (\n      <div className={ `${classes.base} ${isExpandedCls} ${isThinCls}` }>\n        <div className={ classes.iconBox }>\n          <IconButton className={ classes.iconButton } onClick={ () => jumpBack(10000) }\n            aria-label=\"Jump back 10 seconds\">\n            <HistoryBackIcon className={`${classes.icon} small dim`} />\n          </IconButton>\n        </div>\n        <div className={ classes.iconBox }>\n          <IconButton className={ classes.iconButton } onClick={ () => jumpForward(10000) }\n            aria-label=\"Jump forward 10 seconds\">\n            <HistoryForwardIcon className={`${classes.icon} small dim`} />\n          </IconButton>\n        </div>\n        { !this.props.isThin && (\n          <Typography variant=\"caption\" align=\"center\" style={{ paddingTop: 4 }}>\n            CURRENT PLAYBACK TIME\n          </Typography>\n        )}\n        <Typography variant=\"body1\" align=\"center\" className={classes.currentTime}>\n          <span ref={this.textHolder}>{ this.state.displayTime }</span>\n        </Typography>\n        <div className={ classes.desiredPlaySpeedContainer }>\n          <IconButton className={classes.tinyArrowIcon} onClick={this.increaseSpeed}\n            aria-label=\"Increase play speed by 1 step\">\n            <UpArrow className={classes.tinyArrowIcon} />\n          </IconButton>\n          <Typography variant=\"body2\" align=\"center\">\n            { this.state.desiredPlaySpeed }\n          </Typography>\n          <IconButton className={classes.tinyArrowIcon} onClick={this.decreaseSpeed}\n            aria-label=\"Decrease play speed by 1 step\">\n            <DownArrow className={classes.tinyArrowIcon} />\n          </IconButton>\n        </div>\n        <div className={ classes.playButtonBox }>\n          <IconButton className={ classes.iconButton } onClick={this.togglePause}\n            aria-label={isPaused ? 'Unpause' : 'Pause'}>\n            { isPaused\n              ? (<PlayArrow className={`${classes.icon}`} />)\n              : (<Pause className={`${classes.icon}`} />)}\n          </IconButton>\n        </div>\n      </div>\n    );\n  }\n}\n\nTimeDisplay.propTypes = {\n  classes: PropTypes.object.isRequired,\n  desiredPlaySpeed: PropTypes.number.isRequired,\n  start: PropTypes.number.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  desiredPlaySpeed: 'workerState.desiredPlaySpeed',\n  start: 'workerState.start',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeDisplay));\n","import React, { Component } from 'react';\nimport qs from 'query-string';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport { withStyles, Typography, Menu, MenuItem } from '@material-ui/core';\n\nimport { raw as RawApi } from '@commaai/comma-api';\nimport DriveMap from '../DriveMap';\nimport DriveVideo from '../DriveVideo';\nimport ResizeHandler from '../ResizeHandler';\nimport * as Demo from '../../demo';\nimport TimelineWorker from '../../timeline';\nimport TimeDisplay from '../TimeDisplay';\n\nconst demoFiles = require('../../demo/files.json');\n\nconst styles = (theme) => ({\n  root: {\n    display: 'flex',\n  },\n  mediaOptionsRoot: {\n    maxWidth: 964,\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n  },\n  mediaOptions: {\n    marginBottom: 12,\n    display: 'flex',\n    width: 'max-content',\n    alignItems: 'center',\n    border: '1px solid rgba(255,255,255,.1)',\n    borderRadius: 50,\n    display: 'flex',\n  },\n  mediaOption: {\n    alignItems: 'center',\n    borderRight: '1px solid rgba(255,255,255,.1)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    minHeight: 32,\n    minWidth: 44,\n    paddingLeft: 15,\n    paddingRight: 15,\n    '&.disabled': {\n      cursor: 'default',\n    },\n    '&:last-child': {\n      borderRight: 'none',\n    },\n  },\n  mediaOptionDisabled: {\n    cursor: 'auto',\n  },\n  mediaOptionIcon: {\n    backgroundColor: '#fff',\n    borderRadius: 3,\n    height: 20,\n    margin: '2px 0',\n    width: 30,\n  },\n  mediaOptionText: {\n    fontSize: 12,\n    fontWeight: 500,\n    textAlign: 'center',\n  },\n  mediaSource: {\n    width: '100%',\n  },\n  mediaSourceSelect: {\n    width: '100%',\n  },\n  timeDisplay: {\n    marginTop: 12,\n  },\n});\n\nconst MediaType = {\n  VIDEO: 'video',\n  HUD: 'hud',\n  MAP: 'map'\n};\n\nclass Media extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      inView: MediaType.VIDEO,\n      windowWidth: window.innerWidth,\n      windowHeight: window.innerHeight,\n      downloadMenu: null,\n      moreInfoMenu: null,\n    };\n\n    this.renderMediaOptions = this.renderMediaOptions.bind(this);\n    this.renderMenus = this.renderMenus.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.copySegmentName = this.copySegmentName.bind(this);\n    this.downloadSegmentFile = this.downloadSegmentFile.bind(this);\n    this.openInCabana = this.openInCabana.bind(this);\n    this.openInUseradmin = this.openInUseradmin.bind(this);\n  }\n\n  componentDidUpdate() {\n    if (this.props.isBufferingData && this.state.inView == MediaType.MAP && this.state.windowWidth < 1536) {\n      TimelineWorker.bufferData(false);\n    }\n  }\n\n  onResize(windowWidth, windowHeight) {\n    this.setState({ windowWidth, windowHeight });\n  }\n\n  async copySegmentName() {\n    const { visibleSegment } = this.props;\n    if (!visibleSegment || !navigator.clipboard) {\n      return;\n    }\n\n    await navigator.clipboard.writeText(`${visibleSegment.route}--${visibleSegment.segment}`);\n    this.setState({ moreInfoMenu: null });\n  }\n\n  async downloadSegmentFile(type) {\n    const { visibleSegment } = this.props;\n    if (!visibleSegment) {\n      return;\n    }\n\n    const segmentKeyPath = `${visibleSegment.route.replace('|', '/')}/${visibleSegment.segment}`;\n\n    let files;\n    if (Demo.isDemo()) {\n      files = demoFiles;\n    } else {\n      files = (await RawApi.getRouteFiles(visibleSegment.route));\n    }\n    const url = files[type].find((url) => url.indexOf(segmentKeyPath) !== -1);\n\n    if (url) {\n      window.location.href = url;\n    }\n    this.setState({ downloadMenu: null });\n  }\n\n  openInCabana() {\n    const { visibleSegment, loop, start } = this.props;\n    const currentOffset = TimelineWorker.currentOffset();\n    const params = {\n      route: visibleSegment.route,\n      url: visibleSegment.url,\n      seekTime: Math.floor((currentOffset - visibleSegment.routeOffset) / 1000)\n    };\n    const routeStartTime = (start + visibleSegment.routeOffset);\n\n    if (loop.startTime && loop.startTime > routeStartTime && loop.duration < 180000) {\n      const startTime = Math.floor((loop.startTime - routeStartTime) / 1000);\n      params.segments = [startTime, Math.floor(startTime + (loop.duration / 1000))].join(',');\n    }\n\n    const win = window.open(`https://my.comma.ai/cabana/?${qs.stringify(params, true)}`, '_blank');\n    if (win.focus) {\n      win.focus();\n    }\n  }\n\n  openInUseradmin() {\n    const { visibleSegment } = this.props;\n\n    const params = {\n      onebox: `${visibleSegment.route}--${visibleSegment.segment}`,\n    };\n\n    const win = window.open(`https://my.comma.ai/useradmin/?${qs.stringify(params, true)}`, '_blank');\n    if (win.focus) {\n      win.focus();\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { inView, windowWidth, windowHeight } = this.state;\n\n    if (this.props.menusOnly) {  // for test\n      return this.renderMenus(true);\n    }\n\n    const showMapAlways = windowWidth >= 1536;\n    if (showMapAlways && inView === MediaType.MAP) {\n      this.setState({ inView: MediaType.HUD });\n    }\n\n    const mediaContainerStyle = showMapAlways ?\n      { width: '60%' } :\n      { width: '100%' };\n    const mapContainerStyle = showMapAlways ?\n      { width: '40%', marginBottom: 62, marginTop: 46, paddingLeft: 24 } :\n      { width: '100%' };\n\n    return (\n      <div className={ classes.root }>\n        <ResizeHandler onResize={ this.onResize } />\n        <div style={ mediaContainerStyle }>\n          { this.renderMediaOptions(showMapAlways) }\n          { inView !== MediaType.MAP &&\n            <DriveVideo shouldShowUI={inView === MediaType.HUD} />\n          }\n          { (inView === MediaType.MAP && !showMapAlways) &&\n            <div style={ mapContainerStyle }>\n              <DriveMap />\n            </div>\n          }\n          <div className={ classes.timeDisplay }>\n            <TimeDisplay isThin />\n          </div>\n        </div>\n        { (inView !== MediaType.MAP && showMapAlways) &&\n          <div style={ mapContainerStyle }>\n            <DriveMap />\n          </div>\n        }\n      </div>\n    );\n  }\n\n  renderMediaOptions(showMapAlways) {\n    const { classes, visibleSegment } = this.props;\n    const { inView } = this.state;\n    return (\n      <>\n        <div className={classes.mediaOptionsRoot}>\n          <div className={classes.mediaOptions}>\n            <div className={ `${classes.mediaOption} hudButton` } onClick={() => this.setState({ inView: MediaType.HUD })}\n              style={inView !== MediaType.HUD ? { opacity: 0.6 } : { }} >\n              <Typography className={classes.mediaOptionText}>HUD</Typography>\n            </div>\n            <div className={classes.mediaOption} style={inView !== MediaType.VIDEO ? { opacity: 0.6 } : {}}\n              onClick={() => this.setState({ inView: MediaType.VIDEO })}>\n              <Typography className={classes.mediaOptionText}>Video</Typography>\n            </div>\n            { !showMapAlways &&\n              <div className={classes.mediaOption} style={inView !== MediaType.MAP ? { opacity: 0.6 } : { }}\n                onClick={() => this.setState({ inView: MediaType.MAP })}>\n                <Typography className={classes.mediaOptionText}>Map</Typography>\n              </div>\n            }\n          </div>\n          <div className={classes.mediaOptions}>\n            <div className={classes.mediaOption} aria-haspopup=\"true\"\n              onClick={ (ev) => this.setState({ downloadMenu: ev.target }) }>\n              <Typography className={classes.mediaOptionText}>Download</Typography>\n            </div>\n            <div className={classes.mediaOption} aria-haspopup=\"true\"\n              onClick={ (ev) => this.setState({ moreInfoMenu: ev.target }) }>\n              <Typography className={classes.mediaOptionText}>More info</Typography>\n            </div>\n          </div>\n        </div>\n        { this.renderMenus() }\n      </>\n    );\n  }\n\n  renderMenus(alwaysOpen = false) {\n    const { classes, visibleSegment } = this.props;\n    return (\n      <>\n        <Menu id=\"menu-download\" open={ alwaysOpen || Boolean(this.state.downloadMenu) }\n          anchorEl={ this.state.downloadMenu } onClose={ () => this.setState({ downloadMenu: null }) }\n          anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n          transformOrigin={{ vertical: 'top', horizontal: 'right' }}>\n          <MenuItem onClick={ () => this.downloadSegmentFile('cameras') }\n            disabled={ !(visibleSegment && visibleSegment.hasVideo) }>\n            Download Camera Segment\n          </MenuItem>\n          <MenuItem onClick={ () => this.downloadSegmentFile('dcameras') }\n            disabled={ !(visibleSegment && visibleSegment.hasDriverCamera) }>\n            Download Driver Camera Segment\n          </MenuItem>\n          <MenuItem onClick={ () => this.downloadSegmentFile('logs') } disabled={ !visibleSegment }>\n            Download Log Segment\n          </MenuItem>\n        </Menu>\n        <Menu id=\"menu-info\" open={ alwaysOpen || Boolean(this.state.moreInfoMenu) }\n          anchorEl={ this.state.moreInfoMenu } onClose={ () => this.setState({ moreInfoMenu: null }) }\n          transformOrigin={{ vertical: 'top', horizontal: 'right' }}>\n          <MenuItem onClick={ this.openInCabana } id=\"openInCabana\" >\n            View in Cabana\n          </MenuItem>\n          <MenuItem onClick={ this.openInUseradmin }>\n            View in useradmin\n          </MenuItem>\n          <MenuItem onClick={ this.copySegmentName }>\n            Copy to clipboard\n          </MenuItem>\n        </Menu>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  isBufferingData: 'workerState.isBufferingData',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Media));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport fecha from 'fecha';\n\nimport { withStyles, Typography, IconButton } from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\n\nimport Media from './Media';\nimport Timeline from '../Timeline';\n\nimport { selectRange } from '../../actions';\nimport ResizeHandler from '../ResizeHandler';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  window: {\n    background: 'linear-gradient(to bottom, #30373B 0%, #272D30 10%, #1D2225 100%)',\n    borderRadius: 8,\n    display: 'flex',\n    flexDirection: 'column',\n    margin: 18,\n  },\n  header: {},\n  headerContext: {\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    display: 'flex',\n    padding: 12,\n  },\n  headerInfo: {\n    color: Colors.white,\n    fontSize: 18,\n    fontWeight: 500,\n    paddingLeft: 12,\n  },\n});\n\nclass DriveView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      windowWidth: window.innerWidth,\n    };\n\n    this.close = this.close.bind(this);\n    this.onResize = this.onResize.bind(this);\n  }\n\n  close() {\n    this.props.dispatch(selectRange(null, null));\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  render() {\n    const { classes, currentSegment, nextSegment, zoom, loop, start } = this.props;\n    const visibleSegment = (currentSegment || nextSegment);\n    const viewerPadding = this.state.windowWidth < 768 ? 12 : 32\n\n    const viewEndTime = fecha.format(new Date(zoom.end), 'HH:mm');\n    const startTime = fecha.format(new Date(zoom.start), 'MMM D @ HH:mm');\n    let headerText = `${startTime} - ${viewEndTime}`;\n    if (this.state.windowWidth >= 640) {\n      const startDay = fecha.format(new Date(zoom.start), 'dddd');\n      headerText = startDay + \" \" + headerText;\n    }\n    return (\n      <>\n        <ResizeHandler onResize={ this.onResize } />\n        <div className={classes.window} >\n          <div className={classes.header}>\n            <div className={classes.headerContext}>\n              <IconButton aria-label=\"Go Back\" onClick={ this.close }>\n                <KeyboardBackspaceIcon />\n              </IconButton>\n              <div className={ classes.headerInfo }>\n                { headerText }\n              </div>\n              <div></div>\n            </div>\n            <Timeline className={classes.headerTimeline} zoomed colored hasThumbnails hasRuler hasGradient\n              tooltipped dragSelection />\n          </div>\n          <div style={{ padding: viewerPadding }}>\n            <Media visibleSegment={ visibleSegment } loop={ loop } start={ start } />\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  currentSegment: 'workerState.currentSegment',\n  nextSegment: 'workerState.nextSegment',\n  device: 'workerState.device',\n  loop: 'workerState.loop',\n  start: 'workerState.start',\n  zoom: 'zoom',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveView));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport Raven from 'raven-js';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport Modal from '@material-ui/core/Modal';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { devices as DevicesApi } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\nimport { primeNav, selectDevice } from '../../actions';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    outline: 'none',\n  },\n  modalUnpair: {\n    width: theme.spacing.unit * 45,\n    maxWidth: '80%',\n  },\n  titleContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    marginBottom: 5,\n  },\n  buttonGroup: {\n    textAlign: 'right'\n  },\n  form: {\n    paddingTop: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit\n  },\n  formRow: {\n    minHeight: 75\n  },\n  textField: {\n    maxWidth: '70%',\n  },\n  fabProgress: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  wrapper: {\n    margin: theme.spacing.unit,\n    position: 'relative',\n    display: 'inline-block'\n  },\n  primeManageButton: {\n    marginTop: 20,\n  },\n  topButtonGroup: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap-reverse',\n    alignItems: 'baseline',\n  },\n  cancelButton: {\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n});\n\nclass DeviceSettingsModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deviceAlias: '',\n      loadingDeviceAlias: false,\n      loadingDeviceShare: false,\n      hasSavedAlias: false,\n      shareEmail: '',\n      unpairConfirm: false,\n      unpaired: false,\n    };\n\n    this.onPrimeSettings = this.onPrimeSettings.bind(this);\n    this.handleAliasChange = this.handleAliasChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.callOnEnter = this.callOnEnter.bind(this);\n    this.setDeviceAlias = this.setDeviceAlias.bind(this);\n    this.shareDevice = this.shareDevice.bind(this);\n    this.unpairDevice = this.unpairDevice.bind(this);\n    this.closeUnpair = this.closeUnpair.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.device && nextProps.device.alias !== this.state.deviceAlias) {\n      this.setState({ deviceAlias: nextProps.device.alias });\n    }\n  }\n\n  handleAliasChange(e) {\n    this.setState({\n      deviceAlias: e.target.value,\n      hasSavedAlias: e.target.value === this.props.device.dongle_id ? this.state.hasSavedAlias : false\n    });\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      shareEmail: e.target.value,\n      hasShared: false\n    });\n  }\n\n  callOnEnter(method, e) {\n    if (e.key === 'Enter') {\n      method();\n    }\n  }\n\n  async setDeviceAlias() {\n    const { dongle_id } = this.props.device;\n\n    if (this.state.loadingDeviceAlias) {\n      return;\n    }\n\n    this.setState({\n      loadingDeviceAlias: true,\n      hasSavedAlias: false\n    });\n    try {\n      const device = await DevicesApi.setDeviceAlias(dongle_id, this.state.deviceAlias.trim());\n      Timelineworker.updateDevice(device);\n      this.setState({\n        loadingDeviceAlias: false,\n        hasSavedAlias: true\n      });\n    } catch (e) {\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceAlias: false });\n    }\n  }\n\n  async shareDevice() {\n    if (this.state.loadingDeviceShare) {\n      return;\n    }\n\n    const { dongle_id } = this.props.device;\n    const email = this.state.shareEmail;\n\n    this.setState({\n      loadingDeviceShare: true,\n      hasShared: false\n    });\n    try {\n      await DevicesApi.grantDeviceReadPermission(dongle_id, this.state.shareEmail.trim());\n      this.setState({\n        loadingDeviceShare: false,\n        shareEmail: '',\n        hasShared: true\n      });\n    } catch (e) {\n      const err = e;\n      console.log(e, err);\n      console.log(err.statusCode);\n      debugger;\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceShare: false });\n    }\n  }\n\n  onPrimeSettings() {\n    let intv = null;\n    const doPrimeNav = () => {\n      if (intv) {\n        clearInterval(intv);\n      }\n      this.props.dispatch(primeNav());\n      this.props.onClose();\n    };\n\n    if (this.props.device.dongle_id !== this.props.stateDevice.dongle_id) {\n      this.props.dispatch(selectDevice(this.props.device.dongle_id));\n      intv = setInterval(() => {\n        if (this.props.device.dongle_id === this.props.stateDevice.dongle_id) {\n          doPrimeNav();\n        }\n      }, 100);\n    } else {\n      doPrimeNav();\n    }\n  }\n\n  async unpairDevice() {\n    this.setState({ loadingUnpair: true });\n    await DevicesApi.unpair(this.props.device.dongle_id);\n    this.setState({ loadingUnpair: false, unpaired: true })\n  }\n\n  closeUnpair() {\n    if (this.state.unpaired) {\n      window.location = window.location.origin;\n    } else {\n      this.setState({ unpairConfirm: false });\n    }\n  }\n\n  render() {\n    const { classes, device } = this.props;\n    if (!device) {\n      return <></>;\n    }\n\n    return ( <>\n      <Modal aria-labelledby=\"device-settings-modal\" aria-describedby=\"device-settings-modal-description\"\n        open={this.props.isOpen} onClose={this.props.onClose}>\n        <Paper className={classes.modal}>\n          <div className={ classes.titleContainer }>\n            <Typography variant=\"title\">\n              Device settings\n            </Typography>\n            <Typography variant=\"caption\">\n              { device.dongle_id }\n            </Typography>\n          </div>\n          <Divider />\n          <div className={ classes.topButtonGroup }>\n            <Button variant=\"outlined\" className={ classes.primeManageButton } onClick={ this.onPrimeSettings }>\n              Manage prime settings\n            </Button>\n            <Button variant=\"outlined\" className={ classes.primeManageButton }\n              onClick={ () => this.setState({ unpairConfirm: true }) }>\n              Unpair device\n            </Button>\n          </div>\n          <div className={classes.form}>\n            <div className={classes.formRow}>\n              <TextField id=\"device_alias\" label=\"Device Name\" className={ classes.textField }\n                value={ this.state.deviceAlias ? this.state.deviceAlias : '' }\n                onChange={this.handleAliasChange} onKeyPress={ (ev) => this.callOnEnter(this.setDeviceAlias, ev) } />\n              { (this.props.device.alias !== this.state.deviceAlias || this.state.hasSavedAlias) &&\n                <div className={classes.wrapper}>\n                  <IconButton variant=\"fab\" onClick={this.setDeviceAlias}>\n                    { this.state.hasSavedAlias && <CheckIcon /> || <SaveIcon /> }\n                  </IconButton>\n                  {this.state.loadingDeviceAlias && <CircularProgress size={48} className={classes.fabProgress} />}\n                </div>\n              }\n            </div>\n            <div className={classes.formRow}>\n              <TextField id=\"device_share\" label=\"Share by Email\" className={ classes.textField }\n                value={this.state.shareEmail} onChange={this.handleEmailChange} variant=\"outlined\"\n                onKeyPress={ (ev) => this.callOnEnter(this.shareDevice, ev) }\n                helperText=\"give another user read access to to this device\" />\n              { (this.state.shareEmail.length > 0 || this.state.hasShared) &&\n                <div className={classes.wrapper}>\n                  <IconButton variant=\"fab\" onClick={this.shareDevice}>\n                    { this.state.hasShared && <CheckIcon /> || <ShareIcon /> }\n                  </IconButton>\n                  {this.state.loadingDeviceShare && <CircularProgress size={48} className={classes.fabProgress} />}\n                </div>\n              }\n            </div>\n          </div>\n          <div className={classes.buttonGroup}>\n            <Button variant=\"contained\" className={ classes.cancelButton } onClick={this.props.onClose}>\n              Close\n            </Button>\n          </div>\n        </Paper>\n      </Modal>\n      <Modal aria-labelledby=\"device-settings-modal\" aria-describedby=\"device-settings-modal-description\"\n        open={this.state.unpairConfirm} onClose={ this.closeUnpair }>\n        <Paper className={ `${classes.modal} ${classes.modalUnpair}` }>\n          <div className={ classes.titleContainer }>\n            <Typography variant=\"title\">\n              Unpair device\n            </Typography>\n            <Typography variant=\"caption\">\n              { device.dongle_id }\n            </Typography>\n          </div>\n          <Divider />\n          <div className={ classes.topButtonGroup }>\n            <Button variant=\"contained\" className={ `${classes.primeManageButton} ${classes.cancelButton}` }\n              onClick={ this.closeUnpair }>\n              { this.state.unpaired ? 'Close' : 'Cancel' }\n            </Button>\n            { this.state.unpaired ?\n              <Typography variant=\"body2\">Unpaired</Typography> :\n              <Button variant=\"outlined\" className={ classes.primeManageButton } onClick={ this.unpairDevice }\n                disabled={ this.state.loadingUnpair }>\n                { this.state.loadingUnpair ? '...' : 'Confirm' }\n              </Button>\n            }\n          </div>\n        </Paper>\n      </Modal>\n    </> );\n  }\n}\n\nconst stateToProps = Obstruction({\n  subscription: 'workerState.subscription',\n  stateDevice: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceSettingsModal));\n","import React, { Component } from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nconst styles = (theme) => ({\n  shopLink: {\n    textDecoration: 'none',\n  }\n});\n\nclass ShopButton extends Component {\n  render() {\n    return (\n      <a href={this.props.link} target=\"_blank\" className={this.props.classes.shopLink}>\n        <Button variant=\"outlined\">\n          Shop\n        </Button>\n      </a>\n    );\n  }\n}\n\nexport default withStyles(styles)(ShopButton);\n","import React, { Component } from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport ShopButton from './shopButton';\n\nconst styles = (theme) => ({\n  root: {\n    display: 'flex',\n    paddingTop: '48px'\n  },\n  eon: {\n    display: 'block',\n    width: '100%',\n    paddingTop: '30px',\n  },\n  content: {\n    padding: '20px 12px',\n    textAlign: 'center'\n  },\n  imageContainer: {\n    display: 'flex',\n    alignItems: 'center',\n  }\n});\n\nclass CommaTwoUpsell extends Component {\n  render() {\n    return (\n      <div className={this.props.classes.root}>\n        <Grid item xs={6} className={this.props.classes.imageContainer}>\n          <img\n            src=\"https://comma.ai/two-onroad-transparent-01.png\"\n            className={this.props.classes.eon}\n          />\n        </Grid>\n        <Grid item xs={6} className={this.props.classes.content}>\n          <Typography>{ this.props.hook }</Typography>\n          <ShopButton link=\"https://comma.ai/shop/products/comma-two-devkit/?ref=explorer\" />\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(CommaTwoUpsell);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport { withStyles, Typography, IconButton } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport DeviceSettingsModal from './DeviceSettingsModal';\nimport { deviceTypePretty, deviceIsOnline } from '../../utils'\nimport CommaTwoUpsell from '../DriveView/commaTwoUpsell';\nimport Colors from '../../colors';\n\nconst styles = (theme) => ({\n  deviceList: {\n    overflow: 'auto',\n  },\n  device: {\n    alignItems: 'center',\n    cursor: 'pointer',\n    display: 'flex',\n    justifyContent: 'space-between',\n    padding: '16px 32px',\n    '&.isSelected': {\n      backgroundColor: '#171B1D',\n    }\n  },\n  settingsButton: {\n    height: 46,\n    width: 46,\n    color: Colors.white30,\n    transition: 'color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\n    '&:hover': {\n      color: Colors.white,\n    },\n  },\n  deviceOnline: {\n    width: 6,\n    height: 6,\n    borderRadius: 3,\n    backgroundColor: Colors.green400,\n  },\n  deviceOffline: {\n    backgroundColor: Colors.grey400,\n  },\n  deviceInfo: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  deviceName: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    marginLeft: 16,\n  },\n  deviceAlias: {\n    fontWeight: 600,\n  },\n  deviceId: {\n    color: '#525E66',\n  },\n  editDeviceIcon: {\n    color: 'white',\n    '&:hover': {\n      color: theme.palette.grey[100]\n    }\n  },\n  nameField: {\n    marginRight: theme.spacing.unit,\n  },\n  saveButton: {\n    marginRight: theme.spacing.unit,\n  },\n  textField: {\n    marginBottom: theme.spacing.unit\n  },\n});\n\nclass DeviceList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showDeviceSettingsModal: false,\n      deviceSettingsModalDevice: null,\n    };\n\n    this.renderDevice = this.renderDevice.bind(this);\n    this.handleOpenedSettingsModal = this.handleOpenedSettingsModal.bind(this);\n    this.handleClosedSettingsModal = this.handleClosedSettingsModal.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.selectedDevice !== this.props.selectedDevice\n        && nextProps.selectedDevice !== this.state.editingDevice) {\n      this.setState({ editingDevice: null });\n    }\n  }\n\n  handleOpenedSettingsModal(device, ev) {\n    ev.stopPropagation();\n    ev.preventDefault();\n    this.setState({ showDeviceSettingsModal: true, deviceSettingsModalDevice: device });\n  }\n\n  handleClosedSettingsModal() {\n    this.setState({ showDeviceSettingsModal: false });\n  }\n\n  render() {\n    let { classes, devices } = this.props;\n    const dongleId = this.props.selectedDevice;\n    let found = devices.some((device) => device.dongle_id === dongleId);\n    let onlyHasAppDevice = (devices.length === 0);\n\n    if (!found && dongleId) {\n      devices = [{\n        dongle_id: dongleId,\n        shared: true,\n        alias: 'Shared device',\n      }].concat(devices);\n    }\n\n    return (\n      <>\n        <div className={ `scrollstyle ${classes.deviceList}` }\n          style={{ height: `calc(100vh - ${this.props.headerHeight}px)` }}>\n          { devices.filter(this.filterDrivingDevice).map(this.renderDevice) }\n          { onlyHasAppDevice && <CommaTwoUpsell hook=\"Get started with comma two\" /> }\n        </div>\n        <DeviceSettingsModal isOpen={this.state.showDeviceSettingsModal} device={ this.state.deviceSettingsModalDevice }\n          onClose={this.handleClosedSettingsModal} />\n      </>\n    );\n  }\n\n  renderDevice(device) {\n    const { classes, isSuperUser } = this.props;\n    const isSelectedCls = (this.props.selectedDevice === device.dongle_id) ? 'isSelected' : '';\n    const alias = device.alias || deviceTypePretty(device.device_type);\n    const offlineCls = !deviceIsOnline(device) ? classes.deviceOffline : '';\n    return (\n      <div key={device.dongle_id} onClick={ () => this.props.handleDeviceSelected(device.dongle_id) }\n        className={ `${classes.device} ${isSelectedCls}` }>\n        <div className={classes.deviceInfo}>\n          <div className={ `${classes.deviceOnline} ${offlineCls}` }>&nbsp;</div>\n          <div className={ classes.deviceName }>\n            <Typography className={classes.deviceAlias}>\n              { alias }\n            </Typography>\n            <Typography variant=\"caption\" className={classes.deviceId}>\n              { device.dongle_id }\n            </Typography>\n          </div>\n        </div>\n        { ((!device.shared && device.is_owner) || isSuperUser) &&\n          <IconButton className={classes.settingsButton} onClick={ (ev) => this.handleOpenedSettingsModal(device, ev) }>\n            <SettingsIcon className={classes.settingsButtonIcon} />\n          </IconButton>\n        }\n      </div>\n    );\n  }\n\n  filterDrivingDevice(device) {\n    return device.device_type !== 'panda';\n  }\n}\n\nconst stateToProps = Obstruction({\n  devices: 'workerState.devices',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceList));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { Link } from 'react-router-dom';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport 'mapbox-gl/src/css/mapbox-gl.css';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Drawer from '@material-ui/core/Drawer';\n\nimport DeviceList from '../Dashboard/DeviceList';\n\nimport { selectRange, selectDevice } from '../../actions';\n\nconst ZOOM_BUFFER = 1000; // 1 second on either end\n\nconst styles = (/* theme */) => ({\n  header: {\n    display: 'flex',\n    height: 64,\n    minHeight: 64,\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    minHeight: 0,\n  },\n  logo: {\n    alignItems: 'center',\n    display: 'flex',\n    textDecoration: 'none',\n    minHeight: 64,\n  },\n  logoImg: {\n    height: '34px',\n    margin: '0px 28px',\n    width: 'auto',\n  },\n  logoText: {\n    fontSize: 20,\n    fontWeight: 800,\n  },\n  drawerContent: {\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    background: 'linear-gradient(180deg, #1B2023 0%, #111516 100%)',\n  },\n  sidebarHeader: {\n    alignItems: 'center',\n    padding: 14.5,\n    color: '#fff',\n    display: 'flex',\n    width: '100%',\n    paddingLeft: 0,\n    backgroundColor: '#1D2225',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n  },\n});\n\nclass AppDrawer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDeviceSelected = this.handleDeviceSelected.bind(this);\n    this.toggleDrawerOff = this.toggleDrawerOff.bind(this);\n  }\n\n  handleDeviceSelected(dongleId) {\n    this.props.dispatch(selectDevice(dongleId));\n    this.toggleDrawerOff();\n  }\n\n  toggleDrawerOff() {\n    this.props.handleDrawerStateChanged(false);\n  }\n\n  render() {\n    const { classes, isPermanent, drawerIsOpen, selectedDongleId } = this.props;\n\n    return (\n      <Drawer open={ isPermanent || drawerIsOpen } onClose={this.toggleDrawerOff}\n        variant={ isPermanent ? \"permanent\" : \"temporary\" }\n        PaperProps={{ style: { width: this.props.width, top: 'auto' }}}>\n        <div className={classes.drawerContent}>\n          { !isPermanent &&\n            <Link to=\"/\" className={ classes.logo }>\n              <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n              <Typography className={ classes.logoText }>explorer</Typography>\n            </Link>\n          }\n          <div style={{ height: 24 }}></div>\n          <DeviceList selectedDevice={ selectedDongleId } handleDeviceSelected={this.handleDeviceSelected}\n            headerHeight={ 64 + 24 } />\n        </div>\n      </Drawer>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  selectedDongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AppDrawer));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport PropTypes from 'prop-types';\nimport localforage from 'localforage';\n\nimport { withStyles, Modal, Paper, Typography, Button, CircularProgress, Divider } from '@material-ui/core';\nimport 'mapbox-gl/src/css/mapbox-gl.css';\n\nimport { devices as DevicesApi } from '@commaai/comma-api';\n\nimport AppHeader from './AppHeader';\nimport Dashboard from './Dashboard';\nimport DriveView from './DriveView';\nimport AppDrawer from './AppDrawer';\n\nimport Timelineworker from '../timeline';\nimport { selectRange, primeNav } from '../actions';\nimport { getDongleID, getZoom, getPrimeNav } from '../url';\nimport ResizeHandler from './ResizeHandler';\nimport Colors from '../colors';\n\nconst styles = (theme) => ({\n  base: {\n  },\n  window: {\n    background: 'linear-gradient(180deg, #1D2225 0%, #16181A 100%)',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    maxWidth: '90%',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    outline: 'none',\n    '& p': { marginTop: 10 },\n  },\n  closeButton: {\n    marginTop: 10,\n    float: 'right',\n    backgroundColor: Colors.grey200,\n    color: Colors.white,\n    '&:hover': {\n      backgroundColor: Colors.grey400,\n    },\n  },\n  fabProgress: {\n    marginTop: 10,\n  },\n});\n\nclass ExplorerApp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settingDongle: null,\n      drawerIsOpen: false,\n      windowWidth: window.innerWidth,\n      headerRef: null,\n      pairLoading: false,\n      pairError: null,\n      pairDongleId: null,\n    };\n\n    this.handleDrawerStateChanged = this.handleDrawerStateChanged.bind(this);\n    this.onResize = this.onResize.bind(this);\n    this.updateHeaderRef = this.updateHeaderRef.bind(this);\n    this.closePair = this.closePair.bind(this);\n  }\n\n  componentWillMount() {\n    this.checkProps(this.props);\n  }\n\n  async componentDidMount() {\n    const { pairLoading, pairError, pairDongleId } = this.state;\n    let pairToken;\n    try {\n      pairToken = await localforage.getItem('pairToken');\n    } catch (err) {\n      console.log(err);\n    }\n    if (pairToken && !pairLoading && !pairError && !pairDongleId) {\n      this.setState({ pairLoading: true });\n      try {\n        const resp = await DevicesApi.pilotPair(pairToken);\n        if (resp.dongle_id) {\n          await localforage.removeItem('pairToken');\n          this.setState({\n            pairLoading: false,\n            pairError: null,\n            pairDongleId: resp.dongle_id,\n          });\n\n          const device = await DevicesApi.fetchDevice(resp.dongle_id);\n          Timelineworker.updateDevice(device);\n        } else {\n          await localforage.removeItem('pairToken');\n          this.setState({ pairDongleId: null, pairLoading: false, pairError: `Could not pair: ${resp}` });\n        }\n      } catch(err) {\n        await localforage.removeItem('pairToken');\n        this.setState({ pairDongleId: null, pairLoading: false, pairError: `Error: ${err.message}` });\n      }\n    }\n  }\n\n  async closePair() {\n    const { pairDongleId } = this.state;\n    if (pairDongleId) {\n      Timelineworker.selectDevice(pairDongleId);\n    }\n    await localforage.removeItem('pairToken');\n    this.setState({ pairLoading: false, pairError: null, pairDongleId: null });\n  }\n\n  componentWillReceiveProps(props) {\n    this.checkProps(props);\n\n    if (this.props.pathname !== props.pathname) {\n      this.setState({ drawerIsOpen: false });\n    }\n\n    const isZoomed = props.expanded;\n    const { expanded } = this.props;\n    const wasZoomed = expanded;\n\n    if (isZoomed && !wasZoomed) {\n      Timelineworker.play();\n    }\n    if (!isZoomed && wasZoomed) {\n      Timelineworker.pause();\n    }\n  }\n\n  onResize(windowWidth) {\n    this.setState({ windowWidth });\n  }\n\n  handleDrawerStateChanged(drawerOpen) {\n    this.setState({\n      drawerIsOpen: drawerOpen\n    });\n  }\n\n  checkProps(props) {\n    const dongleId = getDongleID(props.pathname);\n    const zoom = getZoom(props.pathname);\n\n    const { settingDongle } = this.state;\n    const curDongle = settingDongle || props.dongleId;\n    const { dispatch } = this.props;\n\n    if (dongleId) {\n      if (curDongle !== dongleId) {\n        if (!settingDongle) {\n          Timelineworker.selectDevice(dongleId);\n          this.setState({\n            settingDongle: dongleId\n          });\n        }\n      } else {\n        this.setState({\n          settingDongle: null\n        });\n      }\n    }\n\n    if (getPrimeNav(props.pathname)) {\n      dispatch(primeNav());\n    } else {\n      dispatch(selectRange(zoom.start, zoom.end));\n    }\n  }\n\n  updateHeaderRef(ref) {\n    if (!this.state.headerRef) {\n      this.setState({ headerRef: ref });\n    }\n  }\n\n  render() {\n    const { classes, expanded } = this.props;\n    const { drawerIsOpen, pairLoading, pairError, pairDongleId } = this.state;\n\n    const isLarge = this.state.windowWidth > 1080;\n\n    const sidebarWidth = Math.max(280, this.state.windowWidth * 0.2);\n\n    const headerHeight = this.state.headerRef ? this.state.headerRef.getBoundingClientRect().height : 66;\n    let containerStyles = {\n      minHeight: `calc(100vh - ${headerHeight}px)`,\n    };\n    if (isLarge) {\n      containerStyles = {\n        ...containerStyles,\n        width: `calc(100% - ${sidebarWidth}px)`,\n        marginLeft: sidebarWidth\n      };\n    }\n\n    let drawerStyles = {\n      minHeight: `calc(100vh - ${headerHeight}px)`,\n    };\n\n    return (\n      <div className={classes.base}>\n        <ResizeHandler onResize={ this.onResize } />\n        <AppHeader drawerIsOpen={ drawerIsOpen } annotating={ expanded } showDrawerButton={ !isLarge }\n          handleDrawerStateChanged={this.handleDrawerStateChanged} forwardRef={ this.updateHeaderRef } />\n        <AppDrawer drawerIsOpen={ drawerIsOpen } isPermanent={ isLarge } width={ sidebarWidth }\n          handleDrawerStateChanged={this.handleDrawerStateChanged} style={ drawerStyles } />\n        <div className={ classes.window } style={ containerStyles }>\n          { expanded ? (<DriveView />) : (<Dashboard />) }\n        </div>\n        <Modal open={ Boolean(pairLoading || pairError || pairDongleId) } onClose={ this.closePair }>\n          <Paper className={classes.modal}>\n            <Typography variant=\"title\">Pairing device</Typography>\n            <Divider />\n            { pairLoading && <CircularProgress size={32} className={classes.fabProgress} /> }\n            { pairDongleId && <Typography>Successfully paired device { pairDongleId }</Typography> }\n            { pairError && <Typography>{ pairError }</Typography> }\n            <Button variant=\"contained\" className={ classes.closeButton } onClick={ this.closePair }>\n              Close\n            </Button>\n          </Paper>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nExplorerApp.propTypes = {\n  expanded: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  pathname: 'router.location.pathname',\n  dongleId: 'workerState.dongleId',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(ExplorerApp));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport window from 'global/window';\nimport PropTypes from 'prop-types';\nimport qs from 'query-string';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport { config as AuthConfig } from '@commaai/my-comma-auth';\n\nimport { auth_apple, auth_github, auth_google } from '../icons';\n\nconst styles = (/* theme */) => ({\n  baseContainer: {\n    width: '100%',\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  base: {\n    overflowY: 'auto',\n    padding: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n  },\n  logoImg: {\n    height: 45,\n    marginBottom: 60,\n    width: 'auto',\n  },\n  logoText: {\n    fontSize: 36,\n    fontWeight: 800,\n  },\n  tagline: {\n    maxWidth: '90%',\n    textAlign: 'center',\n    margin: '10px 0 52px',\n    fontSize: '18px',\n  },\n  logInButton: {\n    cursor: 'pointer',\n    alignItems: 'center',\n    background: '#ffffff',\n    display: 'flex',\n    borderRadius: 80,\n    fontSize: 21,\n    height: 80,\n    justifyContent: 'center',\n    textDecoration: 'none',\n    width: 400,\n    maxWidth: '90%',\n    marginBottom: 10,\n    '&:hover': {\n      background: '#eee',\n    },\n  },\n  buttonText: {\n    fontSize: 18,\n    width: 190,\n    textAlign: 'center',\n    color: 'black',\n    fontWeight: 600,\n  },\n  buttonImage: {\n    height: 40,\n  },\n  demoLink: {\n    textDecoration: 'none',\n    justifyContent: 'center',\n    height: '40px',\n    display: 'flex',\n  },\n  demoLinkText: {\n    textDecoration: 'underline',\n    fontSize: '16px',\n  },\n});\n\nconst DEMO_LINK = `${window.location.origin}/?demo=1`;\n\nclass AnonymousLanding extends Component {\n  componentWillMount() {\n    if (typeof window.sessionStorage !== 'undefined') {\n      const { pathname } = this.props;\n      sessionStorage.redirectURL = pathname;\n    }\n  }\n\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    document.body.appendChild(script);\n    script.onload = () => {\n      AppleID.auth.init({\n        clientId : AuthConfig.APPLE_CLIENT_ID,\n        scope : AuthConfig.APPLE_SCOPES,\n        redirectURI : AuthConfig.APPLE_REDIRECT_URI,\n        usePopup : true,\n      });\n    };\n    script.src = \"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js\";\n    script.async = true;\n    document.addEventListener('AppleIDSignInOnSuccess', (data) => {\n      window.location = [AuthConfig.APPLE_REDIRECT_PATH,\n        qs.stringify({code: data.detail.authorization.code})].join('?');\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={ classes.baseContainer }>\n        <div className={classes.base}>\n          <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n          <Typography className={classes.logoText}>explorer</Typography>\n          <Typography className={classes.tagline}>\n            View driving data and manage your device\n          </Typography>\n          <a href={ AuthConfig.GOOGLE_REDIRECT_LINK } className={ classes.logInButton }>\n            <img className={ classes.buttonImage } src={ auth_google } />\n            <Typography className={ classes.buttonText }>Sign in with Google</Typography>\n          </a>\n          <a onClick={ () => AppleID.auth.signIn() } className={classes.logInButton}>\n            <img className={ classes.buttonImage } src={ auth_apple } />\n            <Typography className={ classes.buttonText }>Sign in with Apple</Typography>\n          </a>\n          <a href={AuthConfig.GITHUB_REDIRECT_LINK} className={classes.logInButton}>\n            <img className={ classes.buttonImage } src={ auth_github } />\n            <Typography className={ classes.buttonText }>Sign in with GitHub</Typography>\n          </a>\n          <a href={DEMO_LINK} className={classes.demoLink}>\n            <Typography className={classes.demoLinkText}>Try the demo</Typography>\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nAnonymousLanding.propTypes = {\n  pathname: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  pathname: 'router.location.pathname'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AnonymousLanding));\n","import { WORKER_STATE_UPDATE } from '../actions/types';\n\nconst initialState = {};\n\nexport default function workerState(_state = initialState, action) {\n  let state = { ..._state };\n  switch (action.type) {\n    case WORKER_STATE_UPDATE:\n      for (const [key, value] of Object.entries(action.data)) {\n        state[key] = value;\n      }\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import { TIMELINE_SELECTION_CHANGED } from '../actions/types';\n\nconst initialState = {\n  start: 0,\n  end: 0,\n  expanded: false\n};\n\nexport default function zoom(_state = initialState, action) {\n  let state = _state;\n  switch (action.type) {\n    case TIMELINE_SELECTION_CHANGED:\n      state = {\n        start: action.start,\n        end: action.end,\n        expanded: !!(action.start && action.end)\n      };\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import workerState from './workerState';\nimport zoom from './zoom';\n\nconst reducers = {\n  workerState,\n  zoom,\n};\n\nexport default reducers;\n","import window from 'global/window';\nimport { compose } from 'redux';\n\nfunction getComposeEnhancers() {\n  if (process.env.REACT_APP_DEVTOOLS && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) {\n    return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\n  }\n  return compose;\n}\n\nconst composeEnhancers = getComposeEnhancers();\n\nexport default composeEnhancers;\n","import * as Redux from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { createBrowserHistory } from 'history';\nimport reducers from './reducers';\nimport composeEnhancers from './devtools';\n\nexport const history = createBrowserHistory();\n\nexport function createStore() {\n  const store = Redux.createStore(\n    connectRouter(history)(\n      Redux.combineReducers(reducers)\n    ),\n    composeEnhancers(Redux.applyMiddleware(thunk, routerMiddleware(history)))\n  );\n\n  return store;\n}\n","/* global gtag */\n\nconst GA_TRACKING_ID = 'UA-80079182-7';\n\nexport function initGoogleAnalytics(history) {\n  history.listen((location) => {\n    if (typeof gtag === 'function') {\n      gtag('config', GA_TRACKING_ID, {\n        page_title: document.title,\n        page_location: window.location.href,\n        page_path: location.pathname\n      });\n    }\n  });\n}\n","import React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport { Route, Switch, Redirect } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport document from 'global/document';\nimport qs from 'query-string';\nimport localforage from 'localforage';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\n\nimport MyCommaAuth, { config as AuthConfig, storage as AuthStorage } from '@commaai/my-comma-auth';\nimport { auth as AuthApi, request as Request, billing as Billing, athena as Athena } from '@commaai/comma-api';\n\nimport Explorer from './components/explorer';\nimport AnonymousLanding from './components/anonymous';\n\nimport TimelineWorker from './timeline';\nimport { history, createStore } from './store';\nimport { updateState } from './actions';\nimport { initGoogleAnalytics } from './analytics';\nimport * as Demo from './demo';\n\ninitGoogleAnalytics(history);\nconst store = createStore();\n\nTimelineWorker.onStateChange((data) => {\n  store.dispatch(updateState(data));\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      initialized: false,\n      demo: false,\n    };\n\n    const pairToken = qs.parse(window.location.search).pair;\n    if (pairToken) {\n      try {\n        localforage.setItem('pairToken', pairToken);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  async componentDidMount() {\n    const isDemo = await Demo.init();\n    if (isDemo) {\n      await localforage.setItem('isDemo', '1');\n      await TimelineWorker.init(true);\n      TimelineWorker.selectTimeRange(1564443025000, Date.now());\n      this.setState({\n        initialized: true,\n        demo: true,\n      });\n    }\n\n    return await this.auth();\n  }\n\n  componentWillUnmount() {\n    TimelineWorker.stop();\n  }\n\n  async auth() {\n    if (document.location) {\n      if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH)\n        {\n        const { code } = qs.parse(document.location.search);\n        try {\n          let token = null;\n          if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GOOGLE_REDIRECT_URI, 'google');\n          } else if (document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.APPLE_REDIRECT_URI, 'apple');\n          } else if (document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GItHUB_REDIRECT_URI, 'github');\n          }\n          if (token) {\n            AuthStorage.setCommaAccessToken(token);\n          }\n          // done authing!!\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    }\n\n    const token = await MyCommaAuth.init();\n    Request.configure(token);\n    Billing.configure(token);\n    Athena.configure(token);\n\n    if (MyCommaAuth.isAuthenticated()) {\n      await TimelineWorker.init();\n    }\n\n    this.setState({ initialized: true });\n  }\n\n  redirectLink() {\n    let url = '/';\n    if (typeof window.sessionStorage !== 'undefined') {\n      url = sessionStorage.redirectURL || '/';\n    }\n    return url;\n  }\n\n  authRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to={this.redirectLink()} />} />\n        <Route path=\"/\" component={Explorer} />\n      </Switch>\n    );\n  }\n\n  ananymousRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to=\"/\" />} />\n        <Route path=\"/\" component={AnonymousLanding} />\n      </Switch>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <Grid container alignItems=\"center\" style={{ width: '100%', height: '100vh' }}>\n        <Grid item align=\"center\" xs={12}>\n          <CircularProgress size=\"10vh\" style={{ color: '#525E66' }} />\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    if (!this.state.initialized) {\n      return this.renderLoading();\n    }\n    return (\n      <Provider store={store}>\n        <ConnectedRouter history={history}>\n          { (MyCommaAuth.isAuthenticated() || this.state.demo) ? this.authRoutes() : this.ananymousRoutes() }\n        </ConnectedRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register() {\n  if (process.env.REACT_APP_SERVICEWORKER && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import Raven from 'raven-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport document from 'global/document';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\n\nimport './index.css';\nimport 'react-virtualized/styles.css';\nimport App from './App';\nimport Theme from './theme';\nimport { register, unregister } from './registerServiceWorker';\n\nif (process.env.REACT_APP_SENTRY_ENV) {\n  Raven.config(\n    'https://6a242abfa01b4660aa34f150e87de018@sentry.io/1234624',\n    { environment: process.env.REACT_APP_SENTRY_ENV }\n  ).install();\n}\n\nif (process.env.NODE_ENV === 'production' && process.env.REACT_APP_SERVICEWORKER) {\n  register();\n} else {\n  unregister();\n}\n\nReactDOM.render((\n  <MuiThemeProvider theme={Theme}>\n    <CssBaseline />\n    <App />\n  </MuiThemeProvider>\n), document.getElementById('root'));\n","\nfunction getDefaultStartDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  return (new Date(d.getTime() - 1000 * 60 * 60 * 24 * 14)).getTime();\n}\n\nfunction getDefaultEndDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  // return (new Date(d.getTime() - 1000 * 60 * 60 * 36)).getTime();\n  return d.getTime();\n}\n\nmodule.exports = {\n  start: getDefaultStartDate(),\n  end: getDefaultEndDate(),\n\n  // dongleId: '99c94dc769b5d96e',\n  // dongleId: 'ff83f397542ab647',\n  // dongleId: 'f1b4c567731f4a1b',\n  dongleId: null,\n\n  route: false,\n  segment: 0,\n  nextSegment: null,\n  desiredPlaySpeed: 1, // speed set by user\n  isBufferingVideo: false, // if we're currently buffering for more data\n  isBufferingData: true, // if we're currently buffering for more data\n  offset: 0, // in miliseconds from the start\n  startTime: Date.now(), // millisecond timestamp in which play began\n\n  segments: [],\n  // this data should come from the API server instead\n  // segments: [{\n  //   route: '99c94dc769b5d96e|2018-04-09--10-10-00',\n  //   offset: 10000,\n  //   length: 2558000,\n  //   segments: 43\n  // }, {\n  //   route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n  //   offset: 2658000,\n  //   length: 214000,\n  //   segments: 4\n  // }],\n\n  segmentData: null,\n\n  loop: {\n    // in time instead of offset\n    // this makes it so that the timespan can change without this changing\n    // thats helpful to shared links and other things probably...\n    startTime: null,\n    duration: null\n  },\n\n  profile: {},\n  devices: [],\n  isDemo: false,\n  primeNav: false,\n  subscription: null,\n  paymentMethod: null,\n};\n","import * as capnp from 'capnp-ts';\nimport toJSON from '@commaai/capnp-json';\nimport BufferUtils from '@commaai/log_reader/src/buffer';\nimport { Event, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\n\n// IE\nif (!Number.MAX_SAFE_INTEGER) {\n  Number.MAX_SAFE_INTEGER = (2 ** 53) - 1;\n}\n\nfunction binSearch(index, start, end, milis, nanos) {\n  if (start >= end) {\n    return start;\n  }\n  const searchIndex = Math.floor((end - start) / 2) + start;\n  // searchIndex wont equal end, only start\n\n  if (milis < index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos < index[searchIndex][1])) {\n    return binSearch(index, start, searchIndex, milis, nanos);\n  }\n  if (milis > index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos > index[searchIndex][1])) {\n    if (searchIndex === index.length - 1\n      || milis < index[searchIndex + 1][0]\n      || (milis === index[searchIndex + 1][0] && nanos < index[searchIndex + 1][1])) {\n      return searchIndex;\n    }\n    return binSearch(index, searchIndex + 1, end, milis, nanos);\n  }\n  return searchIndex;\n}\n\nfunction indexBuffer(index, buffer, bufferIndex) {\n  let offset = 0;\n  const calibrations = [];\n  let lastIndex = index.length ? index.length - 1 : 0;\n  // debugger;\n\n  while (offset < buffer.byteLength) {\n    const messageBuff = BufferUtils.readMessage(buffer, offset);\n    const msg = new capnp.Message(messageBuff, false);\n    const event = msg.getRoot(Event);\n    const monoTime = event.getLogMonoTime().toString();\n    const milis = Number(monoTime.substr(0, monoTime.length - 6));\n    const nanos = Number(monoTime.substr(-6, 6));\n    const messageSize = messageBuff.byteLength;\n    const which = event.which();\n\n    if (which === EventWhich.LIVE_CALIBRATION) {\n      calibrations.push(toJSON(event));\n    }\n\n    if (!index.length\n      || (milis > index[index.length - 1][0]\n      || (milis === index[index.length - 1][0] && nanos > index[index.length - 1][1]))) {\n      index.push([\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n      lastIndex = index.length - 1;\n    } else {\n      let searchIndex = lastIndex;\n      let incAmount = 1;\n      // debugger;\n      while (searchIndex < index.length - 1\n        && (milis > index[searchIndex][0]\n        || (milis === index[searchIndex][0] && nanos > index[searchIndex][1]))) {\n        incAmount = Math.min(Math.floor(index.length - searchIndex / 2), incAmount * 2);\n        searchIndex = Math.min(searchIndex + incAmount, index.length - 1);\n      }\n      // debugger;\n      searchIndex = binSearch(index, searchIndex - incAmount, searchIndex, milis, nanos);\n      // debugger;\n      searchIndex += 1;\n      lastIndex = searchIndex;\n\n      index.splice(searchIndex, 0, [\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n    }\n    offset += messageSize;\n  }\n\n  return calibrations;\n}\n\nexport function createIndex(_buffer) {\n  const buffer = Buffer.from(_buffer);\n  const index = [];\n\n  const calibrations = indexBuffer(index, buffer, 0);\n\n  return {\n    index,\n    buffers: [buffer],\n    calibrations\n  };\n}\n\nexport function addToIndex(_index, _newBuff) {\n  const newBuff = Buffer.from(_newBuff);\n  const index = _index;\n  index.buffers.push(newBuff);\n  const calibrations = indexBuffer(index.index, newBuff, index.buffers.length - 1);\n  index.calibrations = index.calibrations.concat(calibrations);\n\n  return index;\n}\n\nexport function findMonoTime(index, monoTime, start = 0, end = index.index.length) {\n  if (start === index.index.length) {\n    return index.index.length - 1;\n  }\n  if (start >= end) {\n    return end;\n  }\n  // index is floored so always increase start\n  const curIndex = Math.floor((end - start) / 2 + start);\n  const curMillis = index.index[curIndex][0];\n  // we can have duplicates so we treat matches as being too high since we're\n  // looking for the first instance of a duplicate\n  if (monoTime < curMillis) {\n    return findMonoTime(index, monoTime, start, curIndex);\n  }\n  if (monoTime > curMillis) {\n    return findMonoTime(index, monoTime, curIndex + 1, end);\n  }\n\n  return curIndex;\n}\n"],"sourceRoot":""}