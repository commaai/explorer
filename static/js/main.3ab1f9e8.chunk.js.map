{"version":3,"sources":["timeline/logIndex.js","timeline/initialState.js","timeline/logReader/index.js","timeline/logReader/logReader.worker.js","icons/auth_apple.png","icons/auth_github.png","icons/auth_google.png","icons/icon-chffr-wheel.svg","timeline/playback.js","timeline/cache.js","url.js","timeline/segments.js","timeline/reducers/globalState.js","timeline/reducers/index.js","demo/index.js","timeline/actions/types.js","timeline/store.js","timeline/actions/index.js","timeline/startup.js","timeline/commands.js","timeline/timeline.js","timeline/index.js","components/AppHeader/TimeFilter.js","icons/index.js","components/TimeDisplay/index.js","components/AppHeader/index.js","actions/index.js","actions/types.js","utils/index.js","components/Annotations/shopButton.js","components/Annotations/commaTwoUpsell.js","components/Dashboard/DeviceList.js","colors.js","components/Dashboard/DeviceSettingsModal.js","api/geocode.js","components/Timeline/thumbnails.js","theme.js","components/Timeline/index.js","api/stripe.js","components/Dashboard/DriveListItem.js","utils/conversions.js","components/Dashboard/DriveList.js","components/Prime/PrimePayment.js","components/Prime/PrimeManage.js","components/Prime/util.js","components/Prime/PrimeChecklist.js","components/Prime/PrimeCheckout.js","components/Prime/index.js","components/Prime/PrimeBanner.js","components/Dashboard/index.js","components/Annotations/AnnotationListItem.js","components/Annotations/AnnotationList.js","components/Annotations/AnnotationTabs.js","components/DriveMap/index.js","components/DriveVideo/hlsSource.js","components/DriveVideo/canvas.js","components/DriveVideo/buffering.js","components/DriveVideo/index.js","components/Annotations/Media.js","components/Annotations/footer.js","components/Annotations/index.js","components/AppDrawer/index.js","components/explorer.js","components/anonymous.js","reducers/workerState.js","reducers/zoom.js","reducers/index.js","devtools.js","store.js","analytics.js","App.js","registerServiceWorker.js","index.js"],"names":["binSearch","index","start","end","milis","nanos","searchIndex","Math","floor","length","indexBuffer","buffer","bufferIndex","offset","calibrations","lastIndex","byteLength","messageBuff","BufferUtils","readMessage","event","capnp","getRoot","Event","monoTime","getLogMonoTime","toString","Number","substr","messageSize","which","EventWhich","LIVE_CALIBRATION","push","toJSON","incAmount","min","splice","createIndex","_buffer","Buffer","from","buffers","addToIndex","_index","_newBuff","newBuff","concat","findMonoTime","curIndex","curMillis","MAX_SAFE_INTEGER","module","exports","getDefaultStartDate","d","Date","setHours","getHours","getTime","getDefaultEndDate","dongleId","route","segment","nextSegment","playSpeed","desiredPlaySpeed","shouldBuffer","bufferingVideo","bufferingData","startTime","now","segments","segmentData","loop","duration","profile","devices","isDemo","primeNav","subscription","paymentMethod","require","LogReaderWorker","DataEvent","logReader","handleMessage","msg","broadcast","relayMessage","port","postMessage","data","getWorker","Error","channel","MessageChannel","logPort","port1","apiPort","port2","onmessage","onData","listen","Worker","initialState","currentOffset","state","loopOffset","cachePort","ExpireEvent","onExpire","command","getEntry","touch","partial","getDongleID","pathname","parts","split","filter","m","getZoom","getPrimeNav","getCurrentSegment","o","undefined","i","len","thisSegment","segmentIndex","url","routeOffset","startOffset","events","deviceType","videoAvailableBetweenOffsets","hpgps","hasVideo","hasDriverCamera","hasDriverCameraStream","cameraStreamSegCount","driverCameraStreamSegCount","distanceMiles","getNextSegment","finishSegment","lastEngage","vidAvail","lastVideoRange","slice","sort","a","b","route_offset_millis","route_offset_nanos","forEach","type","end_offset_nanos","offset_nanos","end_offset_millis","offset_millis","end_route_offset_nanos","end_route_offset_millis","segmentsFromMetadata","segmentsData","curSegment","curVideoStartOffset","proc_log","proc_qlog","segmentHasDriverCamera","proc_dcamera","segmentHasDriverCameraStream","segmentHasVideo","proc_camera","canonical_route_name","isFinite","pop","join","start_time_utc_millis","startCoord","start_lng","start_lat","replace","devicetype","locStart","locEnd","max","canonical_name","endCoord","end_lng","end_lat","API","hasSegmentMetadata","console","log","parseSegmentMetadata","_segments","annotations","routeStartTimes","map","_segment","round","segmentNum","end_time_utc_millis","JSON","parse","events_json","plannedDisengageEvents","should_take_control","_event","timestamp","canonical_segment_name","annotation","offset_nanos_part","id","error","is_planned","reason","alert","reduce","closestAlert","nextAlert","closestAlertDiff","abs","alertText2","warn","time","dongle_id","hasCameraAtOffset","some","int","updateSegments","fetchSegmentMetadata","promise","insertSegmentMetadata","resolveAnnotation","SEGMENT_LENGTH","reducer","_state","action","found","s","e","warning","currentSegment","range","isDemoCached","reducers","globalState","deviceIndex","device","find","alias","create_time","device_type","imei","is_owner","serial","findIndex","store","createStore","reduceReducers","speed","buffering","isBuffering","Segments","Reducers","isDemoQuery","qs","window","location","search","demo","init","localforage","getItem","selectDevice","primeGetSubscriptionAction","primeGetPaymentMethodAction","primeNavAction","nav","demoProfile","demoDevices","dispatch","Devices","listDevices","Account","getProfile","dev","prime","superuser","Billing","getSubscription","then","catch","err","getPaymentMethod","PortState","CreateStore","initAuthPromise","Auth","token","Request","configure","hasGottenSegmentData","hasGottenSegmentDataPromise","Promise","resolve","segmentDataHandler","Demo","selectDeviceAction","all","subscribe","getState","commands","close","unlisten","broadcastChannel","play","Playback","pause","seek","bufferVideo","bufferData","disableBuffer","hello","selectTimeRange","selectTimeRangeAction","selectLoop","updateDevice","updateDeviceAction","ports","setCachePort","Cache","stop","primeGetSubscription","primeGetPaymentMethod","demoSegments","BroadcastEvent","DataLogEvent","SegmentTimerStore","segmentsRequest","annotationsRequest","scheduleSegmentUpdate","timeUntilNext","stopTimer","curTime","timeUntilLoop","loopStartOffset","loopStartSegment","timeout","checkSegmentMetadata","annotationsData","Drives","getSegmentMetadata","Annotations","listAnnotations","stack","ensureSegmentDataTimer","ensureSegmentData","entry","UnloadEvent","StateEvent","IndexEvent","InitEvent","InitPromise","addEventListener","startPath","timeline","options","onStateChange","onIndexed","this","requestId","openRequests","initPromise","expire","bind","hasInit","readyPromise","zoom","AuthStorage","getCommaAccessToken","reject","handleData","disconnect","setState","LogIndex","getStartMonoTime","getIndex","currentLogMonoTime","logIndex","lastEvents","_eventCount","logMonoTime","getLogIndex","eventCount","Array","u","getEvent","getNextLogIndex","_logIndex","CapnpEvent","timestampToOffset","firstFrameTime","FRAME","Frame","TimestampEof","currentInitData","curSegLog","INIT_DATA","currentModel","getEventByType","MODEL","currentModelV2","MODEL_V2","currentRadarState","RADAR_STATE","currentMPC","LIVE_MPC","currentCarState","CAR_STATE","currentControlsState","CONTROLS_STATE","currentDriverMonitoring","DRIVER_MONITORING","currentThumbnail","THUMBNAIL","currentLiveCalibration","maxTimeDiff","curSegNum","getCalibration","indexes","keys","Object","TimeSelect","props","handleSelectChange","handleClose","changeStart","changeEnd","handleSave","showPicker","selection","target","value","Timelineworker","selectedOption","timeRange","lastWeekText","weekAgo","fecha","format","last2WeeksText","twoWeeksAgo","last24HoursText","render","minDate","toISOString","name","onChange","className","classes","headerDropdown","aria-labelledby","aria-describedby","open","onClose","modal","label","showTodayButton","buttonGroup","variant","onClick","color","Component","stateToProps","Obstruction","connect","withStyles","styles","theme","root","position","padding","spacing","unit","width","margin","left","top","transform","textAlign","fontWeight","marginRight","minWidth","auth_apple","auth_github","auth_google","AccountIcon","HistoryBackIcon","HistoryForwardIcon","transform-origin","chevronPath","rotation","ChevronIcon","DownArrow","UpArrow","RightArrow","timerSteps","jumpBack","amount","TimelineWorker","jumpForward","TimeDisplay","textHolder","React","createRef","updateTime","togglePause","increaseSpeed","decreaseSpeed","displayTime","getDisplayTime","componentDidMount","mounted","raf","componentWillUnmount","current","newDisplayTime","indexOf","isPaused","cx","base","isExpanded","expanded","isThin","container","item","xs","align","iconBox","aria-label","icon","dateTime","style","paddingTop","ref","currentTime","alignItems","direction","tinyArrow","tinyArrowIcon","backgroundColor","palette","grey","height","borderRadius","maxWidth","opacity","pointerEvents","transition","paddingBottom","border","display","iconButton","maxHeight","borderRight","justifyContent","fontSize","marginTop","AppHeader","handleClickedAccount","handleLogOut","toggleDrawer","anchorEl","handleDrawerStateChanged","drawerIsOpen","currentTarget","removeItem","MyCommaAuth","logOut","showMenuButton","auth","Boolean","lg","titleContainer","hamburger","Link","to","logo","alt","src","logoImg","logoText","timeDisplay","selectArea","TimeFilter","aria-owns","aria-haspopup","accountIcon","anchorOrigin","vertical","horizontal","transformOrigin","userMeta","disableGutters","paragraph","email","points","component","href","borderBottom","textDecoration","fontFamily","marginLeft","paddingRight","outline","white","userMetaLink","flexWrap","selectRange","workerState","curPath","document","desiredPath","urlForState","primeFetchSubscription","prime_nav","path","filterEvent","deviceTypePretty","ShopButton","link","shopLink","CommaTwoUpsell","imageContainer","eon","content","hook","DeviceList","editingDevice","deviceAlias","isWaitingForApi","handleAliasChange","handleAliasFieldKeyPress","renderDevice","setDeviceAlias","toggleDeviceEdit","cancelEdit","componentWillReceiveProps","nextProps","selectedDevice","handleDeviceSelected","key","trim","Raven","captureException","message","onlyHasAppDevice","shared","filterDrivingDevice","isSelected","deviceAvatar","deviceInfo","deviceId","isSuperUser","overflowY","paddingLeft","cursor","flexDirection","editDeviceIcon","nameField","saveButton","textField","marginBottom","Colors","transparent","white10","white12","white20","white30","white40","white50","black","blue50","blue100","blue200","blue300","blue400","blue500","blue600","blue700","blue800","blue900","blue950","blue999","lightBlue50","lightBlue100","lightBlue200","lightBlue300","lightBlue400","lightBlue500","lightBlue600","lightBlue700","lightBlue800","lightBlue900","desatBlue800","red50","red100","red200","red300","red400","red500","red600","red700","red800","red900","lightRed50","lightRed100","lightRed200","lightRed300","lightRed400","lightRed500","lightRed600","lightRed700","lightRed800","lightRed900","lightRed950","lightRed999","green50","green100","green200","green300","green400","green500","green600","green700","green800","green900","lightGreen50","lightGreen100","lightGreen200","lightGreen300","lightGreen400","lightGreen500","lightGreen600","lightGreen700","lightGreen800","lightGreen900","orange50","orange100","orange200","orange300","orange400","orange500","orange600","orange700","orange800","orange900","lightOrange50","lightOrange100","lightOrange200","DeviceSettingsModal","loadingDeviceAlias","loadingDeviceShare","hasSavedAlias","shareEmail","handleEmailChange","callOnEnter","shareDevice","hasShared","method","grantDeviceReadPermission","statusCode","isOpen","primeManageButton","form","formRow","onKeyPress","wrapper","size","fabProgress","minHeight","zIndex","MAPBOX_TOKEN","process","mbxGeocoding","geocodingClient","geocodeApi","getNeighborhood","context","getLocality","getRegion","reverseLookup","coords","reverseGeocode","query","limit","send","response","features","body","region","short_code","locality","text","_neighborhood","neighborhood","accessToken","renderImage","imgStyles","blank","backgroundSize","backgroundRepeat","backgroundImage","backgroundPosition","startImage","Thumbnails","thumbnail","imgCount","ceil","gutter","imgArr","percentToOffset","seconds","imageIndex","endImage","endOffset","createMuiTheme","typography","overrides","MuiPaper","MuiDrawer","paper","paperAnchorDockedLeft","MuiSelect","select","selectMenu","MuiInput","grey800","overflow","input","MuiFormLabel","MuiTab","disableUnderline","IconComponent","placeholder","background","default","grey999","primary","light","grey50","main","grey900","dark","states","drivingBlue","engagedGreen","alertOrange","alertRed","50","100","grey100","200","grey200","300","grey300","400","grey400","500","grey500","600","grey600","700","grey700","800","900","950","grey950","999","lightGrey","lightGrey200","10","12","20","30","40","AlertStatusCodes","percentFromMouseEvent","boundingBox","getBoundingClientRect","pageX","Timeline","getOffset","handleClick","handleMouseMove","handleMouseDown","handleMouseUp","handleMouseLeave","renderSegment","sendSeek","debounce","offsetValue","rulerRemaining","rulerRemainingHovered","dragBar","hoverBead","zoomOverride","dragStart","mouseX","hoverPercent","isHovered","componentWillMount","stopListening","forceUpdate","removeEventListener","seekIndex","percent","offsetToPercent","parentElement","isDragSelecting","noseek","dragSelection","querySelector","dragEnd","selectedArea","startPercent","endPercent","endTime","setTimeout","x","toFixed","perc","zoomed","renderDragger","draggerStyle","dragHighlight","renderZoom","endColor","zoomStart","zoomEnd","barStyle","colored","startPerc","widthPerc","zoomDuration","renderSegmentEvents","uncoloredSegment","localStorage","showCurrentEvent","eventStart","eventEnd","segmentColor","alertStatus","hasThumbnails","tooltipped","hasRuler","rounded","hasGradient","hoverOffset","timeString","isNaN","timestampAtOffset","role","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","ruler","statusGradient","title","bounds","onResize","rect","measureRef","thumbnails","STRIPE_PUBLISHABLE_KEY","mapStateToProps","bottom","borderLeft","whiteSpace","userSelect","DriveListDrive","startLocation","endLocation","handleDriveClicked","drive","GeocodeApi","startDate","formatDriveDuration","milliseconds","minutes","hours","getDrivePoints","classNames","driveHeader","driveHeaderIntro","driveAvatar","driveTitle","driveArrow","driveTimeline","DriveList","goToAnnotation","filterShortDrives","renderDriveListHeader","renderDriveListSettings","handleClickedSettings","handleClosedSettings","handleOpenedSettingsModal","handleCanceledSettings","handleClosedSettingsModal","showDeviceSettingsModal","deviceAliasSaved","ride","zoomBuffer","driveList","lastEnd","lastSegmentEnd","curRideChunk","unshift","memo","drivesTable","renderZeroRides","drives","DriveListItem","zeroRidesEle","zeroState","header","headerLabel","settingsArea","settingsButton","settingsButtonIcon","onCancel","textTransform","flex","stripe","loadStripe","PrimePayment","card","activating","handleCardInput","submitPayment","tokenize","activate","updatePayment","onError","cardElement","elements","getElement","CardElement","activateFunc","isUpdate","res","createToken","resp","simId","payForPrime","payResp","onActivated","updatePaymentMethod","canCheckout","complete","buttonText","disabled","activateButtonClass","cancelButtonClass","defaultProps","_","InjectedCheckoutForm","PrimeManage","cancelError","cancelModal","canceling","cancelPrime","modalClose","onPaymentUpdated","success","cancelSuccess","description","activated","brand","last4","joinDate","moment","unix","subscribed_at","nextPaymentDate","next_charge_at","simInfo","sim_id","primeBox","primeContainer","overviewBlock","manageItem","overviewBlockSuccess","overviewBlockError","noWrap","paymentElement","activateButton","cancelButton","cancelModalButton","closeButton","primeBlock","float","payload","jsonrpc","Athena","postJsonRpcPayload","simIdIsValid","listItems","PrimeChecklist","moreInfo","collapsed","checkList","listItemText","checkListItem","secondary","learnMore","rel","alignSelf","PrimeCheckout","simInfoLoading","new_subscription","onPrimeActivated","fetchSimInfo","result","isTrialClaimable","trial_claimable","firstChargeDate","trial_end","claimEndDate","trial_claim_end","chargeText","successMsg","already_active","is_prime_sim","introLine","overviewBlockLoading","deviceBlock","txt","moreInfoContainer","lineHeight","leftMargin","Prime","PrimeBanner","moreInfoButton","Dashboard","selectedDongleId","flexGrow","DISENGAGEMENT_REASONS","AnnotationEntry","handleChange","handleComment","validate","saving","comment","errorElem","createAnnotation","updateAnnotation","isJoi","eventId","dateString","selectClassName","defaultExpanded","summaryContent","bubble","heading","getTitle","date","pillBody","pillText","alignContent","renderFormField","displayEmpty","inputProps","isPlanned","disengagementReason","reasonDetailed","panelActions","disableFocusListener","disableHoverListener","resolveButton","formField","toLowerCase","formLabel","formLabelText","PureComponent","AnnotationList","list","memoize","resolved","unresolved","filterEntry","recomputeList","recomputeRowHeights","forceUpdateGrid","handleExpanded","loopStartTime","LOOP_DURATION","loopEndTime","getRowHeight","renderEntry","AnnotationListItem","overscanRowCount","rowCount","rowHeight","rowRenderer","AnnotationTabs","selectedTab","count","annotationsViewer","indicator","annotationsViewerTabIndicator","annotationsViewerTabs","tabLabelText","badge","tabLabelBadge","badgeContent","annotationsViewerList","renderTab","right","DriveMap","populateMap","isLoadingCoords","routeSigUrl","DerivedDataApi","getCoords","coordsArr","coord","lng","lat","setPath","initMap","posAtOffset","updateMarkerPos","nextRoute","viewport","latitude","longitude","shouldFlyTo","getMarkerSource","getMap","getSource","markerSource","pos","setData","coordinates","moveViewportTo","_data","transitionDuration","transitionInterpolator","LinearInterpolator","properties","geometry","offsetSeconds","offsetFractionalPart","coordIdx","nextCoordIdx","floorLng","floorLat","mapComponent","on","addSource","addLayer","source","layout","paint","contentRect","mapContainer","mapStyle","onViewportChange","mapboxApiAccessToken","attributionControl","dragPan","HLSSource","hls","Hls","enableWorker","disablePtsDtsCorrectionInMp4Remux","Events","MANIFEST_PARSED","video","BUFFER_APPENDED","eventName","onBufferAppend","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","destroy","componentWillUpdate","nextState","detachMedia","componentDidUpdate","prevProps","prevState","loadSource","attachMedia","onSourceLoaded","roundedRectPath","ctx","radius","K","SQRT2","beginPath","moveTo","lineTo","bezierCurveTo","Buffering","thickness","wheelImg","Image","tici_intrinsic","tici_vwp_w","tici_vwp_h","eon_intrinsic","eon_vwp_w","eon_vwp_h","VideoPreview","checkDataBuffer","isDataBuffering","monoTimeLength","lastEvent","nextEvent","LogMonoTime","nextEventTime","monSec","checkVideoBuffer","videoPlayer","front","wasConnected","stopListeningToVideo","subscribeToStateChange","shouldShowPreview","bufferTime","playerState","player","buffered","desiredVideoTime","currentVideoTime","curVideoTime","timeDiff","desiredBufferedVideoTime","remainingTime","buf","waiting","seeking","timeDiffAbs","paused","updatePreviewImage","shouldShowThumbnail","playbackRate","imageRef","nearestImageFrame","updatePreview","onDisableBuffering","canvas_road","canvas_lead","canvas_carstate","canvas_maxspeed","canvas_speed","canvas_face","intrinsic","vwp_w","vwp_h","video_height","frame","rafLoop","updateVideoSource","cancel","segCount","videoApi","VideoApi","getQcameraStreamIndex","getQcameraStreamIndexUrl","getRearCameraStreamIndexUrl","load","renderCanvas","retVal","thumbnailMonoTime","thumbnailTimeDiff","base64","btoa","String","fromCharCode","Uint8Array","Thumbnail","thumbnailData","calibration","params","shouldScale","driverMonitoring","renderEventToCanvas","renderDriverMonitoring","shouldShowUI","lastCalibrationTime","extrinsic","LiveCalibration","ExtrinsicMatrix","init_data","is_tici","InitData","DeviceType","live_calibration","model","modelv2","mpc","controlsState","drawLaneFull","radarState","renderLeadCars","carState","renderCarState","initData","renderMaxSpeed","renderSpeed","canvas","renderEvent","logTime","monoIndex","getContext","setTransform","clearRect","_events","needsRender","eventsSig","apply","scale","lastRadarStateMonoTime","leadOne","RadarState","LeadOne","leadTwo","LeadTwo","Status","renderLeadCar","leadData","is2ndCar","drel","DRel","vrel","VRel","yrel","YRel","carSpaceToImageSpace","y","sz","fillAlpha","fillStyle","lineWidth","g_xo","g_yo","fill","drawLaneBoundaryV2","ModelV2","LaneLines","LaneLineProbs","RoadEdges","RoadEdgeStds","drawLaneTrackV2","Position","drawLaneBoundary","Model","LeftLane","RightLane","drawLaneTrack","Path","LiveMpc","isMpc","isEnabled","ControlsState","Enabled","lane","Prob","Points","Poly","drawLaneLine","Std","off","isGhost","started","px","py","closePath","strokeStyle","stroke","lines","certainty","isStds","rgba","drawLaneLineV2","X","Y","pz","Z","track_bg","path_height","createLinearGradient","addColorStop","drawCarStateBorder","drawCarStateWheel","CarState","drawSpeed","VEgo","isMetric","Params","Entries","Key","Value","textBaseline","font","fillText","drawMaxSpeed","maxSpeed","VCruise","maxSpeedCalc","isCruiseSet","fillRoundedRect","bdr_s","strokeRoundedRect","strokeWidth","DecelForTurnDEPRECATED","turnSpeed","VCurvatureDEPRECATED","arc","PI","translate","rotate","SteeringAngle","save","wheelImgPattern","createPattern","strokeRect","DriverMonitoring","FaceProb","xW","xOffset","noseSize","isDistracted","FacePosition","v","toX","toY","flatMatrix","rot_matrix","FaceOrientation","p1","matmul","p2","isBlinking","LeftBlinkProb","RightBlinkProb","LeftEyeProb","RightEyeProb","pose","getDriverPose","pitch_error","pitch","yaw_error","yaw","sqrt","pow","angles_desc","pos_desc","pitch_net","yaw_net","roll_net","face_pixel_position","yaw_focal_angle","atan2","FULL_W","roll","H","cr","cos","sr","sin","cp","sp","cy","sy","rr","rp","ry","multiply","matrix","b0","b1","b2","b3","videoContainer","hidden","autoPlay","muted","fluid","isVideoChild","disableCompletely","videoUiCanvas","videoImage","MediaType","Media","renderMediaOptions","inView","DriveVideo","onVideoChange","noVideo","mediaOptions","mediaOption","mediaOptionText","mediaOptionDisabled","mediaOptionIcon","mediaSource","mediaSourceSelect","demoFiles","AnnotationsFooter","copySegmentName","downloadSegmentFile","openInCabana","showCopiedSnack","el","createElement","setAttribute","appendChild","execCommand","removeChild","snackTimer","seg","segmentKeyPath","files","RawApi","getRouteFiles","seekTime","routeStartTime","win","stringify","focus","footerButton","ContentProps","renderAnnotationsElement","visibleSegment","headerContext","history","back","headerTitle","headerActions","headerTimeline","viewer","footer","AppDrawer","toggleDrawerOff","firstAnnotationSegment","isPermanent","PaperProps","sidebarHeader","drawerContent","annotateButton","resizeTimeout","ExplorerApp","settingDongle","windowHeight","innerHeight","windowWidth","innerWidth","handleResize","checkProps","isZoomed","wasZoomed","clearTimeout","drawerOpen","curDongle","drawerIsPermanent","sidebarWidth","containerStyles","DEMO_LINK","origin","AnonymousLanding","sessionStorage","redirectURL","script","onload","AppleID","clientId","AuthConfig","APPLE_CLIENT_ID","scope","APPLE_SCOPES","redirectURI","APPLE_REDIRECT_URI","usePopup","async","APPLE_REDIRECT_PATH","code","detail","authorization","baseContainer","tagline","GOOGLE_REDIRECT_LINK","logInButton","logInText","signIn","GITHUB_REDIRECT_LINK","demoLink","demoLinkText","entries","composeEnhancers","getComposeEnhancers","compose","createBrowserHistory","initGoogleAnalytics","gtag","page_title","page_location","page_path","Redux","connectRouter","thunk","routerMiddleware","updateState","App","initialized","cancelInit","Collector","initDemoTimeline","Jepsen","initDemoState","callback","checkDemo","setItem","GOOGLE_REDIRECT_PATH","GITHUB_REDIRECT_PATH","AuthApi","refreshAccessToken","GOOGLE_REDIRECT_URI","GItHUB_REDIRECT_URI","setCommaAccessToken","isAuthenticated","redirectLink","authRoutes","Switch","Route","Redirect","Explorer","ananymousRoutes","renderLoading","hostname","match","config","environment","install","unregister","navigator","serviceWorker","ready","registration","ReactDOM","Theme","utils","DateFnsUtils","getElementById"],"mappings":"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","file":"static/js/main.3ab1f9e8.chunk.js","sourcesContent":["import * as capnp from 'capnp-ts';\nimport toJSON from '@commaai/capnp-json';\nimport BufferUtils from 'capnp-split/buffer';\nimport { Event, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\n\n// IE\nif (!Number.MAX_SAFE_INTEGER) {\n  Number.MAX_SAFE_INTEGER = (2 ** 53) - 1;\n}\n\nfunction binSearch(index, start, end, milis, nanos) {\n  if (start >= end) {\n    return start;\n  }\n  const searchIndex = Math.floor((end - start) / 2) + start;\n  // searchIndex wont equal end, only start\n\n  if (milis < index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos < index[searchIndex][1])) {\n    return binSearch(index, start, searchIndex, milis, nanos);\n  }\n  if (milis > index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos > index[searchIndex][1])) {\n    if (searchIndex === index.length - 1\n      || milis < index[searchIndex + 1][0]\n      || (milis === index[searchIndex + 1][0] && nanos < index[searchIndex + 1][1])) {\n      return searchIndex;\n    }\n    return binSearch(index, searchIndex + 1, end, milis, nanos);\n  }\n  return searchIndex;\n}\n\nfunction indexBuffer(index, buffer, bufferIndex) {\n  let offset = 0;\n  const calibrations = [];\n  let lastIndex = index.length ? index.length - 1 : 0;\n  // debugger;\n\n  while (offset < buffer.byteLength) {\n    const messageBuff = BufferUtils.readMessage(buffer, offset);\n    const msg = new capnp.Message(messageBuff, false);\n    const event = msg.getRoot(Event);\n    const monoTime = event.getLogMonoTime().toString();\n    const milis = Number(monoTime.substr(0, monoTime.length - 6));\n    const nanos = Number(monoTime.substr(-6, 6));\n    const messageSize = messageBuff.byteLength;\n    const which = event.which();\n\n    if (which === EventWhich.LIVE_CALIBRATION) {\n      calibrations.push(toJSON(event));\n    }\n\n    if (!index.length\n      || (milis > index[index.length - 1][0]\n      || (milis === index[index.length - 1][0] && nanos > index[index.length - 1][1]))) {\n      index.push([\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n      lastIndex = index.length - 1;\n    } else {\n      let searchIndex = lastIndex;\n      let incAmount = 1;\n      // debugger;\n      while (searchIndex < index.length - 1\n        && (milis > index[searchIndex][0]\n        || (milis === index[searchIndex][0] && nanos > index[searchIndex][1]))) {\n        incAmount = Math.min(Math.floor(index.length - searchIndex / 2), incAmount * 2);\n        searchIndex = Math.min(searchIndex + incAmount, index.length - 1);\n      }\n      // debugger;\n      searchIndex = binSearch(index, searchIndex - incAmount, searchIndex, milis, nanos);\n      // debugger;\n      searchIndex += 1;\n      lastIndex = searchIndex;\n\n      index.splice(searchIndex, 0, [\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n    }\n    offset += messageSize;\n  }\n\n  return calibrations;\n}\n\nexport function createIndex(_buffer) {\n  const buffer = Buffer.from(_buffer);\n  const index = [];\n\n  const calibrations = indexBuffer(index, buffer, 0);\n\n  return {\n    index,\n    buffers: [buffer],\n    calibrations\n  };\n}\n\nexport function addToIndex(_index, _newBuff) {\n  const newBuff = Buffer.from(_newBuff);\n  const index = _index;\n  index.buffers.push(newBuff);\n  const calibrations = indexBuffer(index.index, newBuff, index.buffers.length - 1);\n  index.calibrations = index.calibrations.concat(calibrations);\n\n  return index;\n}\n\nexport function findMonoTime(index, monoTime, start = 0, end = index.index.length) {\n  if (start === index.index.length) {\n    return index.index.length - 1;\n  }\n  if (start >= end) {\n    return end;\n  }\n  // index is floored so always increase start\n  const curIndex = Math.floor((end - start) / 2 + start);\n  const curMillis = index.index[curIndex][0];\n  // we can have duplicates so we treat matches as being too high since we're\n  // looking for the first instance of a duplicate\n  if (monoTime < curMillis) {\n    return findMonoTime(index, monoTime, start, curIndex);\n  }\n  if (monoTime > curMillis) {\n    return findMonoTime(index, monoTime, curIndex + 1, end);\n  }\n\n  return curIndex;\n}\n","\nfunction getDefaultStartDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  return (new Date(d.getTime() - 1000 * 60 * 60 * 24 * 14)).getTime();\n}\n\nfunction getDefaultEndDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  // return (new Date(d.getTime() - 1000 * 60 * 60 * 36)).getTime();\n  return d.getTime();\n}\n\nmodule.exports = {\n  start: getDefaultStartDate(),\n  end: getDefaultEndDate(),\n\n  // dongleId: '99c94dc769b5d96e',\n  // dongleId: 'ff83f397542ab647',\n  // dongleId: 'f1b4c567731f4a1b',\n  dongleId: null,\n\n  route: false,\n  segment: 0,\n  nextSegment: null,\n  playSpeed: 0, // 0 = stopped, 1 = playing, 2 = 2x speed... multiplier on speed\n  desiredPlaySpeed: 0, // the speed the user has selected so that buffering can resume\n  shouldBuffer: true, // if we should bother waiting for buffered data or just roll on\n  bufferingVideo: false, // if we're currently buffering for more data\n  bufferingData: false, // if we're currently buffering for more data\n  offset: 0, // in miliseconds from the start\n  startTime: Date.now(), // millisecond timestamp in which play began\n\n  segments: [],\n  // this data should come from the API server instead\n  // segments: [{\n  //   route: '99c94dc769b5d96e|2018-04-09--10-10-00',\n  //   offset: 10000,\n  //   length: 2558000,\n  //   segments: 43\n  // }, {\n  //   route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n  //   offset: 2658000,\n  //   length: 214000,\n  //   segments: 4\n  // }],\n\n  segmentData: null,\n\n  loop: {\n    // in time instead of offset\n    // this makes it so that the timespan can change without this changing\n    // thats helpful to shared links and other things probably...\n    startTime: null,\n    duration: null\n  },\n\n  profile: {},\n  devices: [],\n  isDemo: false,\n  primeNav: false,\n  subscription: null,\n  paymentMethod: null,\n};\n","const Event = require('geval/event');\nconst LogReaderWorker = require('./logReader.worker');\n// const LogReaderSharedWorker = require('./logReader.sharedworker');\n\nconst DataEvent = Event();\n\nlet logReader = null;\n\nfunction handleMessage(msg) {\n  DataEvent.broadcast(msg);\n}\n\nfunction relayMessage(msg) {\n  const port = logReader.port || logReader;\n  port.postMessage(msg.data);\n}\n\nfunction getWorker() {\n  if (logReader) {\n    return logReader;\n  }\n  // if (typeof LogReaderSharedWorker === 'function' && typeof SharedWorker === 'function') {\n  // logReader = new LogReaderSharedWorker();\n  if (typeof LogReaderWorker === 'function') {\n    logReader = new LogReaderWorker();\n  } else {\n    throw new Error('Don\\'t');\n  }\n  const port = logReader.port || logReader;\n\n  const channel = new MessageChannel();\n  const logPort = channel.port1;\n  const apiPort = channel.port2;\n\n  logPort.onmessage = relayMessage;\n  port.onmessage = handleMessage;\n\n  return apiPort;\n}\n\nmodule.exports = getWorker;\n\ngetWorker.onData = DataEvent.listen;\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"00898fea2334fdeae6e0.worker.js\");\n};","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/icon-chffr-wheel.368fbfd6.svg\";","// basic helper functions for controlling playback\n// we shouldn't want to edit the raw state most of the time, helper functions are better\n\nconst initialState = require('./initialState');\n\nconst ACTION_SEEK = 'action_seek';\nconst ACTION_PAUSE = 'action_pause';\nconst ACTION_PLAY = 'action_play';\nconst ACTION_LOOP = 'action_loop';\nconst ACTION_BUFFER_VIDEO = 'action_buffer_video';\nconst ACTION_BUFFER_DATA = 'action_buffer_data';\nconst ACTION_DISABLE_BUFFER = 'action_disable_buffer';\n\n// fetch current playback offset\nexport function currentOffset(state) {\n  let offset = state.offset + (Date.now() - state.startTime) * state.playSpeed;\n\n  if (state.loop && state.loop.startTime) {\n    // respect the loop\n    const loopOffset = state.loop.startTime - state.start;\n    if (offset > loopOffset + state.loop.duration) {\n      offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n    }\n  }\n\n  return offset;\n}\n\nexport function reducer(_state = initialState, action) {\n  let state = _state;\n  // console.log(action);\n  let loopOffset = null;\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n  }\n  switch (action.type) {\n    case ACTION_SEEK:\n      state = {\n        ...state,\n        offset: action.offset,\n        startTime: Date.now()\n      };\n\n      if (loopOffset !== null) {\n        if (state.offset < loopOffset || state.offset > (loopOffset + state.loop.duration)) {\n          // a seek outside of loop should break out of the loop\n          state.loop = { startTime: null, duration: null };\n          state.loopOffset = null;\n        } else {\n          if (state.offset > (loopOffset + state.loop.duration)) {\n            state.offset = (loopOffset + state.loop.duration) - 1000; // 1 second before end\n          }\n          // intentionally second in case we're in a sub-1-second loop (madness)\n          if (state.offset < loopOffset) {\n            state.offset = loopOffset;\n          }\n        }\n      }\n      break;\n    case ACTION_PAUSE:\n      state = {\n        ...state,\n        offset: currentOffset(state),\n        playSpeed: 0,\n        desiredPlaySpeed: 0\n      };\n      break;\n    case ACTION_PLAY:\n      if (action.speed !== state.desiredPlaySpeed) {\n        state = {\n          ...state,\n          offset: currentOffset(state),\n          desiredPlaySpeed: action.speed,\n          playSpeed: action.speed,\n          startTime: Date.now()\n        };\n      }\n      break;\n    case ACTION_LOOP:\n      state = {\n        ...state,\n        loop: {\n          startTime: action.startTime,\n          duration: action.duration\n        }\n      };\n      if (action.duration > 0 && action.startTime > 0) {\n        state.start = Math.min(action.startTime, state.start);\n        state.end = Math.max(action.startTime + action.duration, state.end);\n      }\n      break;\n    case ACTION_BUFFER_VIDEO:\n      state.bufferingVideo = action.buffering;\n      break;\n    case ACTION_BUFFER_DATA:\n      state.bufferingData = action.buffering;\n      break;\n    case ACTION_DISABLE_BUFFER:\n      state.shouldBuffer = false;\n      break;\n    default:\n      break;\n  }\n\n  const offset = state.offset + (Date.now() - state.startTime) * state.playSpeed;\n  // normalize over loop\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n    // has loop, trap offset within the loop\n    if (offset < loopOffset) {\n      state.startTime = Date.now();\n      state.offset = loopOffset;\n    } else if (offset > loopOffset + state.loop.duration) {\n      state.offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n      state.startTime = Date.now();\n    }\n  }\n\n  state.bufferingVideo = !!state.bufferingVideo;\n  state.bufferingData = !!state.bufferingData;\n  state.isBuffering = state.shouldBuffer && (state.bufferingVideo || state.bufferingData);\n\n  if (state.isBuffering) {\n    if (state.playSpeed > 0) {\n      console.log('Entering buffer state, pausing things');\n      state.offset = currentOffset(state);\n      state.playSpeed = 0;\n    }\n  } else if (state.playSpeed !== state.desiredPlaySpeed) {\n    console.log('Exiting buffer state, resuming things');\n    state.offset = currentOffset(state);\n    state.startTime = Date.now();\n    state.playSpeed = state.desiredPlaySpeed;\n  }\n\n  return state;\n}\n\nexport function timestampToOffset(state, timestamp) {\n  return timestamp - state.start;\n}\n\n// seek to a specific offset\nexport function seek(offset) {\n  return {\n    type: ACTION_SEEK,\n    offset\n  };\n}\n\n// pause the playback\nexport function pause() {\n  return {\n    type: ACTION_PAUSE\n  };\n}\n\n// resume / change play speed\nexport function play(speed = 1) {\n  return {\n    type: ACTION_PLAY,\n    speed\n  };\n}\n\nexport function selectLoop(startTime, duration) {\n  return {\n    type: ACTION_LOOP,\n    startTime,\n    duration\n  };\n}\n\n// update video buffering state\nexport function bufferVideo(buffering = true) {\n  return {\n    type: ACTION_BUFFER_VIDEO,\n    buffering\n  };\n}\n\n// update data buffering state\nexport function bufferData(buffering = true) {\n  return {\n    type: ACTION_BUFFER_DATA,\n    buffering\n  };\n}\n\nexport function disableBuffer() {\n  return {\n    type: ACTION_DISABLE_BUFFER\n  };\n}\n","import Event from 'geval/event';\nimport { partial } from 'ap';\n// cache all of the data\n\nlet cachePort = null;\n\nconst ExpireEvent = Event();\nexport const onExpire = ExpireEvent.listen;\n\nfunction handleMessage(msg) {\n  if (!msg || !msg.data) {\n    return;\n  }\n  switch (msg.data.command) {\n    case 'expire':\n      ExpireEvent.broadcast(msg.data.data);\n      break;\n    default:\n      break;\n  }\n}\n\nexport function setCachePort(port) {\n  if (cachePort) {\n    cachePort.onmessage = null;\n  }\n  cachePort = port;\n  cachePort.onmessage = handleMessage;\n}\n\nfunction start(route, segment) {\n  cachePort.postMessage({\n    command: 'start',\n    data: { route, segment }\n  });\n}\n\nfunction touch(route, segment) {\n  cachePort.postMessage({\n    command: 'touch',\n    data: { route, segment }\n  });\n}\n\nexport function getEntry(route, segment) {\n  touch(route, segment);\n  return {\n    start: partial(start, route, segment)\n  };\n}\n","export function getDongleID(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts[0] === 'auth') {\n    return null;\n  }\n\n  return parts[0] || null;\n}\n\nexport function getZoom(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts.length >= 3 && parts[0] !== 'auth') {\n    return {\n      start: Number(parts[1]),\n      end: Number(parts[2])\n    };\n  }\n  return {\n    start: null,\n    end: null\n  };\n}\n\nexport function getPrimeNav(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts.length == 2 && parts[0] !== 'auth' && parts[1] === 'prime') {\n    return true;\n  }\n  return false;\n}\n","import initialState from './initialState';\nimport { currentOffset } from './playback';\n\nconst ACTION_UPDATE_SEGMENTS = 'update_segments';\nconst ACTION_LOAD_SEGMENT_METADATA = 'load_segment_metadata';\nconst ACTION_SEGMENT_METADATA = 'segment_metadata';\nconst ACTION_RESOLVE_ANNOTATION = 'resolve_annotation';\n\nconst SEGMENT_LENGTH = 1000 * 60;\n\n/*\nsegments look like, but can contain additional data if they want\nfor example, caching url metadata\n{\n  route: 'dongleid|date',\n  segment: 5\n}\n*/\n\nfunction getCurrentSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: segmentIndex,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset + segmentIndex * SEGMENT_LENGTH,\n        duration: thisSegment.duration,\n        events: thisSegment.events,\n        deviceType: thisSegment.deviceType,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n    }\n  }\n  return null;\n}\n\nfunction getNextSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: 0,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset,\n        events: thisSegment.events,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        deviceType: thisSegment.deviceType,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n      // already returned, unreachable code\n      // break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      if (segmentIndex + 1 < thisSegment.segments) {\n        return {\n          url: thisSegment.url,\n          route: thisSegment.route,\n          segment: segmentIndex + 1,\n          routeOffset: thisSegment.offset,\n          startOffset: thisSegment.offset + (segmentIndex + 1) * SEGMENT_LENGTH,\n          duration: thisSegment.duration,\n          events: thisSegment.events,\n          deviceType: thisSegment.deviceType,\n          videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n          hpgps: thisSegment.hpgps,\n          hasVideo: thisSegment.hasVideo,\n          hasDriverCamera: thisSegment.hasDriverCamera,\n          hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n          cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n          driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n          distanceMiles: thisSegment.distanceMiles,\n        };\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction finishSegment(segment) {\n  let lastEngage = null;\n\n  if (segment.hasVideo) {\n    const vidAvail = segment.videoAvailableBetweenOffsets;\n    let lastVideoRange = vidAvail[vidAvail.length - 1];\n    if (!lastVideoRange) {\n      lastVideoRange = [segment.offset, segment.offset + segment.duration];\n    }\n    segment.videoAvailableBetweenOffsets = [ // eslint-disable-line no-param-reassign\n      ...vidAvail.slice(0, vidAvail.length - 1),\n      [lastVideoRange[0], segment.offset + segment.duration]\n    ];\n  }\n  segment.events = segment.events.sort((a, b) => { // eslint-disable-line no-param-reassign\n    if (a.route_offset_millis === b.route_offset_millis) {\n      return a.route_offset_nanos - b.route_offset_nanos;\n    }\n    return a.route_offset_millis - b.route_offset_millis;\n  });\n  segment.events.forEach((event) => {\n    // NOTE sometimes theres 2 disengages in a row and that is NONSENSE\n    switch (event.type) {\n      case 'engage':\n        lastEngage = event;\n        break;\n      case 'disengage':\n        if (lastEngage) {\n          lastEngage.data = {\n            end_offset_nanos: event.offset_nanos,\n            end_offset_millis: event.offset_millis,\n            end_route_offset_nanos: event.route_offset_nanos,\n            end_route_offset_millis: event.route_offset_millis\n          };\n        }\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nfunction segmentsFromMetadata(segmentsData) {\n  let curSegment = null;\n  let curVideoStartOffset = null;\n  const segments = [];\n  segmentsData.segments.forEach((segment) => {\n    if (!segment.url) {\n      return;\n    }\n    if (!(segment.proc_log === 40 || segment.proc_qlog === 40)) {\n      return;\n    }\n    const segmentHasDriverCamera = (segment.proc_dcamera >= 0);\n    const segmentHasDriverCameraStream = (segment.proc_dcamera === 40);\n    const segmentHasVideo = (segment.proc_camera >= 0);\n    if (segmentHasVideo && curVideoStartOffset === null) {\n      curVideoStartOffset = segment.offset;\n    }\n    /*\n      route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n      offset: 41348000,\n      duration: 214000,\n      segments: 4\n    */\n    if (!curSegment || curSegment.route !== segment.canonical_route_name) {\n      if (curSegment) {\n        finishSegment(curSegment);\n      }\n      let { url } = segment;\n      const parts = url.split('/');\n\n      if (Number.isFinite(Number(parts.pop()))) {\n        // url has a number at the end\n        url = parts.join('/');\n      }\n      curSegment = {\n        offset: segment.offset - (segment.segment * SEGMENT_LENGTH),\n        route: segment.canonical_route_name,\n        startTime: segment.start_time_utc_millis,\n        startCoord: [segment.start_lng, segment.start_lat],\n        duration: 0,\n        segments: 0,\n        url: url.replace('chffrprivate.blob.core.windows.net', 'chffrprivate-vzn.azureedge.net'),\n        events: [],\n        videoAvailableBetweenOffsets: [],\n        hasVideo: segmentHasVideo,\n        deviceType: segment.devicetype,\n        hpgps: segment.hpgps,\n        hasDriverCamera: segmentHasDriverCamera,\n        hasDriverCameraStream: segmentHasDriverCameraStream,\n        locStart: '',\n        locEnd: '',\n        distanceMiles: 0.0,\n        cameraStreamSegCount: 0,\n        driverCameraStreamSegCount: 0,\n      };\n      segments.push(curSegment);\n    }\n    if (!segmentHasVideo && curVideoStartOffset !== null) {\n      curSegment.videoAvailableBetweenOffsets.push([curVideoStartOffset, segment.offset]);\n      curVideoStartOffset = null;\n    }\n    curSegment.hasVideo = (curSegment.hasVideo || segmentHasVideo);\n    curSegment.hasDriverCamera = (curSegment.hasDriverCamera || segmentHasDriverCamera);\n    if (!curSegment.hasDriverCameraStream) {\n      curSegment.hasDriverCameraStream = segmentHasDriverCameraStream;\n    }\n    curSegment.hpgps = (curSegment.hpgps || segment.hpgps);\n    curSegment.duration = (segment.offset - curSegment.offset) + segment.duration;\n    curSegment.segments = Math.max(curSegment.segments, Number(segment.canonical_name.split('--').pop()) + 1);\n    curSegment.events = curSegment.events.concat(segment.events);\n    curSegment.endCoord = [segment.end_lng, segment.end_lat];\n    curSegment.distanceMiles += segment.length;\n    curSegment.cameraStreamSegCount += Math.floor(segmentHasVideo);\n    curSegment.driverCameraStreamSegCount += Math.floor(segmentHasDriverCameraStream);\n  });\n\n  if (curSegment) {\n    finishSegment(curSegment);\n  }\n\n  return segments;\n}\n\nfunction reducer(_state = initialState, action) {\n  let state = _state;\n  let found = false;\n  switch (action.type) {\n    case ACTION_LOAD_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: {\n          promise: action.promise,\n          start: action.start,\n          end: action.end,\n          dongleId: state.dongleId\n        }\n      };\n      break;\n    case ACTION_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: action.data,\n        segments: action.segments\n      };\n      break;\n    case ACTION_RESOLVE_ANNOTATION:\n      state = { ...state };\n      state.segments = state.segments.map((s) => {\n        let segment = s;\n        if (found || segment.route !== action.route) {\n          return segment;\n        }\n        segment = {\n          ...segment,\n          events: segment.events.map((e) => {\n            let event = e;\n            if (found || event.time !== action.event.time || event.type !== action.event.type) {\n              return event;\n            }\n            event = {\n              ...event,\n              id: action.annotation.id,\n              annotation: action.annotation\n            };\n            found = true;\n            return event;\n          })\n        };\n\n        return segment;\n      });\n      if (!found) {\n        console.warning('Resolving unknonwn annotation');\n      }\n      break;\n    default:\n      break;\n  }\n  const currentSegment = getCurrentSegment(state);\n  const nextSegment = getNextSegment(state);\n\n  if (currentSegment) {\n    state.route = currentSegment.route;\n    state.segment = currentSegment.segment;\n  } else {\n    state.route = false;\n    state.segment = 0;\n  }\n\n  state.currentSegment = currentSegment;\n  state.nextSegment = nextSegment;\n\n  state.range = state.end - state.start;\n\n  return state;\n}\n\nfunction updateSegments() {\n  return {\n    type: ACTION_UPDATE_SEGMENTS\n  };\n}\n\nfunction fetchSegmentMetadata(start, end, promise) {\n  return {\n    type: ACTION_LOAD_SEGMENT_METADATA,\n    start,\n    end,\n    promise\n  };\n}\n\nfunction insertSegmentMetadata(data) {\n  return {\n    type: ACTION_SEGMENT_METADATA,\n    segments: segmentsFromMetadata(data),\n    data\n  };\n}\n\nfunction resolveAnnotation(annotation, event, route) {\n  return {\n    type: ACTION_RESOLVE_ANNOTATION,\n    annotation,\n    event,\n    route\n  };\n}\n\nfunction parseSegmentMetadata(state, _segments, annotations) {\n  const routeStartTimes = {};\n  let segments = _segments;\n  segments = segments.map((_segment) => {\n    const segment = _segment;\n    segment.offset = Math.round(segment.start_time_utc_millis) - state.start;\n    if (!routeStartTimes[segment.canonical_route_name]) {\n      const segmentNum = Number(segment.canonical_name.split('--')[2]);\n      segment.segment = segmentNum;\n      routeStartTimes[segment.canonical_route_name] = segment.offset;\n      if (segmentNum > 0) {\n        routeStartTimes[segment.canonical_route_name] -= (SEGMENT_LENGTH * segmentNum);\n      }\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    } else {\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    }\n\n    segment.duration = Math.round(segment.end_time_utc_millis - segment.start_time_utc_millis);\n    segment.events = JSON.parse(segment.events_json) || [];\n    const plannedDisengageEvents = segment.events.filter((event) => event.type === 'alert' && event.data && event.data.should_take_control);\n\n    segment.events.forEach((_event) => {\n      const event = _event;\n      event.timestamp = segment.start_time_utc_millis + event.offset_millis;\n      // segment.start_time_utc_millis + event.offset_millis\n      // segment.start_time_utc_millis - state.start + state.start\n\n      event.canonical_segment_name = segment.canonical_name;\n      annotations.forEach((annotation) => {\n        // debugger;\n        if (annotation.canonical_segment_name === event.canonical_segment_name\n          && annotation.offset_millis === event.offset_millis\n          && annotation.offset_nanos_part === event.offset_nanos) {\n          if (event.id) {\n            console.error('Server returned more than one matching annotation-to-event', event, annotation);\n            // debugger;\n          }\n          event.id = annotation.id;\n          event.annotation = annotation;\n        }\n      });\n\n      if (event.data && event.data.is_planned) {\n        let reason;\n\n        const alert = plannedDisengageEvents.reduce((closestAlert, nextAlert) => {\n          const closestAlertDiff = Math.abs(closestAlert.offset_millis - event.offset_millis);\n          if (Math.abs(nextAlert.offset_millis - event.offset_millis) < closestAlertDiff) {\n            return nextAlert;\n          }\n          return closestAlert;\n        }, plannedDisengageEvents[0]);\n        if (alert) {\n          reason = alert.data.alertText2;\n        } else {\n          console.warn('Expected alert corresponding to planned disengagement', event);\n          reason = 'Planned disengagement';\n        }\n\n        event.id = `planned_disengage_${event.time}`;\n        event.annotation = {\n          start_time_utc_millis: event.timestamp,\n          data: {\n            reason,\n          },\n          offset_nanos_part: event.offset_nanos,\n          end_time_utc_millis: event.timestamp,\n          canonical_segment_name: event.canonical_segment_name,\n          dongle_id: state.dongleId,\n          type: event.type,\n          id: event.id,\n          offset_millis: event.offset_millis\n        };\n      }\n    });\n    return segment;\n  });\n\n  return {\n    start: state.start,\n    dongleId: state.dongleId,\n    end: state.end,\n    segments\n  };\n}\n\nfunction hasSegmentMetadata(state) {\n  if (!state) {\n    return false;\n  }\n  if (state.devices && state.devices.length === 0) {\n    // new users without devices won't have segment metadata\n    return true;\n  }\n  if (!state.segmentData) {\n    console.log('No segment data at all');\n    return false;\n  }\n  if (!state.segmentData.segments) {\n    console.log('Still loading...');\n    return false;\n  }\n  if (state.dongleId !== state.segmentData.dongleId) {\n    console.log('Bad dongle id');\n    return false;\n  }\n  if (state.start < state.segmentData.start) {\n    console.log('Bad start offset');\n    return false;\n  }\n  if (state.end > state.segmentData.end) {\n    console.log('Bad end offset');\n    return false;\n  }\n\n  return true;\n}\n\nfunction hasCameraAtOffset(segment, offset) {\n  return segment.videoAvailableBetweenOffsets.some((int) => offset >= int[0] && offset <= int[1]);\n}\n\nconst API = {\n  // helpers\n  getCurrentSegment,\n  getNextSegment,\n  hasSegmentMetadata,\n  parseSegmentMetadata,\n  hasCameraAtOffset,\n\n  // actions\n  updateSegments,\n  fetchSegmentMetadata,\n  insertSegmentMetadata,\n  resolveAnnotation,\n\n  // constants\n  SEGMENT_LENGTH,\n\n  // reducer\n  reducer\n};\nexport default API;\n","import {\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_STARTUP_DATA,\n  ACTION_UPDATE_DEVICE,\n  ACTION_PRIME_NAV,\n  ACTION_PRIME_SUBSCRIPTION,\n  ACTION_PRIME_PAYMENTMETHOD,\n} from '../actions/types';\n\nconst initialState = {};\n\nexport default function reducer(_state = initialState, action) {\n  let state = _state;\n  let deviceIndex = null;\n  switch (action.type) {\n    case ACTION_STARTUP_DATA:\n      if (!state.dongleId && action.devices.length > 0) {\n        state = {\n          ...state,\n          dongleId: action.devices[0].dongle_id,\n          device: action.devices[0]\n        };\n      } else {\n        state = {\n          ...state,\n          device: action.devices.find((device) => device.dongle_id === state.dongleId)\n        };\n        if (!state.device) {\n          state.device = {\n            alias: null,\n            create_time: 1513041169,\n            device_type: 'unknown',\n            dongle_id: '0000000000000000',\n            imei: '000000000000000',\n            is_owner: false,\n            serial: '00000000'\n          };\n        }\n      }\n      state.devices = action.devices;\n      state.profile = action.profile;\n      break;\n    case ACTION_SELECT_DEVICE:\n      state = {\n        ...state,\n        dongleId: action.dongleId,\n        primeNav: false,\n        subscription: null,\n      };\n      if (state.devices) {\n        state.device = state.devices.find((device) => device.dongle_id === action.dongleId);\n      }\n      if (state.segmentData && state.segmentData.dongleId !== state.dongleId) {\n        state.segmentData = null;\n        state.segments = [];\n      }\n      break;\n    case ACTION_SELECT_TIME_RANGE:\n      state.start = action.start;\n      state.end = action.end;\n      state.segmentData = null;\n      state.segments = [];\n      break;\n    case ACTION_UPDATE_DEVICE:\n      deviceIndex = state.devices.findIndex((d) => d.dongle_id === action.device.dongle_id);\n      state.devices[deviceIndex] = action.device;\n      state.device = action.device;\n      break;\n    case ACTION_PRIME_NAV:\n      state = {\n        ...state,\n        primeNav: action.primeNav,\n      };\n      break;\n    case ACTION_PRIME_SUBSCRIPTION:\n      if (action.dongleId != state.dongleId) { // ignore outdated info\n        break;\n      }\n      state = {\n        ...state,\n        subscription: action.subscription,\n      };\n      break;\n    case ACTION_PRIME_PAYMENTMETHOD:\n      state = {\n        ...state,\n        paymentMethod: action.paymentMethod,\n      };\n      break;\n    default:\n      return state;\n  }\n  return state;\n}\n","import globalState from './globalState';\n\nconst reducers = {\n  globalState,\n};\nexport default reducers;\n","import qs from 'query-string';\nimport window from 'global/window';\nimport localforage from 'localforage';\n\nlet isDemoCached;\nexport function isDemoQuery() {\n  return qs.parse(window.location.search).demo === '1';\n}\nexport async function init() {\n  if (isDemoCached !== undefined) return isDemoCached;\n\n  isDemoCached = await localforage.getItem('isDemo') === '1' || isDemoQuery();\n  return isDemoCached;\n}\nexport function isDemo() {\n  return isDemoQuery() || isDemoCached;\n}\n","// init\nexport const ACTION_STARTUP_DATA = 'ACTION_STARTUP_DATA';\n\n// global state management\nexport const ACTION_SELECT_DEVICE = 'ACTION_SELECT_DEVICE';\nexport const ACTION_SELECT_TIME_RANGE = 'ACTION_SELECT_TIME_RANGE';\nexport const ACTION_UPDATE_DEVICE = 'ACTION_UPDATE_DEVICE';\nexport const ACTION_PRIME_NAV = 'ACTION_PRIME_NAV';\nexport const ACTION_PRIME_SUBSCRIPTION = 'ACTION_PRIME_SUBSCRIPTION';\nexport const ACTION_PRIME_PAYMENTMETHOD = 'ACTION_PRIME_PAYMENTMETHOD';\n","import { createStore } from 'redux';\nimport reduceReducers from 'reduce-reducers';\n\nimport { reducer as playbackReducer } from './playback';\nimport Segments from './segments';\nimport Reducers from './reducers';\n\nconst store = createStore(reduceReducers(playbackReducer, Segments.reducer, Reducers.globalState));\n\nexport default store;\n","import {\n  ACTION_PRIME_NAV,\n  ACTION_PRIME_PAYMENTMETHOD,\n  ACTION_PRIME_SUBSCRIPTION,\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_UPDATE_DEVICE,\n} from './types';\n\nexport function updateDevice(device) {\n  return {\n    type: ACTION_UPDATE_DEVICE,\n    device,\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return {\n    type: ACTION_SELECT_DEVICE,\n    dongleId\n  };\n}\n\nexport function selectTimeRange(start, end) {\n  return {\n    type: ACTION_SELECT_TIME_RANGE,\n    start,\n    end\n  };\n}\n\nexport function primeGetSubscriptionAction(dongleId, subscription) {\n  return {\n    type: ACTION_PRIME_SUBSCRIPTION,\n    dongleId,\n    subscription,\n  };\n}\n\nexport function primeGetPaymentMethodAction(paymentMethod) {\n  return {\n    type: ACTION_PRIME_PAYMENTMETHOD,\n    paymentMethod,\n  };\n}\n\nexport function primeNavAction(nav) {\n  return {\n    type: ACTION_PRIME_NAV,\n    primeNav: nav,\n  };\n}\n","import { devices as Devices, account as Account, billing as Billing } from '@commaai/comma-api';\n\nimport store from './store';\nimport { ACTION_STARTUP_DATA } from './actions/types';\nimport { primeGetPaymentMethodAction, primeGetSubscriptionAction } from './actions';\nimport { getDongleID } from '../url';\n\nconst demoProfile = require('../demo/profile.json');\nconst demoDevices = require('../demo/devices.json');\n\nexport default async function init(isDemo) {\n  if (isDemo) {\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile: demoProfile,\n      devices: demoDevices,\n    });\n  } else {\n    console.log('Fetching devices!');\n    let devices = Devices.listDevices();\n    let profile = Account.getProfile();\n    devices = await devices;\n    profile = await profile;\n    console.log('Device list:', devices);\n\n    if (devices.length > 0) {\n      const dongleId = getDongleID(window.location.pathname) || devices[0].dongle_id;\n      const device = devices.find((dev) => dev.dongle_id === dongleId);\n      if (device && device.prime && (device.is_owner || profile.superuser)) {\n        Billing.getSubscription(dongleId).then((subscription) => {\n          store.dispatch(primeGetSubscriptionAction(dongleId, subscription));\n        }).catch((err) => {\n          console.log(err);\n        });\n      }\n    }\n\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile,\n      devices\n    });\n\n    Billing.getPaymentMethod().then((paymentMethod) => {\n      store.dispatch(primeGetPaymentMethodAction(paymentMethod));\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n}\n","import CreateStore from 'weakmap-shim/create-store';\nimport Auth from '@commaai/my-comma-auth';\nimport { request as Request } from '@commaai/comma-api'; // eslint-disable-line\n\nimport {\n  selectDevice as selectDeviceAction,\n  selectTimeRange as selectTimeRangeAction,\n  updateDevice as updateDeviceAction,\n  primeGetSubscriptionAction,\n  primeGetPaymentMethodAction,\n  primeNavAction,\n} from './actions';\nimport Segments from './segments';\nimport init from './startup';\nimport * as Playback from './playback';\nimport store from './store';\nimport * as Cache from './cache';\nimport * as Demo from '../demo';\n\nexport const PortState = CreateStore();\n\n// fire off init method / construct init promises\nexport const initAuthPromise = Auth.init().then((token) => {\n  Request.configure(token);\n});\nlet hasGottenSegmentData = null;\nconst hasGottenSegmentDataPromise = new Promise(((resolve) => {\n  hasGottenSegmentData = function segmentDataHandler() {\n    hasGottenSegmentData = null;\n    resolve();\n  };\n}));\n\nstore.subscribe(() => {\n  const state = store.getState();\n\n  if (hasGottenSegmentData && Segments.hasSegmentMetadata(state)) {\n    hasGottenSegmentData();\n  }\n});\n\nfunction close(port) {\n  if (PortState(port).unlisten) {\n    PortState(port).unlisten();\n  }\n  if (PortState(port).broadcastChannel) {\n    PortState(port).broadcastChannel.port1.close();\n  }\n  port.close();\n}\n\nfunction seek(offset) {\n  store.dispatch(Playback.seek(offset));\n}\n\nfunction pause(/* port */) {\n  store.dispatch(Playback.pause());\n}\n\nfunction play(speed) {\n  store.dispatch(Playback.play(speed));\n}\n\nfunction bufferVideo(isBuffering) {\n  store.dispatch(Playback.bufferVideo(isBuffering));\n}\n\nfunction bufferData(isBuffering) {\n  store.dispatch(Playback.bufferData(isBuffering));\n}\n\nfunction disableBuffer(data) {\n  store.dispatch(Playback.disableBuffer(data));\n}\n\nasync function hello(data) {\n  await Demo.init();\n  await initAuthPromise;\n  store.dispatch(selectDeviceAction(data.dongleId));\n\n  await Promise.all([\n    init(Demo.isDemo()),\n    hasGottenSegmentDataPromise\n  ]);\n\n  return 'hello';\n}\n\nfunction resolveAnnotation(data) {\n  const { annotation, event, route } = data;\n\n  store.dispatch(Segments.resolveAnnotation(annotation, event, route));\n}\n\nfunction selectDevice(dongleId) {\n  store.dispatch(selectDeviceAction(dongleId));\n}\n\nfunction updateDevice(device) {\n  store.dispatch(updateDeviceAction(device));\n}\n\nfunction selectTimeRange(data) {\n  const { start, end } = data;\n  store.dispatch(selectTimeRangeAction(start, end));\n}\n\nfunction selectLoop(data) {\n  const { startTime, duration } = data;\n  store.dispatch(Playback.selectLoop(startTime, duration));\n}\n\nfunction cachePort(data, ports) {\n  console.log('Was handed this port!', ports);\n  Cache.setCachePort(ports[0]);\n}\n\nfunction primeGetSubscription(dongleId, subscription) {\n  store.dispatch(primeGetSubscriptionAction(dongleId, subscription));\n}\n\nfunction primeGetPaymentMethod(paymentMethod) {\n  store.dispatch(primeGetPaymentMethodAction(paymentMethod));\n}\n\nfunction primeNav(nav = true) {\n  store.dispatch(primeNavAction(nav));\n}\n\nfunction stop() {\n  console.log('Stopping worker!');\n  // if (SegmentTimerStore(state).stopTimer) {\n  //   SegmentTimerStore(state).stopTimer();\n  //   SegmentTimerStore(state).stopTimer = null;\n  // }\n}\n\nexport const commands = {\n  close,\n  play,\n  pause,\n  seek,\n  bufferVideo,\n  bufferData,\n  disableBuffer,\n  hello,\n  resolve: resolveAnnotation,\n  selectDevice,\n  selectTimeRange,\n  selectLoop,\n  updateDevice,\n  cachePort,\n  stop,\n  primeGetSubscription,\n  primeGetPaymentMethod,\n  primeNav,\n};\n","import Event from 'geval/event';\nimport CreateStore from 'weakmap-shim/create-store';\nimport { timeout } from 'thyming';\nimport Collector from 'collect-methods';\nimport { partial } from 'ap';\n\nimport { annotations as Annotations, drives as Drives } from '@commaai/comma-api'; // eslint-disable-line\n\nimport { currentOffset } from './playback';\nimport Segments from './segments';\nimport * as Cache from './cache';\nimport store from './store';\nimport * as Demo from '../demo';\nimport { commands, initAuthPromise } from './commands';\n\nconst demoSegments = require('../demo/segments.json');\n\nconst BroadcastEvent = Event();\nconst DataLogEvent = Event();\nconst SegmentTimerStore = CreateStore();\n\nlet segmentsRequest = null;\nlet annotationsRequest = null;\n\nexport function getState() {\n  return store.getState();\n}\n\nfunction scheduleSegmentUpdate(state) {\n  let timeUntilNext = 30000;\n  const offset = currentOffset(state);\n\n  if (SegmentTimerStore(state).stopTimer) {\n    SegmentTimerStore(state).stopTimer();\n    SegmentTimerStore(state).stopTimer = null;\n  }\n  if (state.nextSegment) {\n    timeUntilNext = state.nextSegment.startOffset - offset;\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.currentSegment) {\n    const time = (state.currentSegment.routeOffset + state.currentSegment.duration) - offset;\n    timeUntilNext = Math.min(time, timeUntilNext);\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.loop && state.loop.startTime) {\n    const curTime = state.start + offset;\n    // curTime will be between start and end because we used currentOffset to get it\n    // currentOffset takes into account loops using modulo over duration\n    const timeUntilLoop = 1 + state.loop.startTime + state.loop.duration - curTime;\n    const loopStartOffset = state.loop.startTime - state.start;\n    const loopStartSegment = Segments.getCurrentSegment(state, loopStartOffset);\n    if (!state.currentSegment\n      || !loopStartSegment\n      || loopStartSegment.startOffset !== state.currentSegment.startOffset) {\n      timeUntilNext = Math.min(timeUntilLoop, timeUntilNext);\n    }\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n\n  if (timeUntilNext > 0) {\n    timeUntilNext = Math.max(200, timeUntilNext);\n    console.log('Waiting', timeUntilNext, 'for something to change...');\n    SegmentTimerStore(state).stopTimer = timeout(() => {\n      // empty action to churn the butter\n      store.dispatch(Segments.updateSegments());\n    }, timeUntilNext);\n  } else {\n    console.log('There is not task i think its worth waiting for...', timeUntilNext);\n    // debugger;\n  }\n}\n\nasync function checkSegmentMetadata(state) {\n  if (!state.dongleId) {\n    return;\n  }\n  if (Segments.hasSegmentMetadata(state)) {\n    // already has metadata, don't bother\n    return;\n  }\n  await Demo.init();\n  if (segmentsRequest || annotationsRequest) {\n    return;\n  }\n  console.log('We need to update the segment metadata...');\n  const { dongleId } = state;\n  const { start } = state;\n  const { end } = state;\n\n  let segmentData = null;\n  let annotationsData = null;\n  if (Demo.isDemo()) {\n    segmentsRequest = Promise.resolve(demoSegments);\n    annotationsRequest = Promise.resolve([]);\n  } else {\n    segmentsRequest = Drives.getSegmentMetadata(start, end, dongleId);\n    annotationsRequest = Annotations.listAnnotations(start, end, dongleId);\n  }\n  store.dispatch(Segments.fetchSegmentMetadata(start, end));\n\n  try {\n    segmentData = await segmentsRequest;\n    annotationsData = await annotationsRequest;\n  } catch (e) {\n    console.error('Failure fetching segment metadata', e.stack || e);\n    // /@TODO retry this call!\n    return;\n  } finally {\n    segmentsRequest = null;\n    annotationsRequest = null;\n  }\n  if (state.start !== start || state.end !== end || state.dongleId !== dongleId) {\n    checkSegmentMetadata(getState());\n    return;\n  }\n\n  segmentData = Segments.parseSegmentMetadata(state, segmentData, annotationsData);\n  // broken\n  store.dispatch(Segments.insertSegmentMetadata(segmentData));\n  // ensureSegmentData(getState());\n}\n\nlet ensureSegmentDataTimer = null;\nasync function ensureSegmentData(state) {\n  if (ensureSegmentDataTimer) {\n    ensureSegmentDataTimer();\n    ensureSegmentDataTimer = null;\n  }\n\n  let entry = null;\n  if (Date.now() - state.startTime < 1000) {\n    ensureSegmentDataTimer = timeout(() => {\n      ensureSegmentDataTimer = null;\n      return ensureSegmentData(getState());\n    }, 1100 - (Date.now() - state.startTime));\n    return;\n  }\n  if (state.route) {\n    entry = Cache.getEntry(state.route, state.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n    if (state.segment !== 0) {\n      entry = Cache.getEntry(state.route, 0, DataLogEvent.broadcast);\n      if (entry) {\n        entry.start();\n      }\n    }\n  }\n  const { nextSegment } = state;\n  if (nextSegment) {\n    entry = Cache.getEntry(nextSegment.route, nextSegment.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n  }\n}\n\nexport function init() {\n  // set up initial schedules\n  initAuthPromise.then(() => {\n    scheduleSegmentUpdate(getState());\n    checkSegmentMetadata(getState());\n  });\n\n  store.subscribe(() => {\n    const state = getState();\n    checkSegmentMetadata(state);\n    scheduleSegmentUpdate(state);\n    ensureSegmentData(state);\n\n    BroadcastEvent.broadcast({\n      command: 'state',\n      data: state\n    });\n  });\n}\n\nexport async function handleMessage(port, msg) {\n  if (msg.data.command) {\n    if (!commands[msg.data.command]) {\n      console.error('Invalid command!', msg.data);\n      return;\n    }\n    let result = commands[msg.data.command](port, msg.data.data, msg.ports);\n    if (result && msg.data.requestId) {\n      result = await result;\n      if (result) {\n        port.postMessage({\n          requestId: msg.data.requestId,\n          command: 'return-value',\n          data: result\n        });\n      }\n    }\n  }\n}\n","/* eslint-disable class-methods-use-this */\nimport window from 'global/window';\nimport Event from 'geval/event';\nimport * as capnp from 'capnp-ts';\nimport { Event as CapnpEvent, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\nimport toJSON from '@commaai/capnp-json';\n\nimport { storage as AuthStorage } from '@commaai/my-comma-auth';\nimport * as Playback from './playback';\nimport * as LogIndex from './logIndex';\nimport * as Cache from './cache';\nimport { getDongleID, getPrimeNav, getZoom } from '../url';\nimport { getState, init as initTimeline } from './timeline';\nimport { commands } from './commands';\nimport store from './store';\n\nconst LogReaderWorker = require('./logReader');\n\nconst UnloadEvent = Event();\nconst StateEvent = Event();\nconst IndexEvent = Event();\nconst InitEvent = Event();\nconst InitPromise = new Promise(((resolve) => {\n  InitEvent.listen(resolve);\n}));\n\nwindow.addEventListener('beforeunload', UnloadEvent.broadcast);\nconst startPath = window.location ? window.location.pathname : '';\n\n// helper functions\n\nexport class TimelineInterface {\n  constructor(options) {\n    this.options = options || {};\n    this.buffers = {};\n    this.requestId = 1;\n    this.openRequests = {};\n    this.initPromise = InitPromise;\n\n    this.expire = this.expire.bind(this);\n  }\n\n  onStateChange = StateEvent.listen\n\n  onIndexed = IndexEvent.listen\n\n  async init(isDemo) {\n    if (!this.hasInit) {\n      this.hasInit = true;\n      this.isDemo = isDemo;\n\n      initTimeline();\n\n      this.readyPromise = commands.hello({\n        dongleId: getDongleID(startPath),\n        zoom: getZoom(startPath),\n        primeNav: getPrimeNav(startPath),\n      });\n\n      const token = await AuthStorage.getCommaAccessToken();\n      if (!(token || isDemo)) {\n        return new Promise((resolve, reject) => reject(Error('No auth')));\n      }\n\n      // if (false && typeof TimelineSharedWorker === 'function') {\n      //   worker = new TimelineSharedWorker();\n      //   t.isShared = true;\n      //   t.logReader = new LogReaderWorker();\n      if (typeof LogReaderWorker === 'function') {\n        this.logReader = new LogReaderWorker();\n      }\n\n      // broadcast message\n      // handle message\n      // cache port\n      commands.cachePort(null, [this.logReader.port || this.logReader]);\n\n      LogReaderWorker.onData((msg) => {\n        this.handleData(msg);\n      });\n\n      UnloadEvent.listen(() => this.disconnect());\n      Cache.onExpire(this.expire);\n      this.setState(getState());\n      store.subscribe(() => {\n        const state = store.getState();\n        this.setState(state);\n      });\n\n      InitEvent.broadcast(token);\n    }\n    return this.readyPromise;\n  }\n\n  async stop() {\n    if (!this.hasInit) {\n      return;\n    }\n    await commands.stop();\n    this.hasInit = false;\n    if (this.logReader) {\n      this.logReader = null;\n    }\n  }\n\n  async getPort() {\n    await this.initPromise;\n    return this.port;\n  }\n\n  async disconnect() {\n    return commands.close();\n  }\n\n  async seek(offset) {\n    return commands.seek(Math.round(offset));\n  }\n\n  async play(speed = 1) {\n    return commands.play(speed);\n  }\n\n  async pause() {\n    return commands.pause();\n  }\n\n  async disableBuffer() {\n    return commands.disableBuffer(true);\n  }\n\n  async bufferVideo(isBuffering = true) {\n    return commands.bufferVideo(isBuffering);\n  }\n\n  async bufferData(isBuffering = true) {\n    return commands.bufferData(isBuffering);\n  }\n\n  async selectTimeRange(start, end) {\n    return commands.selectTimeRange({ start, end });\n  }\n\n  async selectLoop(startTime, duration) {\n    return commands.selectLoop({ startTime, duration });\n  }\n\n  async selectDevice(dongleId) {\n    await this.readyPromise;\n    if (this.state.dongleId === dongleId) {\n      return true;\n    }\n    return commands.selectDevice(dongleId);\n  }\n\n  async resolveAnnotation(annotation, event, route) {\n    return commands.resolve({ annotation, event, route });\n  }\n\n  async updateDevice(device) {\n    return commands.updateDevice(device,);\n  }\n\n  async primeGetSubscription(dongleId, subscription) {\n    return commands.primeGetSubscription(dongleId, subscription);\n  }\n\n  async primeGetPaymentMethod(paymentMethod) {\n    return commands.primeGetPaymentMethod(paymentMethod);\n  }\n\n  async primeNav(nav) {\n    return commands.primeNav(nav);\n  }\n\n  setState(state) {\n    this.state = state;\n    StateEvent.broadcast(state);\n    if (this.logReader) {\n      const port = this.logReader.port || this.logReader;\n      if (this.state.route) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.route,\n            segment: this.state.segment,\n          }\n        });\n      }\n      if (this.state.nextSegment) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.nextSegment.route,\n            segment: this.state.nextSegment.segment,\n          }\n        });\n      }\n    }\n  }\n\n  expire(data) {\n    console.log('Expiring cache entry', data);\n    if (this.buffers[data.route] && this.buffers[data.route][data.segment]) {\n      delete this.buffers[data.route][data.segment];\n    }\n  }\n\n  async handleData(msg) {\n    if (!this.buffers[msg.data.route]) {\n      this.buffers[msg.data.route] = {};\n    }\n    if (!this.buffers[msg.data.route][msg.data.segment]) {\n      this.buffers[msg.data.route][msg.data.segment] = LogIndex.createIndex(msg.data.data);\n    } else {\n      LogIndex.addToIndex(this.buffers[msg.data.route][msg.data.segment], msg.data.data);\n    }\n    IndexEvent.broadcast(msg.data.route);\n  }\n\n  getStartMonoTime(route, segment = 0) {\n    if (!this.buffers[route]\n      || !this.buffers[route][segment]\n      || !this.buffers[route][segment].index) {\n      return 0;\n    }\n    return this.buffers[route][segment].index[0][0];\n  }\n\n  getIndex() {\n    if (!this.state || !this.state.route) {\n      return [];\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return [];\n    }\n\n    return this.buffers[this.state.route][this.state.segment].index;\n  }\n\n  currentLogMonoTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    const logIndex = this.buffers[this.state.route][this.state.segment];\n    if (!segment) {\n      return null;\n    }\n    offset -= segment.offset;\n    const startTime = logIndex.index[0][0];\n\n    return offset + startTime;\n  }\n\n  lastEvents(_eventCount = 10) {\n    const logMonoTime = this.currentLogMonoTime();\n    if (!logMonoTime) {\n      return [];\n    }\n    const logIndex = this.getLogIndex();\n\n    const curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n    const eventCount = Math.min(_eventCount, curIndex);\n\n    return [...Array(eventCount)].map((u, i) => this.getEvent(curIndex - i, logIndex));\n  }\n\n  getLogIndex() {\n    return this.buffers[this.state.route]\n      ? this.buffers[this.state.route][this.state.segment]\n      : null;\n  }\n\n  getNextLogIndex() {\n    if (!this.state.nextSegment) {\n      return null;\n    }\n    return this.buffers[this.state.nextSegment.route]\n      ? this.buffers[this.state.nextSegment.route][this.state.nextSegment.segment]\n      : null;\n  }\n\n  getEvent(index, _logIndex) {\n    // millis, nanos, offset, len, buffer\n    const logIndex = _logIndex || this.buffers[this.state.route][this.state.segment];\n    if (index < 0 || index >= logIndex.index.length) {\n      // console.log('Invalid event index', index);\n      return null;\n    }\n    const entry = logIndex.index[index];\n    const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentOffset() {\n    if (this.state) {\n      return Playback.currentOffset(this.state);\n    }\n    return 0;\n  }\n\n  timestampToOffset(timestamp) {\n    if (this.state) {\n      return Playback.timestampToOffset(this.state, timestamp);\n    }\n    return 0;\n  }\n\n  firstFrameTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][0]) {\n      return null;\n    }\n\n    const logIndex = this.buffers[this.state.route][0];\n    for(let i = 0; i < logIndex.index.length; i++) {\n      const entry = logIndex.index[i];\n      if (entry[5] === EventWhich.FRAME) {\n        const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n        const msg = new capnp.Message(buffer, false);\n        const event = toJSON(msg.getRoot(CapnpEvent));\n        return event.Frame.TimestampEof / 1e9;\n      }\n    }\n    return null;\n  }\n\n  currentInitData() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    // check if any buffered logs have the initdata packet\n    const curSegLog = this.buffers[this.state.route][this.state.segment];\n    const entry = curSegLog.index[0];\n    if (entry[5] !== EventWhich.INIT_DATA) {\n      return null;\n    }\n\n    const buffer = curSegLog.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentModel() {\n    return this.getEventByType(EventWhich.MODEL, 1000);\n  }\n\n  currentModelV2() {\n    return this.getEventByType(EventWhich.MODEL_V2, 1000);\n  }\n\n  currentRadarState() {\n    return this.getEventByType(EventWhich.RADAR_STATE, 1000);\n  }\n\n  currentMPC() {\n    return this.getEventByType(EventWhich.LIVE_MPC, 1000);\n  }\n\n  currentCarState() {\n    return this.getEventByType(EventWhich.CAR_STATE, 1000);\n  }\n\n  currentControlsState() {\n    return this.getEventByType(EventWhich.CONTROLS_STATE);\n  }\n\n  currentDriverMonitoring() {\n    return this.getEventByType(EventWhich.DRIVER_MONITORING, 1000);\n  }\n\n  currentThumbnail() {\n    return this.getEventByType(EventWhich.THUMBNAIL, 6000);\n  }\n\n  currentLiveCalibration() {\n    return this.getEventByType(EventWhich.LIVE_CALIBRATION, 1000);\n  }\n\n  getEventByType(which, maxTimeDiff = -1) {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    const monoTime = this.currentLogMonoTime();\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    for (let curSegNum = this.state.segment; curSegNum >= 0; --curSegNum) {\n      const logIndex = this.buffers[this.state.route][curSegNum];\n      if (!logIndex) {\n        return null;\n      }\n      offset -= segment.offset;\n      const startTime = logIndex.index[0][0];\n      const logMonoTime = offset + startTime;\n      let curIndex = logIndex.index.length - 1;\n      if (curSegNum === this.state.segment) {\n        curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n      }\n\n      for (curIndex; curIndex >= 0; --curIndex) {\n        const entry = logIndex.index[curIndex];\n        if (maxTimeDiff !== -1 && monoTime - entry[0] > maxTimeDiff) {\n          return null;\n        }\n        if (entry[5] === which) {\n          const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n          const msg = new capnp.Message(buffer, false);\n          const event = msg.getRoot(CapnpEvent);\n          return toJSON(event);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  getCalibration() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    const indexes = this.buffers[this.state.route];\n\n    if (!indexes) {\n      return null;\n    }\n\n    for (let i = 0, keys = Object.keys(indexes), len = keys.length; i < len; ++i) {\n      const index = indexes[keys[i]];\n      if (index.calibrations && index.calibrations.length) {\n        return index.calibrations[index.calibrations.length - 1];\n      }\n    }\n    return null;\n  }\n}\n// create instance and expose it\nconst timeline = new TimelineInterface();\nexport default timeline;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Modal from '@material-ui/core/Modal';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\n\nimport { DateTimePicker } from 'material-ui-pickers';\n\nimport Timelineworker from '../../timeline';\n\nconst styles = (theme) => ({\n  root: {},\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    margin: '0 auto',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)'\n  },\n  buttonGroup: {\n    textAlign: 'right'\n  },\n  headerDropdown: {\n    fontWeight: 500,\n    marginRight: 12,\n    minWidth: 310,\n    textAlign: 'center',\n  },\n});\n\nconst LOOKBACK_WINDOW_MILLIS = 365 * 24 * 3600 * 1000; // 30 days\n\nclass TimeSelect extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.changeStart = this.changeStart.bind(this);\n    this.changeEnd = this.changeEnd.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n\n    this.state = {\n      showPicker: false\n    };\n  }\n\n  handleSelectChange(e) {\n    const selection = e.target.value;\n    const d = new Date();\n    d.setHours(d.getHours() + 1, 0, 0, 0);\n\n    switch (selection) {\n      case '24-hours':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24), d.getTime());\n        break;\n      case '1-week':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 7), d.getTime());\n        break;\n      case '2-weeks':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 14), d.getTime());\n        break;\n      case 'custom':\n        this.setState({\n          showPicker: true,\n          start: this.props.start,\n          end: this.props.end\n        });\n        break;\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showPicker: false\n    });\n  }\n\n  changeStart(value) {\n    this.setState({\n      start: value.getTime()\n    });\n  }\n\n  changeEnd(value) {\n    this.setState({\n      end: value.getTime()\n    });\n  }\n\n  handleSave() {\n    Timelineworker.selectTimeRange(this.state.start, this.state.end);\n    this.setState({\n      showPicker: false,\n      start: null,\n      end: null\n    });\n  }\n\n  selectedOption() {\n    const timeRange = this.props.end - this.props.start;\n\n    if (Math.abs(this.props.end - Date.now()) < 1000 * 60 * 60) {\n      // ends right around now\n      if (timeRange === 1000 * 60 * 60 * 24 * 14) {\n        return '2-weeks';\n      } if (timeRange === 1000 * 60 * 60 * 24 * 7) {\n        return '1-week';\n      } if (timeRange === 1000 * 60 * 60 * 24) {\n        return '24-hours';\n      }\n    }\n\n    return 'custom';\n  }\n\n  lastWeekText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const weekAgo = Date.now() - (1000 * 60 * 60 * 24 * 7);\n    return `Last Week${\n      fecha.format(new Date(weekAgo), ' (MMM Do - ')\n    }${fecha.format(new Date(), 'MMM Do)')}`;\n  }\n\n  last2WeeksText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const twoWeeksAgo = Date.now() - (1000 * 60 * 60 * 24 * 14);\n    return `2 Weeks${\n      fecha.format(new Date(twoWeeksAgo), ' (M/D - ')\n    }${fecha.format(new Date(), 'M/D)')}`;\n  }\n\n  last24HoursText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n    return 'Last 24 Hours';\n  }\n\n  render() {\n    const minDate = new Date(Date.now() - LOOKBACK_WINDOW_MILLIS).toISOString().substr(0, 10);\n\n    return (\n      <>\n        <FormControl>\n          <Select\n            name=\"timerange\"\n            value={this.selectedOption()}\n            onChange={this.handleSelectChange}\n            className={this.props.classes.headerDropdown}\n          >\n            <MenuItem value=\"custom\">Custom</MenuItem>\n            <MenuItem value=\"24-hours\">{ this.last24HoursText() }</MenuItem>\n            <MenuItem value=\"1-week\">{ this.lastWeekText() }</MenuItem>\n            <MenuItem value=\"2-weeks\">{ this.last2WeeksText() }</MenuItem>\n          </Select>\n        </FormControl>\n        <Modal\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={this.state.showPicker}\n          onClose={this.handleClose}\n        >\n          <Paper className={this.props.classes.modal}>\n            <DateTimePicker\n              minDate={minDate}\n              value={new Date(this.state.start || this.props.start || 0)}\n              onChange={this.changeStart}\n              label=\"Start time\"\n              showTodayButton\n            />\n            <DateTimePicker\n              minDate={minDate}\n              value={new Date(this.state.end || this.props.end || 0)}\n              onChange={this.changeEnd}\n              label=\"End time\"\n              showTodayButton\n            />\n            <br />\n            <br />\n            <Divider />\n            <br />\n            <div className={this.props.classes.buttonGroup}>\n              <Button variant=\"contained\" onClick={this.handleClose}>\n                Cancel\n              </Button>\n              &nbsp;\n              <Button variant=\"contained\" color=\"secondary\" onClick={this.handleSave}>\n                Save\n              </Button>\n            </div>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  end: 'workerState.end',\n  start: 'workerState.start'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeSelect));\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport const auth_apple = require('./auth_apple.png');\nexport const auth_github = require('./auth_github.png');\nexport const auth_google = require('./auth_google.png');\n\nexport function AccountIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"translate(-198.000000, -189.000000)\">\n        <path d=\"M210,189 C203.381053,189 198,194.381053 198,201 C198,207.618947 203.381053,213 210,213 C216.618947,213 222,207.618947 222,201 C222,194.381053 216.618947,189 210,189 Z M216.724916,207.352941 C216.374763,206.716762 215.824522,206.182371 215.099204,205.902453 L212.623121,204.808224 C211.972836,204.553753 211.522639,203.917573 211.472617,203.205053 L211.422595,202.747004 C212.573099,201.856353 213.348438,200.125945 213.348438,198.293749 C213.348438,195.647243 211.697716,193.815047 209.671829,193.815047 C207.645942,193.815047 205.99522,195.647243 205.99522,198.293749 C205.99522,200.125945 206.770559,201.830905 207.921063,202.747004 L207.871041,203.205053 C207.821019,203.917573 207.370822,204.528305 206.720537,204.808224 L204.244453,205.902453 C203.544147,206.182371 202.968895,206.716762 202.618742,207.352941 C201.068063,205.622534 200.117647,203.332288 200.117647,200.813019 C200.117647,195.469113 204.394519,191.117647 209.646818,191.117647 C214.899117,191.117647 219.175989,195.469113 219.175989,200.813019 C219.201,203.332288 218.250584,205.622534 216.724916,207.352941 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nexport function HistoryBackIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n      <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n    </SvgIcon>\n  );\n}\nexport function HistoryForwardIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"matrix(-1, 0, 0, 1, 0, 0)\" transform-origin=\"center\">\n        <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n        <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\nexport function CommaIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"scale(0.35, 0.35)\" transform-origin=\"center\">\n        <path d=\"M2.3325273,44 C2.3325273,42.9819019 2.25294268,42.1290181 2.37000751,41.3070321 C2.41990001,40.9564305 2.82901847,40.5810595 3.16268975,40.3693706 C4.78942848,39.3369727 6.55659633,38.5126886 8.07113779,37.32861 C12.9769087,33.4931864 15.8847893,28.4440632 16.0437152,21.8852845 C16.0887401,20.0229846 15.4041177,19.5577289 13.8399272,20.2831908 C9.32477801,22.3776079 4.46938637,21.1496084 1.87814052,17.2574961 C-0.947721751,13.012484 -0.549798677,7.36046894 2.83607643,3.65221184 C7.16090397,-1.08410221 14.2770341,-1.22582393 19.1842653,3.29752453 C22.1237851,6.00709044 23.5205316,9.50570155 23.8688055,13.4851451 C25.0365333,26.8169447 18.349722,37.8056121 6.17936039,42.6328324 C4.97488253,43.1103451 3.73973905,43.5025696 2.3325273,44\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nfunction chevronPath(rotation = 270) {\n  return (\n    <path d=\"M16.8625817,0.35528597 C16.3546389,-0.125475313 15.550396,-0.125475313 15.0847818,0.398991541 L5.3492107,11.1068565 C4.88359643,11.6313233 4.88359643,12.4180236 5.3492107,12.8987849 L15.0847818,23.6066499 C15.3387532,23.8688833 15.6773817,24 16.0160103,24 C16.3123103,24 16.6509389,23.8688833 16.9049103,23.6503554 C17.4128531,23.1695941 17.4551817,22.3391883 16.9472388,21.8147214 L7.97358203,12.0246735 L16.9049103,2.19091996 C17.3705245,1.66645311 17.3705245,0.836047253 16.8625817,0.35528597 Z\" transform={`rotate(${rotation})`} transform-origin=\"center\" />\n  );\n}\n\nexport function ChevronIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(270) }\n    </SvgIcon>\n  );\n}\nexport const DownArrow = ChevronIcon;\n\nexport function UpArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(90) }\n    </SvgIcon>\n  );\n}\n\nexport function RightArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(180) }\n    </SvgIcon>\n  );\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport fecha from 'fecha';\nimport { partial } from 'ap';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Pause from '@material-ui/icons/Pause';\n\nimport {\n  DownArrow, UpArrow, HistoryForwardIcon, HistoryBackIcon\n} from '../../icons';\n\nimport TimelineWorker from '../../timeline';\n\nconst timerSteps = [\n  0.1,\n  0.25,\n  0.5,\n  1,\n  2,\n  3,\n  4,\n  5\n];\n\nfunction jumpBack(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() - amount);\n}\n\nfunction jumpForward(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() + amount);\n}\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: theme.palette.grey[999],\n    height: '64px',\n    borderRadius: '32px',\n    padding: theme.spacing.unit,\n    maxWidth: 510,\n    margin: '0 auto',\n    minWidth: 450,\n    opacity: 0,\n    pointerEvents: 'none',\n    transition: 'opacity 0.1s ease-in-out',\n    '&.isExpanded': {\n      opacity: 1,\n      pointerEvents: 'auto',\n    },\n    '&.isThin': {\n      height: 50,\n      paddingBottom: 0,\n      paddingTop: 0,\n    },\n  },\n  icon: {\n    width: '98%',\n    height: '98%',\n    '&.dim': {\n      color: theme.palette.grey[700]\n    },\n    '&.small': {\n      width: '60%',\n      height: '60%',\n    },\n    '&.circle': {\n      border: `1px solid ${theme.palette.grey[900]}`,\n      borderRadius: '50%'\n    }\n  },\n  tinyArrow: {\n    display: 'flex',\n    height: 12,\n  },\n  tinyArrowIcon: {\n    width: 12,\n    height: 12,\n    color: theme.palette.grey[700]\n  },\n  iconButton: {\n    maxWidth: '100%',\n    maxHeight: '100%'\n  },\n  iconBox: {\n    display: 'inline-block',\n    borderRight: `1px solid ${theme.palette.grey[900]}`\n  },\n  dateTime: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  currentTime: {\n    fontSize: 15,\n    fontWeight: 500,\n    display: 'block',\n    marginTop: 4,\n  }\n});\n\nclass TimeDisplay extends Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.playSpeed !== 0 && props.playSpeed !== state.playSpeed) {\n      return {\n        ...state,\n        playSpeed: props.playSpeed\n      };\n    }\n    return state;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.textHolder = React.createRef();\n\n    this.updateTime = this.updateTime.bind(this);\n    this.togglePause = this.togglePause.bind(this);\n    this.increaseSpeed = this.increaseSpeed.bind(this);\n    this.decreaseSpeed = this.decreaseSpeed.bind(this);\n\n    this.state = {\n      playSpeed: 1,\n      displayTime: this.getDisplayTime()\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.updateTime);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getDisplayTime() {\n    const currentOffset = TimelineWorker.currentOffset();\n    const { start } = this.props;\n    if (!Number.isFinite(start)) {\n      return '...';\n    }\n    const now = new Date(currentOffset + start);\n    const dateString = fecha.format(now, 'ddd, D MMM, YYYY @ HH:mm:ss');\n    // var dateString = fecha.format(now, 'MMM D @ HH:mm:ss');\n\n    return dateString;\n  }\n\n  updateTime() {\n    if (!this.mounted || !this.textHolder.current) {\n      return;\n    }\n    const newDisplayTime = this.getDisplayTime();\n    const { displayTime } = this.state;\n    if (newDisplayTime !== displayTime) {\n      this.setState({ displayTime: newDisplayTime });\n    }\n\n    raf(this.updateTime);\n  }\n\n  decreaseSpeed() {\n    const { playSpeed } = this.state;\n    let curIndex = timerSteps.indexOf(playSpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.max(0, curIndex - 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  increaseSpeed() {\n    const { playSpeed } = this.state;\n    let curIndex = timerSteps.indexOf(playSpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.min(timerSteps.length - 1, curIndex + 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  togglePause(e) {\n    const { playSpeed } = this.props;\n    if (playSpeed === 0) {\n      TimelineWorker.play(this.state.playSpeed);\n    } else {\n      TimelineWorker.pause();\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const isPaused = this.props.playSpeed === 0;\n    return (\n      <div\n        className={cx(classes.base, {\n          isExpanded: this.props.expanded,\n          isThin: this.props.isThin,\n        })}\n      >\n        <Grid container>\n          <Grid item xs={3}>\n            <Grid container>\n              <Grid item align=\"center\" xs={6} className={classes.iconBox}>\n                <IconButton\n                  onClick={partial(jumpBack, 10000)}\n                  aria-label=\"Jump back 10 seconds\"\n                >\n                  <HistoryBackIcon className={`${classes.icon} small dim`} />\n                </IconButton>\n              </Grid>\n              <Grid item align=\"center\" xs={6} className={classes.iconBox}>\n                <IconButton\n                  onClick={partial(jumpForward, 10000)}\n                  aria-label=\"Jump forward 10 seconds\"\n                >\n                  <HistoryForwardIcon className={`${classes.icon} small dim`} />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6} className={classes.dateTime}>\n            { !this.props.isThin && (\n              <Typography variant=\"caption\" align=\"center\" style={{ paddingTop: 4 }}>\n                CURRENT PLAYBACK TIME\n              </Typography>\n            )}\n            <Typography variant=\"body1\" align=\"center\">\n              <span ref={this.textHolder} className={classes.currentTime}>\n                { this.state.displayTime }\n              </span>\n            </Typography>\n          </Grid>\n          <Grid item xs={3}>\n            <Grid container>\n              <Grid item align=\"center\" xs={4} className={classes.iconBox}>\n                <Grid container alignItems=\"center\" direction=\"column\">\n                  <Grid item className={classes.tinyArrow}>\n                    <IconButton\n                      className={classes.tinyArrowIcon}\n                      onClick={this.increaseSpeed}\n                      aria-label=\"Increase play speed by 1 step\"\n                    >\n                      <UpArrow className={classes.tinyArrowIcon} />\n                    </IconButton>\n                  </Grid>\n                  <Grid item>\n                    <Typography variant=\"body2\" align=\"center\">\n                      { this.state.playSpeed }\nx\n                    </Typography>\n                  </Grid>\n                  <Grid item className={classes.tinyArrow}>\n                    <IconButton\n                      className={classes.tinyArrowIcon}\n                      onClick={this.decreaseSpeed}\n                      aria-label=\"Decrease play speed by 1 step\"\n                    >\n                      <DownArrow className={classes.tinyArrowIcon} />\n                    </IconButton>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item align=\"center\" xs={8}>\n                <IconButton\n                  onClick={this.togglePause}\n                  aria-label={isPaused ? 'Unpause' : 'Pause'}\n                >\n                  { isPaused\n                    ? (<PlayArrow className={`${classes.icon} circle`} />)\n                    : (<Pause className={`${classes.icon} circle`} />)}\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nTimeDisplay.propTypes = {\n  classes: PropTypes.object.isRequired,\n  playSpeed: PropTypes.number.isRequired,\n  start: PropTypes.number.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  playSpeed: 'workerState.desiredPlaySpeed',\n  start: 'workerState.start',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeDisplay));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Obstruction from 'obstruction';\nimport localforage from 'localforage';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItem from '@material-ui/core/ListItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@material-ui/core/Icon';\n\nimport MyCommaAuth from '@commaai/my-comma-auth';\n\nimport TimeFilter from './TimeFilter';\nimport TimeDisplay from '../TimeDisplay';\nimport { AccountIcon } from '../../icons';\n\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: '#1D2225',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    display: 'flex',\n    width: '100%',\n  },\n  logo: {\n    alignItems: 'center',\n    display: 'flex',\n    maxWidth: 200,\n    textDecoration: 'none',\n  },\n  logoImg: {\n    height: '34px',\n    margin: '0px 28px',\n    width: 'auto',\n  },\n  logoText: {\n    fontFamily: 'MaisonNeueExtended',\n    fontSize: 18,\n    fontWeight: 600,\n  },\n  timeDisplay: {\n    alignItems: 'center',\n  },\n  selectArea: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginLeft: 'auto',\n    paddingRight: 28,\n  },\n  accountIcon: {\n    color: 'rgba(255, 255, 255, 0.3)',\n    height: 34,\n    width: 34,\n  },\n  userMeta: {\n    outline: 'none',\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\n    borderBottom: `1px solid ${theme.palette.white[12]}`,\n  },\n  userMetaLink: {\n    textDecoration: 'none',\n    color: '#fff',\n  },\n  hamburger: {\n    margin: '0 5px',\n    color: '#fff',\n  },\n  titleContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    flexWrap: 'nowrap',\n  }\n});\n\nclass AppHeader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickedAccount = this.handleClickedAccount.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogOut = this.handleLogOut.bind(this);\n    this.toggleDrawer = this.toggleDrawer.bind(this);\n\n    this.state = {\n      anchorEl: null,\n    };\n  }\n\n  toggleDrawer() {\n    this.props.handleDrawerStateChanged(!this.props.drawerIsOpen);\n  }\n\n  handleClickedAccount(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  handleClose() {\n    this.setState({ anchorEl: null });\n  }\n\n  handleLogOut() {\n    this.handleClose();\n    localforage.removeItem('isDemo');\n    MyCommaAuth.logOut();\n  }\n\n  render() {\n    const { profile, classes, showMenuButton } = this.props;\n    const { auth, anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    if (!profile) {\n      return [];\n    }\n\n    return (\n      <header className={classes.base}>\n        <Grid container spacing={0}>\n          <Grid item container xs={2} lg={4} className={classes.titleContainer}>\n            { showMenuButton ?\n              <IconButton aria-label=\"menu\" className={classes.hamburger} onClick={this.toggleDrawer}>\n                <Icon>menu</Icon>\n              </IconButton>\n            :\n              <Link to=\"/\" className={classes.logo}>\n                <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n              </Link>\n            }\n            <Link to=\"/\" className={classes.logo}>\n              <Typography className={classes.logoText}>\n                explorer\n              </Typography>\n            </Link>\n          </Grid>\n          <Grid item container xs={6} lg={4} className={classes.timeDisplay}>\n            <TimeDisplay isThin />\n          </Grid>\n          <Grid\n            item\n            xs={4}\n            align=\"right\"\n            className={classes.selectArea}\n          >\n            <TimeFilter />\n            <IconButton\n              aria-owns={open ? 'menu-appbar' : null}\n              aria-haspopup=\"true\"\n              onClick={this.handleClickedAccount}\n            >\n              <AccountIcon className={classes.accountIcon} />\n            </IconButton>\n            <Menu\n              id=\"menu-appbar\"\n              open={open}\n              onClose={this.handleClose}\n              anchorEl={anchorEl}\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n            >\n              <ListItem classes={{ root: classes.userMeta }} disableGutters>\n                <div>\n                  <Typography variant=\"body2\" paragraph>\n                    { profile.email }\n                  </Typography>\n                  <Typography variant=\"body1\" paragraph>\n                    { profile.points }\n                    {' '}\n                    points\n                  </Typography>\n                </div>\n              </ListItem>\n              <li>\n                <MenuItem\n                  component=\"a\"\n                  href=\"/useradmin/\"\n                  target=\"_blank\"\n                >\n                Manage Account\n                </MenuItem>\n              </li>\n              <MenuItem onClick={this.handleLogOut}>Log out</MenuItem>\n            </Menu>\n          </Grid>\n        </Grid>\n      </header>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  start: 'workerState.start',\n  end: 'workerState.end',\n  profile: 'workerState.profile',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AppHeader));\n","import { push } from 'connected-react-router';\nimport document from 'global/document';\nimport * as Types from './types';\nimport Timelineworker from '../timeline';\nimport { getDongleID } from '../url';\nimport { billing as Billing } from '@commaai/comma-api';\n\nexport function updateState(data) {\n  return {\n    type: Types.WORKER_STATE_UPDATE,\n    data\n  };\n}\n\nexport function selectRange(start, end) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (!state.workerState.dongleId) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n      return;\n    }\n    const curPath = document.location.pathname;\n    const dongleId = getDongleID(curPath) || state.workerState.dongleId;\n    const desiredPath = urlForState(dongleId, start, end, false);\n\n    if (state.zoom.start !== start || state.zoom.end !== end) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n    }\n\n    if (!state.workerState.loop.startTime\n      || !state.workerState.loop.duration\n      || state.workerState.loop.startTime < start\n      || state.workerState.loop.startTime + state.workerState.loop.duration > end\n      || state.workerState.loop.duration < end - start) {\n      Timelineworker.selectLoop(start, end - start);\n    }\n\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (state.workerState.dongleId !== dongleId) {\n      Timelineworker.selectDevice(dongleId).then(() => {\n        dispatch(primeFetchSubscription());\n      });\n    } else {\n      dispatch(primeNav(false));\n    }\n\n    const curPath = document.location.pathname;\n    const desiredPath = urlForState(dongleId, state.zoom.start, state.zoom.end, null);\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function primeFetchSubscription() {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if ((state.workerState.device && state.workerState.device.is_owner) || state.workerState.profile.superuser) {\n      Billing.getSubscription(state.workerState.dongleId).then((subscription) => {\n        Timelineworker.primeGetSubscription(state.workerState.dongleId, subscription);\n      });\n    }\n  };\n}\n\nexport function primeNav(nav = true) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (state.workerState.primeNav != nav) {\n      Timelineworker.primeNav(nav);\n    }\n\n    const curPath = document.location.pathname;\n    const desiredPath = urlForState(state.workerState.dongleId, null, null, nav);\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nfunction urlForState(dongleId, start, end, prime_nav) {\n  const path = [dongleId];\n\n  if (start && end) {\n    path.push(start);\n    path.push(end);\n  } else if (prime_nav) {\n    path.push('prime');\n  }\n\n  return `/${path.join('/')}`;\n}\n","export const WORKER_STATE_UPDATE = 'workerstate';\nexport const TIMELINE_SELECTION_CHANGED = 'timeline_selection_changed';\n","export function filterEvent(event) {\n  return (event.type === 'disengage' || event.type === 'disengage_steer');\n}\n\nexport function formatDriveDuration(duration) {\n  const milliseconds = Math.floor((duration % 1000) / 100);\n  let seconds = Math.floor((duration / 1000) % 60);\n  let minutes = Math.floor((duration / (1000 * 60)) % 60);\n  let hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n  hours = (hours < 10) ? hours : hours;\n  minutes = (minutes < 10) ? minutes : minutes;\n  seconds = (seconds < 10) ? seconds : seconds;\n  return {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n  };\n}\n\nexport function getDrivePoints(duration) {\n  const minutes = Math.floor(duration / (1000 * 60));\n  const points = Math.floor(minutes * 1.5); // panda\n  return points;\n}\n\nexport function deviceTypePretty(deviceType) {\n  if (deviceType === 'neo') {\n    return 'EON';\n  } else if (deviceType === 'two') {\n    return 'comma two';\n  }\n  return deviceType;\n}\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) => ({\n  shopLink: {\n    textDecoration: 'none',\n  }\n});\n\nclass ShopButton extends Component {\n  render() {\n    return (\n      <a href={this.props.link} target=\"_blank\" className={this.props.classes.shopLink}>\n        <Button variant=\"outlined\">\n          Shop\n        </Button>\n      </a>\n    );\n  }\n}\n\nexport default withStyles(styles)(ShopButton);\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport ShopButton from './shopButton';\n\nconst styles = (theme) => ({\n  root: {\n    display: 'flex',\n    paddingTop: '48px'\n  },\n  eon: {\n    display: 'block',\n    width: '100%',\n    paddingTop: '30px',\n  },\n  content: {\n    padding: '20px 12px',\n    textAlign: 'center'\n  },\n  imageContainer: {\n    display: 'flex',\n    alignItems: 'center',\n  }\n});\n\nclass CommaTwoUpsell extends Component {\n  render() {\n    return (\n      <div className={this.props.classes.root}>\n        <Grid item xs={6} className={this.props.classes.imageContainer}>\n          <img\n            src=\"https://comma.ai/two-onroad-transparent-01.png\"\n            className={this.props.classes.eon}\n          />\n        </Grid>\n        <Grid item xs={6} className={this.props.classes.content}>\n          <Typography>{ this.props.hook }</Typography>\n          <ShopButton link=\"https://comma.ai/shop/products/comma-two-devkit/?ref=explorer\" />\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(CommaTwoUpsell);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport Raven from 'raven-js';\nimport cx from 'classnames';\n\nimport {\n  withStyles,\n  Grid,\n  Button,\n  Typography,\n  FormHelperText,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  LinearProgress,\n  FormControl,\n  TextField,\n} from '@material-ui/core';\nimport Pencil from '@material-ui/icons/Edit';\n\nimport { deviceTypePretty } from '../../utils'\nimport { devices as Devices } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\nimport CommaTwoUpsell from '../Annotations/commaTwoUpsell';\n\nconst styles = (theme) => ({\n  base: {\n    height: '100%',\n    overflowY: 'scroll',\n    paddingLeft: '10px',\n  },\n  device: {\n    alignItems: 'center',\n    cursor: 'pointer',\n    display: 'flex',\n    padding: '16px 32px',\n    '&.isSelected': {\n      backgroundColor: '#171B1D',\n    }\n  },\n  deviceAvatar: {\n    backgroundColor: '#1D2225',\n    borderRadius: 30,\n    height: 46,\n    width: 46,\n  },\n  deviceInfo: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    marginLeft: 16,\n  },\n  deviceAlias: {},\n  deviceId: {\n    color: '#525E66',\n    fontFamily: 'MaisonNeueMono',\n  },\n\n  editDeviceIcon: {\n    color: 'white',\n    '&:hover': {\n      color: theme.palette.grey[100]\n    }\n  },\n  nameField: {\n    marginRight: theme.spacing.unit,\n  },\n  saveButton: {\n    marginRight: theme.spacing.unit,\n  },\n  textField: {\n    marginBottom: theme.spacing.unit\n  },\n});\n\nclass DeviceList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      editingDevice: null,\n      deviceAlias: '',\n      isWaitingForApi: false,\n      error: null,\n    };\n\n    this.handleAliasChange = this.handleAliasChange.bind(this);\n    this.handleAliasFieldKeyPress = this.handleAliasFieldKeyPress.bind(this);\n    this.renderDevice = this.renderDevice.bind(this);\n    this.setDeviceAlias = this.setDeviceAlias.bind(this);\n    this.toggleDeviceEdit = this.toggleDeviceEdit.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.selectedDevice !== this.props.selectedDevice\n        && nextProps.selectedDevice !== this.state.editingDevice) {\n      this.setState({ editingDevice: null });\n    }\n  }\n\n  toggleDeviceEdit(device) {\n    if (this.state.editingDevice === device.dongle_id) {\n      this.setState({ editingDevice: null });\n    } else {\n      this.props.handleDeviceSelected(device.dongle_id);\n      this.setState({ editingDevice: device.dongle_id, deviceAlias: device.alias });\n    }\n  }\n\n  cancelEdit() {\n    this.setState({ editingDevice: null });\n  }\n\n  handleAliasChange(e) {\n    this.setState({ deviceAlias: e.target.value });\n  }\n\n  handleAliasFieldKeyPress(dongle_id, e) {\n    if (e.key === 'Enter' && !this.state.isWaitingForApi) {\n      this.setDeviceAlias(dongle_id);\n    }\n  }\n\n  async setDeviceAlias(dongle_id) {\n    this.setState({ isWaitingForApi: true });\n    try {\n      const device = await Devices.setDeviceAlias(dongle_id, this.state.deviceAlias.trim());\n      Timelineworker.updateDevice(device);\n      this.setState({ isWaitingForApi: false, editingDevice: null });\n    } catch (e) {\n      Raven.captureException(e);\n      this.setState({ error: e.message, isWaitingForApi: false });\n    }\n  }\n\n  render() {\n    let { devices } = this.props;\n    const dongleId = this.props.selectedDevice;\n    let found = devices.some((device) => device.dongle_id === dongleId);\n    let onlyHasAppDevice = (devices.length === 0);\n\n    if (!found) {\n      devices = [{\n        dongle_id: dongleId,\n        shared: true,\n        alias: 'Shared device',\n      }].concat(devices);\n    }\n\n    return (\n      <div className={this.props.classes.base}>\n        { devices.filter(this.filterDrivingDevice).map(this.renderDevice) }\n        { onlyHasAppDevice && <CommaTwoUpsell hook=\"Get started with comma two\" /> }\n      </div>\n    );\n  }\n\n  renderDevice(device) {\n    const { classes } = this.props;\n    const isSelected = (this.props.selectedDevice === device.dongle_id);\n    const alias = device.alias || deviceTypePretty(device.device_type);\n    return (\n      <div\n        key={device.dongle_id}\n        onClick={partial(this.props.handleDeviceSelected, device.dongle_id)}\n        className={cx(classes.device, [{ isSelected }])}\n      >\n        <div className={classes.deviceAvatar} />\n        <div className={classes.deviceInfo}>\n          <Typography variant=\"body2\" className={classes.deviceAlias}>\n            { alias }\n          </Typography>\n          <Typography variant=\"caption\" className={classes.deviceId}>\n            (\n              { device.dongle_id }\n            )\n          </Typography>\n        </div>\n      </div>\n    );\n  }\n\n  filterDrivingDevice(device) {\n    return device.device_type !== 'panda';\n  }\n}\n\nconst stateToProps = Obstruction({\n  devices: 'workerState.devices',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceList));\n","const Colors = {\n  transparent: 'transparent',\n  white: '#fff',\n  white10: 'rgba(255, 255, 255, 0.1)',\n  white12: 'rgba(255, 255, 255, 0.12)',\n  white20: 'rgba(255, 255, 255, 0.2)',\n  white30: 'rgba(255, 255, 255, 0.3)',\n  white40: 'rgba(255, 255, 255, 0.4)',\n  white50: 'rgba(255, 255, 255, 0.5)',\n  black: '#030404',\n  blue50: '#258FDA',\n  blue100: '#2284c9',\n  blue200: '#1f79b8',\n  blue300: '#1c6ea8',\n  blue400: '#1a6397',\n  blue500: '#175886',\n  blue600: '#144d75',\n  blue700: '#114265',\n  blue800: '#0e3754',\n  blue900: '#0b2c43',\n  blue950: '#061622',\n  blue999: '#030b11',\n  lightBlue50: '#eef6fc',\n  lightBlue100: '#ddeef9',\n  lightBlue200: '#cde5f6',\n  lightBlue300: '#bcddf4',\n  lightBlue400: '#abd4f1',\n  lightBlue500: '#9acbee',\n  lightBlue600: '#8ac3eb',\n  lightBlue700: '#79bae8',\n  lightBlue800: '#68b1e5',\n  lightBlue900: '#57a9e3',\n  desatBlue800: '#657f92',\n  red50: '#da2535',\n  red100: '#c92231',\n  red200: '#b81f2d',\n  red300: '#971a25',\n  red400: '#861721',\n  red500: '#75141d',\n  red600: '#651118',\n  red700: '#540e14',\n  red800: '#430b10',\n  red900: '#32090c',\n  lightRed50: '#fceeef',\n  lightRed100: '#f9dde0',\n  lightRed200: '#f6cdd0',\n  lightRed300: '#f4bcc1',\n  lightRed400: '#f1abb1',\n  lightRed500: '#ee9aa2',\n  lightRed600: '#eb8a92',\n  lightRed700: '#e87983',\n  lightRed800: '#e56873',\n  lightRed900: '#e35764',\n  lightRed950: '#e04754',\n  lightRed999: '#dd3645',\n  green50: '#22c967',\n  green100: '#20b85f',\n  green200: '#1da756',\n  green300: '#1a974e',\n  green400: '#178645',\n  green500: '#14753c',\n  green600: '#116534',\n  green700: '#0e542b',\n  green800: '#0c4323',\n  green900: '#09321a',\n  lightGreen50: '#eefcf4',\n  lightGreen100: '#def9e9',\n  lightGreen200: '#cdf6de',\n  lightGreen300: '#bcf4d3',\n  lightGreen400: '#abf1c8',\n  lightGreen500: '#9beebd',\n  lightGreen600: '#8aebb2',\n  lightGreen700: '#79e8a7',\n  lightGreen800: '#68e59c',\n  lightGreen900: '#25da70',\n  orange50: '#da6f25',\n  orange100: '#c96722',\n  orange200: '#b85e1f',\n  orange300: '#a7551c',\n  orange400: '#964d19',\n  orange500: '#864417',\n  orange600: '#753c14',\n  orange700: '#643311',\n  orange800: '#532b0e',\n  orange900: '#42220b',\n  lightOrange50: '#fcf4ee',\n  lightOrange100: '#f9e8dd',\n  lightOrange200: '#f6ddcc',\n  lightOrange200: '#f4d2bb',\n  lightOrange300: '#f1c7aa',\n  lightOrange400: '#eebc9a',\n  lightOrange500: '#ebb189',\n  lightOrange600: '#e8a678',\n  lightOrange700: '#e59b67',\n  lightOrange800: '#e08546',\n  lightOrange900: '#dd7a35',\n  yellow50: '#f1ebaa',\n  yellow100: '#eee79a',\n  yellow200: '#ebe389',\n  yellow300: '#e8df78',\n  yellow400: '#e5db67',\n  yellow500: '#e3d756',\n  yellow600: '#e0d346',\n  yellow700: '#ddcf35',\n  yellow800: '#daca25',\n  yellow900: '#c9bb22',\n  grey50: '#6e7d84',\n  grey100: '#65737a',\n  grey200: '#5c696f',\n  grey300: '#535f64',\n  grey400: '#4b5559',\n  grey500: '#424a4f',\n  grey600: '#394044',\n  grey700: '#303639',\n  grey800: '#272c2f',\n  grey900: '#1e2224',\n  grey950: '#151819',\n  grey999: '#0c0e0f',\n  lightGrey50: '#f8f9f9',\n  lightGrey100: '#eeeff0',\n  lightGrey200: '#e3e6e8',\n  lightGrey300: '#d8dcdf',\n  lightGrey400: '#cdd3d6',\n  lightGrey500: '#c3c9cd',\n  lightGrey600: '#b8c0c4',\n  lightGrey700: '#adb6bb',\n  lightGrey800: '#a3adb2',\n  lightGrey900: '#98a3a9',\n  lightGrey950: '#8d9aa1',\n  lightGrey999: '#77878f',\n};\n\nexport default Colors;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport Raven from 'raven-js';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport Modal from '@material-ui/core/Modal';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { devices as Devices } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\nimport { primeNav } from '../../actions';\n\nconst styles = (theme) => ({\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)'\n  },\n  textField: {\n  },\n  buttonGroup: {\n    textAlign: 'right'\n  },\n  form: {\n    paddingTop: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit\n  },\n  formRow: {\n    minHeight: 75\n  },\n  fabProgress: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  wrapper: {\n    margin: theme.spacing.unit,\n    position: 'relative',\n    display: 'inline-block'\n  },\n  primeManageButton: {\n    marginTop: 20,\n  },\n});\n\nclass DeviceSettingsModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deviceAlias: '',\n      loadingDeviceAlias: false,\n      loadingDeviceShare: false,\n      hasSavedAlias: false,\n      shareEmail: ''\n    };\n\n    this.handleAliasChange = this.handleAliasChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.callOnEnter = this.callOnEnter.bind(this);\n    this.setDeviceAlias = this.setDeviceAlias.bind(this);\n    this.shareDevice = this.shareDevice.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.device && nextProps.device.alias !== this.state.deviceAlias) {\n      this.setState({ deviceAlias: nextProps.device.alias });\n    }\n  }\n\n  handleAliasChange(e) {\n    this.setState({\n      deviceAlias: e.target.value,\n      hasSavedAlias: e.target.value === this.props.device.dongle_id ? this.state.hasSavedAlias : false\n    });\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      shareEmail: e.target.value,\n      hasShared: false\n    });\n  }\n\n  callOnEnter(method, e) {\n    if (e.key === 'Enter') {\n      method();\n    }\n  }\n\n  async setDeviceAlias() {\n    const { dongle_id } = this.props.device;\n\n    if (this.state.loadingDeviceAlias) {\n      return;\n    }\n\n    this.setState({\n      loadingDeviceAlias: true,\n      hasSavedAlias: false\n    });\n    try {\n      const device = await Devices.setDeviceAlias(dongle_id, this.state.deviceAlias.trim());\n      Timelineworker.updateDevice(device);\n      this.setState({\n        loadingDeviceAlias: false,\n        hasSavedAlias: true\n      });\n    } catch (e) {\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceAlias: false });\n    }\n  }\n\n  async shareDevice() {\n    if (this.state.loadingDeviceShare) {\n      return;\n    }\n\n    const { dongle_id } = this.props.device;\n    const email = this.state.shareEmail;\n\n    this.setState({\n      loadingDeviceShare: true,\n      hasShared: false\n    });\n    try {\n      await Devices.grantDeviceReadPermission(dongle_id, this.state.shareEmail.trim());\n      this.setState({\n        loadingDeviceShare: false,\n        shareEmail: '',\n        hasShared: true\n      });\n    } catch (e) {\n      const err = e;\n      console.log(e, err);\n      console.log(err.statusCode);\n      debugger;\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceShare: false });\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Modal\n        aria-labelledby=\"device-settings-modal\"\n        aria-describedby=\"device-settings-modal-description\"\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n      >\n        <Paper className={classes.modal}>\n          <Typography variant=\"title\">\n            Device Settings\n          </Typography>\n          <Divider />\n          <Button variant=\"outlined\" className={ classes.primeManageButton }\n            onClick={ () => this.props.dispatch(primeNav()) }>\n            Manage Prime Settings\n          </Button>\n          <div className={classes.form}>\n            <div className={classes.formRow}>\n              <TextField\n                id=\"device_alias\"\n                label=\"Device Name\"\n                className={classes.textField}\n                value={ this.state.deviceAlias ? this.state.deviceAlias : '' }\n                onChange={this.handleAliasChange}\n                onKeyPress={partial(this.callOnEnter, this.setDeviceAlias)}\n              />\n              { (this.props.device.alias !== this.state.deviceAlias || this.state.hasSavedAlias)\n                  && (\n                  <div className={classes.wrapper}>\n                    <IconButton\n                      variant=\"fab\"\n                      onClick={this.setDeviceAlias}\n                    >\n                      { this.state.hasSavedAlias && <CheckIcon /> || <SaveIcon /> }\n                    </IconButton>\n                    {this.state.loadingDeviceAlias && <CircularProgress size={48} className={classes.fabProgress} />}\n                  </div>\n                  )}\n            </div>\n            <div className={classes.formRow}>\n              <TextField\n                id=\"device_share\"\n                label=\"Share by Email\"\n                className={classes.textField}\n                value={this.state.shareEmail}\n                onChange={this.handleEmailChange}\n                onKeyPress={partial(this.callOnEnter, this.shareDevice)}\n              />\n              { (this.state.shareEmail.length > 0 || this.state.hasShared)\n                  && (\n                  <div className={classes.wrapper}>\n                    <IconButton\n                      variant=\"fab\"\n                      onClick={this.shareDevice}\n                    >\n                      { this.state.hasShared && <CheckIcon /> || <ShareIcon /> }\n                    </IconButton>\n                    {this.state.loadingDeviceShare && <CircularProgress size={48} className={classes.fabProgress} />}\n                  </div>\n                  )}\n            </div>\n          </div>\n          <div className={classes.buttonGroup}>\n            <Button variant=\"contained\" onClick={this.props.onClose}>\n              Close\n            </Button>\n            &nbsp;\n          </div>\n        </Paper>\n      </Modal>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  device: 'workerState.device',\n  subscription: 'workerState.subscription'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceSettingsModal));\n","import Raven from 'raven-js';\n\nexport const MAPBOX_TOKEN = process.env.REACT_APP_MAPBOX_TOKEN;\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\n\nlet geocodingClient = null;\nif (MAPBOX_TOKEN) {\n  geocodingClient = mbxGeocoding({\n    accessToken: MAPBOX_TOKEN\n  });\n} else {\n  console.warn('Missing mapbox token');\n}\n\nexport default function geocodeApi() {\n  function getNeighborhood(context) {\n    return (context.id.indexOf('neighborhood') !== -1);\n  }\n\n  function getLocality(context) {\n    return (context.id.indexOf('place') !== -1);\n  }\n\n  function getRegion(context) {\n    return (context.id.indexOf('region') !== -1);\n  }\n\n  return {\n    async reverseLookup(coords) {\n      if (geocodingClient === null) {\n        return null;\n      }\n\n      const response = await geocodingClient.reverseGeocode({\n        query: [coords[0], coords[1]],\n        limit: 1,\n      }).send();\n\n      try {\n        const { features } = response.body;\n        if (features[0].context) {\n          let region = features[0].context.filter(getRegion)[0].short_code;\n          if (region.indexOf('US-') !== -1) { region = region.substr(3); }\n          const locality = features[0].context.filter(getLocality)[0].text;\n          const _neighborhood = features[0].context.filter(getNeighborhood)[0];\n          const neighborhood = _neighborhood ? _neighborhood.text : locality;\n\n          return {\n            region,\n            locality,\n            neighborhood,\n          };\n        }\n      } catch (err) {\n        Raven.captureException(err);\n      }\n    }\n  };\n}\n","import React from 'react';\nimport { partial } from 'ap';\n\nconst gutter = 0;\n\nfunction renderImage(imgStyles, data, i) {\n  if (data.blank) {\n    return (\n      <div\n        key={i}\n        className=\"thumbnailImage blank\"\n        style={{\n          ...imgStyles,\n          width: imgStyles.width * data.length,\n        }}\n      />\n    );\n  }\n  return (\n    <div\n      key={i}\n      className=\"thumbnailImage images\"\n      style={{\n        ...imgStyles,\n        width: imgStyles.width * data.length,\n        marginLeft: gutter,\n        backgroundSize: `auto ${imgStyles.height}px`,\n        backgroundRepeat: 'repeat-x',\n        backgroundImage: `url(${data.url})`,\n        backgroundPosition: `${data.startImage * imgStyles.width}px`\n      }}\n    />\n  );\n}\n\nexport default function Thumbnails(props) {\n  const { thumbnail } = props;\n  const imgStyles = {\n    display: 'inline-block',\n    height: thumbnail.height,\n    width: (1164 / 874) * thumbnail.height,\n  };\n  // console.log('Thumbnail props', props);\n  const imgCount = Math.ceil(thumbnail.width / imgStyles.width);\n  imgStyles.marginRight = gutter / 2;\n\n  const imgArr = [];\n  let currentSegment = null;\n\n  if (!Number.isFinite(imgCount)) {\n    return [];\n  }\n  for (let i = 0; i < imgCount; ++i) {\n    const offset = props.percentToOffset((i + 0.5) / imgCount);\n    const segment = props.getCurrentSegment(offset);\n    if (!segment) {\n      if (currentSegment && !currentSegment.blank) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n      if (!currentSegment) {\n        currentSegment = {\n          blank: true,\n          length: 0\n        };\n      }\n      currentSegment.length += 1;\n    } else {\n      // 12 per file, 5s each\n      let seconds = Math.floor((offset - segment.routeOffset) / 1000);\n      const url = `${segment.url}/${segment.segment}/sprite.jpg`;\n      seconds %= 60;\n\n      if (currentSegment && (currentSegment.blank || currentSegment.segment !== segment.segment)) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n\n      const imageIndex = Math.floor(seconds / 5);\n\n      if (currentSegment) {\n        if (imageIndex === currentSegment.endImage + 1) {\n          currentSegment.endImage = imageIndex;\n        } else {\n          imgArr.push(currentSegment);\n          currentSegment = null;\n        }\n      }\n\n      if (!currentSegment) {\n        currentSegment = {\n          segment: segment.segment,\n          startOffset: seconds,\n          startImage: imageIndex,\n          endImage: imageIndex,\n          length: 0,\n          url\n        };\n      }\n\n      currentSegment.length += 1;\n      currentSegment.endOffset = seconds;\n    }\n  }\n\n  if (currentSegment) {\n    imgArr.push(currentSegment);\n  }\n\n  return imgArr.map(partial(renderImage, imgStyles));\n}\n","import { createMuiTheme } from '@material-ui/core/styles';\nimport Colors from './colors';\nimport { ChevronIcon } from './icons';\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: 'MaisonNeue',\n  },\n  overrides: {\n    MuiPaper: {\n      root: {\n        backgroundColor: '#30373B'\n      },\n    },\n    MuiDrawer: {\n      paper: {\n        overflowY: null,\n      },\n      paperAnchorDockedLeft: {\n        borderRight: 'none',\n      },\n    },\n    MuiSelect: {\n      select: {\n        padding: '12px',\n        paddingRight: '48px',\n        margin: '0px',\n        '&>div': {\n          margin: '0',\n        }\n      },\n      selectMenu: {\n        paddingRight: 54,\n      },\n      icon: {\n        marginRight: 20,\n        color: '#272D30'\n      }\n    },\n    MuiInput: {\n      root: {\n        position: 'relative',\n        border: `1px solid ${Colors.grey800}`,\n        borderRadius: 20,\n        overflow: 'hidden'\n      },\n      input: {\n        padding: '12px 16px',\n        '&::placeholder': {\n          opacity: 1,\n          color: Colors.white30\n        }\n      }\n    },\n    MuiFormLabel: {\n      root: {\n        marginLeft: 16,\n        marginTop: 4\n      }\n    },\n    MuiTab: {\n      root: {\n        minHeight: 40,\n      }\n    },\n  },\n  props: {\n    MuiSelect: {\n      disableUnderline: true,\n      IconComponent: ChevronIcon\n    },\n    MuiInput: {\n      disableUnderline: true\n    }\n  },\n  palette: {\n    type: 'dark',\n    placeholder: Colors.white30,\n    background: {\n      default: Colors.grey999\n    },\n    primary: {\n      light: Colors.grey50,\n      main: Colors.grey900,\n      dark: Colors.grey999\n    },\n    states: {\n      drivingBlue: Colors.blue500,\n      engagedGreen: Colors.green400,\n      alertOrange: Colors.orange50,\n      alertRed: Colors.red100,\n    },\n    grey: {\n      50: Colors.grey50,\n      100: Colors.grey100,\n      200: Colors.grey200,\n      300: Colors.grey300,\n      400: Colors.grey400,\n      500: Colors.grey500,\n      600: Colors.grey600,\n      700: Colors.grey700,\n      800: Colors.grey800,\n      900: Colors.grey900,\n      950: Colors.grey950,\n      999: Colors.grey999\n    },\n    lightGrey: {\n      200: Colors.lightGrey200,\n    },\n    white: {\n      10: Colors.white10,\n      12: Colors.white12,\n      20: Colors.white20,\n      30: Colors.white30,\n      40: Colors.white40,\n      50: Colors.white50,\n    },\n    error: {\n      main: 'rgba(209,106,35,0.72)'\n    }\n  }\n});\n\nexport default theme;\n","// timeline minimap\n// rapidly change high level timeline stuff\n// rapid seeking, etc\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport debounce from 'debounce';\nimport document from 'global/document';\nimport fecha from 'fecha';\nimport cx from 'classnames';\nimport { partial } from 'ap';\nimport PropTypes from 'prop-types';\n\nimport Measure from 'react-measure';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport Thumbnails from './thumbnails';\nimport theme from '../../theme';\nimport TimelineWorker from '../../timeline';\nimport Segments from '../../timeline/segments';\nimport { selectRange } from '../../actions';\n\nconst styles = (/* theme */) => ({\n  base: {\n    backgroundColor: '#1D2225',\n    minHeight: '32px',\n    overflow: 'hidden',\n    position: 'relative',\n    width: '100%',\n    '&.hasThumbnails.hasRuler': {\n      minHeight: '80px',\n    },\n  },\n  rounded: {\n    borderRadius: '10px 10px 0px 0px'\n  },\n  segments: {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    width: '100%',\n    height: '100%',\n    '&.hasThumbnails': {\n      height: '40%'\n    },\n    '&.hasThumbnails.hasRuler': {\n      height: '100%',\n    },\n  },\n  segment: {\n    position: 'relative',\n    height: '100%',\n    background: theme.palette.states.drivingBlue,\n  },\n  ruler: {\n    background: '#272D30d9',\n    bottom: 0,\n    position: 'absolute',\n    top: 12,\n    width: '100%',\n  },\n  rulerRemaining: {\n    background: '#1D2225',\n    borderLeft: '1px solid #D8DDDF',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    opacity: 0.45,\n    pointerEvents: 'none',\n    width: '100%',\n  },\n  statusGradient: {\n    background: 'linear-gradient(rgba(0, 0, 0, 0.0) 4%, rgba(255, 255, 255, 0.025) 10%, rgba(0, 0, 0, 0.1) 25%, rgba(0, 0, 0, 0.4))',\n    height: 12,\n    left: 0,\n    pointerEvents: 'none',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  segmentColor: {\n    position: 'absolute',\n    display: 'inline-block',\n    height: '100%',\n    width: '100%',\n    '&.active': {},\n    '&.engage': {\n      background: theme.palette.states.engagedGreen,\n    },\n    '&.alert': {\n      '&.userPrompt': {\n        background: theme.palette.states.alertOrange,\n      },\n      '&.critical': {\n        background: theme.palette.states.alertRed,\n      }\n    }\n  },\n  uncoloredSegment: {\n    background: theme.palette.states.drivingBlue,\n    height: '100%',\n    width: '100%',\n  },\n  hoverBead: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: 50,\n    height: '100%'\n  },\n  dragHighlight: {\n    background: 'rgba(255, 255, 255, 0.1)',\n    position: 'absolute',\n    height: '100%',\n  },\n  thumbnails: {\n    position: 'absolute',\n    height: '60%',\n    top: 12,\n    width: '100%',\n    whiteSpace: 'nowrap',\n    userSelect: 'none',\n    '& img': {\n      pointerEvents: 'none',\n    },\n    '&.hasRuler': {\n      height: '30%',\n    },\n    '& > div': {\n      display: 'inline-block'\n    }\n  },\n});\n\nconst AlertStatusCodes = [\n  'normal',\n  'userPrompt',\n  'critical'\n];\n\nfunction percentFromMouseEvent(e) {\n  const boundingBox = e.currentTarget.getBoundingClientRect();\n  const x = e.pageX - boundingBox.left;\n  return x / boundingBox.width;\n}\n\nclass Timeline extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getOffset = this.getOffset.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.percentToOffset = this.percentToOffset.bind(this);\n    this.renderSegment = this.renderSegment.bind(this);\n    this.sendSeek = debounce(this.sendSeek.bind(this), 1000 / 60);\n\n\n    this.offsetValue = React.createRef();\n    this.rulerRemaining = React.createRef();\n    this.rulerRemainingHovered = React.createRef();\n    this.dragBar = React.createRef();\n    this.hoverBead = React.createRef();\n    // this.canvas_speed = React.createRef();\n    const { zoomOverride, zoom } = this.props;\n    this.state = {\n      dragStart: null,\n      zoom: zoomOverride || zoom,\n      mouseX: 0,\n      hoverPercent: 0,\n      isHovered: false,\n      thumbnail: {\n        height: 0,\n        width: 0\n      }\n    };\n  }\n\n  componentWillMount() {\n    document.addEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening = TimelineWorker.onIndexed(() => this.forceUpdate());\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.getOffset);\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({\n      zoom: props.zoomOverride || props.zoom\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening();\n  }\n\n  getOffset() {\n    if (!this.mounted) {\n      return;\n    }\n    raf(this.getOffset);\n    let offset = TimelineWorker.currentOffset();\n    if (this.seekIndex) {\n      offset = this.seekIndex;\n    }\n    offset = Math.floor(offset);\n    const percent = this.offsetToPercent(offset);\n    if (this.rulerRemaining.current && this.rulerRemaining.current.parentElement) {\n      this.rulerRemaining.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n    const { isHovered } = this.state;\n    if (!isHovered\n      && this.rulerRemainingHovered.current\n      && this.rulerRemainingHovered.current.parentElement) {\n      this.rulerRemainingHovered.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n  }\n\n  handleClick(e) {\n    if (this.isDragSelecting) {\n      console.log('Is a drag event');\n      this.isDragSelecting = false;\n      return;\n    }\n    const { noseek } = this.props;\n    if (noseek) {\n      return;\n    }\n    const percent = percentFromMouseEvent(e);\n\n    TimelineWorker.seek(this.percentToOffset(percent));\n  }\n\n  handleMouseDown(e) {\n    const { classes, dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    // make sure they're clicking & dragging and not just moving the mouse around\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return;\n    }\n\n    const percent = percentFromMouseEvent(e);\n    this.setState({\n      dragStart: percent,\n      dragEnd: percent\n    });\n  }\n\n  handleMouseUp(e) {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    if (!dragStart) {\n      return;\n    }\n    const selectedArea = Math.abs(dragStart - dragEnd) * 100;\n    const startPercent = Math.min(dragStart, dragEnd);\n    const endPercent = Math.max(dragStart, dragEnd);\n    const startOffset = Math.round(this.percentToOffset(startPercent));\n    const endOffset = Math.round(this.percentToOffset(endPercent));\n\n    if (selectedArea > 0.1) {\n      const currentOffset = TimelineWorker.currentOffset();\n      if (currentOffset < startOffset || currentOffset > endOffset) {\n        TimelineWorker.seek(startOffset);\n      }\n      const { start, dispatch } = this.props;\n      const startTime = startOffset + start;\n      const endTime = endOffset + start;\n\n      this.isDragSelecting = true;\n      setTimeout(() => { this.isDragSelecting = false; });\n      dispatch(selectRange(startTime, endTime));\n    } else if (e.currentTarget !== document) {\n      this.handleClick(e);\n    }\n\n    this.setState({\n      dragStart: null,\n      dragEnd: null\n    });\n  }\n\n  handleMouseMove(e) {\n    const boundingBox = e.currentTarget.getBoundingClientRect();\n    const x = e.pageX - boundingBox.left;\n    const percent = x / boundingBox.width;\n\n    this.setState({\n      mouseX: x,\n      hoverPercent: percent,\n      isHovered: true,\n    });\n\n    // mouseover highlight\n    if (this.rulerRemainingHovered.current && this.rulerRemainingHovered.current.parentElement) {\n      let { hoverPercent } = this.state;\n      hoverPercent = (hoverPercent * 100).toFixed(2);\n      this.rulerRemainingHovered.current.style.left = `${hoverPercent}%`;\n    }\n\n    const { classes, dragSelection } = this.props;\n    const { dragStart } = this.state;\n    // drag highlight\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return; // ignore mouseover\n    }\n    if (!dragSelection) {\n      this.seekIndex = this.percentToOffset(percent);\n      this.sendSeek();\n    } if (dragStart) {\n      this.setState({\n        dragEnd: percent\n      });\n    }\n    // do other things for drag selection!\n  }\n\n  handleMouseLeave() {\n    this.setState({ isHovered: false });\n  }\n\n  percentToOffset(perc) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return perc * (zoom.end - zoom.start) + (zoom.start - start);\n    }\n    return perc * range;\n  }\n\n  offsetToPercent(offset) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return (offset - (zoom.start - start)) / (zoom.end - zoom.start);\n    }\n    return offset / range;\n  }\n\n  sendSeek() {\n    if (this.seekIndex) {\n      TimelineWorker.seek(this.seekIndex);\n      this.seekIndex = null;\n    }\n  }\n\n  renderDragger() {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection, classes } = this.props;\n    if (!dragSelection || !dragStart) {\n      return [];\n    }\n    const draggerStyle = {\n      left: `${100 * Math.min(dragStart, dragEnd)}%`,\n      width: `${100 * Math.abs(dragStart - dragEnd)}%`,\n    };\n    return (\n      <div\n        ref={this.dragBar}\n        className={classes.dragHighlight}\n        style={draggerStyle}\n      />\n    );\n  }\n\n  renderZoom() {\n    const {\n      zoom, dragSelection, zoomed, start, range\n    } = this.props;\n    if (!dragSelection || !zoom.expanded || zoomed) {\n      return [];\n    }\n    const color = `${theme.palette.grey[50]}cc`;\n    const endColor = `${theme.palette.grey[200]}aa`;\n    const zoomStart = (zoom.start - start) / range;\n    const zoomEnd = (zoom.end - start) / range;\n    const barStyle = {\n      background: `linear-gradient(to left,${color},${endColor},${color})`,\n      left: `${100 * Math.min(zoomStart, zoomEnd)}%`,\n      width: `${100 * Math.abs(zoomStart - zoomEnd)}%`,\n    };\n    return (\n      <div\n        style={barStyle}\n      />\n    );\n  }\n\n  renderSegment(segment) {\n    const {\n      classes, range, zoomed, start, colored\n    } = this.props;\n    const { zoom } = this.state;\n    let startPerc = (100 * segment.offset) / range;\n    let widthPerc = (100 * segment.duration) / range;\n    if (zoomed) {\n      const startOffset = zoom.start - start;\n      const endOffset = zoom.end - start;\n      const zoomDuration = endOffset - startOffset;\n      if (segment.offset > endOffset) {\n        return [];\n      }\n      if (segment.offset + segment.duration < startOffset) {\n        return [];\n      }\n      startPerc = (100 * (segment.offset - startOffset)) / zoomDuration;\n      widthPerc = (100 * segment.duration) / zoomDuration;\n    }\n    const style = {\n      position: 'absolute',\n      width: `${widthPerc}%`,\n      left: `${startPerc}%`,\n    };\n    return (\n      <div\n        key={segment.route + segment.offset}\n        className={classes.segment}\n        style={style}\n      >\n        { colored ? this.renderSegmentEvents(segment) : (\n          <div className={classes.uncoloredSegment} />\n        ) }\n      </div>\n    );\n  }\n\n  renderSegmentEvents(segment) {\n    const { classes } = this.props;\n    return segment.events\n      .filter((event) => event.data && event.data.end_route_offset_millis)\n      .map((event) => {\n        const style = {\n          left: `${(event.route_offset_millis / segment.duration) * 100}%`,\n          width: `${((event.data.end_route_offset_millis - event.route_offset_millis) / segment.duration) * 100}%`,\n        };\n        if (localStorage.showCurrentEvent) {\n          const time = TimelineWorker.currentOffset();\n          const eventStart = event.route_offset_millis + segment.offset;\n          const eventEnd = event.data.end_route_offset_millis + segment.offset;\n          if (time > eventStart && time < eventEnd) {\n            console.log('Current event:', event);\n          }\n        }\n        return (\n          <div\n            key={segment.route + event.time + event.type}\n            style={style}\n            className={cx(classes.segmentColor, event.type, {\n              [`${AlertStatusCodes[event.data.alertStatus]}`]: event.data.alertStatus,\n            })}\n          />\n        );\n      });\n  }\n\n  render() {\n    const {\n      classes,\n      hasThumbnails,\n      tooltipped,\n      hasRuler,\n      start,\n      className,\n      style,\n      rounded,\n      segments,\n      hasGradient\n    } = this.props;\n    const { hoverPercent, thumbnail, mouseX } = this.state;\n    const hoverOffset = this.percentToOffset(hoverPercent);\n    let timeString = null;\n    if (tooltipped) {\n      if (Number.isNaN(hoverOffset)) {\n        timeString = 'N/A';\n      } else {\n        const timestampAtOffset = start + hoverOffset;\n        timeString = fecha.format(timestampAtOffset, 'M/D HH:mm:ss');\n      }\n    }\n    return (\n      <div\n        className={className}\n        style={style}\n      >\n        <div\n          role=\"presentation\"\n          className={cx(classes.base, {\n            rounded,\n            hasRuler,\n            hasThumbnails,\n          })}\n          onMouseDown={this.handleMouseDown}\n          onMouseUp={this.handleMouseUp}\n          onMouseMove={this.handleMouseMove}\n          onMouseLeave={this.handleMouseLeave}\n          onClick={this.handleClick}\n        >\n          <div className={cx(classes.segments, { hasThumbnails, hasRuler })}>\n            { segments && segments.map(this.renderSegment) }\n            { hasRuler && (\n              <div className={classes.ruler}>\n                <div\n                  ref={this.rulerRemaining}\n                  className={classes.rulerRemaining}\n                />\n                <div\n                  ref={this.rulerRemainingHovered}\n                  className={classes.rulerRemaining}\n                />\n              </div>\n            ) }\n            { hasGradient && (\n              <div\n                className={cx(classes.statusGradient, {\n                  hasRuler,\n                })}\n              />\n            ) }\n            { this.renderDragger() }\n            { this.renderZoom() }\n          </div>\n          { tooltipped\n            && (\n            <Tooltip title={timeString}>\n              <div\n                ref={this.hoverBead}\n                className={classes.hoverBead}\n                style={{ left: mouseX - 25 }}\n              />\n            </Tooltip>\n            )}\n          { hasThumbnails\n            && (\n            <Measure\n              bounds\n              onResize={(rect) => this.setState({ thumbnail: rect.bounds })}\n            >\n              { (options) => (\n                <div\n                  ref={options.measureRef}\n                  className={cx(classes.thumbnails, {\n                    hasRuler,\n                  })}\n                >\n                  <Thumbnails\n                    getCurrentSegment={partial(Segments.getCurrentSegment, this.props)}\n                    percentToOffset={this.percentToOffset}\n                    thumbnail={thumbnail}\n                    className={classes.thumbnail}\n                    hasRuler={hasRuler}\n                  />\n                </div>\n              )}\n            </Measure>\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n\nTimeline.propTypes = {\n  zoom: PropTypes.object.isRequired,\n  zoomOverride: PropTypes.object,\n  zoomed: PropTypes.bool,\n  colored: PropTypes.bool,\n  start: PropTypes.number.isRequired,\n  range: PropTypes.number.isRequired,\n  classes: PropTypes.object.isRequired,\n  dragSelection: PropTypes.bool,\n  hasThumbnails: PropTypes.bool,\n  hasRuler: PropTypes.bool,\n  tooltipped: PropTypes.bool,\n  hasGradient: PropTypes.bool,\n  rounded: PropTypes.bool,\n  segments: PropTypes.array.isRequired,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  dispatch: PropTypes.func.isRequired,\n  noseek: PropTypes.bool,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.workerState,\n    zoom: state.zoom,\n  };\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(Timeline));\n","import { loadStripe } from '@stripe/stripe-js';\n\nlet STRIPE_PUBLISHABLE_KEY;\nif (process.env.NODE_ENV !== 'production') {\n  STRIPE_PUBLISHABLE_KEY = 'pk_test_jn26O6Fvi063fJIM1z7xuydB';\n} else {\n  STRIPE_PUBLISHABLE_KEY = 'pk_live_kvdUcYAUBDxAWUs8xnBgNqkC';\n}\nconst stripe = loadStripe(STRIPE_PUBLISHABLE_KEY);\n\nexport default stripe;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\nimport { classNames } from 'react-extras';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nimport { selectRange } from '../../actions';\nimport { formatDriveDuration, getDrivePoints } from '../../utils';\nimport GeocodeApi from '../../api/geocode';\nimport Timeline from '../Timeline';\nimport { RightArrow } from '../../icons';\nimport { KM_PER_MI } from '../../utils/conversions';\n\nconst styles = (theme) => ({\n  drive: {\n    background: 'rgba(255, 255, 255, 0.0)',\n    background: 'linear-gradient(to bottom, #30373B 0%, #1D2225 100%)',\n    borderTop: '1px solid rgba(255, 255, 255, .05)',\n    borderRadius: 8,\n    cursor: 'pointer',\n    display: 'flex',\n    flexDirection: 'column',\n    marginBottom: 12,\n    overflow: 'hidden',\n    padding: 0,\n    transition: 'background .2s',\n    '&:hover': {}\n  },\n  driveHeader: {\n    alignItems: 'center',\n    padding: 18,\n    paddingLeft: 24,\n    paddingRight: 24,\n  },\n  driveHeaderIntro: {\n    display: 'flex',\n  },\n  driveAvatar: {\n    alignItems: 'center',\n    background: '#404B4F',\n    borderRadius: 30,\n    color: '#fff',\n    display: 'flex',\n    fontWeight: 600,\n    height: 52,\n    justifyContent: 'center',\n    margin: '0px 3%',\n    width: 52,\n  },\n  driveTitle: {\n    marginLeft: '10%',\n  },\n  driveTimeline: {},\n  driveArrow: {\n    color: '#404B4F',\n    height: '100%',\n    marginLeft: '25%',\n    width: 32,\n  },\n});\n\nclass DriveListDrive extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startLocation: null,\n      endLocation: null,\n    };\n\n    this.handleDriveClicked = this.handleDriveClicked.bind(this);\n  }\n\n  componentDidMount() {\n    const { drive } = this.props;\n    this.mounted = true;\n    GeocodeApi().reverseLookup(drive.startCoord).then((startLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ startLocation });\n    });\n    GeocodeApi().reverseLookup(drive.endCoord).then((endLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ endLocation });\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDriveClicked(drive) {\n    const startTime = drive.startTime - 1000;\n    const endTime = drive.startTime + drive.duration + 1000;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  render() {\n    const { drive, deviceAlias, classes } = this.props;\n    const { startLocation, endLocation } = this.state;\n    const startTime = fecha.format(new Date(drive.startTime), 'HH:mm');\n    const startDate = fecha.format(new Date(drive.startTime), 'ddd, MMM D');\n    const endTime = fecha.format(new Date(drive.startTime + drive.duration + 1000), 'HH:mm');\n    const duration = formatDriveDuration(drive.duration);\n    const points = getDrivePoints(drive.duration);\n    return (\n      <li\n        key={drive.startTime}\n        className={classNames(classes.drive, 'DriveEntry')}\n        onClick={partial(this.handleDriveClicked, drive)}\n      >\n        <div className={classes.driveHeader}>\n          <Grid container>\n            <Grid item xs={4} className={classes.driveHeaderIntro}>\n              <div className={classes.driveAvatar}>\n                { drive.annotations }\n              </div>\n              <div className={classes.driveTitle}>\n                <Typography variant=\"body2\">\n                  { `${startDate} @ ${startTime} to ${endTime}` }\n                </Typography>\n                <Typography>\n                  { deviceAlias }\n                </Typography>\n              </div>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { duration.hours > 0 && `${duration.hours.toString()}hr ` }\n                { `${duration.minutes} min` }\n              </Typography>\n              <Typography>\n                { `${points} points` }\n              </Typography>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { startLocation && startLocation.neighborhood }\n              </Typography>\n              <Typography>\n                { startLocation && (`${startLocation.locality}, ${startLocation.region}`) }\n              </Typography>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { endLocation && endLocation.neighborhood }\n              </Typography>\n              <Typography>\n                { endLocation && (`${endLocation.locality}, ${endLocation.region}`) }\n              </Typography>\n            </Grid>\n            <Grid item xs={1}>\n              <Typography variant=\"body2\">\n                { `${+drive.distanceMiles.toFixed(1)} mi` }\n              </Typography>\n              <Typography>\n                { `${+(drive.distanceMiles * KM_PER_MI).toFixed(1)} km` }\n              </Typography>\n            </Grid>\n            <Grid item xs={1}>\n              <RightArrow className={classes.driveArrow} />\n            </Grid>\n          </Grid>\n        </div>\n        <Timeline\n          className={classes.driveTimeline}\n          zoomed\n          colored\n          hasThumbnails\n          hasGradient\n          zoomOverride={{\n            start: drive.startTime,\n            end: drive.startTime + drive.duration\n          }}\n        />\n      </li>\n    );\n  }\n}\n\nexport default connect(() => ({}))(withStyles(styles)(DriveListDrive));\n","export const KM_PER_MI = 1.60934;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\nimport Colors from '../../colors';\n\nimport {\n  withStyles,\n  Typography,\n  Grid,\n  Menu,\n  MenuItem,\n  ListItem,\n  IconButton,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport { filterEvent } from '../../utils';\nimport { selectRange } from '../../actions';\nimport DeviceSettingsModal from './DeviceSettingsModal';\nimport DriveListItem from './DriveListItem';\n\nconst MIN_TIME_BETWEEN_ROUTES = 60000; // 1 minute\n\nconst styles = (theme) => ({\n  header: {\n    alignItems: 'center',\n    borderBottom: `1px solid ${Colors.white10}`,\n    padding: 16,\n    paddingLeft: 48,\n    paddingRight: 60,\n  },\n  headerLabel: {\n    cursor: 'default',\n    textTransform: 'uppercase',\n  },\n  drivesTable: {\n    display: 'flex',\n    overflowY: 'auto',\n    height: 'calc(100vh - 144px)',\n    flexDirection: 'column',\n  },\n  drives: {\n    margin: 0,\n    overflowY: 'scroll',\n    padding: 16,\n    paddingLeft: 24,\n    paddingRight: 24,\n    flex: '1',\n  },\n  zeroState: {\n    padding: '16px 48px',\n    flex: '0',\n  },\n  settingsArea: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  settingsButton: {\n    border: `1px solid ${Colors.white40}`\n  },\n  settingsButtonIcon: {\n    color: Colors.white40,\n  },\n});\n\nclass DriveList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.goToAnnotation = this.goToAnnotation.bind(this);\n    this.filterShortDrives = this.filterShortDrives.bind(this);\n    this.renderDriveListHeader = this.renderDriveListHeader.bind(this);\n    this.renderDriveListSettings = this.renderDriveListSettings.bind(this);\n    this.handleClickedSettings = this.handleClickedSettings.bind(this);\n    this.handleClosedSettings = this.handleClosedSettings.bind(this);\n    this.handleOpenedSettingsModal = this.handleOpenedSettingsModal.bind(this);\n    this.handleCanceledSettings = this.handleCanceledSettings.bind(this);\n    this.handleClosedSettingsModal = this.handleClosedSettingsModal.bind(this);\n\n    this.state = {\n      anchorEl: null,\n      showDeviceSettingsModal: false\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.device && !this.state.deviceAliasSaved) {\n      this.setState({ deviceAliasSaved: props.device.alias });\n    }\n  }\n\n  filterShortDrives(ride) {\n    return ride.duration > 60000;\n  }\n\n  goToAnnotation(segment) {\n    const startTime = segment.startTime - this.props.zoomBuffer;\n    const endTime = segment.startTime + segment.duration + this.props.zoomBuffer;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  handleClickedSettings(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  handleClosedSettings() {\n    this.setState({ anchorEl: null });\n  }\n\n  handleOpenedSettingsModal(device) {\n    this.setState({ showDeviceSettingsModal: true });\n  }\n\n  handleClosedSettingsModal() {\n    this.setState({ showDeviceSettingsModal: false });\n  }\n\n  handleCanceledSettings() {\n    this.setState({\n      anchorEl: null,\n      showDeviceSettingsModal: false,\n    });\n  }\n\n  handleClose() {\n    this.setState({\n      showPicker: false\n    });\n  }\n\n  render() {\n    const { classes, device, segments } = this.props;\n\n    if (!device) {\n      return [];\n    }\n\n    const driveList = [];\n    let lastEnd = 0;\n    let lastSegmentEnd = 0;\n    let curRideChunk = null;\n    this.props.segments.forEach((segment) => {\n      if (!curRideChunk || segment.startTime - lastEnd > MIN_TIME_BETWEEN_ROUTES) {\n        curRideChunk = {\n          segments: 0,\n          startTime: segment.startTime,\n          offset: segment.offset,\n          duration: 0,\n          annotations: 0,\n          startCoord: segment.startCoord,\n          endCoord: segment.endCoord,\n          distanceMiles: segment.distanceMiles,\n        };\n        driveList.unshift(curRideChunk);\n        lastSegmentEnd = segment.startTime;\n      }\n      curRideChunk.duration += segment.startTime - lastSegmentEnd;\n      curRideChunk.duration += segment.duration;\n      lastSegmentEnd = segment.startTime + segment.duration;\n      curRideChunk.segments++;\n      lastEnd = segment.startTime + segment.duration;\n      curRideChunk.annotations += segment.events.filter(filterEvent)\n        .reduce((memo, event) => (event.id ? memo : memo + 1), 0);\n    });\n\n    return (\n      <>\n        { this.renderDriveListHeader() }\n        <div className={ classes.drivesTable }>\n          { driveList.length === 0 && this.renderZeroRides() }\n          <ul className={classes.drives}>\n            { driveList.filter(this.filterShortDrives).map((drive) => (\n              <DriveListItem\n                key={drive.startTime}\n                drive={drive}\n                deviceAlias={device.alias}\n              />\n            ))}\n          </ul>\n        </div>\n      </>\n    );\n  }\n\n  renderZeroRides() {\n    const { classes } = this.props;\n    let zeroRidesEle = null;\n    const { device, segmentData } = this.props;\n\n    if (device && (segmentData === null || typeof segmentData.segments === 'undefined')) {\n      zeroRidesEle = <Typography>Loading...</Typography>;\n    } else if (segmentData && segmentData.segments && segmentData.segments.length === 0) {\n      zeroRidesEle = ( <Typography>Looks like you haven{'\\''}t driven in the selected time range.</Typography> );\n    }\n\n    return (\n      <div className={classes.zeroState}>\n        <Grid container>\n          { zeroRidesEle }\n        </Grid>\n      </div>\n    );\n  }\n\n  renderDriveListHeader() {\n    const { classes, device } = this.props;\n    return (\n      <div className={classes.header}>\n        <Grid container alignItems=\"center\">\n          <Grid item xs={4}>\n            <Typography variant=\"title\">\n              { device.alias }\n              {' '}\nDrives\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Duration\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Origin\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Destination\n            </Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Distance\n            </Typography>\n          </Grid>\n          <Grid item xs={1} className={classes.settingsArea}>\n            { device && ((!device.shared && device.is_owner) || this.props.isSuperUser)\n              && this.renderDriveListSettings()}\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n\n  renderDriveListSettings() {\n    const { classes, device } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n    return (\n      <>\n        <IconButton\n          className={classes.settingsButton}\n          onClick={partial(this.handleOpenedSettingsModal, device)}\n        >\n          <SettingsIcon className={classes.settingsButtonIcon} />\n        </IconButton>\n        <DeviceSettingsModal\n          isOpen={this.state.showDeviceSettingsModal}\n          onClose={this.handleClosedSettingsModal}\n          onCancel={this.handleCanceledSettings}\n        />\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  segmentData: 'workerState.segmentData',\n  start: 'workerState.start',\n  device: 'workerState.device',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveList));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { Button } from '@material-ui/core';\nimport stripe from '../../api/stripe'\nimport { Elements, CardElement, ElementsConsumer } from '@stripe/react-stripe-js';\n\nimport { billing as Billing } from '@commaai/comma-api';\n\nclass PrimePayment extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      card: null,\n      activating: false,\n    };\n\n    this.handleCardInput = this.handleCardInput.bind(this);\n    this.submitPayment = this.submitPayment.bind(this);\n    this.tokenize = this.tokenize.bind(this);\n    this.activate = this.activate.bind(this);\n    this.updatePayment = this.updatePayment.bind(this);\n  }\n\n  static defaultProps = {\n    buttonText: 'Activate',\n    onError: () => {},\n    onActivated: (_) => {},\n  }\n\n  handleCardInput(card) {\n    this.setState({ card: card });\n    if (card.error) {\n      this.props.onError(card.error);\n    }\n  }\n\n  submitPayment() {\n    const { elements } = this.props;\n    const cardElement = elements.getElement(CardElement);\n\n    let activateFunc = this.props.isUpdate ? this.updatePayment : this.activate;\n\n    this.setState({ activating: true });\n    activateFunc(cardElement).then((res) => {\n      this.setState({ activating: false });\n    }).catch((err) => {\n      this.setState({ activating: false });\n      this.props.onError(err.message);\n    });\n  }\n\n  async tokenize(cardElement) {\n    const { stripe } = this.props;\n    const resp = await stripe.createToken(cardElement);\n    if (resp.error) {\n      throw new Error(\"An error occured while creating payment token\");\n    }\n    return resp.token.id;\n  }\n\n  async activate(cardElement) {\n    const { dongleId, simId } = this.props;\n    const token = await this.tokenize(cardElement);\n    let payResp;\n    try {\n      payResp = await Billing.payForPrime(dongleId, simId, token);\n    } catch(err) {\n      console.log('server error', err);\n      throw new Error('An error occurred');\n    }\n    if ('error' in payResp) {\n      if (payResp['error'] === \"Subscription already active\") {\n        this.props.onActivated(payResp);\n        return;\n      } else if (payResp['error'] === 'Payment failed') {\n        throw new Error('Card declined');\n      } else if (payResp['error'] === 'Invalid SIM') {\n        throw new Error('Invalid SIM. Make sure you have an unactivated comma SIM inserted');\n      } else {\n        console.log('unknown error', payResp);\n        throw new Error(payResp.error);\n      }\n    } else if (payResp['success']) {\n      this.props.onActivated(payResp);\n      return;\n    } else {\n      // wtf\n      console.log('unknown error', payResp);\n      throw new Error('An error occurred');\n    }\n  }\n\n  async updatePayment(cardElement) {\n    const token = await this.tokenize(cardElement);\n    let payResp;\n    try {\n      payResp = await Billing.updatePaymentMethod(token);\n    } catch(err) {\n      console.log('server error', err);\n      throw new Error('An error occurred');\n    }\n    if (payResp.error) {\n      let err = new Error();\n      if (typeof payResp.error === 'string') {\n        err.message = payResp.error;\n      } else {\n        err.message = 'Server error. Please try again';\n      }\n      throw err;\n    }\n    this.props.onActivated(payResp);\n  }\n\n  render() {\n    const canCheckout = this.state.card && this.state.card.complete && !this.state.activating &&\n      (this.props.simId || this.props.isUpdate);\n\n    let buttonText = this.props.isUpdate ? 'Update' : 'Activate now';\n    if (this.state.activating) {\n      buttonText = this.props.isUpdate ? 'Updating...' : 'Activating...';\n    }\n\n    return (\n      <>\n        <CardElement onChange={ this.handleCardInput } options={{\n          style: {\n            base: {\n              color: '#fff',\n            },\n          },\n        }} />\n        <Button size=\"large\" disabled={ !canCheckout || this.props.disabled }\n          className={ this.props.activateButtonClass } onClick={ this.submitPayment }>\n          { buttonText }\n        </Button>\n        { this.props.onCancel && <Button className={ this.props.cancelButtonClass }\n          onClick={ this.props.onCancel } size=\"large\" variant=\"outlined\">\n          Cancel subscription\n        </Button> }\n      </>\n    );\n  }\n}\n\nconst InjectedCheckoutForm = (props) => {\n  return (\n    <Elements stripe={ stripe }>\n      <ElementsConsumer>\n        {({elements, stripe}) => (\n          <PrimePayment elements={ elements } stripe={ stripe } {...props} />\n        )}\n      </ElementsConsumer>\n    </Elements>\n  );\n};\n\nlet stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n});\n\nexport default connect(stateToProps)(InjectedCheckoutForm);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport moment from 'moment';\n\nimport { billing as Billing} from '@commaai/comma-api'\nimport PrimePayment from './PrimePayment';\nimport { deviceTypePretty } from '../../utils';\nimport Timelineworker from '../../timeline';\n\nimport ErrorIcon from '@material-ui/icons/ErrorOutline';\nimport { withStyles, Typography, Button, Modal, Paper } from '@material-ui/core';\n\nimport { primeFetchSubscription, selectDevice } from '../../actions';\n\nconst styles = (theme) => ({\n  primeBox: {\n    display: 'flex',\n    overflowY: 'auto',\n    height: 'calc(100vh - 64px)',\n    flexDirection: 'column',\n  },\n  primeContainer: {\n    padding: '16px 48px',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    color: '#fff',\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  overviewBlock: {\n    marginTop: 20,\n  },\n  overviewBlockError: {\n    marginTop: 15,\n    padding: 10,\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockSuccess: {\n    marginTop: 15,\n    padding: 10,\n    backgroundColor: 'rgba(0, 255, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  manageItem: {\n    marginLeft: 10,\n  },\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)',\n    '& p': {\n      marginTop: 10,\n    },\n  },\n  closeButton: {\n    marginTop: 10,\n    float: 'right'\n  },\n  cancelModalButton: {\n    marginTop: 10,\n  },\n  cancelError: {\n    backgroundColor: 'rgba(255, 0, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  cancelSuccess: {\n    backgroundColor: 'rgba(0, 255, 0, 0.3)',\n    marginTop: 10,\n    padding: 10,\n    '& p': { margin: 0 },\n  },\n  paymentElement: {\n    maxWidth: 450,\n  },\n  activateButton: {\n    marginTop: 20,\n    background: '#fff',\n    borderRadius: 30,\n    color: '#404B4F',\n    textTransform: 'none',\n    width: 200,\n    '&:hover': {\n      background: '#fff',\n      color: '#404B4F',\n    },\n    '&:disabled': {\n      background: '#bbb',\n      color: '#404B4F',\n    },\n  },\n  cancelButton: {\n    marginTop: 20,\n    width: 200,\n    textTransform: 'none',\n    borderRadius: 30,\n    float: 'right',\n  },\n});\n\nclass PrimeManage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      cancelError: null,\n      cancelModal: false,\n      canceling: false,\n    };\n\n    this.cancelPrime = this.cancelPrime.bind(this);\n    this.modalClose = this.modalClose.bind(this);\n    this.onPaymentUpdated = this.onPaymentUpdated.bind(this);\n  }\n\n  cancelPrime() {\n    this.setState({ canceling: true });\n    Billing.cancelPrime(this.props.dongleId).then((resp) => {\n      if (resp.success) {\n        this.setState({ canceling: false, cancelError: null, cancelSuccess: 'Cancelled subscription.' });\n      } else if (resp.error) {\n        this.setState({ canceling: false, cancelError: resp.description });\n      } else {\n        this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.'})\n      }\n    }).catch((err) => {\n      this.setState({ canceling: false, cancelError: 'Could not cancel due to unknown error. Please try again.' });\n    });\n  }\n\n  modalClose() {\n    if (this.state.cancelSuccess) {\n      this.props.dispatch(primeFetchSubscription(this.props.dongleId));\n      this.props.dispatch(selectDevice(this.props.dongleId));\n    } else {\n      this.setState({ cancelModal: false });\n    }\n  }\n\n  onPaymentUpdated(paymentMethod) {\n    Timelineworker.primeGetPaymentMethod(paymentMethod);\n    this.setState({ activated: true, error: null });\n  }\n\n  render() {\n    const { dongleId, subscription, classes, device } = this.props;\n    if (!subscription) {\n      return ( <></> );\n    }\n\n    let paymentMethod = this.props.paymentMethod;\n    if (!paymentMethod) {\n      paymentMethod = {\n        brand: \"\",\n        last4: \"0000\",\n      };\n    }\n\n    let joinDate = moment.unix(subscription.subscribed_at).format('MMMM Do, YYYY');\n    let nextPaymentDate = moment.unix(subscription.next_charge_at).format('MMMM Do, YYYY');\n\n    const alias = device.alias || deviceTypePretty(device.device_type);\n    const simId = this.state.simInfo ? this.state.simInfo.sim_id : null;\n\n    return (\n      <>\n        <div className={ classes.primeBox }>\n          <div className={ classes.primeContainer }>\n            <Typography variant=\"title\">comma prime</Typography>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Device</Typography>\n              <div className={ classes.manageItem }>\n                <Typography variant=\"body2\">{ alias }</Typography>\n                <Typography variant=\"caption\" className={classes.deviceId}>({ device.dongle_id })</Typography>\n              </div>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Joined</Typography>\n              <Typography className={ classes.manageItem }>{ joinDate }</Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Payment method</Typography>\n              <Typography className={ classes.manageItem }>\n                { paymentMethod.brand } •••• •••• •••• { paymentMethod.last4 }\n              </Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Next payment</Typography>\n              <Typography className={ classes.manageItem }>{ nextPaymentDate }</Typography>\n            </div>\n            <div className={ classes.overviewBlock }>\n              <Typography variant=\"subheading\">Amount</Typography>\n              <Typography className={ classes.manageItem }>$24.00</Typography>\n            </div>\n          </div>\n          <div className={ classes.primeContainer }>\n            <Typography variant=\"title\">Update payment method</Typography>\n            { this.state.activated && <div className={ classes.overviewBlockSuccess }>\n              <Typography>Payment updated</Typography>\n            </div> }\n            { this.state.error && <div className={ classes.overviewBlockError }>\n              <ErrorIcon />\n              <Typography noWrap>{ this.state.error }</Typography>\n            </div> }\n            <div className={ classes.overviewBlock + \" \" + classes.paymentElement }>\n              <PrimePayment disabled={ Boolean(this.state.activated) } simId={ simId } isUpdate={ true }\n                onActivated={ this.onPaymentUpdated } activateButtonClass={ classes.activateButton }\n                onError={ (err) => this.setState({error: err}) }\n                onCancel={ () => this.setState({ cancelModal: true }) } cancelButtonClass={ classes.cancelButton } />\n            </div>\n          </div>\n        </div>\n        <Modal open={ this.state.cancelModal } onClose={ this.modalClose }>\n          <Paper className={classes.modal}>\n            <Typography variant=\"title\">Cancel prime subscription</Typography>\n            { this.state.cancelError && <div className={ classes.cancelError }>\n              <Typography>{ this.state.cancelError }</Typography>\n            </div> }\n            { this.state.cancelSuccess && <div className={ classes.cancelSuccess }>\n              <Typography>{ this.state.cancelSuccess }</Typography>\n            </div> }\n            <Typography>Device: {alias} ({ dongleId })</Typography>\n            <Typography>We're sorry to see you go.</Typography>\n            <Typography>\n              Cancelling will immediately suspend billing and comma prime membership benefits.\n            </Typography>\n            <Button variant=\"contained\" className={ classes.cancelModalButton } onClick={ this.cancelPrime }\n              disabled={ Boolean(this.state.cancelSuccess) }>\n              { this.state.canceling ? 'Canceling...' : 'Cancel subscription' }\n            </Button>\n            <Button variant=\"contained\" className={ classes.closeButton }\n              onClick={ this.modalClose }>\n              Close\n            </Button>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n  subscription: 'workerState.subscription',\n  paymentMethod: 'workerState.paymentMethod',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeManage));\n","import { athena as Athena } from '@commaai/comma-api';\n\nexport async function fetchSimInfo(dongleId) {\n  let payload = { method: 'getSimInfo', jsonrpc: '2.0', id: 0 };\n  return Athena.postJsonRpcPayload(dongleId, payload).then(\n    function(response) {\n      return new Promise(function(resolve, reject) {\n        let simInfo = response['result'];\n        let simIdIsValid = simInfo && simInfo.sim_id !== null && simInfo.sim_id.length >= 19 && simInfo.sim_id.length <= 22;\n\n        if ('error' in response || !simIdIsValid) {\n          let err = new Error();\n          if (!simIdIsValid) {\n            err.message = \"No SIM detected. Ensure SIM is securely inserted and try again.\";\n          } else if (response['error'] === \"Device not registered\" || response['error'] === \"Timed out\") {\n            err.message = \"Could not reach device.\\nConnect device to the internet and try again.\";\n          } else if(typeof response['error'] === 'object' && response['error']['message'] === \"Method not found\") {\n            err.message = \"Activation requires device version 0.6.1 or newer. Please upgrade and try again.\";\n          } else {\n            err.message = \"Server error. Please try again.\";\n          }\n          reject(err);\n        } else {\n          resolve({ simInfo });\n        }\n      })\n    }\n  ).catch(function(err) {\n    return new Promise(function(_, reject) {\n      if (err.message.indexOf('404') !== -1 || err.message.indexOf('408') !== -1) {\n        err.message = \"Could not reach your device.\\nConnect device to WiFi and try again.\";\n      } else if (err.message.indexOf('500') !== -1) {\n        err.message = \"Unexpected server error.\\nPlease try again.\";\n      }\n      reject(err);\n    })\n  });\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport {\n  withStyles,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from '@material-ui/core';\n\n\nimport CheckIcon from '@material-ui/icons/Check';\n\nconst styles = () => ({\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '7px 0',\n    '& svg': { alignSelf: 'flex-start' },\n  },\n  learnMore: {\n    marginBottom: 10,\n    '& a': { color: 'white' }\n  },\n});\n\nconst listItems = [\n  ['Real-time car location', null],\n  ['Take pictures remotely', null],\n  ['1 year storage of drive videos', null],\n  ['Simple SSH for developers', null],\n  ['24/7 connectivity', null],\n  ['Unlimited data at 512kbps', 'only offered in United States'],\n];\n\nclass PrimeChecklist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      moreInfo: (!props.collapsed),\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <>\n        <List className={ classes.checkList }>\n          { listItems.map((listItemText, i) => {\n            return <ListItem key={ i } className={ classes.checkListItem }>\n              <ListItemIcon><CheckIcon /></ListItemIcon>\n              <ListItemText primary={ listItemText[0] } secondary={ listItemText[1] } />\n            </ListItem>;\n          }) }\n        </List>\n        <Typography className={ classes.learnMore }>\n          Learn more about comma prime from our <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://comma.ai/faq\">FAQ</a>\n        </Typography>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeChecklist));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport moment from 'moment';\nimport { deviceTypePretty } from '../../utils';\nimport { fetchSimInfo } from './util';\nimport PrimeChecklist from './PrimeChecklist';\nimport { billing as Billing } from '@commaai/comma-api';\n\nimport { withStyles, Typography } from '@material-ui/core';\nimport ErrorIcon from '@material-ui/icons/ErrorOutline';\nimport PrimePayment from './PrimePayment';\n\nconst styles = () => ({\n  primeBox: {\n    display: 'flex',\n    overflowY: 'auto',\n    height: 'calc(100vh - 64px)',\n    flexDirection: 'column',\n  },\n  primeContainer: {\n    padding: '16px 48px',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    color: '#fff',\n  },\n  primeBlock: {\n    marginTop: 10,\n  },\n  moreInfoContainer: {\n    '& p': { display: 'inline' },\n    '& button': { display: 'inline', marginLeft: '15px' },\n  },\n  introLine: {\n    lineHeight: '36px',\n  },\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '5px 0',\n    '& svg': { margin: 0 },\n  },\n  deviceId: {\n    color: '#525E66',\n    fontFamily: 'MaisonNeueMono',\n  },\n  leftMargin: {\n    marginLeft: 10,\n  },\n  deviceBlock: {\n    marginLeft: 10,\n    '& aside': { display: 'inline', marginRight: 5, },\n    '& span': { display: 'inline', },\n  },\n  overviewBlock: {\n    marginTop: 20,\n  },\n  overviewBlockError: {\n    marginTop: 15,\n    padding: 10,\n    backgroundColor: 'rgba(255, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockLoading: {\n    marginTop: 15,\n    padding: 10,\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    '& p': { display: 'inline-block', marginLeft: 10 },\n  },\n  overviewBlockSuccess: {\n    marginTop: 15,\n    padding: 10,\n    backgroundColor: 'rgba(0, 255, 0, 0.2)',\n  },\n  paymentElement: {\n    maxWidth: 400,\n  },\n  activateButton: {\n    marginTop: 20,\n    background: '#fff',\n    borderRadius: 30,\n    color: '#404B4F',\n    textTransform: 'none',\n    width: 200,\n    '&:hover': {\n      background: '#fff',\n      color: '#404B4F',\n    },\n    '&:disabled': {\n      background: '#bbb',\n      color: '#404B4F',\n    },\n  }\n});\n\nclass PrimeCheckout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      error: null,\n      simInfo: null,\n      simInfoLoading: false,\n      activated: null,\n      new_subscription: null,\n    };\n\n    this.onPrimeActivated = this.onPrimeActivated.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ simInfoLoading: true });\n    fetchSimInfo(this.props.dongleId).then((result) => {\n      this.setState({ simInfo: result.simInfo, simInfoLoading: false });\n    }).catch((err) => {\n      this.setState({ error: err.message, simInfoLoading: false });\n    });\n  }\n\n  isTrialClaimable() {\n    return this.props.subscription && this.props.subscription.trial_claimable;\n  }\n\n  firstChargeDate() {\n    if (this.props.subscription) {\n      return moment.unix(this.props.subscription.trial_end).format(\"MMMM Do\")\n    } else {\n      return null;\n    }\n  }\n\n  claimEndDate() {\n    if (this.props.subscription && this.props.subscription.trial_claim_end) {\n      return moment.unix(this.props.subscription.trial_claim_end).format(\"MMMM Do\")\n    } else {\n      return null;\n    }\n  }\n\n  onPrimeActivated(resp) {\n    this.setState({ activated: resp, error: null });\n    Billing.getSubscription(this.props.dongleId).then((subscription) => {\n      this.setState({ new_subscription: subscription });\n    });\n  }\n\n  render() {\n    const { classes, device } = this.props;\n    const { new_subscription } = this.state;\n\n    const alias = device.alias || deviceTypePretty(device.device_type);\n\n    let chargeText = ['You will be charged $24.00 today and monthly thereafter.'];\n    if (this.isTrialClaimable()) {\n      chargeText = [`Fill in your payment information to claim your trial.`,\n        `You will be charged $24.00 on ${this.firstChargeDate()} and monthly thereafter.`];\n      if (this.claimEndDate()) {\n        chargeText.push(`Offer only valid until ${this.claimEndDate()}.`);\n      }\n    }\n\n    let successMsg = ['comma prime activated'];\n    if (this.state.activated) {\n      if (this.state.activated.already_active) {\n        successMsg = ['comma prime is already active for this device.\\nYou have not been charged for another subscription.'];\n      } else if (new_subscription && new_subscription.is_prime_sim) {\n        successMsg.push('Connectivity will be enabled as soon as activation propagates to your local cell tower. Rebooting your device may help.');\n      }\n    }\n\n    const simId = this.state.simInfo ? this.state.simInfo.sim_id : null;\n\n    return (\n      <div className={ classes.primeBox }>\n        <div className={ classes.primeContainer }>\n          <Typography variant=\"title\">comma prime</Typography>\n          <Typography className={ classes.introLine }>Become a comma prime member today for only $24/month</Typography>\n          <PrimeChecklist />\n        </div>\n        <div className={ classes.primeContainer }>\n          <Typography variant=\"title\">checkout</Typography>\n          { this.state.activated && <div className={ classes.overviewBlockSuccess }>\n            { successMsg.map((msg, i) => {\n              return <Typography variant=\"body1\" key={ i }>{ msg }</Typography>\n            }) }\n          </div> }\n          { this.state.error && <div className={ classes.overviewBlockError }>\n            <ErrorIcon />\n            <Typography noWrap>{ this.state.error }</Typography>\n          </div> }\n          { this.state.simInfoLoading && <div className={ classes.overviewBlockLoading }>\n            <Typography noWrap>Fetching SIM data</Typography>\n          </div> }\n          <div className={ classes.overviewBlock }>\n            <Typography variant=\"subheading\">Device</Typography>\n            <div className={ classes.deviceBlock }>\n              <Typography variant=\"body2\">{ alias }</Typography>\n              <Typography variant=\"caption\" className={classes.deviceId}>({ device.dongle_id })</Typography>\n            </div>\n          </div>\n          <div className={ classes.overviewBlock }>\n            { chargeText.map((txt, i) => {\n              return <Typography key={i}>{ txt }</Typography>\n            }) }\n          </div>\n          <div className={ classes.overviewBlock + \" \" + classes.paymentElement }>\n            <PrimePayment disabled={ Boolean(this.state.activated) } simId={ simId }\n              onActivated={ this.onPrimeActivated } activateButtonClass={ classes.activateButton }\n              onError={ (err) => this.setState({ error: err }) } />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n  subscription: 'workerState.subscription',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeCheckout));\n\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport PrimeManage from './PrimeManage';\nimport PrimeCheckout from './PrimeCheckout';\nimport { Typography } from '@material-ui/core';\n\nclass Prime extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    if (!this.props.device.is_owner && !this.props.isSuperUser) {\n      return ( <Typography>No access</Typography> );\n    }\n    if (this.props.device.prime) {\n      return ( <PrimeManage /> );\n    }\n    return ( <PrimeCheckout /> );\n  }\n}\n\nconst stateToProps = Obstruction({\n  subscription: 'workerState.subscription',\n  device: 'workerState.device',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(Prime);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { primeNav } from '../../actions';\nimport PrimeChecklist from './PrimeChecklist';\n\nimport {\n  withStyles,\n  Typography,\n  Button,\n} from '@material-ui/core';\n\nconst styles = () => ({\n  primeContainer: {\n    padding: '16px 48px',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    color: '#fff',\n  },\n  moreInfoContainer: {\n    '& p': { display: 'inline' },\n    '& button': { display: 'inline', marginLeft: '15px' },\n  },\n  introLine: {\n    lineHeight: '36px',\n  },\n  checkList: {\n    marginLeft: 10,\n    marginBottom: 10,\n  },\n  checkListItem: {\n    padding: '5px 0',\n    '& svg': { margin: 0 },\n  },\n  moreInfoButton: {\n    borderRadius: 30,\n  },\n  activateButton: {\n    background: '#fff',\n    borderRadius: 30,\n    color: '#404B4F',\n    textTransform: 'none',\n    width: 300,\n    '&:hover': {\n      background: '#fff',\n      color: '#404B4F',\n    }\n  },\n});\n\nclass PrimeBanner extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      moreInfo: (!props.collapsed),\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div className={ classes.primeContainer }>\n        <Typography variant=\"title\">comma prime</Typography>\n        { !this.state.moreInfo && <div className={ classes.moreInfoContainer }>\n          <Typography>Become a comma prime member today for only $24/month</Typography>\n          <Button onClick={ () => this.setState({ moreInfo: true }) } className={ classes.moreInfoButton }>\n            More info\n          </Button>\n        </div> }\n        { this.state.moreInfo && <div>\n          <Typography className={ classes.introLine }>Become a comma prime member today for only $24/month</Typography>\n          <PrimeChecklist />\n          <Button size=\"large\" className={ classes.activateButton }\n            onClick={ () => this.props.dispatch(primeNav()) }>\n            Activate comma prime\n          </Button>\n        </div> }\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({});\n\nexport default connect(stateToProps)(withStyles(styles)(PrimeBanner));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport { selectRange, selectDevice, primeNav } from '../../actions';\nimport { filterEvent } from '../../utils';\nimport DeviceList from './DeviceList';\nimport DriveList from './DriveList';\nimport Prime from '../Prime';\nimport PrimeBanner from '../Prime/PrimeBanner'\n\nconst styles = (/* theme */) => ({\n  base: {\n    background: 'linear-gradient(180deg, #1D2225 0%, #16181A 100%)',\n    display: 'flex',\n    flexGrow: 0,\n    minWidth: '100%',\n    flexWrap: 'wrap',\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n  },\n});\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { classes, primeNav, device } = this.props;\n\n    return (\n      <div className={classes.base}>\n        <div className={classes.window}>\n          { primeNav ?\n            ( <Prime /> )\n          : ( <>\n            { device && !device.prime && device.is_owner && <PrimeBanner collapsed /> }\n            <DriveList />\n          </> ) }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  selectedDongleId: 'workerState.dongleId',\n  primeNav: 'workerState.primeNav',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Dashboard));\n","import React, { PureComponent } from 'react';\nimport fecha from 'fecha';\nimport Raven from 'raven-js';\nimport { classNames } from 'react-extras';\n\nimport {\n  withStyles,\n  Grid,\n  Typography,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  ExpansionPanelActions,\n  Divider,\n  Select,\n  MenuItem,\n  Button,\n  TextField,\n  Tooltip,\n  FormHelperText,\n  LinearProgress,\n} from '@material-ui/core';\n\nimport { annotations as Annotations } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\n\nconst DISENGAGEMENT_REASONS = [\n  { value: 'arbitrary', title: 'I wanted to take over', header: true },\n  { value: 'different-way', title: 'Go a different way' },\n  { value: 'lanes', title: 'Change lanes' },\n  { value: 'too-slow', title: 'Accelerate quicker' },\n  { value: 'exit', title: 'Take an exit' },\n  { value: 'stop-light', title: 'Stop at light' },\n  { value: 'stop-sign', title: 'Stop at sign' },\n  { value: 'other-desire', title: 'Other (explain in comment)' },\n\n  { value: 'danger', title: 'I needed to take over for safety', header: true },\n  { value: 'sharp-turn', title: 'Turn too sharp' },\n  { value: 'bad-lanes', title: 'Lanes misidentified' },\n  { value: 'bad-lead-car', title: 'Lead car misidentified' },\n  { value: 'other-safety', title: 'Other (explain in comment)' },\n];\n\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: '#272D30',\n  },\n  isExpanded: {\n    minHeight: 'initial',\n    margin: '0px 0',\n    backgroundColor: '#1D2225',\n  },\n  bubble: {\n    background: 'linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.55) 100%)',\n    border: '1px solid rgba(255, 255, 255, 0.2)',\n    borderRadius: 60,\n    height: 28,\n    width: 28,\n  },\n  heading: {\n    fontWeight: 500,\n    paddingLeft: '5%',\n  },\n  date: {\n    color: theme.palette.grey[100],\n    fontWeight: 500,\n  },\n  pillBody: {\n    textAlign: 'center',\n  },\n  pillText: {\n    color: '#65737a',\n    border: '1px solid #65737a57',\n    borderRadius: 15,\n    display: 'inline-block',\n    fontWeight: 500,\n    margin: '0 auto',\n    padding: '6px 10px',\n  },\n  summaryContent: {\n    padding: '0px',\n    '&>:last-child': {\n      padding: '0px'\n    }\n  },\n  formField: {\n    alignItems: 'center',\n    display: 'flex',\n    marginBottom: 12,\n    width: '100%',\n  },\n  formLabel: {\n    paddingRight: '24px'\n  },\n  formLabelText: {\n    fontWeight: 500,\n    textAlign: 'right',\n  },\n  select: {\n    margin: 0,\n    width: '100%',\n  },\n  placeholder: {\n    color: theme.palette.placeholder\n  },\n  panelActions: {\n    justifyContent: 'flex-start',\n    paddingBottom: 36,\n    paddingLeft: '27%',\n    paddingRight: 24,\n    paddingTop: 0,\n  },\n  resolveButton: {\n    background: 'linear-gradient(to bottom, rgb(82, 94, 102) 0%, rgb(64, 75, 79) 100%)',\n    borderRadius: 30,\n    color: '#fff',\n    padding: '12px 24px',\n    textTransform: 'none',\n  },\n  cancelButton: {\n    background: 'transparent',\n    border: '1px solid #272D30',\n    borderRadius: 30,\n    padding: '12px 24px',\n    textTransform: 'none',\n  },\n  reasonDetailed: {\n    paddingLeft: '30px',\n    color: theme.palette.lightGrey[200],\n  }\n});\n\nclass AnnotationEntry extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleComment = this.handleComment.bind(this);\n    this.validate = this.validate.bind(this);\n\n    if (this.props.event.annotation) {\n      this.state = {\n        ...this.props.event.annotation.data,\n        saving: false,\n        id: this.props.event.id\n      };\n    } else {\n      this.state = {\n        saving: false\n      };\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.event.annotation) {\n      this.setState({\n        ...props.event.annotation.data,\n        saving: false,\n        id: props.event.id\n      });\n    } else {\n      this.setState({\n        saving: false\n      });\n    }\n  }\n\n  handleChange(e) {\n    this.setState({\n      reason: e.target.value\n    });\n  }\n\n  handleComment(e) {\n    this.setState({\n      comment: e.target.value\n    });\n  }\n\n  async validate() {\n    const { event, segment } = this.props;\n    if (this.state.saving) {\n      return false;\n    }\n    if (!this.state.reason || this.state.reason === '') {\n      this.setState({\n        error: 'You must select a reason',\n        errorElem: 'reason'\n      });\n      return;\n    }\n\n    if (this.state.reason === 'other' && !this.state.comment.length) {\n      this.setState({\n        error: 'You must describe your reason',\n        errorElem: 'comment'\n      });\n      return;\n    }\n\n    // no error\n    this.setState({\n      error: false,\n      errorElem: false,\n      saving: true\n    });\n\n    let data = null;\n\n    try {\n      if (!this.state.id) {\n        data = await Annotations.createAnnotation({\n          canonical_segment_name: event.canonical_segment_name,\n          offset_nanos_part: event.offset_nanos,\n          offset_millis: event.offset_millis,\n          start_time_utc_millis: event.timestamp,\n          end_time_utc_millis: event.timestamp,\n          type: event.type,\n          data: {\n            reason: this.state.reason,\n            comment: this.state.comment\n          }\n        });\n        Timelineworker.resolveAnnotation(data, event, segment.route);\n      } else {\n        data = await Annotations.updateAnnotation(this.state.id, {\n          reason: this.state.reason,\n          comment: this.state.comment\n        });\n      }\n\n      Timelineworker.selectLoop(null, null);\n    } catch (e) {\n      Raven.captureException(e);\n      // no error\n      const error = e;\n      const { message } = error;\n      if (!error.isJoi) {\n        this.setState({\n          error: message,\n          errorElem: 'reason',\n          saving: false\n        });\n      } else {\n        this.setState({\n          error: message,\n          errorElem: 'reason',\n          saving: false\n        });\n      }\n      return;\n    }\n\n    this.setState({\n      id: data.id,\n      error: false,\n      errorElem: false,\n      saving: false\n    });\n  }\n\n  render() {\n    const {\n      event, eventId, segment, classes, style\n    } = this.props;\n    const dateString = fecha.format(new Date(event.timestamp), 'MMM D @ HH:mm:ss');\n    const reason = this.state.reason || '';\n    const comment = this.state.comment || '';\n    let selectClassName = this.props.classes.select;\n    if (!reason.length) {\n      selectClassName += ` ${this.props.classes.placeholder}`;\n    }\n\n    return (\n      <ExpansionPanel\n        style={style}\n        classes={{ expanded: classes.isExpanded }}\n        className={classNames(classes.base, 'AnnotationListEntry')}\n        key={eventId}\n        expanded={this.props.expanded}\n        onChange={this.props.onChange}\n        defaultExpanded={this.props.defaultExpanded}\n      >\n        <ExpansionPanelSummary\n          classes={{ content: classes.summaryContent }}\n        >\n          <Grid container alignItems=\"center\">\n            <Grid item xs={1}>\n              <div className={classes.bubble} />\n            </Grid>\n            <Grid item xs={5}>\n              <Typography className={classes.heading}>\n                { this.getTitle() }\n              </Typography>\n            </Grid>\n            <Grid item xs={3}>\n              <Typography className={classes.date}>\n                [\n                { dateString }\n]\n              </Typography>\n            </Grid>\n            <Grid item xs={3} className={classes.pillBody}>\n              <Typography className={classes.pillText}>\n                Disengaged\n              </Typography>\n            </Grid>\n          </Grid>\n        </ExpansionPanelSummary>\n        { !this.state.saving && <Divider style={{ marginBottom: 4 }} /> }\n        { this.state.saving && <LinearProgress /> }\n        <ExpansionPanelDetails>\n          <Grid container alignContent=\"center\" alignItems=\"center\">\n            { this.renderFormField('Reason', (\n              <Select\n                disabled={this.state.saving}\n                displayEmpty\n                error={this.state.errorElem === 'reason'}\n                value={reason}\n                onChange={this.handleChange}\n                className={selectClassName}\n                inputProps={{ name: 'reason', id: 'reason-simple' }}\n              >\n                { reason === ''\n                  && (\n                  <MenuItem disabled value=\"\">\n                    Choose one\n                  </MenuItem>\n                  )}\n                { this.isPlanned()\n                  && (\n                  <MenuItem value={event.annotation.data.reason}>\n                    { event.annotation.data.reason }\n                  </MenuItem>\n                  )}\n                { DISENGAGEMENT_REASONS.map((disengagementReason) => (\n                  <MenuItem\n                    key={disengagementReason.value}\n                    value={disengagementReason.value}\n                    className={!disengagementReason.header ? this.props.classes.reasonDetailed : ''}\n                  >\n                    { disengagementReason.title }\n                  </MenuItem>\n                ))}\n              </Select>\n            ))}\n            { this.renderFormField('Comment', (\n              <TextField\n                onChange={this.handleComment}\n                placeholder=\"Add a comment...\"\n                className={classes.select}\n                error={this.state.errorElem === 'Comment'}\n                disabled={this.state.saving}\n                value={comment}\n              />\n            ))}\n          </Grid>\n        </ExpansionPanelDetails>\n        <ExpansionPanelActions className={classes.panelActions}>\n          <Tooltip\n            id=\"tooltip-annot\"\n            title=\"Grey Panda required to annotate\"\n            disableFocusListener={segment.hpgps || this.isPlanned()}\n            disableHoverListener={segment.hpgps || this.isPlanned()}\n          >\n            <div>\n              <Button\n                onClick={this.validate}\n                size=\"large\"\n                disabled={this.state.saving || this.isPlanned() || !segment.hpgps}\n                className={classes.resolveButton}\n              >\n                Resolve Annotation\n              </Button>\n            </div>\n          </Tooltip>\n          <Button\n            size=\"large\"\n            disabled={this.state.saving}\n            onClick={this.props.onChange}\n            className={classes.cancelButton}\n          >\n            Cancel\n          </Button>\n        </ExpansionPanelActions>\n      </ExpansionPanel>\n    );\n  }\n\n  renderFormField(label, form) {\n    const { classes } = this.props;\n    return (\n      <div className={classes.formField}>\n        { this.state.errorElem === label.toLowerCase() && (\n        <Grid item xs={12}>\n          <FormHelperText error>\n            { this.state.error }\n          </FormHelperText>\n        </Grid>\n        )}\n        <Grid item xs={3} className={classes.formLabel}>\n          <Typography className={classes.formLabelText}>\n            { label }\n:\n          </Typography>\n        </Grid>\n        <Grid item xs={9} style={{ paddingRight: 40 }}>\n          { form }\n        </Grid>\n      </div>\n    );\n  }\n\n  getTitle() {\n    if (this.isPlanned()) {\n      return 'Planned Disengagement';\n    } if (this.props.event.type === 'disengage_steer') {\n      return 'Steering Override';\n    } if (this.props.event.type === 'disengage') {\n      return 'Disengagement';\n    }\n  }\n\n  isPlanned() {\n    const { event } = this.props;\n    return (event.data && event.annotation && event.data.is_planned);\n  }\n}\n\nexport default withStyles(styles)(AnnotationEntry);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\nimport { withStyles } from '@material-ui/core/styles';\nimport { AutoSizer, List } from 'react-virtualized';\nimport memoize from 'memoize-one';\n\nimport AnnotationListItem from './AnnotationListItem';\nimport Timelineworker from '../../timeline';\nimport { selectRange } from '../../actions';\nimport { filterEvent } from '../../utils';\n\nconst LOOP_DURATION = 10000;\n\nconst styles = (theme) => ({\n  base: {\n    border: '1px solid rgba(255,255,255,0.04)',\n    borderRadius: 5,\n    overflow: 'hidden'\n  }\n});\n\nclass AnnotationList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false\n    };\n  }\n\n  // TODO: Migrate deprecated lifecycle method\n  componentWillReceiveProps(nextProps) {\n    if (this.state.expanded) {\n      if (nextProps.loop.startTime === null || nextProps.resolved !== this.props.resolved) {\n        this.setState({ expanded: false }, () => {\n          this.recomputeList();\n        });\n      }\n    }\n  }\n\n  list = null\n\n  filter = memoize((resolved, unresolved, list) => list.filter(this.filterEntry));\n\n  recomputeList = () => {\n    if (this.list) {\n      this.list.recomputeRowHeights();\n      this.list.forceUpdateGrid();\n    }\n  }\n\n  handleExpanded = (eventId, timestamp) => {\n    const { zoom } = this.props;\n    const isExpanded = this.state.expanded !== eventId && eventId;\n    this.setState({\n      expanded: isExpanded ? eventId : null\n    });\n\n    this.recomputeList();\n\n    if (isExpanded) {\n      const loopStartTime = timestamp - LOOP_DURATION / 2;\n      const loopEndTime = loopStartTime + LOOP_DURATION;\n      if (zoom && (loopStartTime < zoom.start || loopEndTime > zoom.end)) {\n        this.props.dispatch(selectRange(loopStartTime, loopEndTime));\n      } else {\n        // 5 seconds before, 5 seconds after...\n        Timelineworker.selectLoop(loopStartTime, LOOP_DURATION);\n      }\n    } else if (zoom && zoom.expanded) {\n      Timelineworker.selectLoop(zoom.start, zoom.end - zoom.start);\n    }\n  }\n\n  getEvent(index) {\n    const { segment } = this.props;\n    const events = (segment || {}).events || [];\n    const filteredList = this.filter(this.props.resolved, this.props.unresolved, events);\n\n    return filteredList[index];\n  }\n\n  getRowHeight = ({ index }) => {\n    const event = this.getEvent(index);\n\n    const eventId = `${event.time}:${index}`;\n\n    const expanded = this.state.expanded === eventId;\n\n    return !expanded ? 64 : 314; // TODO: is 314 safe?\n  }\n\n  filterEntry = (event) => {\n    if (this.props.resolved && !event.id) {\n      return false;\n    }\n    if (this.props.unresolved && event.id) {\n      return false;\n    }\n    return filterEvent(event);\n  }\n\n  renderEntry = ({ index, key, style }) => {\n    const { segment } = this.props;\n    const event = this.getEvent(index);\n    const eventId = `${event.time}:${index}`;\n    return (\n      <AnnotationListItem\n        key={eventId}\n        style={style}\n        segment={segment}\n        eventId={eventId}\n        event={event}\n        expanded={this.state.expanded === eventId}\n        disabled={!segment.hpgps}\n        onChange={partial(this.handleExpanded, eventId, event.timestamp)}\n      />\n    );\n  }\n\n  render() {\n    const {\n      segment, classes, resolved, unresolved\n    } = this.props;\n    const events = (segment || {}).events || [];\n\n    return (\n      <div className={classes.base} style={{ height: '100%' }}>\n        <AutoSizer>\n          {({ height, width }) => (\n            <List\n              ref={(ref) => this.list = ref}\n              height={height}\n              width={width}\n              overscanRowCount={10}\n              // noRowsRenderer={this.noRowsRenderer}\n              rowCount={this.filter(resolved, unresolved, events).length}\n              rowHeight={this.getRowHeight}\n              rowRenderer={this.renderEntry}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  start: 'workerState.start',\n  loop: 'workerState.loop',\n  zoom: 'zoom'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AnnotationList));\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\n\nimport AnnotationList from './AnnotationList';\nimport { filterEvent } from '../../utils';\n\nconst styles = (theme) => ({\n  root: {\n  },\n  annotationsViewer: {\n    display: 'flex',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    flexDirection: 'column',\n  },\n  annotationsViewerTabs: {\n    marginBottom: 12,\n    width: '100%',\n  },\n  tabLabelBadge: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: 24,\n    marginRight: 24,\n    minWidth: 28,\n    top: -4,\n  },\n  tabLabelText: {\n    fontWeight: 500,\n    paddingLeft: 24,\n    textTransform: 'none',\n  },\n  annotationsViewerTabIndicator: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: 8,\n    height: 6,\n  },\n  annotationsViewerList: {\n    height: '100%',\n    overflowY: 'scroll',\n  },\n});\n\nclass AnnotationTabs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n\n    this.state = {\n      selectedTab: 0\n    };\n  }\n\n  handleChange(event, selectedTab) {\n    this.setState({ selectedTab });\n  }\n\n  count(resolved) {\n    return this.props.segment.events.filter((event) => {\n      if (!filterEvent(event)) {\n        return false;\n      }\n      if (resolved && event.id) {\n        return true;\n      }\n      if (!resolved && !event.id) {\n        return true;\n      }\n    }).length;\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div style={{ position: 'relative', height: '100%' }}>\n        <div className={classes.annotationsViewer}>\n          <Tabs\n            value={this.state.selectedTab}\n            onChange={this.handleChange}\n            classes={{\n              indicator: classes.annotationsViewerTabIndicator\n            }}\n            className={classes.annotationsViewerTabs}\n          >\n            <Tab label={(\n              <Typography className={classes.tabLabelText}>\n                <Badge classes={{ badge: classes.tabLabelBadge }} badgeContent={this.count(false)}>\n                  &nbsp;\n                </Badge>\n                Annotations Unresolved\n              </Typography>\n            )}\n            />\n            <Tab label={(\n              <Typography className={classes.tabLabelText}>\n                <Badge classes={{ badge: classes.tabLabelBadge }} badgeContent={this.count(true)}>\n                  &nbsp;\n                </Badge>\n                Resolved\n              </Typography>\n            )}\n            />\n          </Tabs>\n          <div className={`${classes.annotationsViewerList} x-scrollbar`}>\n            { this.renderTab(this.state.selectedTab) }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderTab(index) {\n    switch (index) {\n      case 0:\n        return (\n          <AnnotationList\n            segment={this.props.segment}\n            unresolved\n          />\n        );\n      case 1:\n        return (<AnnotationList segment={this.props.segment} resolved />);\n    }\n  }\n}\n\nexport default withStyles(styles)(AnnotationTabs);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport Measure from 'react-measure';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { LngLatBounds } from 'mapbox-gl';\nimport ReactMapGL, { LinearInterpolator } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\n\nimport { derived as DerivedDataApi } from '@commaai/comma-api';\nimport TimelineWorker from '../../timeline';\nimport { MAPBOX_TOKEN } from '../../api/geocode';\n\nconst MAP_STYLE = 'mapbox://styles/commaai/cjj4yzqk201c52ss60ebmow0w';\n\nconst styles = {\n  mapContainer: {\n    width: '100%',\n    cursor: 'default !important'\n  }\n};\n\nclass DriveMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.initMap = this.initMap.bind(this);\n    this.populateMap = this.populateMap.bind(this);\n    this.posAtOffset = this.posAtOffset.bind(this);\n    this.setPath = this.setPath.bind(this);\n    this.updateMarkerPos = this.updateMarkerPos.bind(this);\n\n    const nextRoute = props.currentSegment && props.currentSegment.route;\n\n    this.isLoadingCoords = false;\n    this.state = {\n      viewport: {\n        width: 640,\n        height: 480,\n        latitude: 37.7577,\n        longitude: -122.4376,\n        zoom: 15\n      },\n      route: nextRoute,\n      coords: [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextRoute = nextProps.currentSegment && nextProps.currentSegment.route;\n    if (nextRoute !== this.state.route) {\n      if (this.state.coords.length > 0) {\n        this.setPath([]);\n      }\n    }\n\n    const coordsNeedRefresh = nextRoute !== this.state.route || this.state.coords.length === 0;\n    const shouldRefreshMap = coordsNeedRefresh && this.map != null && !this.isLoadingCoords;\n    if (shouldRefreshMap) {\n      this.setState({ route: nextRoute }, this.populateMap.bind(this, nextProps));\n    }\n\n    if (nextProps.startTime !== this.props.startTime) {\n      this.shouldFlyTo = true;\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.updateMarkerPos();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getMarkerSource() {\n    return this.map && this.map.getMap().getSource('seekPoint');\n  }\n\n  updateMarkerPos() {\n    if (!this.mounted) {\n      return;\n    }\n\n    const markerSource = this.getMarkerSource();\n    if (markerSource) {\n      if (this.props.currentSegment && this.state.coords.length > 0) {\n        const { routeOffset } = this.props.currentSegment;\n        const offset = TimelineWorker.currentOffset();\n\n        const pos = this.posAtOffset(offset - routeOffset);\n        if (pos) {\n          markerSource.setData({\n            type: 'Point',\n            coordinates: pos\n          });\n          this.moveViewportTo(pos);\n        }\n      } else if (markerSource._data && markerSource._data.coordinates.length > 0) {\n        markerSource.setData({\n          type: 'Point',\n          coordinates: []\n        });\n      }\n    }\n\n    raf(this.updateMarkerPos);\n  }\n\n  moveViewportTo(pos) {\n    const viewport = {\n      ...this.state.viewport,\n      longitude: pos[0],\n      latitude: pos[1]\n    };\n    if (this.shouldFlyTo) {\n      viewport.transitionDuration = 200;\n      viewport.transitionInterpolator = new LinearInterpolator();\n      this.shouldFlyTo = false;\n    }\n\n    this.setState({ viewport });\n  }\n\n  populateMap = async (props) => {\n    if (!props) props = this.props;\n\n    if (!this.map || !props.currentSegment || !this.state.route) {\n      return;\n    }\n    this.isLoadingCoords = true;\n\n    const { route } = this.state;\n    const routeSigUrl = props.currentSegment.url;\n\n    try {\n      const coords = await DerivedDataApi(routeSigUrl).getCoords();\n\n      if (this.state.route !== route) {\n        // handle race, if route changes while coords request was in flight\n        return;\n      }\n\n      const coordsArr = coords.map((coord) => [coord.lng, coord.lat]);\n      this.setPath(coordsArr);\n    } finally {\n      this.isLoadingCoords = false;\n    }\n  }\n\n  setPath(coords) {\n    const map = this.map && this.map.getMap();\n    this.setState({ coords });\n\n    if (map) {\n      map.getSource('route').setData({\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'LineString',\n          coordinates: coords,\n        }\n      });\n    }\n  }\n\n  posAtOffset(offset) {\n    const offsetSeconds = Math.floor(offset / 1e3);\n    const offsetFractionalPart = (offset % 1e3) / 1000.0;\n    const coordIdx = Math.min(\n      offsetSeconds,\n      this.state.coords.length - 1\n    );\n    const nextCoordIdx = Math.min(\n      offsetSeconds + 1,\n      this.state.coords.length - 1\n    );\n    if (!this.state.coords[coordIdx]) {\n      return null;\n    }\n\n    const [floorLng, floorLat] = this.state.coords[coordIdx];\n    const [ceilLng, ceilLat] = this.state.coords[nextCoordIdx];\n\n    return [\n      floorLng + ((ceilLng - floorLng) * offsetFractionalPart),\n      floorLat + ((ceilLat - floorLat) * offsetFractionalPart)\n    ];\n  }\n\n  initMap(mapComponent) {\n    if (!mapComponent) {\n      this.map = null;\n      return;\n    }\n\n    const map = mapComponent.getMap();\n\n    map.on('load', () => {\n      map.addSource('route', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: [],\n          }\n        }\n      });\n      map.addSource('seekPoint', {\n        type: 'geojson',\n        data: {\n          type: 'Point',\n          coordinates: []\n        }\n      });\n\n      const lineGeoJson = {\n        id: 'routeLine',\n        type: 'line',\n        source: 'route',\n        layout: {\n          'line-join': 'round',\n          'line-cap': 'round'\n        },\n        paint: {\n          'line-color': '#888',\n          'line-width': 8\n        }\n      };\n      map.addLayer(lineGeoJson);\n\n      const markerGeoJson = {\n        id: 'marker',\n        type: 'circle',\n        paint: {\n          'circle-radius': 10,\n          'circle-color': '#007cbf'\n        },\n        source: 'seekPoint'\n      };\n\n      map.addLayer(markerGeoJson);\n\n      this.map = mapComponent;\n\n      if (this.state.route && this.props.currentSegment) {\n        this.populateMap();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Measure\n        bounds\n        onResize={(contentRect) => {\n          this.setState({ viewport: { ...this.state.viewport, width: contentRect.bounds.width } });\n        }}\n      >\n        {({ measureRef }) => (\n          <div ref={measureRef} className={this.props.classes.mapContainer}>\n            <ReactMapGL\n              {...this.state.viewport}\n              mapStyle={MAP_STYLE}\n              onViewportChange={(viewport) => this.setState({ viewport })}\n              mapboxApiAccessToken={MAPBOX_TOKEN}\n              attributionControl={false}\n              ref={this.initMap}\n              dragPan={false}\n            />\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  offset: 'workerState.offset',\n  route: 'workerState.route',\n  segments: 'workerState.segments',\n  segmentNum: 'workerState.segment',\n  currentSegment: 'workerState.currentSegment',\n  startTime: 'workerState.startTime'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveMap));\n","// https://video-react.js.org/customize/customize-source/\nimport React, { Component } from 'react';\nimport Hls from '@commaai/hls.js';\n\nexport default class HLSSource extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.hls = new Hls({\n      enableWorker: false,\n      disablePtsDtsCorrectionInMp4Remux: false\n    });\n    this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n      this.props.video.play();\n    });\n    this.hls.on(Hls.Events.BUFFER_APPENDED, (eventName, data) => {\n      if (this.props.onBufferAppend) {\n        this.props.onBufferAppend();\n      }\n    });\n\n    this.hls.on(Hls.Events.ERROR, (event, data) => {\n      if (data.fatal) {\n        switch (data.type) {\n          case Hls.ErrorTypes.NETWORK_ERROR:\n          // try to recover network error\n            console.log('fatal network error encountered, try to recover');\n            this.hls.startLoad();\n            break;\n          case Hls.ErrorTypes.MEDIA_ERROR:\n            console.log('fatal media error encountered, try to recover');\n            this.hls.recoverMediaError();\n            break;\n          default:\n          // cannot recover\n            this.hls.destroy();\n            this.hls = null;\n            break;\n        }\n      }\n    });\n\n    this.state = {\n      src: ''\n    };\n    // this.hls.on(Hls.Events.STREAM_STATE_TRANSITION, (eventName, data) => {\n    // });\n  }\n\n  componentDidMount() {\n    this.setState({\n      src: this.props.src\n    });\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.src !== nextState.src) {\n      // console.log('Loading media source!', nextProps.src);\n      if (this.state.src && this.state.src.length) {\n        // console.log('this.hls.detachMedia();');\n        this.hls.detachMedia();\n      }\n      this.setState({\n        src: nextProps.src\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { src } = this.state;\n    if (src !== prevState.src && src && src.length) {\n      // console.log('this.hls.loadSource(src);');\n      this.hls.loadSource(src);\n      // console.log('this.hls.attachMedia(this.props.video);');\n      this.hls.attachMedia(this.props.video);\n\n      if (this.props.onSourceLoaded) {\n        this.props.onSourceLoaded();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // destroy hls video source\n    if (this.hls) {\n      // console.log('this.hls.destroy();');\n      this.hls.destroy();\n      this.hls = null;\n    }\n  }\n\n  render() {\n    return (\n      <source src={this.state.src} type={this.props.type || 'application/x-mpegURL'} />\n    );\n  }\n}\n","export function strokeRoundedRect(ctx, left, top, width, height, radius, strokeWidth, strokeStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n\n  ctx.lineWidth = strokeWidth;\n  ctx.strokeStyle = strokeStyle;\n  ctx.stroke();\n  ctx.closePath();\n}\n\nexport function fillRoundedRect(ctx, left, top, width, height, radius, fillStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n  ctx.fillStyle = fillStyle;\n  ctx.fill();\n  ctx.closePath();\n}\n\nfunction roundedRectPath(ctx, left, top, width, height, radius) {\n  const right = left + width;\n  const bottom = top + height;\n  const K = 4 * (Math.SQRT2 - 1) / 3;\n\n  ctx.beginPath();\n  ctx.moveTo(left + radius, top);\n  ctx.lineTo(right - radius, top);\n  ctx.bezierCurveTo(right + radius * (K - 1), top, right, top + radius * (1 - K), right, top + radius);\n  ctx.lineTo(right, bottom - radius);\n  ctx.bezierCurveTo(right, bottom + radius * (K - 1), right + radius * (K - 1), bottom, right - radius, bottom);\n  ctx.lineTo(left + radius, bottom);\n  ctx.bezierCurveTo(left + radius * (1 - K), bottom, left, bottom + radius * (K - 1), left, bottom - radius);\n  ctx.lineTo(left, top + radius);\n  ctx.bezierCurveTo(left, top + radius * (1 - K), left + radius * (1 - K), top, left + radius, top);\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function Buffering(props) {\n  const parts = [];\n  if (props.bufferingVideo) {\n    parts.push('video');\n  }\n  if (props.bufferingData) {\n    parts.push('data');\n  }\n  const message = `Buffering ${parts.join(' and ')}`;\n  return (\n    <div\n      style={{\n        zIndex: 50,\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        backgroundColor: '#16181Aaa',\n      }}\n    >\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: 'calc(50% - 25px)'\n      }}\n      >\n        <CircularProgress\n          color=\"secondary\"\n          thickness={6}\n          size={50}\n        />\n      </div>\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: '50%',\n      }}\n      >\n        <Typography>\n          { message }\n        </Typography>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable camelcase */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport { classNames } from 'react-extras';\nimport { multiply } from 'mathjs';\nimport debounce from 'debounce';\nimport PropTypes from 'prop-types';\n\nimport { Player, ControlBar } from 'video-react';\nimport 'video-react/dist/video-react.css'; // CSS for video\nimport { video as VideoApi } from '@commaai/comma-api';\n\nimport theme from '../../theme';\nimport HLSSource from './hlsSource';\nimport TimelineWorker from '../../timeline';\nimport * as LogIndex from '../../timeline/logIndex';\nimport { strokeRoundedRect, fillRoundedRect } from './canvas';\nimport Buffering from './buffering';\n\n// UI Assets\nconst wheelImg = new Image();\nwheelImg.src = require('../../icons/icon-chffr-wheel.svg');\n\n// these constants are named this way so that the names are the same in python and js\n// do not refactor them to have js style or more descriptive names\n// UI Measurements\n\nconst tici_vwp_w = 1928;\nconst tici_vwp_h = 1208;\nconst tici_focal = 2648;\nconst tici_video_height = 530;\n\nconst eon_vwp_w = 1164;\nconst eon_vwp_h = 874;\nconst eon_focal = 910;\nconst eon_video_height = 640;\n\nconst tici_intrinsic = [\n  tici_focal, 0, tici_vwp_w/2, 0,\n  0, tici_focal, tici_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\nconst eon_intrinsic = [\n  eon_focal, 0, eon_vwp_w/2, 0,\n  0, eon_focal, eon_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\n\n\n\nconst bdr_s = 30;\n// driver monitoring constants\nconst _PITCH_NATURAL_OFFSET = 0.12; // eslint-disable-line no-underscore-dangle\nconst _YAW_NATURAL_OFFSET = 0.08; // eslint-disable-line no-underscore-dangle\nconst _PITCH_POS_ALLOWANCE = 0.04; // eslint-disable-line no-underscore-dangle\nconst _PITCH_WEIGHT = 1.35; // eslint-disable-line no-underscore-dangle\nconst _METRIC_THRESHOLD = 0.4; // eslint-disable-line no-underscore-dangle\nconst W = 160;\nconst H = 320;\nconst RESIZED_FOCAL = 320.0;\nconst FULL_W = 426;\nconst DM_FACE_THRESHOLD = 0.4; // probs below this disappear\nconst DM_EYE_THRESHOLD = 0.4; // probs below which blink is masked\nconst DM_BLINK_THRESHOLD = 0.5; // probs above this count as blinking\n\n// cache break index files\nconst STREAM_VERSION = 2;\n\nconst styles = (theme) => ({\n  hidden: {\n    display: 'none'\n  },\n  videoContainer: {\n    position: 'relative',\n    width: 850,\n  },\n  videoImage: {\n    height: 'auto',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    zIndex: 1\n  },\n  videoUiCanvas: {\n    height: '100%',\n    left: 0,\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  thumbnail: {\n    height: '100%',\n    left: 0,\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  }\n});\n\nfunction is_tici(init_data) {\n  return init_data.InitData.DeviceType == 4;\n}\n\nclass VideoPreview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePreview = this.updatePreview.bind(this);\n    this.onSourceLoaded = this.onSourceLoaded.bind(this);\n    this.onDisableBuffering = this.onDisableBuffering.bind(this);\n    // this.checkVideoBuffer = this.checkVideoBuffer.bind(this);\n\n    this.imageRef = React.createRef();\n    this.videoPlayer = React.createRef();\n    this.canvas_road = React.createRef();\n    this.canvas_lead = React.createRef();\n    this.canvas_carstate = React.createRef();\n    this.canvas_maxspeed = React.createRef();\n    this.canvas_speed = React.createRef();\n    this.canvas_face = React.createRef();\n\n    this.intrinsic = eon_intrinsic;\n    this.vwp_w = eon_vwp_w;\n    this.vwp_h = eon_vwp_h;\n    this.video_height = eon_video_height;\n\n    this.frame = 0;\n\n    this.state = {\n      bufferTime: 4,\n      src: '',\n    };\n  }\n\n  componentDidMount() {\n    const { playSpeed } = this.props;\n    this.mounted = true;\n    if (this.videoPlayer.current) {\n      this.videoPlayer.current.playbackRate = playSpeed || 1;\n    }\n    this.rafLoop = raf(this.updatePreview);\n    this.checkVideoBuffer();\n    this.stopListening = TimelineWorker.onIndexed(() => this.checkDataBuffer());\n  }\n\n  componentDidUpdate(prevProps) {\n    // play state\n    this.checkVideoBuffer();\n    this.updateVideoSource(prevProps);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.rafLoop) {\n      raf.cancel(this.rafLoop);\n      this.rafLoop = null;\n    }\n    if (this.stopListening) {\n      this.stopListening();\n      this.stopListening = null;\n    }\n    if (this.stopListeningToVideo) {\n      this.stopListeningToVideo();\n      this.stopListeningToVideo = null;\n    }\n  }\n\n  updateVideoSource(prevProps) {\n    const { props } = this;\n    let segment = props.currentSegment;\n    if (!segment && props.nextSegment) {\n      const offset = TimelineWorker.currentOffset();\n      if (props.nextSegment.startOffset - offset < 5000) {\n        segment = props.nextSegment;\n      }\n    }\n    if (!segment) {\n      if (this.state.src !== '') {\n        this.setState({ src: '' });\n      }\n      return;\n    }\n\n    if (props.front) {\n      let base = `${process.env.REACT_APP_VIDEO_CDN}/hls/${props.dongleId}/${segment.url.split('/').pop()}`;\n      base += '/dcamera';\n      // We append count of segments with stream available as a cache-busting method\n      // on stream indexes served before route is fully uploaded\n      let segCount = segment.driverCameraStreamSegCount;\n      let src = `${base}/index.m3u8?v=${STREAM_VERSION}&s=${segCount}`;\n      if (this.state.src !== src) {\n        this.setState({ src });\n      }\n    } else if (this.state.src === '' || !prevProps.currentSegment || prevProps.currentSegment.route !== segment.route) {\n      let videoApi = VideoApi(segment.url, process.env.REACT_APP_VIDEO_CDN);\n      videoApi.getQcameraStreamIndex().then(() => {\n        let src = videoApi.getQcameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`\n        if (src !== this.state.src) {\n          this.setState({src});\n        }\n      }).catch(() => {\n        let src = videoApi.getRearCameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`;\n        if (src !== this.state.src) {\n          this.setState({src});\n        }\n      });\n    }\n  }\n\n  onSourceLoaded() {\n    if (this.videoPlayer.current) {\n      console.log('Calling load with media change');\n      this.videoPlayer.current.load();\n    }\n  }\n\n  onDisableBuffering() {\n    TimelineWorker.disableBuffer();\n  }\n\n  updatePreview() {\n    // schedule next run right away so that we can return early\n    this.rafLoop = raf(this.updatePreview);\n\n    this.frame++;\n    if (this.frame >= 60) {\n      this.frame = 0;\n      this.checkVideoBuffer();\n    }\n\n    // 10 fps\n    if (this.frame % 6 === 0) {\n      this.checkDataBuffer();\n    }\n    if (this.frame % 6 === 3) {\n      this.renderCanvas();\n    }\n  }\n\n  checkDataBuffer = debounce(() => {\n    let isDataBuffering = true;\n    if (this.props.currentSegment) {\n      const monoTime = TimelineWorker.currentLogMonoTime();\n      const monoTimeLength = (`${monoTime}`).length;\n      const logIndex = TimelineWorker.getLogIndex();\n      if (logIndex) {\n        const curIndex = LogIndex.findMonoTime(logIndex, monoTime);\n        const lastEvent = TimelineWorker.getEvent(curIndex, logIndex);\n        let nextEvent = TimelineWorker.getEvent(curIndex + 1, logIndex);\n\n        if (!nextEvent) {\n          nextEvent = TimelineWorker.getEvent(0, TimelineWorker.getNextLogIndex());\n        }\n\n        if (nextEvent && nextEvent.LogMonoTime) {\n          const nextEventTime = Number(nextEvent.LogMonoTime.substr(0, monoTimeLength));\n          const timeDiff = Math.abs(nextEventTime - monoTime);\n\n          isDataBuffering = timeDiff > 1000;\n        }\n        if (isDataBuffering && lastEvent && lastEvent.LogMonoTime) {\n          const monSec = lastEvent.LogMonoTime.substr(0, monoTimeLength);\n          const timeDiff = Math.abs(monoTime - Number(monSec));\n          // 3 seconds of grace\n          isDataBuffering = timeDiff > 3000;\n        }\n      }\n    } else {\n      isDataBuffering = false;\n\n      if (this.props.bufferVideo) {\n        console.log('Exited segment while buffering, exiting buffer state');\n        TimelineWorker.bufferVideo(false);\n      }\n    }\n\n    if (isDataBuffering !== this.props.bufferingData) {\n      console.log('Changing data buffer state to', isDataBuffering);\n      TimelineWorker.bufferData(isDataBuffering);\n    }\n  }, 100)\n\n  checkVideoBuffer = debounce(() => {\n    const videoPlayer = this.videoPlayer.current;\n    const { front } = this.props;\n\n    if (videoPlayer && !videoPlayer.wasConnected) {\n      videoPlayer.wasConnected = true;\n      if (this.stopListeningToVideo) {\n        this.stopListeningToVideo();\n        this.stopListeningToVideo = null;\n      }\n      this.stopListeningToVideo = videoPlayer.subscribeToStateChange(this.checkVideoBuffer);\n    }\n\n    const offset = TimelineWorker.currentOffset();\n    let shouldShowPreview = true;\n    const { bufferTime } = this.state;\n    const { playSpeed } = this.props;\n    let { desiredPlaySpeed } = this.props;\n\n    if (videoPlayer) {\n      const playerState = videoPlayer.getState().player;\n      if (!playerState.buffered || Number.isNaN(playerState.duration)) {\n        return;\n      }\n      let desiredVideoTime = this.currentVideoTime(offset);\n      const curVideoTime = playerState.currentTime;\n      if (desiredPlaySpeed && this.props.currentSegment) {\n        const timeDiff = desiredVideoTime - curVideoTime;\n\n        let desiredBufferedVideoTime = desiredVideoTime;\n        if (this.props.bufferingVideo) {\n          // if we're currently already paused buffering for video\n          // then wait for another few seconds of video t oload\n          desiredBufferedVideoTime += 3 * desiredPlaySpeed;\n        }\n        // clip the duration down slightly to handle rounding errors near the end of video\n        desiredVideoTime = Math.min(playerState.duration - 0.4, desiredVideoTime);\n        desiredBufferedVideoTime = Math.min(playerState.duration - 0.4, desiredBufferedVideoTime);\n\n        let isBuffering = true;\n        let remainingTime = desiredBufferedVideoTime;\n\n        for (let i = 0, buf = playerState.buffered, len = buf.length; i < len; ++i) {\n          let start = buf.start(i);\n          // if we seek to a spot **right** at the start of an already loaded segment then\n          // HLS doesn't actually load that segment. it just expects to jump forwards a bit and be fine\n          // because of this, the first 4 seconds of a given video is almost never available\n          // additionally, sometimes even in the middle of the video it can be off and not load due to rounding errors\n          // we check if we're in the first 5 seconds or if we're *right* before the start\n          // \"stuck seeking\" errors are handled below\n          if (start < 6 && desiredVideoTime < 6) {\n            start = desiredVideoTime;\n            desiredBufferedVideoTime = desiredVideoTime;\n          }\n          if (start > desiredVideoTime && start - desiredVideoTime < 0.5) {\n            start = desiredVideoTime;\n          }\n          if (start <= desiredVideoTime) {\n            if (buf.end(i) >= desiredBufferedVideoTime) {\n              isBuffering = false;\n            } else {\n              remainingTime = Math.min(remainingTime, desiredBufferedVideoTime - buf.end(i));\n            }\n          }\n        }\n\n        if (isBuffering) {\n          // console.log('We need', remainingTime, 'more time buffered...');\n        }\n\n        if (desiredVideoTime > 5 && (playerState.waiting || playerState.seeking)) {\n          isBuffering = true;\n        }\n\n        const timeDiffAbs = Math.abs(timeDiff);\n        if (Number.isFinite(timeDiff) && timeDiffAbs > 0) {\n          if (this.props.isBuffering && playerState.paused && !playerState.seeking && timeDiffAbs > 1.0) {\n            // console.log('SEEK paused', timeDiff);\n            videoPlayer.seek(desiredVideoTime);\n            isBuffering = true;\n          } else if (timeDiffAbs > 1.0) {\n            // console.log('Seeking video', timeDiff, desiredVideoTime, curVideoTime);\n            videoPlayer.seek(desiredVideoTime);\n            if (desiredVideoTime > 5) {\n              isBuffering = true;\n            }\n          } else if (timeDiffAbs > 0.2) {\n            desiredPlaySpeed += timeDiff;\n          // } else {\n          }\n        }\n\n        if (isBuffering && !front) {\n          isBuffering = this.updatePreviewImage(playerState.seeking ? null : timeDiff);\n        } else if (this.state.shouldShowThumbnail) {\n          this.setState({\n            shouldShowThumbnail: false\n          });\n        }\n\n        if (this.props.bufferingVideo !== isBuffering) {\n          // console.log('Changing video buffer state to', isBuffering);\n          TimelineWorker.bufferVideo(isBuffering);\n        }\n\n        shouldShowPreview = isBuffering;\n\n        desiredPlaySpeed = Math.round(desiredPlaySpeed * 5) / 5;\n\n        if (videoPlayer.playbackRate !== desiredPlaySpeed) {\n          videoPlayer.playbackRate = desiredPlaySpeed;\n        }\n\n        if (!isBuffering && !this.props.bufferingData && this.props.currentSegment && playerState.paused) {\n          console.log('Play');\n          videoPlayer.play();\n        }\n        if (!isBuffering && this.props.isBuffering && !playerState.paused) {\n          console.log('Pause for buffering...');\n          videoPlayer.pause();\n        }\n      } else {\n        // desired player speed is 0 or there's no segment\n        // either way, no video to load\n        if (this.props.bufferingVideo) {\n          TimelineWorker.bufferVideo(false);\n        }\n        if (this.props.currentSegment) {\n          if (front || this.updatePreviewImage()) {\n            // no image\n            if (Math.abs(curVideoTime - desiredVideoTime) > 1) {\n              videoPlayer.seek(desiredVideoTime);\n            }\n          }\n        }\n        shouldShowPreview = !this.props.currentSegment || !playerState.buffered.length;\n        if (!playerState.paused && !playerState.seeking && playerState.buffered.length) {\n          console.log('Pause');\n          videoPlayer.pause();\n        }\n      }\n    }\n    if (this.imageRef.current) {\n      if (shouldShowPreview && this.imageRef.current.src !== this.nearestImageFrame(offset)) {\n        this.imageRef.current.src = this.nearestImageFrame(offset);\n      }\n      this.imageRef.current.style.opacity = shouldShowPreview ? 1 : 0;\n    }\n  }, 100)\n\n  updatePreviewImage(timeDiff) {\n    const { shouldShowThumbnail } = this.state;\n    const thumbnail = TimelineWorker.currentThumbnail();\n    const monoTime = TimelineWorker.currentLogMonoTime();\n    const monoTimeLength = (`${monoTime}`).length;\n    let retVal = true;\n    if (thumbnail) {\n      const { thumbnailMonoTime } = this.state;\n      const thumbnailTime = Number(thumbnail.LogMonoTime.substr(0, monoTimeLength));\n      const thumbnailTimeDiff = thumbnailTime;\n\n      if (Number.isFinite(timeDiff) && timeDiff > 0 && timeDiff < thumbnailTimeDiff) {\n        retVal = false;\n        // the video is closer than we are\n      } else if (thumbnailMonoTime !== thumbnail.LogMonoTime || !shouldShowThumbnail) {\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(thumbnail.Thumbnail.Thumbnail)));\n        this.setState({\n          thumbnailData: base64,\n          thumbnailMonoTime: thumbnail.LogMonoTime,\n          shouldShowThumbnail: true\n        });\n      }\n      retVal = false;\n    } else if (shouldShowThumbnail) {\n      this.setState({\n        shouldShowThumbnail: false\n      });\n    }\n\n    return retVal;\n  }\n\n  renderCanvas() {\n    const calibration = TimelineWorker.getCalibration(this.props.route);\n    if (!calibration) {\n      this.lastCalibrationTime = false;\n      return;\n    }\n\n    if (this.props.front) {\n      if (this.canvas_face.current) {\n        const params = { calibration, shouldScale: true };\n        const events = {\n          driverMonitoring: TimelineWorker.currentDriverMonitoring\n        };\n        this.renderEventToCanvas(\n          this.canvas_face.current, params, events, this.renderDriverMonitoring\n        );\n      }\n    }\n\n    if (!this.props.shouldShowUI) {\n      return;\n    }\n\n    if (calibration) {\n      if (this.lastCalibrationTime !== calibration.LogMonoTime) {\n        this.extrinsic = [...calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n      }\n      this.lastCalibrationTime = calibration.LogMonoTime;\n    }\n    let init_data = TimelineWorker.currentInitData();\n    if (init_data){\n      if (is_tici(init_data)) {\n        this.intrinsic = tici_intrinsic;\n        this.vwp_w = tici_vwp_w;\n        this.vwp_h = tici_vwp_h;\n        this.video_height = tici_video_height;\n      }\n    }\n\n    let live_calibration = TimelineWorker.currentLiveCalibration();\n    if (live_calibration) {\n      this.extrinsic = [...live_calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n    }\n\n    if (this.canvas_road.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        model: TimelineWorker.currentModel,\n        modelv2: TimelineWorker.currentModelV2,\n        mpc: TimelineWorker.currentMPC,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_road.current, params, events, this.drawLaneFull\n      );\n    }\n    if (this.canvas_lead.current) {\n      const params = { calibration, shouldScale: true };\n      const events = { radarState: TimelineWorker.currentRadarState };\n      this.renderEventToCanvas(\n        this.canvas_lead.current, params, events, this.renderLeadCars\n      );\n    }\n    if (this.canvas_carstate.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_carstate.current, params, events, this.renderCarState\n      );\n    }\n    if (this.canvas_maxspeed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        controlsState: TimelineWorker.currentControlsState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_maxspeed.current, params, events, this.renderMaxSpeed\n      );\n    }\n    if (this.canvas_speed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_speed.current, params, events, this.renderSpeed\n      );\n    }\n  }\n\n  renderEventToCanvas(canvas, params, events, renderEvent) {\n    const { width, height } = canvas.getBoundingClientRect();\n\n    if (!params.calibration) {\n      const ctx = canvas.getContext('2d');\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, width, height);\n      return; // loading calibration from logs still...\n    }\n\n    let logTime; let\n      monoIndex;\n    const _events = {};\n    let needsRender = false;\n    const eventsSig = Object.keys(events).join(',');\n    Object.keys(events).map((key) => {\n      const event = events[key].apply(TimelineWorker);\n      monoIndex = `${events[key].name}MonoTime${eventsSig}`;\n\n      if (!event) {\n        if (this[monoIndex]) {\n          this[monoIndex] = false;\n          const ctx = canvas.getContext('2d');\n          ctx.setTransform(1, 0, 0, 1, 0, 0);\n          ctx.clearRect(0, 0, width, height);\n          // we have to force re-render when one is missing\n          // this is because there's more than one event being rendered through this flow\n          // this should be re-broken apart such that this isn't an issue\n          // fixing that will also reduce the rendering complexity\n          needsRender = true;\n        }\n      } else {\n        logTime = event ? event.LogMonoTime : null;\n        needsRender = needsRender || logTime !== this[monoIndex];\n        this[monoIndex] = logTime;\n        _events[key] = event;\n      }\n    });\n\n    if (!needsRender) {\n      return;\n    }\n    // will render!\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // reset transform before anything, just in case\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    // clear all the data\n    ctx.clearRect(0, 0, width, height);\n    // scale original coords onto our current size\n    if (params.shouldScale) {\n      ctx.scale(width / this.vwp_w, height / this.vwp_h);\n    }\n\n    renderEvent.apply(this, [{ width, height, ctx }, _events]);\n  }\n\n  renderLeadCars(options, events) {\n    if (!events.radarState) {\n      return;\n    }\n    this.lastRadarStateMonoTime = events.radarState.LogMonoTime;\n    const { width, height, ctx } = options;\n\n    const leadOne = events.radarState.RadarState.LeadOne;\n    const leadTwo = events.radarState.RadarState.LeadTwo;\n\n    if (leadOne.Status) {\n      this.renderLeadCar(options, leadOne);\n    }\n    if (leadTwo.Status) {\n      this.renderLeadCar(options, leadTwo, true);\n    }\n  }\n\n  renderLeadCar(options, leadData, is2ndCar) {\n    const { width, height, ctx } = options;\n\n    const drel = leadData.DRel;\n    const vrel = leadData.VRel;\n    const yrel = leadData.YRel;\n\n    var x = drel + 2.7;\n    var y = yrel;\n\n    var [x, y, z] = this.carSpaceToImageSpace([drel + 2.7, yrel, 0, 1]);\n\n    if (x < 0 || y < 0) {\n      return;\n    }\n\n    let sz = 25 * 30;\n    sz /= ((drel + 2.7) / 3 + 30);\n    sz = Math.min(Math.max(sz, 15), 30);\n    if (is2ndCar) {\n      sz /= 1.2;\n    }\n\n    let fillAlpha = 0;\n    const speedBuff = 10;\n    const leadBuff = 40;\n\n    if (drel < leadBuff) {\n      fillAlpha = 255 * (1 - (drel / leadBuff));\n      if (vrel < 0) {\n        fillAlpha += 255 * (-1 * (vrel / speedBuff));\n      }\n      fillAlpha = Math.min(fillAlpha, 255) / 255;\n    }\n\n    // glow\n    if (is2ndCar) {\n      ctx.fillStyle = 'rgba(218, 202, 37, 0.5)';\n    } else {\n      ctx.fillStyle = 'rgb(218, 202, 37)';\n    }\n    ctx.lineWidth = 5;\n    const g_xo = sz / 5;\n    const g_yo = sz / 10;\n    ctx.beginPath();\n    ctx.moveTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.lineTo(x, y - g_xo);\n    ctx.lineTo(x - (sz * 1.35) - g_xo, y + sz + g_yo);\n    ctx.lineTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.fill();\n\n    if (fillAlpha > 0) {\n      if (is2ndCar) {\n        fillAlpha /= 1.5;\n      }\n      ctx.fillStyle = `rgba(201, 34, 49, ${fillAlpha})`;\n\n      ctx.beginPath();\n      ctx.moveTo(x + (sz * 1.25), y + sz);\n      ctx.lineTo(x, y);\n      ctx.lineTo(x - (sz * 1.25), y + sz);\n      ctx.lineTo(x + (sz * 1.25), y + sz);\n      ctx.fill();\n    }\n  }\n\n  drawLaneFull(options, events) { // ui_draw_vision_lanes\n    const { ctx } = options;\n    if (events) {\n      if (events.modelv2) {\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.LaneLines, events.modelv2.ModelV2.LaneLineProbs, false);\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.RoadEdges, events.modelv2.ModelV2.RoadEdgeStds, true);\n        this.drawLaneTrackV2(ctx, events.modelv2.ModelV2.Position);\n      } else if (events.model) {\n        this.drawLaneBoundary(ctx, events.model.Model.LeftLane);\n        this.drawLaneBoundary(ctx, events.model.Model.RightLane);\n        this.drawLaneTrack(options, events.model.Model.Path);\n      } else if (events.mpc && events.controlsState) {\n        this.drawLaneTrack(options, events.mpc.LiveMpc, {\n          isMpc: true,\n          isEnabled: events.controlsState.ControlsState.Enabled,\n        });\n      }\n    }\n  }\n\n  drawLaneBoundary(ctx, lane) { // ui_draw_lane\n    let color = `rgba(255, 255, 255,${lane.Prob})`;\n\n    let points;\n    if (lane.Points.length > 0) {\n      points = lane.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(lane.Poly[0] * (i * i * i) + lane.Poly[1] * (i * i) + lane.Poly[2] * i + lane.Poly[3]);\n      }\n    }\n    this.drawLaneLine(ctx, points, 0.035 * lane.Prob, color, false);\n    const offset = Math.min(lane.Std, 0.7);\n    color = `rgba(255, 255, 255,${lane.Prob})`;\n    this.drawLaneLine(ctx, points, -offset, color, true);\n    this.drawLaneLine(ctx, points, offset, color, true);\n  }\n\n  drawLaneLine(ctx, points, off, color, isGhost) { // ui_draw_lane_line\n    ctx.beginPath();\n    let started = false;\n    const line_height = 49;\n    for (let i = 0; i < line_height; i++) {\n      const px = i;\n      const py = points[i] - off;\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = line_height; i > 0; i--) {\n      const px = i == line_height ? line_height : i;\n      const py = isGhost ? (points[i] - off) : (points[i] + off);\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneBoundaryV2(ctx, lines, certainty, isStds) {\n    for (let i = 0; i < lines.length; i++) {\n      const opacity = !isStds ? certainty[i] : 1.0 - certainty[i];\n      const color = !isStds ? \"255, 255, 255\" : \"255, 0, 0\";\n      const rgba = `rgba(${color}, ${Math.min(Math.max(opacity, 0.0), 1.0)})`;\n      this.drawLaneLineV2(ctx, lines[i], 0.035, rgba);\n    }\n  }\n\n  drawLaneLineV2(ctx, points, off, color, isGhost) {\n    ctx.beginPath();\n    let started = false;\n    let z_off = 1.22;\n\n    for (let i = 0; i < points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - off;\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = isGhost ? (-points.Y[i] - off) : (-points.Y[i] + off);\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneTrack(options, path, params) {\n    const { ctx } = options;\n    let isMpc; let\n      isEnabled;\n    if (params) {\n      isMpc = params.isMpc;\n      isEnabled = params.isEnabled;\n    }\n    ctx.beginPath();\n    let started = false;\n    const offset = isMpc ? 0.3 : 0.5;\n    const path_height = isMpc ? 20 : 49;\n    let points;\n    if (path.Points.length > 0) {\n      points = path.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(path.Poly[0] * (i * i * i) + path.Poly[1] * (i * i) + path.Poly[2] * i + path.Poly[3]);\n      }\n    }\n    for (let i = 0; i <= path_height; i++) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] - offset;\n      } else {\n        px = i;\n        py = points[i] - offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = path_height; i >= 0; i--) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] + offset;\n      } else {\n        px = i;\n        py = points[i] + offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    let track_bg;\n    if (isMpc) {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h - 40, this.vwp_w, this.vwp_h * 0.4);\n      if (isEnabled) {\n        track_bg.addColorStop(0, 'rgba(23, 134, 68, 0.8)');\n        track_bg.addColorStop(1, 'rgba(14, 89, 45, 0.8)');\n      } else {\n        track_bg.addColorStop(0, 'rgba(23, 88, 134, 0.6)');\n        track_bg.addColorStop(1, 'rgba(15, 58, 89, 0.6)');\n      }\n    } else {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n      track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n      track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    }\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  drawLaneTrackV2(ctx, points) {\n    ctx.beginPath();\n    let started = false;\n    const offset = 0.5;\n\n    for (let i = 0; i <= points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = -points.Y[i] + offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n\n    let track_bg;\n    track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n    track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n    track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  renderCarState(options, events) {\n    if (events && events.carState && events.controlsState) {\n      this.drawCarStateBorder(options, events.controlsState.ControlsState);\n      this.drawCarStateWheel(options, events.carState.CarState, events.controlsState.ControlsState);\n    }\n  }\n\n  renderSpeed(options, events) {\n    if (events && events.carState && events.initData) {\n      this.drawSpeed(options, events.carState.CarState, events.initData.InitData);\n    }\n  }\n\n  drawSpeed(options, CarState, InitData) {\n    const { ctx } = options;\n\n    let speed = CarState.VEgo;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    const isMetric = metricParam.Value === '1';\n    if (isMetric) {\n      speed = Math.floor(speed * 3.6 + 0.5);\n    } else {\n      speed = Math.floor(speed * 2.2369363 + 0.5);\n    }\n\n    const x = this.vwp_w / 2;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.font = '700 128px Open Sans';\n    ctx.fillStyle = 'rgb(255,255,255)';\n    ctx.fillText(speed, x, 140);\n\n    ctx.font = '400 48px Open Sans';\n    ctx.fillStyle = 'rgba(255,255,255,200)';\n    if (isMetric) {\n      ctx.fillText('kph', x, 210);\n    } else {\n      ctx.fillText('mph', x, 210);\n    }\n  }\n\n  renderMaxSpeed(options, events) {\n    if (events && events.controlsState && events.initData) {\n      this.drawMaxSpeed(options, events.controlsState.ControlsState, events.initData.InitData);\n    }\n  }\n\n  drawMaxSpeed(options, ControlsState, InitData) {\n    const { ctx } = options;\n\n    const maxSpeed = ControlsState.VCruise;\n    let maxSpeedCalc = maxSpeed * 0.6225 + 0.5;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    if (metricParam.Value === '1') {\n      maxSpeedCalc = maxSpeed + 0.5;\n    }\n\n    const isCruiseSet = !isNaN(ControlsState.VCruise) && ControlsState.VCruise != 0 && ControlsState.VCruise != 255;\n\n    const width = Math.floor(184 * (2 / 3));\n    let height = Math.floor(202 * (2 / 3));\n\n    let left = bdr_s * 2;\n    let top = bdr_s * 2;\n\n    // background\n    fillRoundedRect(ctx, left, top, width, height, 30, 'rgba(0, 0, 0, 0.392)');\n\n    // border\n    strokeRoundedRect(ctx, left, top, width, height, 30, 10, 'rgba(255, 255, 255, 0.392)');\n\n    const textTopY = top + (26 * 4 / 3);\n    const textBottomY = textTopY + (48 * (4 / 3));\n    // MAX text\n    ctx.font = `${26 * (4 / 3)}px Open Sans`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    if (isCruiseSet) {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.784)';\n    } else {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n    }\n\n    ctx.fillText('MAX', left + width / 2, textTopY);\n\n    // max speed text\n    if (isCruiseSet) {\n      ctx.font = `700 ${48 * (4 / 3)}px Open Sans`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';\n      ctx.fillText(Math.floor(maxSpeedCalc), 2 + left + width / 2, textBottomY);\n    } else {\n      ctx.font = `600 ${42 * (4 / 3)}px Open Sans`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n      ctx.fillText('N/A', left + width / 2, textBottomY);\n    }\n\n    if (ControlsState.DecelForTurnDEPRECATED && ControlsState.Enabled) {\n      const turnSpeed = ControlsState.VCurvatureDEPRECATED * 2.2369363 + 0.5;\n      ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';\n      ctx.font = `700 ${25 * (4 / 3)}px Open Sans`;\n      ctx.fillText('TURN', 200 * (2 / 3) + left + width / 2, textTopY);\n      ctx.font = `700 ${50 * (4 / 3)}px Open Sans`;\n      ctx.fillText(Math.floor(turnSpeed), 200 * (2 / 3) + left + width / 2, textBottomY);\n    }\n  }\n\n  drawCarStateWheel(options, CarState, ControlsState) {\n    const { ctx } = options;\n\n    const radius = 80;\n    const x = this.vwp_w - (radius + (bdr_s * 2));\n    const y = radius + (bdr_s * 2);\n\n    // Wheel Background\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, 2 * Math.PI, false);\n    if (ControlsState.Enabled) {\n      ctx.fillStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.fillStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.closePath();\n    ctx.fill();\n\n    // Rotate Wheel\n    ctx.translate(x, y);\n    ctx.rotate(0 - CarState.SteeringAngle * Math.PI / 180);\n    ctx.save();\n    ctx.translate(-x, -y);\n\n    // Wheel Image\n    ctx.beginPath();\n    ctx.arc(x, y, radius - (bdr_s / 2), 0, 2 * Math.PI, false);\n    const wheelImgPattern = ctx.createPattern(wheelImg, 'repeat');\n    ctx.fillStyle = wheelImgPattern;\n    ctx.closePath();\n    ctx.translate(this.vwp_w - ((bdr_s * 2) + bdr_s / 2), (bdr_s * 2) + bdr_s / 2);\n    ctx.fill();\n  }\n\n  drawCarStateBorder(options, ControlsState) {\n    const { ctx } = options;\n    ctx.lineWidth = bdr_s * 2;\n\n    if (ControlsState.Enabled) {\n      ctx.strokeStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.strokeStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.strokeRect(0, 0, this.vwp_w, this.vwp_h);\n  }\n\n  renderDriverMonitoring(options, events) {\n    if (!events.driverMonitoring) {\n      return;\n    }\n\n    const { ctx } = options;\n    const driverMonitoring = events.driverMonitoring.DriverMonitoring;\n\n    if (driverMonitoring.FaceProb < 0.8) {\n      return;\n    }\n\n    const xW = this.vwp_h / 2;\n    const xOffset = this.vwp_w - xW;\n    let noseSize = 20;\n    ctx.translate(xOffset, 0);\n\n    const isDistracted = this.isDistracted(driverMonitoring);\n\n    const opacity = (driverMonitoring.FaceProb - DM_FACE_THRESHOLD) / (1 - DM_FACE_THRESHOLD) * 255;\n    noseSize *= 1 / (driverMonitoring.FaceProb);\n    let [x, y] = driverMonitoring.FacePosition.map((v) => v + 0.5);\n    x = toX(x);\n    y = toY(y);\n\n    const flatMatrix = this.rot_matrix(...driverMonitoring.FaceOrientation)\n      .reduce((m, v) => m.concat([...v, 1]), [])\n      .concat([0, 0, 0, 1]);\n    flatMatrix[3] = x;\n    flatMatrix[7] = y;\n\n    const p1 = this.matmul(flatMatrix, [0, 0, 0, 1]);\n    const p2 = this.matmul(flatMatrix, [0, 0, 100, 1]);\n\n    let isBlinking = false;\n\n    if (\n      driverMonitoring.LeftBlinkProb + driverMonitoring.RightBlinkProb > 2 * DM_BLINK_THRESHOLD\n      && driverMonitoring.LeftEyeProb > DM_EYE_THRESHOLD\n      && driverMonitoring.RightEyeProb > DM_EYE_THRESHOLD\n    ) {\n      isBlinking = true;\n    }\n\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    if (isDistracted) {\n      ctx.strokeStyle = `rgba(255, 0, 0, ${opacity})`;\n    } else if (isBlinking) {\n      ctx.strokeStyle = `rgba(255, 255, 0, ${opacity})`;\n    } else {\n      ctx.strokeStyle = `rgba(0, 255, 0, ${opacity})`;\n    }\n    ctx.arc(x, y, noseSize, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.closePath();\n\n    // print raw and converted values, useful for debugging but super not pretty\n    // ctx.fillStyle = 'rgb(255,255,255)';\n    // ctx.font = '800 14px Open Sans';\n    // ctx.fillText(driverMonitoring.FaceOrientation[2], x + noseSize * 2, y);\n    // ctx.fillText(driverMonitoring.FaceOrientation[1], x, y + noseSize * 2);\n\n    // let pose = this.getDriverPose(driverMonitoring);\n\n    // ctx.fillText(pose.yaw, x + noseSize * 2, y + noseSize / 2);\n    // ctx.fillText(pose.pitch, x, y + noseSize * 2.5);\n\n    ctx.beginPath();\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = theme.palette.states.drivingBlue;\n    ctx.moveTo((p1[0]), (p1[1]));\n    ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;\n    ctx.lineTo((p2[0]), (p2[1]));\n    ctx.stroke();\n    ctx.closePath();\n\n    function toX(x) {\n      return (x * xW);\n    }\n    function toY(y) {\n      return (y * this.vwp_h);\n    }\n  }\n\n  isDistracted(driverMonitoring) {\n    const pose = this.getDriverPose(driverMonitoring);\n\n    let pitch_error = pose.pitch - _PITCH_NATURAL_OFFSET;\n    const yaw_error = pose.yaw - _YAW_NATURAL_OFFSET;\n    if (pitch_error > 0) {\n      pitch_error = Math.max(pitch_error - _PITCH_POS_ALLOWANCE, 0);\n    }\n\n    pitch_error *= _PITCH_WEIGHT;\n    const pose_metric = Math.sqrt(Math.pow(yaw_error, 2) + Math.pow(pitch_error, 2));\n    if (pose_metric > _METRIC_THRESHOLD) {\n      return true;\n    }\n    return false;\n  }\n\n  getDriverPose(driverMonitoring) {\n    // use driver monitoring units instead of canvas units\n    // that way code can be nearly identical\n    const angles_desc = driverMonitoring.FaceOrientation;\n    const pos_desc = driverMonitoring.FacePosition;\n\n    const pitch_net = angles_desc[0];\n    const yaw_net = angles_desc[1];\n    const roll_net = angles_desc[2];\n\n    const face_pixel_position = [(pos_desc[0] + 0.5) * W - W + FULL_W, (pos_desc[1] + 0.5) * H];\n    const yaw_focal_angle = Math.atan2(face_pixel_position[0] - FULL_W / 2, RESIZED_FOCAL);\n    const pitch_focal_angle = Math.atan2(face_pixel_position[1] - H / 2, RESIZED_FOCAL);\n\n    const roll = roll_net;\n    const pitch = pitch_net + pitch_focal_angle;\n    const yaw = -yaw_net + yaw_focal_angle;\n    return { roll, pitch, yaw };\n  }\n\n  carSpaceToImageSpace(coords) {\n    coords = this.matmul(this.extrinsic, coords);\n    coords = this.matmul(this.intrinsic, coords);\n\n    // project onto 3d with Z\n    coords[0] /= coords[2];\n    coords[1] /= coords[2];\n    return coords;\n  }\n\n  rot_matrix(roll, pitch, yaw) {\n    const cr = Math.cos(roll);\n    const sr = Math.sin(roll);\n    const cp = Math.cos(pitch);\n    const sp = Math.sin(pitch);\n    const cy = Math.cos(yaw);\n    const sy = Math.sin(yaw);\n\n    const rr = [\n      [1, 0, 0],\n      [0, cr, -sr],\n      [0, sr, cr]\n    ];\n    const rp = [\n      [cp, 0, sp],\n      [0, 1, 0],\n      [-sp, 0, cp]\n    ];\n    const ry = [\n      [cy, -sy, 0],\n      [sy, cy, 0],\n      [0, 0, 1]\n    ];\n    return multiply(ry, multiply(rp, rr));\n  }\n\n  matmul(matrix, coord) {\n    const b0 = coord[0]; const b1 = coord[1]; const b2 = coord[2]; const\n      b3 = coord[3];\n\n    coord[0] = b0 * matrix[0] + b1 * matrix[1] + b2 * matrix[2] + b3 * matrix[3];\n    coord[1] = b0 * matrix[4] + b1 * matrix[5] + b2 * matrix[6] + b3 * matrix[7];\n    coord[2] = b0 * matrix[8] + b1 * matrix[9] + b2 * matrix[10] + b3 * matrix[11];\n    coord[3] = b0 * matrix[12] + b1 * matrix[13] + b2 * matrix[14] + b3 * matrix[15];\n\n    return coord;\n  }\n\n  currentVideoTime(offset = TimelineWorker.currentOffset()) {\n    if (!this.props.currentSegment) {\n      return 0;\n    }\n    offset -= this.props.currentSegment.routeOffset;\n    offset = offset / 1000;\n\n    if (!this.props.front) {\n      let initData = TimelineWorker.currentInitData();\n      let firstFrameTime = TimelineWorker.firstFrameTime();\n\n      if (initData !== null && firstFrameTime !== null) {\n        offset -= (firstFrameTime - initData.LogMonoTime/1e9);\n      }\n    }\n\n    return offset;\n  }\n\n  // nearest cache-worthy frame of the video\n  // always show a frame before the current offset so that data is what happened\n  // after this frame was seen, that way you can't see things it hasn't reacted to\n  nearestImageFrame(offset = TimelineWorker.currentOffset()) {\n    const segment = this.props.currentSegment || this.props.nextSegment;\n    if (!segment) {\n      return '';\n    }\n    offset -= segment.routeOffset;\n    const seconds = Math.max(1, Math.floor(offset / 1000) * 1);\n\n    return `${segment.url}/sec${seconds}.jpg`;\n  }\n\n  render() {\n    const { classes } = this.props;\n    if (this.props.playSpeed !== this.props.desiredPlaySpeed && !this.props.isBuffering) {\n      console.log(this.props);\n      debugger;\n    }\n    return (\n      <div\n        className={classNames(classes.videoContainer, {\n          [classes.hidden]: false\n        })}\n      >\n        { this.props.isBuffering\n          && (\n          <Buffering\n            bufferingVideo={this.props.bufferingVideo}\n            bufferingData={this.props.bufferingData}\n            onDisableBuffering={this.onDisableBuffering}\n          />\n          )}\n        { this.state.shouldShowThumbnail\n          && (\n          <img\n            style={{ zIndex: 2 }}\n            className={this.props.classes.thumbnail}\n            src={`data:image/jpeg;base64,${this.state.thumbnailData}`}\n          />\n          )}\n        <Player\n          ref={this.videoPlayer}\n          style={{ zIndex: 1 }}\n          autoPlay={!!this.props.currentSegment}\n          muted\n          fluid={false}\n          src={this.state.src}\n          startTime={this.currentVideoTime()}\n          playbackRate={this.props.startTime > Date.now() ? 0 : this.props.playSpeed}\n          width={850}\n          height={this.video_height}\n        >\n          <HLSSource\n            onBufferAppend={this.checkVideoBuffer}\n            onSourceLoaded={this.onSourceLoaded}\n            isVideoChild\n          />\n          <ControlBar disabled disableCompletely />\n        </Player>\n        { this.props.shouldShowUI\n          && (\n            <>\n              <canvas\n                ref={this.canvas_road}\n                className={classNames(classes.videoUiCanvas, 'hudRoadCanvas')}\n                style={{ zIndex: 3 }}\n              />\n              <canvas\n                ref={this.canvas_lead}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 4 }}\n              />\n              <canvas\n                ref={this.canvas_carstate}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 5 }}\n              />\n              <canvas\n                ref={this.canvas_maxspeed}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 6 }}\n              />\n              <canvas\n                ref={this.canvas_speed}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 7 }}\n              />\n            </>\n          )}\n        { this.props.front\n          && (\n            <>\n              <canvas\n                ref={this.canvas_face}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 3 }}\n              />\n            </>\n          )}\n      </div>\n    );\n  }\n}\n\nVideoPreview.propTypes = {\n  playSpeed: PropTypes.number.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return state.workerState;\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(VideoPreview));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport Obstruction from 'obstruction';\nimport { classNames } from 'react-extras';\n\nimport {\n  withStyles,\n  Grid,\n  FormControl,\n  Select,\n  MenuItem,\n  Typography,\n} from '@material-ui/core';\n\nimport DriveMap from '../DriveMap';\nimport DriveVideo from '../DriveVideo';\n\nconst styles = (theme) => ({\n  mediaOptions: {\n    alignItems: 'center',\n    border: '1px solid rgba(255,255,255,.1)',\n    borderRadius: 50,\n    display: 'flex',\n    marginLeft: 'auto',\n    marginBottom: 12,\n  },\n  mediaOption: {\n    alignItems: 'center',\n    borderRight: '1px solid rgba(255,255,255,.1)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    minHeight: 32,\n    minWidth: 44,\n    opacity: '0.6',\n    '&.disabled': {\n      cursor: 'default',\n    },\n    '&:last-child': {\n      borderRight: 'none',\n    },\n  },\n  mediaOptionDisabled: {\n    cursor: 'auto',\n  },\n  mediaOptionIcon: {\n    backgroundColor: '#fff',\n    borderRadius: 3,\n    height: 20,\n    margin: '2px 0',\n    width: 30,\n  },\n  mediaOptionText: {\n    fontSize: 12,\n    fontWeight: 500,\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  mediaSource: {\n    width: '100%',\n  },\n  mediaSourceSelect: {\n    width: '100%',\n  },\n});\n\nconst MediaType = {\n  VIDEO: 'video',\n  DRIVER_VIDEO: 'dcamera',\n  HUD: 'hud',\n  MAP: 'map'\n};\n\nclass Media extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderMediaOptions = this.renderMediaOptions.bind(this);\n\n    this.state = {\n      inView: MediaType.HUD,\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { inView } = this.state;\n    return (\n      <>\n        { this.renderMediaOptions() }\n        { inView === MediaType.MAP && <DriveMap /> }\n        { (inView !== MediaType.MAP)\n          && (\n          <DriveVideo\n            shouldShowUI={inView === MediaType.HUD}\n            front={inView === MediaType.DRIVER_VIDEO}\n            onVideoChange={(noVideo) => {\n              this.setState({ inView: noVideo ? MediaType.MAP : inView });\n            }}\n          />\n          )}\n      </>\n    );\n  }\n\n  renderMediaOptions() {\n    const { classes, currentSegment } = this.props;\n    const { inView } = this.state;\n    const mediaSource = 'eon-road-camera';\n    const hasDriverCameraStream = this.props.currentSegment && this.props.currentSegment.hasDriverCameraStream;\n    return (\n      <Grid container>\n        <Grid\n          item\n          xs={hasDriverCameraStream ? 5 : 7}\n        />\n        <Grid\n          item\n          xs={hasDriverCameraStream ? 7 : 5}\n          className={classes.mediaOptions}\n        >\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.HUD ? { opacity: 1 } : { }}\n            onClick={() => this.setState({ inView: MediaType.HUD })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              HUD\n            </Typography>\n          </Grid>\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.VIDEO ? { opacity: 1 } : {}}\n            onClick={() => this.setState({ inView: MediaType.VIDEO })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              Video\n            </Typography>\n          </Grid>\n          { hasDriverCameraStream\n            && (\n            <Grid\n              item\n              xs={3}\n              className={cx(classes.mediaOption, { disabled: !hasDriverCameraStream })}\n              style={inView === MediaType.DRIVER_VIDEO ? { opacity: 1 } : {}}\n              onClick={() => hasDriverCameraStream && this.setState({ inView: MediaType.DRIVER_VIDEO })}\n            >\n              <Typography className={classes.mediaOptionText}>\n                Driver Video\n              </Typography>\n            </Grid>\n            )}\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.MAP ? { opacity: 1 } : { }}\n            onClick={() => this.setState({ inView: MediaType.MAP })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              Map\n            </Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  currentSegment: 'workerState.currentSegment',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Media));\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\nimport { classNames } from 'react-extras';\nimport PropTypes from 'prop-types';\nimport document from 'global/document';\nimport { timeout } from 'thyming';\nimport { partial } from 'ap';\nimport raf from 'raf';\nimport qs from 'querystringify';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport { raw as RawApi } from '@commaai/comma-api';\nimport TimelineWorker from '../../timeline';\nimport * as Demo from '../../demo';\nconst demoFiles = require('../../demo/files.json');\n\nconst styles = (theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n    paddingTop: theme.spacing.unit,\n    background: 'transparent',\n    textAlign: 'right'\n  },\n  footerButton: {\n    display: 'inline-block',\n    border: `1px solid ${theme.palette.grey[800]}`,\n    color: theme.palette.grey[50],\n    textDecoration: 'none',\n    borderRadius: 20,\n    padding: '10px 20px',\n    margin: '0px 10px',\n    cursor: 'pointer'\n  }\n});\n\nclass AnnotationsFooter extends Component {\n  constructor(props) {\n    super(props);\n\n    this.copySegmentName = this.copySegmentName.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.downloadSegmentFile = this.downloadSegmentFile.bind(this);\n    this.openInCabana = this.openInCabana.bind(this);\n\n    this.state = {\n      showCopiedSnack: false,\n    };\n  }\n\n  copySegmentName(e) {\n    const { segment } = this.props;\n    if (!segment) {\n      return;\n    }\n    const el = document.createElement('textarea');\n    el.value = `${segment.route}--${segment.segment}`;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n\n    this.setState({\n      showCopiedSnack: true\n    });\n    this.snackTimer = timeout(this.handleClose, 1000);\n  }\n\n  async downloadSegmentFile(type) {\n    if (!this.props.segment) {\n      return;\n    }\n\n    const seg = this.props.segment;\n    const segmentKeyPath = `${seg.route.replace('|', '/')}/${seg.segment}`;\n\n    let files;\n    if (Demo.isDemo()) {\n      files = demoFiles;\n    } else {\n      files = (await RawApi.getRouteFiles(this.props.segment.route));\n    }\n    const url = files[type].find((url) => url.indexOf(segmentKeyPath) !== -1);\n\n    if (url) {\n      window.location.href = url;\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showCopiedSnack: false\n    });\n    this.snackTimer();\n  }\n\n  openInCabana() {\n    const { segment, loop, start } = this.props;\n    const currentOffset = TimelineWorker.currentOffset();\n    const params = {\n      route: segment.route,\n      url: segment.url,\n      seekTime: Math.floor((currentOffset - segment.routeOffset) / 1000)\n    };\n    const routeStartTime = (start + segment.routeOffset);\n\n    if (loop.startTime && loop.startTime > routeStartTime && loop.duration < 180000) {\n      const startTime = Math.floor((loop.startTime - routeStartTime) / 1000);\n      params.segments = [startTime, Math.floor(startTime + (loop.duration / 1000))].join(',');\n    }\n\n    const win = window.open(`https://my.comma.ai/cabana/${qs.stringify(params, true)}`, '_blank');\n    if (win.focus) {\n      win.focus();\n    }\n  }\n\n  render() {\n    return (\n      <Paper className={this.props.classes.root}>\n        { this.props.segment && this.props.segment.hasVideo\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'cameras')}>\n            Download Camera Segment\n          </a>\n          )}\n        { this.props.segment && this.props.segment.hasDriverCamera\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'dcameras')}>\n            Download Front Camera Segment\n          </a>\n          )}\n        { this.props.segment\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'logs')}>\n            Download Log Segment\n          </a>\n          )}\n        <a className={classNames(this.props.classes.footerButton, 'openInCabana')} onClick={this.openInCabana} href=\"#\">\n          View CAN Data in Cabana\n        </a>\n        <a className={this.props.classes.footerButton} onClick={this.copySegmentName} target=\"_blank\">\n          Copy Current Segment\n        </a>\n        <Snackbar\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center'\n          }}\n          open={this.state.showCopiedSnack}\n          onClose={this.handleClose}\n          ContentProps={{\n            'aria-describedby': 'message-id',\n          }}\n          variant=\"success\"\n          message={<span id=\"message-id\">Copied segment name!</span>}\n        />\n      </Paper>\n    );\n  }\n}\n\nAnnotationsFooter.propTypes = {\n  segment: PropTypes.object.isRequired,\n  loop: PropTypes.object.isRequired,\n  start: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(AnnotationsFooter);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport {\n  withStyles,\n  Grid,\n  Slide,\n  Paper,\n  Typography,\n  IconButton,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\n\nimport AnnotationTabs from './AnnotationTabs';\nimport Media from './Media';\nimport Timeline from '../Timeline';\nimport TimeDisplay from '../TimeDisplay';\nimport AnnotationsFooter from './footer';\n\nimport { selectRange } from '../../actions';\nimport { DeviceType } from '../../defs/segments';\n\nconst styles = (theme) => ({\n  base: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n  },\n  window: {\n    background: 'linear-gradient(to bottom, #30373B 0%, #272D30 10%, #1D2225 100%)',\n    borderRadius: 8,\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    margin: 18,\n  },\n  header: {},\n  headerContext: {\n    alignItems: 'center',\n    display: 'flex',\n    padding: 12,\n    paddingLeft: 18,\n    paddingRight: 24,\n  },\n  headerTitle: {\n    fontSize: 22,\n    fontWeight: 700,\n    paddingLeft: 12,\n  },\n  headerActions: {\n    marginLeft: 'auto',\n  },\n  headerTimeline: {},\n  viewer: {\n    padding: theme.spacing.unit * 4,\n  },\n  footer: {\n    alignItems: 'center',\n    background: 'linear-gradient(to bottom, #30373B 0%, #272D30 10%, #1D2225 100%)',\n    display: 'flex',\n    marginTop: 'auto',\n    width: '100%',\n  },\n});\n\nclass Annotations extends Component {\n  constructor(props) {\n    super(props);\n\n    this.close = this.close.bind(this);\n  }\n\n  close() {\n    this.props.dispatch(selectRange(null, null));\n  }\n\n  renderAnnotationsElement(visibleSegment) {\n    return (<AnnotationTabs segment={visibleSegment} />);\n  }\n\n  render() {\n    const {\n      classes,\n      device,\n      loop,\n      currentSegment,\n      nextSegment,\n      start\n    } = this.props;\n    const visibleSegment = (currentSegment || nextSegment);\n    const routeName = visibleSegment ? visibleSegment.route : 'Nothing visible';\n    const shortName = routeName.split('|')[1];\n    return (\n      <div className={classes.base}>\n        <div className={classes.window}>\n          <div className={classes.header}>\n            <div className={classes.headerContext}>\n              <IconButton aria-label=\"Go Back\" onClick={() => window.history.back()}>\n                <KeyboardBackspaceIcon />\n              </IconButton>\n              <Typography className={classes.headerTitle}>\n                { this.props.device.alias }\n              </Typography>\n              <div className={classes.headerActions}>\n                <IconButton onClick={this.close} aria-label=\"Close\">\n                  <CloseIcon />\n                </IconButton>\n              </div>\n            </div>\n            <Timeline\n              className={classes.headerTimeline}\n              zoomed\n              colored\n              hasThumbnails\n              hasRuler\n              hasGradient\n              tooltipped\n              dragSelection\n            />\n          </div>\n          <div className={classes.viewer}>\n            <Grid container spacing={32}>\n              <Grid item xs={6}>\n                { visibleSegment && this.renderAnnotationsElement(visibleSegment) }\n              </Grid>\n              <Grid item xs={6}>\n                <Media />\n              </Grid>\n            </Grid>\n          </div>\n        </div>\n        <div className={classes.footer}>\n          { visibleSegment && <AnnotationsFooter segment={visibleSegment} loop={loop} start={start} /> }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  currentSegment: 'workerState.currentSegment',\n  nextSegment: 'workerState.nextSegment',\n  device: 'workerState.device',\n  loop: 'workerState.loop',\n  start: 'workerState.start'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Annotations));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport { Link } from 'react-router-dom';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport 'mapbox-gl/src/css/mapbox-gl.css';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Drawer from '@material-ui/core/Drawer';\n\nimport DeviceList from '../Dashboard/DeviceList';\n\nimport { filterEvent } from '../../utils';\nimport { selectRange, selectDevice } from '../../actions';\n\nconst ZOOM_BUFFER = 1000; // 1 second on either end\n\nconst styles = (/* theme */) => ({\n  header: {\n    display: 'flex',\n    height: 64,\n    minHeight: 64,\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    minHeight: 0,\n  },\n  annotateButton: {\n    background: '#fff',\n    borderRadius: 30,\n    margin: 24,\n    color: '#404B4F',\n    height: 50,\n    textTransform: 'none',\n    width: '80%',\n    '&:hover': {\n      background: '#fff',\n      color: '#404B4F',\n    }\n  },\n  logo: {\n    alignItems: 'center',\n    display: 'flex',\n    maxWidth: 200,\n    textDecoration: 'none',\n  },\n  logoImg: {\n    height: '34px',\n    margin: '0px 28px',\n    width: 'auto',\n  },\n  logoText: {\n    fontFamily: 'MaisonNeueExtended',\n    fontSize: 18,\n    fontWeight: 600,\n  },\n  drawerContent: {\n    width: '100%',\n    height: 'calc(100vh - 64px)',\n    display: 'flex',\n    flexDirection: 'column',\n    background: 'linear-gradient(180deg, #1B2023 0%, #111516 100%)',\n  },\n  sidebarHeader: {\n    alignItems: 'center',\n    padding: 14.5,\n    color: '#fff',\n    display: 'flex',\n    width: '100%',\n    paddingLeft: 0,\n    backgroundColor: '#1D2225',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n  },\n});\n\nclass AppDrawer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDeviceSelected = this.handleDeviceSelected.bind(this);\n    this.goToAnnotation = this.goToAnnotation.bind(this);\n    this.toggleDrawerOff = this.toggleDrawerOff.bind(this);\n\n  }\n\n  handleDeviceSelected(dongleId) {\n    this.props.dispatch(selectDevice(dongleId));\n    this.toggleDrawerOff();\n  }\n\n  goToAnnotation(segment) {\n    if (segment == null) { return; }\n    const startTime = segment.startTime - ZOOM_BUFFER;\n    const endTime = segment.startTime + segment.duration + ZOOM_BUFFER;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  toggleDrawerOff() {\n    this.props.handleDrawerStateChanged(false);\n  }\n\n  render() {\n    const { classes } = this.props;\n    let firstAnnotationSegment = null;\n    const newAnnotations = this.props.segments.reduce((count, segment) => {\n      const segCount = segment.events.filter(filterEvent).reduce((memo, event) => (event.id ? memo : memo + 1), 0);\n      if (!firstAnnotationSegment && segCount > 0) {\n        firstAnnotationSegment = segment;\n      }\n      return count + segCount;\n    }, 0);\n\n    return (\n      <Drawer open={ this.props.isPermanent || this.props.drawerIsOpen } onClose={this.toggleDrawerOff}\n        variant={ this.props.isPermanent ? \"permanent\" : \"temporary\" } PaperProps={{ style: { width: this.props.width }}}\n      >\n        <div className={classes.sidebarHeader}>\n          <Link to=\"/\" onClick={ () => { this.toggleDrawerOff(); window.location = '/'; } } className={classes.logo}>\n            <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n            <Typography className={classes.logoText}>\n              explorer\n            </Typography>\n          </Link>\n        </div>\n        <div className={classes.drawerContent}>\n          <Button\n            size=\"large\"\n            variant=\"outlined\"\n            className={classes.annotateButton}\n            onClick={() => { this.toggleDrawerOff(); this.goToAnnotation(firstAnnotationSegment); }}\n            >\n            Annotate\n          </Button>\n          <DeviceList\n            selectedDevice={this.props.selectedDongleId}\n            handleDeviceSelected={this.handleDeviceSelected}\n            />\n        </div>\n      </Drawer>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  selectedDongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AppDrawer));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport 'mapbox-gl/src/css/mapbox-gl.css';\n\nimport AppHeader from './AppHeader';\nimport Dashboard from './Dashboard';\nimport Annotations from './Annotations';\nimport AppDrawer from './AppDrawer';\n\nimport Timelineworker from '../timeline';\nimport { selectRange, primeNav } from '../actions';\nimport { getDongleID, getZoom, getPrimeNav } from '../url';\n\nlet resizeTimeout = null;\n\nconst styles = (/* theme */) => ({\n  base: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  header: {\n    display: 'flex',\n    height: 64,\n    minHeight: 64,\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    minHeight: 0,\n    height: '100%',\n  },\n});\n\nclass ExplorerApp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settingDongle: null,\n      drawerIsOpen: false,\n      windowHeight: window.innerHeight,\n      windowWidth: window.innerWidth,\n    };\n\n    this.handleDrawerStateChanged = this.handleDrawerStateChanged.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n  }\n\n  componentWillMount() {\n    this.checkProps(this.props);\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  componentWillReceiveProps(props) {\n    this.checkProps(props);\n\n    const isZoomed = props.expanded;\n    const { expanded } = this.props;\n    const wasZoomed = expanded;\n\n    if (isZoomed && !wasZoomed) {\n      Timelineworker.play();\n    }\n    if (!isZoomed && wasZoomed) {\n      Timelineworker.pause();\n    }\n  }\n\n  handleResize() {\n    if (resizeTimeout) {\n      clearTimeout(resizeTimeout);\n    }\n    resizeTimeout = setTimeout(() => {\n      this.setState({\n        windowHeight: window.innerHeight,\n        windowWidth: window.innerWidth,\n      });\n      resizeTimeout = null;\n    }, 150);\n  }\n\n  handleDrawerStateChanged(drawerOpen) {\n    this.setState({\n      drawerIsOpen: drawerOpen\n    });\n  }\n\n  checkProps(props) {\n    const dongleId = getDongleID(props.pathname);\n    const zoom = getZoom(props.pathname);\n\n    const { settingDongle } = this.state;\n    const curDongle = settingDongle || props.dongleId;\n    const { dispatch } = this.props;\n\n    if (dongleId) {\n      if (curDongle !== dongleId) {\n        if (!settingDongle) {\n          Timelineworker.selectDevice(dongleId);\n          this.setState({\n            settingDongle: dongleId\n          });\n        }\n      } else {\n        this.setState({\n          settingDongle: null\n        });\n      }\n    }\n\n    if (getPrimeNav(props.pathname)) {\n      dispatch(primeNav());\n    } else {\n      dispatch(selectRange(zoom.start, zoom.end));\n    }\n  }\n\n  render() {\n    const { classes, expanded } = this.props;\n\n    const showMenuButton = this.state.windowWidth <= 1080;\n    const drawerIsPermanent = !expanded && this.state.windowWidth > 1080;\n    const sidebarWidth = Math.max(280, this.state.windowWidth * 0.2);\n\n    let containerStyles = {\n      height: '100%',\n    };\n    if (drawerIsPermanent) {\n      containerStyles = {\n        ...containerStyles,\n        width: `calc(100% - ${sidebarWidth}px)`,\n        marginLeft: sidebarWidth\n      };\n    }\n\n    return (\n      <div className={classes.base}>\n        <div className={classes.header}>\n          <AppHeader drawerIsOpen={this.state.drawerIsOpen} showMenuButton={ showMenuButton }\n            handleDrawerStateChanged={this.handleDrawerStateChanged}\n          />\n        </div>\n        { (!expanded || !drawerIsPermanent) &&\n          <AppDrawer drawerIsOpen={this.state.drawerIsOpen} isPermanent={drawerIsPermanent}\n            handleDrawerStateChanged={this.handleDrawerStateChanged} width={ sidebarWidth } />\n        }\n        <div className={classes.window} style={ containerStyles }>\n          { expanded ? (<Annotations />) : (<Dashboard />) }\n        </div>\n      </div>\n    );\n  }\n}\n\nExplorerApp.propTypes = {\n  expanded: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  pathname: 'router.location.pathname',\n  dongleId: 'workerState.dongleId',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(ExplorerApp));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport window from 'global/window';\nimport PropTypes from 'prop-types';\nimport qs from 'querystringify';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport { config as AuthConfig } from '@commaai/my-comma-auth';\n\nimport { auth_apple, auth_github, auth_google } from '../icons';\n\nconst styles = (/* theme */) => ({\n  baseContainer: {\n    width: '100vw',\n    height: '100vh',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  base: {\n    overflowY: 'auto',\n    margin: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  logo: {\n    display: 'flex',\n  },\n  logoImg: {\n    height: 45,\n    marginRight: 20,\n    width: 'auto',\n  },\n  logoText: {\n    fontFamily: 'MaisonNeueExtended',\n    fontSize: 24,\n    fontWeight: 600,\n  },\n  tagline: {\n    margin: '20px 0 52px',\n    fontSize: '18px',\n  },\n  logInButton: {\n    alignItems: 'center',\n    background: '#ffffff',\n    display: 'flex',\n    borderRadius: '100px',\n    fontSize: '21px',\n    height: '80px',\n    justifyContent: 'center',\n    textDecoration: 'none',\n    width: '100%',\n    marginBottom: '0.5em',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'left 15% center',\n    backgroundSize: '40px',\n  },\n  logInText: {\n    fontFamily: 'MaisonNeue',\n    fontSize: '18px',\n    color: 'black',\n    fontWeight: 600,\n  },\n  demoLink: {\n    textDecoration: 'none',\n    justifyContent: 'center',\n    width: '100%',\n    height: '40px',\n    display: 'flex',\n  },\n  demoLinkText: {\n    fontSize: '18px',\n  },\n});\n\nconst DEMO_LINK = `${window.location.origin}/?demo=1`;\n\nclass AnonymousLanding extends Component {\n  componentWillMount() {\n    if (typeof window.sessionStorage !== 'undefined') {\n      const { pathname } = this.props;\n      sessionStorage.redirectURL = pathname;\n    }\n  }\n\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    document.body.appendChild(script);\n    script.onload = () => {\n      AppleID.auth.init({\n        clientId : AuthConfig.APPLE_CLIENT_ID,\n        scope : AuthConfig.APPLE_SCOPES,\n        redirectURI : AuthConfig.APPLE_REDIRECT_URI,\n        usePopup : true,\n      });\n    };\n    script.src = \"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js\";\n    script.async = true;\n    document.addEventListener('AppleIDSignInOnSuccess', (data) => {\n      window.location = [AuthConfig.APPLE_REDIRECT_PATH,\n        qs.stringify({code: data.detail.authorization.code})].join('?');\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={ classes.baseContainer }>\n        <div className={classes.base}>\n          <div className={classes.logo}>\n            <img alt=\"comma\" src=\"/images/comma-white.png\" className={classes.logoImg} />\n            <Typography className={classes.logoText}>explorer</Typography>\n          </div>\n          <Typography className={classes.tagline}>\n            Review and annotate your comma.ai driving data.\n          </Typography>\n          <a href={AuthConfig.GOOGLE_REDIRECT_LINK}\n            className={classes.logInButton}\n            style={{backgroundImage: \"url(\" + auth_google + \")\"}}>\n            <Typography className={classes.logInText}>\n              Sign in with Google\n            </Typography>\n          </a>\n          <a onClick={ () => AppleID.auth.signIn() }\n            className={classes.logInButton}\n            style={ { backgroundImage: \"url(\" + auth_apple + \")\", cursor: 'pointer' } }>\n            <Typography className={classes.logInText}>\n              Sign in with Apple\n            </Typography>\n          </a>\n          <a href={AuthConfig.GITHUB_REDIRECT_LINK}\n            className={classes.logInButton}\n            style={{backgroundImage: \"url(\" + auth_github + \")\"}}>\n            <Typography className={classes.logInText}>\n              Sign in with GitHub\n            </Typography>\n          </a>\n          <a href={DEMO_LINK} className={classes.demoLink}>\n            <Typography className={classes.demoLinkText}>\n              or try the demo\n            </Typography>\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nAnonymousLanding.propTypes = {\n  pathname: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  pathname: 'router.location.pathname'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AnonymousLanding));\n","import { WORKER_STATE_UPDATE } from '../actions/types';\n\nconst initialState = {};\n\nexport default function workerState(_state = initialState, action) {\n  let state = _state;\n  switch (action.type) {\n    case WORKER_STATE_UPDATE:\n      for (const [key, value] of Object.entries(action.data)) {\n        state[key] = value;\n      }\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import { TIMELINE_SELECTION_CHANGED } from '../actions/types';\n\nconst initialState = {\n  start: 0,\n  end: 0,\n  expanded: false\n};\n\nexport default function zoom(_state = initialState, action) {\n  let state = _state;\n  switch (action.type) {\n    case TIMELINE_SELECTION_CHANGED:\n      state = {\n        start: action.start,\n        end: action.end,\n        expanded: !!(action.start && action.end)\n      };\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import workerState from './workerState';\nimport zoom from './zoom';\n\nconst reducers = {\n  workerState,\n  zoom,\n};\n\nexport default reducers;\n","import window from 'global/window';\nimport { compose } from 'redux';\n\nfunction getComposeEnhancers() {\n  if (process.env.NODE_ENV !== 'production' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) {\n    return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\n  }\n  return compose;\n}\n\nconst composeEnhancers = getComposeEnhancers();\n\nexport default composeEnhancers;\n","import * as Redux from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { createBrowserHistory } from 'history';\nimport reducers from './reducers';\nimport composeEnhancers from './devtools';\n\nexport const history = createBrowserHistory();\n\nexport function createStore() {\n  const store = Redux.createStore(\n    connectRouter(history)(\n      Redux.combineReducers(reducers)\n    ),\n    composeEnhancers(Redux.applyMiddleware(thunk, routerMiddleware(history)))\n  );\n\n  return store;\n}\n","/* global gtag */\n\nconst GA_TRACKING_ID = 'UA-80079182-7';\n\nexport function initGoogleAnalytics(history) {\n  history.listen((location) => {\n    if (typeof gtag === 'function') {\n      gtag('config', GA_TRACKING_ID, {\n        page_title: document.title,\n        page_location: window.location.href,\n        page_path: location.pathname\n      });\n    }\n  });\n}\n","import React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport { Route, Switch, Redirect } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { timeout } from 'thyming';\nimport document from 'global/document';\nimport qs from 'query-string';\nimport localforage from 'localforage';\nimport Jepsen from 'carly';\nimport Collector from 'collect-methods';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport MyCommaAuth, { config as AuthConfig, storage as AuthStorage } from '@commaai/my-comma-auth';\nimport { auth as AuthApi, request as Request, billing as Billing, athena as Athena } from '@commaai/comma-api';\n\nimport Explorer from './components/explorer';\nimport AnonymousLanding from './components/anonymous';\n\nimport TimelineWorker from './timeline';\nimport { history, createStore } from './store';\nimport { updateState } from './actions';\nimport { initGoogleAnalytics } from './analytics';\nimport * as Demo from './demo';\n\ninitGoogleAnalytics(history);\nconst store = createStore();\n\nTimelineWorker.onStateChange((data) => {\n  store.dispatch(updateState(data));\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      initialized: false,\n      demo: false,\n    };\n\n    this.cancelInit = Collector();\n\n    const initDemoTimeline = Jepsen(() => {\n      TimelineWorker.init(true).then(initDemoState.callback);\n    });\n\n    const checkDemo = Jepsen((isDemo) => {\n      if (isDemo) {\n        return localforage.setItem('isDemo', '1')\n          .then(initDemoTimeline.callback);\n      }\n      return this.auth();\n    });\n\n    const initDemoState = Jepsen(() => {\n      TimelineWorker.selectTimeRange(1564443025000, Date.now());\n      this.setState({\n        initialized: true,\n        demo: true,\n      });\n    });\n\n    this.cancelInit(checkDemo.cancel);\n    this.cancelInit(initDemoTimeline.cancel);\n    this.cancelInit(initDemoState.cancel);\n\n    Demo.init().then(checkDemo.callback);\n  }\n\n  componentWillUnmount() {\n    this.cancelInit();\n    TimelineWorker.stop();\n  }\n\n  async auth() {\n    if (document.location) {\n      if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH)\n        {\n        const { code } = qs.parse(document.location.search);\n        try {\n          let token = null;\n          if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GOOGLE_REDIRECT_URI, 'google');\n          } else if (document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.APPLE_REDIRECT_URI, 'apple');\n          } else if (document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GItHUB_REDIRECT_URI, 'github');\n          }\n          if (token) {\n            AuthStorage.setCommaAccessToken(token);\n          }\n          // done authing!!\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    }\n\n    const token = await MyCommaAuth.init();\n    Request.configure(token);\n    Billing.configure(token);\n    Athena.configure(token);\n\n    if (MyCommaAuth.isAuthenticated()) {\n      await TimelineWorker.init();\n    }\n\n    this.setState({ initialized: true });\n  }\n\n  redirectLink() {\n    let url = '/';\n    if (typeof window.sessionStorage !== 'undefined') {\n      url = sessionStorage.redirectURL || '/';\n    }\n    return url;\n  }\n\n  authRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to={this.redirectLink()} />} />\n        <Route path=\"/\" component={Explorer} />\n      </Switch>\n    );\n  }\n\n  ananymousRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to=\"/\" />} />\n        <Route path=\"/\" component={AnonymousLanding} />\n      </Switch>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <Grid container alignItems=\"center\" style={{ width: '100%', height: '100%' }}>\n        <Grid item align=\"center\" xs={12}>\n          <CircularProgress size=\"10vh\" style={{ color: '#525E66' }} />\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    if (!this.state.initialized) {\n      return this.renderLoading();\n    }\n    return (\n      <Provider store={store}>\n        <ConnectedRouter history={history}>\n          { (MyCommaAuth.isAuthenticated() || this.state.demo) ? this.authRoutes() : this.ananymousRoutes() }\n        </ConnectedRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import Raven from 'raven-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport document from 'global/document';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport MuiPickersUtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider';\nimport DateFnsUtils from 'material-ui-pickers/utils/date-fns-utils';\n\nimport './index.css';\nimport 'react-virtualized/styles.css';\nimport App from './App';\nimport Theme from './theme';\nimport { unregister } from './registerServiceWorker';\n\nif (process.env.NODE_ENV === 'production') {\n  Raven.config(\n    'https://6a242abfa01b4660aa34f150e87de018@sentry.io/1234624',\n    { environment: process.env.NODE_ENV }\n  ).install();\n\n  unregister();\n}\n\nReactDOM.render((\n  <MuiThemeProvider theme={Theme}>\n    <CssBaseline />\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <App />\n    </MuiPickersUtilsProvider>\n  </MuiThemeProvider>\n), document.getElementById('root'));\n"],"sourceRoot":""}