{"version":3,"sources":["timeline/logIndex.js","../../comma-api/dist/errorHandler.js","../../comma-api/dist/config.js","timeline/initialState.js","../../comma-api/dist/config-request-promise.js","../../comma-api/dist/index.js","../../comma-api/dist/account.js","../../comma-api/dist/annotations.js","../../comma-api/dist/validators.js","../../comma-api/dist/athena.js","../../comma-api/dist/auth.js","../../comma-api/dist/billing.js","../../comma-api/dist/devices.js","../../comma-api/dist/derived.js","../../comma-api/dist/drives.js","../../comma-api/dist/leaderboard.js","../../comma-api/dist/raw.js","../../comma-api/dist/vehicles.js","../../comma-api/dist/video.js","timeline/logReader/index.js","timeline/logReader/logReader.worker.js","icons/auth_apple.png","icons/auth_github.png","icons/auth_google.png","../../comma-api/dist/request.js","icons/icon-chffr-wheel.svg","timeline/playback.js","timeline/cache.js","url.js","timeline/segments.js","timeline/reducers/globalState.js","timeline/reducers/index.js","demo/index.js","timeline/actions/types.js","timeline/store.js","timeline/actions/index.js","timeline/startup.js","timeline/commands.js","timeline/timeline.js","timeline/index.js","components/AppHeader/TimeFilter.js","icons/index.js","components/TimeDisplay/index.js","components/AppHeader/index.js","actions/index.js","actions/types.js","utils/index.js","components/Annotations/shopButton.js","components/Annotations/commaTwoUpsell.js","components/Dashboard/DeviceList.js","components/Dashboard/DeviceSettingsModal.js","api/geocode.js","components/Timeline/thumbnails.js","colors.js","theme.js","components/Timeline/index.js","components/Dashboard/DriveListItem.js","utils/conversions.js","components/Dashboard/DriveList.js","components/Dashboard/index.js","components/Annotations/AnnotationListItem.js","components/Annotations/AnnotationList.js","components/Annotations/AnnotationTabs.js","components/DriveMap/index.js","components/DriveVideo/hlsSource.js","components/DriveVideo/canvas.js","components/DriveVideo/buffering.js","components/DriveVideo/index.js","components/Annotations/Media.js","components/Annotations/footer.js","components/Annotations/index.js","components/explorer.js","components/anonymous.js","reducers/workerState.js","reducers/zoom.js","reducers/index.js","devtools.js","store.js","analytics.js","App.js","registerServiceWorker.js","index.js"],"names":["binSearch","index","start","end","milis","nanos","searchIndex","Math","floor","length","indexBuffer","buffer","bufferIndex","offset","calibrations","lastIndex","byteLength","messageBuff","BufferUtils","readMessage","event","capnp","getRoot","Event","monoTime","getLogMonoTime","toString","Number","substr","messageSize","which","EventWhich","LIVE_CALIBRATION","push","toJSON","incAmount","min","splice","createIndex","_buffer","Buffer","from","buffers","addToIndex","_index","_newBuff","newBuff","concat","findMonoTime","curIndex","curMillis","MAX_SAFE_INTEGER","Object","defineProperty","exports","value","default","resolve","reject","handle","err","data","response","statusCode","Error","COMMA_URL_ROOT","ATHENA_URL_ROOT","BILLING_URL_ROOT","VIDEO_HOST","process","COMMA_VIDEO_CDN","module","getDefaultStartDate","d","Date","setHours","getHours","getTime","getDefaultEndDate","dongleId","route","segment","nextSegment","playSpeed","desiredPlaySpeed","shouldBuffer","bufferingVideo","bufferingData","startTime","now","segments","segmentData","loop","duration","profile","devices","isDemo","_promise2","_interopRequireDefault","require","ConfigRequestPromise","cr","_instance2","get","post","patch","wrap","bind","_errorHandler2","obj","__esModule","requestFunc","path","options","account","_interopRequireWildcard","annotations","athena","auth","billing","_derived2","drives","leaderboard","raw","request","vehicles","_video2","newObj","key","prototype","hasOwnProperty","call","derived","errorHandler","video","getProfile","dongle_id","_isFinite2","createAnnotation","_validators","AnnotationValidator","validate","error","getAnnotation","id","updateAnnotation","listAnnotations","_start","_end","_verifyAnnotationStar","verifyAnnotationStartEnd","to","listMyAnnotations","_verifyAnnotationStar2","Joi","object","keys","canonical_segment_name","string","required","offset_nanos_part","number","offset_millis","start_time_utc_millis","end_time_utc_millis","type","reason","comment","allow","optional","configure","undefined","_regenerator2","_asyncToGenerator3","_ref","mark","_callee","accessToken","config","_callee$","_context","prev","next","baseUrl","_config","jwt","parse","token","stop","this","_x","apply","arguments","_ref2","_callee2","endpoint","_callee2$","_context2","ensureInit","abrupt","body","json","_x2","_x3","postJsonRpcPayload","payload","initPromise","refreshAccessToken","code","redirect_uri","provider","authResponseText","resp","postForm","sent","JSON","access_token","status","cancelPrime","updatePaymentMethod","getPaymentMethod","payForPrime","getSubscription","query","_ref3","_callee3","_callee3$","_context3","_x4","_x5","_ref4","_callee4","_callee4$","_context4","_x6","_ref5","_callee5","simId","stripeToken","_callee5$","_context5","sim_id","stripe_token","_x7","_x8","_x9","_ref6","_callee6","_callee6$","_context6","_ref7","_callee7","_callee7$","_context7","_x10","_ref8","_callee8","_callee8$","_context8","_x11","fetchLocation","_stringify2","locationEndpoint","location","listDevices","setDeviceAlias","alias","setDeviceVehicleId","vehicle_id","grantDeviceReadPermission","email","removeDeviceReadPermission","fetchVehicles","vehicleId","vehicleEndpoint","fetchDevice","deviceEndpoint","pilotPair","imei","serial","pairToken","pair_token","fetchDeviceStats","unpair","fetchDeviceOwner","routeApi","routeSigUrl","_configRequestPromise2","getCoords","coords","getJpegUrl","routeOffsetSeconds","_urlJoin2","fetchRoutes","_toConsumableArray3","getSegmentMetadata","parseSegmentMetadata","segmentsFromMetadata","reverse","getRouteInfo","routeName","setRouteRating","rating","getShareSignature","getRouteSegments","listRoutes","limit","createdAfter","params","routeStartTimes","map","round","canonical_route_name","routeOffset","segmentNum","canonical_name","split","segmentsData","curSegment","curVideoStartOffset","forEach","url","proc_log","proc_qlog","segmentHasDriverCamera","proc_dcamera","segmentHasDriverCameraStream","segmentHasVideo","proc_camera","finishSegment","parts","pop","join","startCoord","start_lng","start_lat","replace","events","videoAvailableBetweenOffsets","hasVideo","deviceType","devicetype","hpgps","hasDriverCamera","hasDriverCameraStream","locStart","locEnd","distanceMiles","cameraStreamSegCount","driverCameraStreamSegCount","max","endCoord","end_lng","end_lat","lastVideoRange","slice","getLeaderboard","getCached","urlStore","_querystringify2","stringify","setTimeout","getRouteFiles","getLogUrls","fetchMakes","fetchModels","make","fetchVehicle","_slicedToArray3","videoApi","videoServerHost","_routeSigUrl$split$sl","_routeSigUrl$split$sl2","routeSignature","videoserverRequest","videoserverBaseUrl","storageRequest","getRearCameraStreamIndexUrl","getFrontCameraStreamIndexUrl","getQcameraStreamIndexUrl","getRearCameraStreamIndex","getFrontCameraStreamIndexPath","getQcameraStreamIndex","LogReaderWorker","DataEvent","logReader","handleMessage","msg","broadcast","relayMessage","port","postMessage","getWorker","channel","MessageChannel","logPort","port1","apiPort","port2","onmessage","onData","listen","Worker","_errorHandlerFn","headers","initialState","currentOffset","state","loopOffset","cachePort","ExpireEvent","onExpire","command","getEntry","touch","partial","getDongleID","pathname","filter","m","getZoom","getCurrentSegment","o","i","len","thisSegment","segmentIndex","startOffset","getNextSegment","lastEngage","vidAvail","sort","a","b","route_offset_millis","route_offset_nanos","end_offset_nanos","offset_nanos","end_offset_millis","end_route_offset_nanos","end_route_offset_millis","isFinite","API","hasSegmentMetadata","console","log","_segments","_segment","events_json","plannedDisengageEvents","should_take_control","_event","timestamp","annotation","is_planned","alert","reduce","closestAlert","nextAlert","closestAlertDiff","abs","alertText2","warn","time","hasCameraAtOffset","some","int","updateSegments","fetchSegmentMetadata","promise","insertSegmentMetadata","resolveAnnotation","SEGMENT_LENGTH","reducer","_state","action","found","s","e","warning","currentSegment","range","isDemoCached","reducers","globalState","deviceIndex","device","find","create_time","device_type","is_owner","findIndex","store","createStore","reduceReducers","speed","buffering","isBuffering","Segments","Reducers","isDemoQuery","qs","window","search","demo","init","localforage","getItem","selectDevice","demoProfile","demoDevices","dispatch","Devices","Account","PortState","CreateStore","initAuthPromise","Auth","then","Request","hasGottenSegmentData","hasGottenSegmentDataPromise","Promise","segmentDataHandler","Demo","selectDeviceAction","all","subscribe","getState","commands","close","unlisten","broadcastChannel","play","Playback","pause","seek","bufferVideo","bufferData","disableBuffer","hello","selectTimeRange","selectTimeRangeAction","selectLoop","updateDevice","updateDeviceAction","ports","setCachePort","Cache","demoSegments","BroadcastEvent","DataLogEvent","SegmentTimerStore","segmentsRequest","annotationsRequest","scheduleSegmentUpdate","timeUntilNext","stopTimer","curTime","timeUntilLoop","loopStartOffset","loopStartSegment","timeout","checkSegmentMetadata","annotationsData","Drives","Annotations","stack","ensureSegmentDataTimer","ensureSegmentData","entry","UnloadEvent","StateEvent","IndexEvent","InitEvent","InitPromise","addEventListener","startPath","timeline","onStateChange","onIndexed","requestId","openRequests","expire","hasInit","readyPromise","zoom","AuthStorage","getCommaAccessToken","handleData","disconnect","setState","LogIndex","getStartMonoTime","getIndex","currentLogMonoTime","logIndex","lastEvents","_eventCount","logMonoTime","getLogIndex","eventCount","Array","u","getEvent","getNextLogIndex","_logIndex","CapnpEvent","timestampToOffset","firstFrameTime","FRAME","Frame","TimestampEof","currentInitData","curSegLog","INIT_DATA","currentModel","getEventByType","MODEL","currentModelV2","MODEL_V2","currentRadarState","RADAR_STATE","currentMPC","LIVE_MPC","currentCarState","CAR_STATE","currentControlsState","CONTROLS_STATE","currentDriverMonitoring","DRIVER_MONITORING","currentThumbnail","THUMBNAIL","currentLiveCalibration","maxTimeDiff","curSegNum","getCalibration","indexes","TimeSelect","props","handleSelectChange","handleClose","changeStart","changeEnd","handleSave","showPicker","selection","target","Timelineworker","selectedOption","timeRange","lastWeekText","weekAgo","fecha","format","last2WeeksText","twoWeeksAgo","last24HoursText","render","minDate","toISOString","name","onChange","className","classes","headerDropdown","aria-labelledby","aria-describedby","open","onClose","modal","label","showTodayButton","buttonGroup","variant","onClick","color","Component","stateToProps","Obstruction","connect","withStyles","styles","theme","root","position","padding","spacing","unit","width","margin","left","top","transform","textAlign","fontWeight","marginRight","minWidth","auth_apple","auth_github","auth_google","AccountIcon","HistoryBackIcon","HistoryForwardIcon","transform-origin","CommaIcon","chevronPath","rotation","ChevronIcon","DownArrow","UpArrow","RightArrow","timerSteps","jumpBack","amount","TimelineWorker","jumpForward","TimeDisplay","textHolder","React","createRef","updateTime","togglePause","increaseSpeed","decreaseSpeed","displayTime","getDisplayTime","componentDidMount","mounted","raf","componentWillUnmount","current","newDisplayTime","indexOf","isPaused","cx","base","isExpanded","expanded","isThin","container","item","xs","align","iconBox","aria-label","icon","dateTime","style","paddingTop","ref","currentTime","alignItems","direction","tinyArrow","tinyArrowIcon","backgroundColor","palette","grey","height","borderRadius","maxWidth","opacity","pointerEvents","transition","paddingBottom","border","display","iconButton","maxHeight","borderRight","justifyContent","fontSize","marginTop","AppHeader","handleClickedAccount","handleLogOut","anchorEl","currentTarget","removeItem","MyCommaAuth","logOut","Boolean","lg","Link","logo","src","logoImg","logoText","timeDisplay","selectArea","TimeFilter","aria-owns","aria-haspopup","accountIcon","anchorOrigin","vertical","horizontal","transformOrigin","userMeta","disableGutters","paragraph","points","component","href","borderBottom","textDecoration","fontFamily","marginLeft","paddingRight","outline","white","userMetaLink","selectRange","workerState","curPath","document","desiredPath","urlForState","filterEvent","ShopButton","link","shopLink","CommaTwoUpsell","imageContainer","eon","content","hook","DeviceList","editingDevice","deviceAlias","isWaitingForApi","handleAliasChange","handleAliasFieldKeyPress","renderDevice","toggleDeviceEdit","cancelEdit","componentWillReceiveProps","nextProps","selectedDevice","handleDeviceSelected","trim","Raven","captureException","message","deviceTypePretty","onlyHasAppDevice","shared","filterDrivingDevice","isSelected","deviceAvatar","deviceInfo","deviceId","isSuperUser","overflowY","cursor","flexDirection","editDeviceIcon","nameField","saveButton","textField","marginBottom","DeviceSettingsModal","loadingDeviceAlias","loadingDeviceShare","hasSavedAlias","shareEmail","handleEmailChange","callOnEnter","shareDevice","hasShared","method","isOpen","form","formRow","onKeyPress","wrapper","size","fabProgress","minHeight","zIndex","MAPBOX_TOKEN","mbxGeocoding","geocodingClient","geocodeApi","getNeighborhood","context","getLocality","getRegion","reverseLookup","reverseGeocode","send","features","region","short_code","locality","text","_neighborhood","neighborhood","renderImage","imgStyles","blank","backgroundSize","backgroundRepeat","backgroundImage","backgroundPosition","startImage","Thumbnails","thumbnail","imgCount","ceil","gutter","imgArr","percentToOffset","seconds","imageIndex","endImage","endOffset","Colors","transparent","white10","white12","white20","white30","white40","white50","black","blue50","blue100","blue200","blue300","blue400","blue500","blue600","blue700","blue800","blue900","blue950","blue999","lightBlue50","lightBlue100","lightBlue200","lightBlue300","lightBlue400","lightBlue500","lightBlue600","lightBlue700","lightBlue800","lightBlue900","desatBlue800","red50","red100","red200","red300","red400","red500","red600","red700","red800","red900","lightRed50","lightRed100","lightRed200","lightRed300","lightRed400","lightRed500","lightRed600","lightRed700","lightRed800","lightRed900","lightRed950","lightRed999","green50","green100","green200","green300","green400","green500","green600","green700","green800","green900","lightGreen50","lightGreen100","lightGreen200","lightGreen300","lightGreen400","lightGreen500","lightGreen600","lightGreen700","lightGreen800","lightGreen900","orange50","orange100","orange200","orange300","orange400","orange500","orange600","orange700","orange800","orange900","lightOrange50","lightOrange100","lightOrange200","createMuiTheme","typography","overrides","MuiPaper","MuiSelect","select","selectMenu","MuiInput","grey800","overflow","input","MuiFormLabel","MuiTab","disableUnderline","IconComponent","placeholder","background","grey999","primary","light","grey50","main","grey900","dark","states","drivingBlue","engagedGreen","alertOrange","alertRed","50","100","grey100","200","grey200","300","grey300","400","grey400","500","grey500","600","grey600","700","grey700","800","900","950","grey950","999","lightGrey","lightGrey200","10","12","20","30","40","AlertStatusCodes","percentFromMouseEvent","boundingBox","getBoundingClientRect","pageX","Timeline","getOffset","handleClick","handleMouseMove","handleMouseDown","handleMouseUp","handleMouseLeave","renderSegment","sendSeek","debounce","offsetValue","rulerRemaining","rulerRemainingHovered","dragBar","hoverBead","zoomOverride","dragStart","mouseX","hoverPercent","isHovered","componentWillMount","stopListening","forceUpdate","removeEventListener","seekIndex","percent","offsetToPercent","parentElement","isDragSelecting","noseek","dragSelection","querySelector","dragEnd","selectedArea","startPercent","endPercent","endTime","x","toFixed","perc","zoomed","renderDragger","draggerStyle","dragHighlight","renderZoom","endColor","zoomStart","zoomEnd","barStyle","colored","startPerc","widthPerc","zoomDuration","renderSegmentEvents","uncoloredSegment","localStorage","showCurrentEvent","eventStart","eventEnd","segmentColor","alertStatus","hasThumbnails","tooltipped","hasRuler","rounded","hasGradient","hoverOffset","timeString","isNaN","timestampAtOffset","role","onMouseDown","onMouseUp","onMouseMove","onMouseLeave","ruler","statusGradient","title","bounds","onResize","rect","measureRef","thumbnails","mapStateToProps","bottom","borderLeft","whiteSpace","userSelect","DriveListDrive","startLocation","endLocation","handleDriveClicked","drive","GeocodeApi","startDate","formatDriveDuration","milliseconds","minutes","hours","getDrivePoints","classNames","driveHeader","driveHeaderIntro","driveAvatar","driveTitle","driveArrow","driveTimeline","paddingLeft","DriveList","goToAnnotation","filterShortDrives","renderDriveListHeader","renderDriveListSettings","handleClickedSettings","handleClosedSettings","handleOpenedSettingsModal","handleCanceledSettings","handleClosedSettingsModal","showDeviceSettingsModal","deviceAliasSaved","ride","zoomBuffer","driveList","lastEnd","lastSegmentEnd","curRideChunk","unshift","memo","renderZeroRides","DriveListItem","zeroRidesEle","zeroState","header","headerLabel","settingsArea","settingsButton","settingsButtonIcon","onCancel","textTransform","Dashboard","firstAnnotationSegment","count","segCount","sidebar","sidebarHeader","annotateButton","selectedDongleId","flexGrow","DISENGAGEMENT_REASONS","AnnotationEntry","handleChange","handleComment","saving","errorElem","isJoi","eventId","dateString","selectClassName","defaultExpanded","summaryContent","bubble","heading","getTitle","date","pillBody","pillText","alignContent","renderFormField","disabled","displayEmpty","inputProps","isPlanned","disengagementReason","reasonDetailed","panelActions","disableFocusListener","disableHoverListener","resolveButton","cancelButton","formField","toLowerCase","formLabel","formLabelText","PureComponent","AnnotationList","list","memoize","resolved","unresolved","filterEntry","recomputeList","recomputeRowHeights","forceUpdateGrid","handleExpanded","loopStartTime","LOOP_DURATION","loopEndTime","getRowHeight","renderEntry","AnnotationListItem","overscanRowCount","rowCount","rowHeight","rowRenderer","AnnotationTabs","selectedTab","annotationsViewer","indicator","annotationsViewerTabIndicator","annotationsViewerTabs","tabLabelText","badge","tabLabelBadge","badgeContent","annotationsViewerList","renderTab","right","DriveMap","populateMap","isLoadingCoords","DerivedDataApi","coordsArr","coord","lng","lat","setPath","initMap","posAtOffset","updateMarkerPos","nextRoute","viewport","latitude","longitude","shouldFlyTo","getMarkerSource","getMap","getSource","markerSource","pos","setData","coordinates","moveViewportTo","_data","transitionDuration","transitionInterpolator","LinearInterpolator","properties","geometry","offsetSeconds","offsetFractionalPart","coordIdx","nextCoordIdx","floorLng","floorLat","mapComponent","on","addSource","addLayer","source","layout","paint","contentRect","mapContainer","mapStyle","onViewportChange","mapboxApiAccessToken","attributionControl","dragPan","HLSSource","hls","Hls","enableWorker","disablePtsDtsCorrectionInMp4Remux","Events","MANIFEST_PARSED","BUFFER_APPENDED","eventName","onBufferAppend","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","destroy","componentWillUpdate","nextState","detachMedia","componentDidUpdate","prevProps","prevState","loadSource","attachMedia","onSourceLoaded","roundedRectPath","ctx","radius","K","SQRT2","beginPath","moveTo","lineTo","bezierCurveTo","Buffering","thickness","wheelImg","Image","tici_intrinsic","tici_vwp_w","tici_vwp_h","eon_intrinsic","eon_vwp_w","eon_vwp_h","VideoPreview","checkDataBuffer","isDataBuffering","monoTimeLength","lastEvent","nextEvent","LogMonoTime","nextEventTime","monSec","checkVideoBuffer","videoPlayer","front","wasConnected","stopListeningToVideo","subscribeToStateChange","shouldShowPreview","bufferTime","playerState","player","buffered","desiredVideoTime","currentVideoTime","curVideoTime","timeDiff","desiredBufferedVideoTime","remainingTime","buf","waiting","seeking","timeDiffAbs","paused","updatePreviewImage","shouldShowThumbnail","playbackRate","imageRef","nearestImageFrame","updatePreview","onDisableBuffering","canvas_road","canvas_lead","canvas_carstate","canvas_maxspeed","canvas_speed","canvas_face","intrinsic","vwp_w","vwp_h","video_height","frame","rafLoop","updateVideoSource","cancel","VideoApi","catch","load","renderCanvas","retVal","thumbnailMonoTime","thumbnailTimeDiff","base64","btoa","String","fromCharCode","Uint8Array","Thumbnail","thumbnailData","calibration","shouldScale","driverMonitoring","renderEventToCanvas","renderDriverMonitoring","shouldShowUI","lastCalibrationTime","extrinsic","LiveCalibration","ExtrinsicMatrix","init_data","is_tici","InitData","DeviceType","live_calibration","model","modelv2","mpc","controlsState","drawLaneFull","radarState","renderLeadCars","carState","renderCarState","initData","renderMaxSpeed","renderSpeed","canvas","renderEvent","logTime","monoIndex","getContext","setTransform","clearRect","_events","needsRender","eventsSig","scale","lastRadarStateMonoTime","leadOne","RadarState","LeadOne","leadTwo","LeadTwo","Status","renderLeadCar","leadData","is2ndCar","drel","DRel","vrel","VRel","yrel","YRel","carSpaceToImageSpace","y","sz","fillAlpha","fillStyle","lineWidth","g_xo","g_yo","fill","drawLaneBoundaryV2","ModelV2","LaneLines","LaneLineProbs","RoadEdges","RoadEdgeStds","drawLaneTrackV2","Position","drawLaneBoundary","Model","LeftLane","RightLane","drawLaneTrack","Path","LiveMpc","isMpc","isEnabled","ControlsState","Enabled","lane","Prob","Points","Poly","drawLaneLine","Std","off","isGhost","started","px","py","closePath","strokeStyle","stroke","lines","certainty","isStds","rgba","drawLaneLineV2","X","Y","pz","Z","track_bg","path_height","createLinearGradient","addColorStop","drawCarStateBorder","drawCarStateWheel","CarState","drawSpeed","VEgo","isMetric","Params","Entries","Key","Value","textBaseline","font","fillText","drawMaxSpeed","maxSpeed","VCruise","maxSpeedCalc","isCruiseSet","fillRoundedRect","bdr_s","strokeRoundedRect","strokeWidth","DecelForTurnDEPRECATED","turnSpeed","VCurvatureDEPRECATED","arc","PI","translate","rotate","SteeringAngle","save","wheelImgPattern","createPattern","strokeRect","DriverMonitoring","FaceProb","xW","xOffset","noseSize","isDistracted","FacePosition","v","toX","toY","flatMatrix","rot_matrix","FaceOrientation","p1","matmul","p2","isBlinking","LeftBlinkProb","RightBlinkProb","LeftEyeProb","RightEyeProb","pose","getDriverPose","pitch_error","pitch","yaw_error","yaw","sqrt","pow","angles_desc","pos_desc","pitch_net","yaw_net","roll_net","face_pixel_position","yaw_focal_angle","atan2","FULL_W","roll","H","cos","sr","sin","cp","sp","cy","sy","rr","rp","ry","multiply","matrix","b0","b1","b2","b3","videoContainer","hidden","autoPlay","muted","fluid","isVideoChild","disableCompletely","videoUiCanvas","videoImage","MediaType","Media","renderMediaOptions","inView","DriveVideo","onVideoChange","noVideo","mediaOptions","mediaOption","mediaOptionText","mediaOptionDisabled","mediaOptionIcon","mediaSource","mediaSourceSelect","demoFiles","AnnotationsFooter","copySegmentName","downloadSegmentFile","openInCabana","showCopiedSnack","el","createElement","setAttribute","appendChild","execCommand","removeChild","snackTimer","seg","segmentKeyPath","files","RawApi","seekTime","routeStartTime","win","focus","footerButton","ContentProps","renderAnnotationsElement","visibleSegment","headerContext","history","back","headerTitle","headerActions","headerTimeline","viewer","footer","ExplorerApp","settingDongle","checkProps","isZoomed","wasZoomed","curDongle","DEMO_LINK","origin","AnonymousLanding","sessionStorage","redirectURL","script","onload","AppleID","clientId","AuthConfig","APPLE_CLIENT_ID","scope","APPLE_SCOPES","redirectURI","APPLE_REDIRECT_URI","usePopup","async","APPLE_REDIRECT_PATH","detail","authorization","tagline","GOOGLE_REDIRECT_LINK","logInButton","logInText","signIn","GITHUB_REDIRECT_LINK","demoLink","demoLinkText","lineHeight","verticalAlign","extend","composeEnhancers","getComposeEnhancers","compose","createBrowserHistory","initGoogleAnalytics","gtag","page_title","page_location","page_path","Redux","connectRouter","thunk","routerMiddleware","updateState","App","initialized","cancelInit","Collector","initDemoTimeline","Jepsen","initDemoState","callback","checkDemo","setItem","GOOGLE_REDIRECT_PATH","GITHUB_REDIRECT_PATH","AuthApi","GOOGLE_REDIRECT_URI","GItHUB_REDIRECT_URI","setCommaAccessToken","isAuthenticated","redirectLink","authRoutes","Switch","Route","Redirect","Explorer","ananymousRoutes","renderLoading","hostname","match","environment","install","unregister","navigator","serviceWorker","ready","registration","ReactDOM","Theme","utils","DateFnsUtils","getElementById"],"mappings":"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","file":"static/js/main.7bb92a83.chunk.js","sourcesContent":["import * as capnp from 'capnp-ts';\nimport toJSON from '@commaai/capnp-json';\nimport BufferUtils from 'capnp-split/buffer';\nimport { Event, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\n\n// IE\nif (!Number.MAX_SAFE_INTEGER) {\n  Number.MAX_SAFE_INTEGER = (2 ** 53) - 1;\n}\n\nfunction binSearch(index, start, end, milis, nanos) {\n  if (start >= end) {\n    return start;\n  }\n  const searchIndex = Math.floor((end - start) / 2) + start;\n  // searchIndex wont equal end, only start\n\n  if (milis < index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos < index[searchIndex][1])) {\n    return binSearch(index, start, searchIndex, milis, nanos);\n  }\n  if (milis > index[searchIndex][0]\n    || (milis === index[searchIndex][0] && nanos > index[searchIndex][1])) {\n    if (searchIndex === index.length - 1\n      || milis < index[searchIndex + 1][0]\n      || (milis === index[searchIndex + 1][0] && nanos < index[searchIndex + 1][1])) {\n      return searchIndex;\n    }\n    return binSearch(index, searchIndex + 1, end, milis, nanos);\n  }\n  return searchIndex;\n}\n\nfunction indexBuffer(index, buffer, bufferIndex) {\n  let offset = 0;\n  const calibrations = [];\n  let lastIndex = index.length ? index.length - 1 : 0;\n  // debugger;\n\n  while (offset < buffer.byteLength) {\n    const messageBuff = BufferUtils.readMessage(buffer, offset);\n    const msg = new capnp.Message(messageBuff, false);\n    const event = msg.getRoot(Event);\n    const monoTime = event.getLogMonoTime().toString();\n    const milis = Number(monoTime.substr(0, monoTime.length - 6));\n    const nanos = Number(monoTime.substr(-6, 6));\n    const messageSize = messageBuff.byteLength;\n    const which = event.which();\n\n    if (which === EventWhich.LIVE_CALIBRATION) {\n      calibrations.push(toJSON(event));\n    }\n\n    if (!index.length\n      || (milis > index[index.length - 1][0]\n      || (milis === index[index.length - 1][0] && nanos > index[index.length - 1][1]))) {\n      index.push([\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n      lastIndex = index.length - 1;\n    } else {\n      let searchIndex = lastIndex;\n      let incAmount = 1;\n      // debugger;\n      while (searchIndex < index.length - 1\n        && (milis > index[searchIndex][0]\n        || (milis === index[searchIndex][0] && nanos > index[searchIndex][1]))) {\n        incAmount = Math.min(Math.floor(index.length - searchIndex / 2), incAmount * 2);\n        searchIndex = Math.min(searchIndex + incAmount, index.length - 1);\n      }\n      // debugger;\n      searchIndex = binSearch(index, searchIndex - incAmount, searchIndex, milis, nanos);\n      // debugger;\n      searchIndex += 1;\n      lastIndex = searchIndex;\n\n      index.splice(searchIndex, 0, [\n        milis,\n        nanos,\n        offset,\n        messageSize,\n        bufferIndex,\n        which\n      ]);\n    }\n    offset += messageSize;\n  }\n\n  return calibrations;\n}\n\nexport function createIndex(_buffer) {\n  const buffer = Buffer.from(_buffer);\n  const index = [];\n\n  const calibrations = indexBuffer(index, buffer, 0);\n\n  return {\n    index,\n    buffers: [buffer],\n    calibrations\n  };\n}\n\nexport function addToIndex(_index, _newBuff) {\n  const newBuff = Buffer.from(_newBuff);\n  const index = _index;\n  index.buffers.push(newBuff);\n  const calibrations = indexBuffer(index.index, newBuff, index.buffers.length - 1);\n  index.calibrations = index.calibrations.concat(calibrations);\n\n  return index;\n}\n\nexport function findMonoTime(index, monoTime, start = 0, end = index.index.length) {\n  if (start === index.index.length) {\n    return index.index.length - 1;\n  }\n  if (start >= end) {\n    return end;\n  }\n  // index is floored so always increase start\n  const curIndex = Math.floor((end - start) / 2 + start);\n  const curMillis = index.index[curIndex][0];\n  // we can have duplicates so we treat matches as being too high since we're\n  // looking for the first instance of a duplicate\n  if (monoTime < curMillis) {\n    return findMonoTime(index, monoTime, start, curIndex);\n  }\n  if (monoTime > curMillis) {\n    return findMonoTime(index, monoTime, curIndex + 1, end);\n  }\n\n  return curIndex;\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (resolve, reject) {\n  return handle;\n\n  function handle(err, data, response) {\n    if (err) {\n      if (err.statusCode === 0) {\n        err = new Error('There was an unexpected server error, please try again later.');\n      }\n      return reject(err);\n    }\n    resolve(data);\n  }\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar COMMA_URL_ROOT = exports.COMMA_URL_ROOT = 'https://api.commadotai.com/';\nvar ATHENA_URL_ROOT = exports.ATHENA_URL_ROOT = 'https://athena.comma.ai/';\nvar BILLING_URL_ROOT = exports.BILLING_URL_ROOT = 'https://billing.comma.ai/';\nvar VIDEO_HOST = exports.VIDEO_HOST = process.env.COMMA_VIDEO_CDN;\nif (!VIDEO_HOST) {\n  exports.VIDEO_HOST = VIDEO_HOST = 'https://my-comma-video.azureedge.net';\n}","\nfunction getDefaultStartDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  return (new Date(d.getTime() - 1000 * 60 * 60 * 24 * 14)).getTime();\n}\n\nfunction getDefaultEndDate() {\n  const d = new Date();\n  d.setHours(d.getHours() + 1, 0, 0, 0);\n\n  // return (new Date(d.getTime() - 1000 * 60 * 60 * 36)).getTime();\n  return d.getTime();\n}\n\nmodule.exports = {\n  start: getDefaultStartDate(),\n  end: getDefaultEndDate(),\n\n  // dongleId: '99c94dc769b5d96e',\n  // dongleId: 'ff83f397542ab647',\n  // dongleId: 'f1b4c567731f4a1b',\n  dongleId: null,\n\n  route: false,\n  segment: 0,\n  nextSegment: null,\n  playSpeed: 0, // 0 = stopped, 1 = playing, 2 = 2x speed... multiplier on speed\n  desiredPlaySpeed: 0, // the speed the user has selected so that buffering can resume\n  shouldBuffer: true, // if we should bother waiting for buffered data or just roll on\n  bufferingVideo: false, // if we're currently buffering for more data\n  bufferingData: false, // if we're currently buffering for more data\n  offset: 0, // in miliseconds from the start\n  startTime: Date.now(), // millisecond timestamp in which play began\n\n  segments: [],\n  // this data should come from the API server instead\n  // segments: [{\n  //   route: '99c94dc769b5d96e|2018-04-09--10-10-00',\n  //   offset: 10000,\n  //   length: 2558000,\n  //   segments: 43\n  // }, {\n  //   route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n  //   offset: 2658000,\n  //   length: 214000,\n  //   segments: 4\n  // }],\n\n  segmentData: null,\n\n  loop: {\n    // in time instead of offset\n    // this makes it so that the timespan can change without this changing\n    // thats helpful to shared links and other things probably...\n    startTime: null,\n    duration: null\n  },\n\n  profile: {},\n  devices: [],\n  isDemo: false,\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.default = ConfigRequestPromise;\n\nvar _instance = require('config-request/instance');\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _errorHandler = require('./errorHandler');\n\nvar _errorHandler2 = _interopRequireDefault(_errorHandler);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ConfigRequestPromise() {\n  var cr = (0, _instance2.default)();\n  var origGet = cr.get,\n      origPost = cr.post,\n      origPatch = cr.patch;\n\n  cr.get = wrap(cr.get.bind(cr));\n  cr.post = wrap(cr.post.bind(cr));\n  cr.patch = wrap(cr.patch.bind(cr));\n\n  return cr;\n}\n\nvar wrap = function wrap(requestFunc) {\n  return function (path, options) {\n    return new _promise2.default(function (resolve, reject) {\n      requestFunc(path, options || {}, (0, _errorHandler2.default)(resolve, reject));\n    });\n  };\n};","'use strict';\n\nvar _account = require('./account');\n\nvar account = _interopRequireWildcard(_account);\n\nvar _annotations = require('./annotations');\n\nvar annotations = _interopRequireWildcard(_annotations);\n\nvar _athena = require('./athena');\n\nvar athena = _interopRequireWildcard(_athena);\n\nvar _auth = require('./auth');\n\nvar auth = _interopRequireWildcard(_auth);\n\nvar _billing = require('./billing');\n\nvar billing = _interopRequireWildcard(_billing);\n\nvar _devices = require('./devices');\n\nvar devices = _interopRequireWildcard(_devices);\n\nvar _derived = require('./derived');\n\nvar _derived2 = _interopRequireDefault(_derived);\n\nvar _errorHandler = require('./errorHandler');\n\nvar _errorHandler2 = _interopRequireDefault(_errorHandler);\n\nvar _drives = require('./drives');\n\nvar drives = _interopRequireWildcard(_drives);\n\nvar _leaderboard = require('./leaderboard');\n\nvar leaderboard = _interopRequireWildcard(_leaderboard);\n\nvar _raw = require('./raw');\n\nvar raw = _interopRequireWildcard(_raw);\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nvar _vehicles = require('./vehicles');\n\nvar vehicles = _interopRequireWildcard(_vehicles);\n\nvar _video = require('./video');\n\nvar _video2 = _interopRequireDefault(_video);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nmodule.exports = {\n  account: account,\n  annotations: annotations,\n  athena: athena,\n  auth: auth,\n  billing: billing,\n  devices: devices,\n  derived: _derived2.default,\n  drives: drives,\n  errorHandler: _errorHandler2.default,\n  leaderboard: leaderboard,\n  raw: raw,\n  request: request,\n  vehicles: vehicles,\n  video: _video2.default\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getProfile = getProfile;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction getProfile(dongle_id) {\n  var profile = dongle_id || 'me';\n\n  return request.get('v1/' + profile + '/');\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isFinite = require('babel-runtime/core-js/number/is-finite');\n\nvar _isFinite2 = _interopRequireDefault(_isFinite);\n\nexports.createAnnotation = createAnnotation;\nexports.getAnnotation = getAnnotation;\nexports.updateAnnotation = updateAnnotation;\nexports.listAnnotations = listAnnotations;\nexports.listMyAnnotations = listMyAnnotations;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nvar _validators = require('./validators');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createAnnotation(data) {\n  data = _validators.AnnotationValidator.validate(data);\n  if (data.error) {\n    throw data.error;\n  }\n  data = data.value;\n\n  return request.post('v1/annotations/new', data);\n}\n\nfunction getAnnotation(id) {\n  return request.get('v1/annotations/' + id);\n}\n\nfunction updateAnnotation(id, data) {\n  return request.patch('v1/annotations/' + id, { data: data });\n}\n\nfunction listAnnotations(_start, _end, dongleId) {\n  if (!dongleId.length) {\n    throw new Error('Invalid or empty dongleId');\n  }\n\n  var _verifyAnnotationStar = verifyAnnotationStartEnd(_start, _end),\n      start = _verifyAnnotationStar.start,\n      end = _verifyAnnotationStar.end;\n\n  return request.get('v1/devices/' + dongleId + '/annotations/', {\n    from: start,\n    to: end\n  });\n}\n\nfunction listMyAnnotations(_start, _end) {\n  var _verifyAnnotationStar2 = verifyAnnotationStartEnd(_start, _end),\n      start = _verifyAnnotationStar2.start,\n      end = _verifyAnnotationStar2.end;\n\n  return request.get('v1/me/annotations/', {\n    from: start,\n    to: end\n  });\n}\n\nfunction verifyAnnotationStartEnd(start, end) {\n  start = Number(start);\n  end = Number(end);\n\n  if (!(0, _isFinite2.default)(start)) {\n    throw new Error('Invalid start time');\n  }\n  if (!(0, _isFinite2.default)(end)) {\n    throw new Error('Invalid end time');\n  }\n\n  return { start: start, end: end };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Joi = require('joi-browser');\n\nvar AnnotationValidator = exports.AnnotationValidator = Joi.object().keys({\n  canonical_segment_name: Joi.string().required(),\n  offset_nanos_part: Joi.number().required(),\n  offset_millis: Joi.number().required(),\n  start_time_utc_millis: Joi.number().required(),\n  end_time_utc_millis: Joi.number().required(),\n  type: Joi.string().required(),\n  data: Joi.object().keys({\n    reason: Joi.string().required(),\n    comment: Joi.string().allow('').optional()\n  })\n});","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.post = exports.configure = undefined;\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar configure = exports.configure = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(accessToken) {\n    var config;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            config = {\n              baseUrl: _config.ATHENA_URL_ROOT,\n              jwt: false,\n              parse: null\n            };\n\n\n            if (accessToken) {\n              config.token = 'JWT ' + accessToken;\n            }\n\n            request.configure(config);\n\n          case 3:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function configure(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar post = exports.post = function () {\n  var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context2.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.post(endpoint, {\n                body: data,\n                json: true\n              }, (0, _errorHandler2.default)(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function post(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexports.postJsonRpcPayload = postJsonRpcPayload;\n\nvar _instance = require('config-request/instance');\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _errorHandler = require('./errorHandler');\n\nvar _errorHandler2 = _interopRequireDefault(_errorHandler);\n\nvar _config = require('./config');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar request = (0, _instance2.default)();\nvar initPromise;\nfunction ensureInit() {\n  if (!initPromise) {\n    initPromise = configure();\n  }\n  return initPromise;\n}\n\nfunction postJsonRpcPayload(dongleId, payload) {\n  return post(dongleId, payload);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.refreshAccessToken = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar refreshAccessToken = exports.refreshAccessToken = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(code, redirect_uri, provider) {\n    var authResponseText, resp;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return request.postForm('v2/auth/', { code: code, redirect_uri: redirect_uri, provider: provider });\n\n          case 2:\n            authResponseText = _context.sent;\n            resp = JSON.parse(authResponseText);\n\n            if (!(resp.access_token != null)) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 7;\n            return request.configure(resp.access_token);\n\n          case 7:\n            return _context.abrupt('return', resp.access_token);\n\n          case 10:\n            if (!(resp.response !== undefined)) {\n              _context.next = 14;\n              break;\n            }\n\n            throw new Error('Could not exchange oauth code for access token: response ' + resp.response.status);\n\n          case 14:\n            throw new Error('Could not exchange oauth code for access token: response ' + authResponseText);\n\n          case 15:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function refreshAccessToken(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cancelPrime = exports.updatePaymentMethod = exports.getPaymentMethod = exports.payForPrime = exports.getSubscription = exports.configure = undefined;\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar configure = exports.configure = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(accessToken) {\n    var config;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            config = {\n              baseUrl: _config.BILLING_URL_ROOT,\n              jwt: false,\n              parse: null\n            };\n\n\n            if (accessToken) {\n              config.token = 'JWT ' + accessToken;\n            }\n\n            request.configure(config);\n\n          case 3:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function configure(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar get = function () {\n  var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context2.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.get(endpoint, {\n                query: data,\n                json: true\n              }, (0, _errorHandler2.default)(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function get(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar post = function () {\n  var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context3.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.post(endpoint, {\n                body: data,\n                json: true\n              }, (0, _errorHandler2.default)(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this);\n  }));\n\n  return function post(_x4, _x5) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar getSubscription = exports.getSubscription = function () {\n  var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(dongleId) {\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt('return', get('v1/prime/subscription', { dongle_id: dongleId }));\n\n          case 1:\n          case 'end':\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n\n  return function getSubscription(_x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar payForPrime = exports.payForPrime = function () {\n  var _ref5 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5(dongleId, simId, stripeToken) {\n    return _regenerator2.default.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt('return', post('v1/prime/pay', { dongle_id: dongleId, sim_id: simId, stripe_token: stripeToken }));\n\n          case 1:\n          case 'end':\n            return _context5.stop();\n        }\n      }\n    }, _callee5, this);\n  }));\n\n  return function payForPrime(_x7, _x8, _x9) {\n    return _ref5.apply(this, arguments);\n  };\n}();\n\nvar getPaymentMethod = exports.getPaymentMethod = function () {\n  var _ref6 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6() {\n    return _regenerator2.default.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt('return', get('v1/prime/payment_source'));\n\n          case 1:\n          case 'end':\n            return _context6.stop();\n        }\n      }\n    }, _callee6, this);\n  }));\n\n  return function getPaymentMethod() {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar updatePaymentMethod = exports.updatePaymentMethod = function () {\n  var _ref7 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7(stripe_token) {\n    return _regenerator2.default.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt('return', post('v1/prime/payment_source', { stripe_token: stripe_token }));\n\n          case 1:\n          case 'end':\n            return _context7.stop();\n        }\n      }\n    }, _callee7, this);\n  }));\n\n  return function updatePaymentMethod(_x10) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nvar cancelPrime = exports.cancelPrime = function () {\n  var _ref8 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8(dongleId) {\n    return _regenerator2.default.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            return _context8.abrupt('return', post('v1/prime/cancel', { dongle_id: dongleId }));\n\n          case 1:\n          case 'end':\n            return _context8.stop();\n        }\n      }\n    }, _callee8, this);\n  }));\n\n  return function cancelPrime(_x11) {\n    return _ref8.apply(this, arguments);\n  };\n}();\n\nvar _instance = require('config-request/instance');\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _errorHandler = require('./errorHandler');\n\nvar _errorHandler2 = _interopRequireDefault(_errorHandler);\n\nvar _config = require('./config');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar request = (0, _instance2.default)();\nvar initPromise;\nfunction ensureInit() {\n  if (!initPromise) {\n    initPromise = configure();\n  }\n  return initPromise;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchLocation = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar fetchLocation = exports.fetchLocation = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(dongleId) {\n    var locationEndpoint, location;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            locationEndpoint = 'v1/devices/' + dongleId + '/location';\n            _context.next = 3;\n            return request.get(locationEndpoint);\n\n          case 3:\n            location = _context.sent;\n\n            if (!(location !== undefined && location.error === undefined)) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt('return', location);\n\n          case 8:\n            throw Error(\"Could not fetch device location: \" + (0, _stringify2.default)(location));\n\n          case 9:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchLocation(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.listDevices = listDevices;\nexports.setDeviceAlias = setDeviceAlias;\nexports.setDeviceVehicleId = setDeviceVehicleId;\nexports.grantDeviceReadPermission = grantDeviceReadPermission;\nexports.removeDeviceReadPermission = removeDeviceReadPermission;\nexports.fetchVehicles = fetchVehicles;\nexports.fetchDevice = fetchDevice;\nexports.pilotPair = pilotPair;\nexports.fetchDeviceStats = fetchDeviceStats;\nexports.unpair = unpair;\nexports.fetchDeviceOwner = fetchDeviceOwner;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction listDevices() {\n  return request.get('v1/me/devices/');\n} // Devices API\n// ~~~~~~~~~~~\n\nfunction setDeviceAlias(dongle_id, alias) {\n  return request.patch('v1/devices/' + dongle_id + '/', { alias: alias });\n}\n\nfunction setDeviceVehicleId(dongle_id, vehicle_id) {\n  return request.patch('v1/devices/' + dongle_id + '/', { vehicle_id: vehicle_id });\n}\n\nfunction grantDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/add_user', { email: email });\n}\n\nfunction removeDeviceReadPermission(dongle_id, email) {\n  return request.post('v1/devices/' + dongle_id + '/del_user', { email: email });\n}\n\nfunction fetchVehicles(vehicleId) {\n  var vehicleEndpoint = 'v1/vehicles/' + vehicleId;\n  return request.get(vehicleEndpoint);\n}\n\nfunction fetchDevice(dongleId) {\n  var deviceEndpoint = 'v1.1/devices/' + dongleId + '/';\n  return request.get(deviceEndpoint);\n}\n\nfunction pilotPair(imei, serial, pairToken) {\n  return request.postForm('v2/pilotpair/', { imei: imei, serial: serial, pair_token: pairToken });\n}\n\nfunction fetchDeviceStats(dongleId) {\n  return request.get('v1.1/devices/' + dongleId + '/stats');\n}\n\nfunction unpair(dongleId) {\n  return request.post('v1/devices/' + dongleId + '/unpair');\n}\n\nfunction fetchDeviceOwner(dongleId) {\n  return request.get('v1/devices/' + dongleId + '/owner');\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nexports.default = routeApi;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _configRequestPromise = require('./config-request-promise');\n\nvar _configRequestPromise2 = _interopRequireDefault(_configRequestPromise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction routeApi(routeSigUrl) {\n  var request = (0, _configRequestPromise2.default)();\n  var baseUrl = routeSigUrl + '/';\n  request.configure({\n    baseUrl: baseUrl,\n    parse: null\n  });\n\n  return {\n    getCoords: function () {\n      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var coords;\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return request.get('route.coords');\n\n              case 2:\n                coords = _context.sent;\n                return _context.abrupt('return', JSON.parse(coords));\n\n              case 4:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getCoords() {\n        return _ref.apply(this, arguments);\n      }\n\n      return getCoords;\n    }(),\n    getJpegUrl: function getJpegUrl(routeOffsetSeconds) {\n      return (0, _urlJoin2.default)(baseUrl, 'sec' + routeOffsetSeconds.toString() + '.jpg');\n    }\n  };\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchRoutes = undefined;\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _isFinite = require('babel-runtime/core-js/number/is-finite');\n\nvar _isFinite2 = _interopRequireDefault(_isFinite);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar fetchRoutes = exports.fetchRoutes = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(dongleId, start, end) {\n    var segments;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return getSegmentMetadata(start, end, dongleId);\n\n          case 2:\n            segments = _context.sent;\n\n            segments = parseSegmentMetadata(start, end, segments);\n            return _context.abrupt('return', segmentsFromMetadata(segments).reverse());\n\n          case 5:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function fetchRoutes(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.getSegmentMetadata = getSegmentMetadata;\nexports.getRouteInfo = getRouteInfo;\nexports.setRouteRating = setRouteRating;\nexports.getShareSignature = getShareSignature;\nexports.getRouteSegments = getRouteSegments;\nexports.listRoutes = listRoutes;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SEGMENT_LENGTH = 1000 * 60; // Drives api\n// ~~~~~~~~~~\nfunction getSegmentMetadata(start, end, dongleId) {\n  return request.get('v1/devices/' + dongleId + '/segments', {\n    from: start,\n    to: end\n  });\n}\n\nfunction getRouteInfo(routeName) {\n  return request.get('v1/route/' + routeName + '/');\n}\n\nfunction setRouteRating(routeName, rating) {\n  return request.patch('v1/route/' + routeName + '/', { rating: rating });\n}\n\nfunction getShareSignature(routeName) {\n  return request.get('v1/route/' + routeName + '/share_signature');\n}\n\nfunction getRouteSegments(routeName) {\n  return request.get('v1/route/' + routeName + '/segments');\n}\n\nfunction listRoutes(dongleId, limit, createdAfter) {\n  var params = { limit: limit };\n  if (typeof createdAfter !== 'undefined') {\n    params.createdAfter = createdAfter;\n  }\n  return request.get('v1/devices/' + dongleId + '/routes', params);\n}\nfunction parseSegmentMetadata(start, end, segments) {\n  var lastSegmentTime = 0;\n  var routeStartTimes = {};\n  return segments.map(function (segment) {\n    segment.offset = Math.round(segment.start_time_utc_millis) - start;\n    if (!routeStartTimes[segment.canonical_route_name]) {\n      var segmentNum = Number(segment.canonical_name.split('--')[2]);\n      segment.segment = segmentNum;\n      if (segmentNum > 0) {\n        routeStartTimes[segment.canonical_route_name] = segment.offset - SEGMENT_LENGTH * segmentNum;\n      } else {\n        routeStartTimes[segment.canonical_route_name] = segment.offset;\n      }\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    } else {\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    }\n\n    lastSegmentTime = segment.offset;\n    segment.duration = Math.round(segment.end_time_utc_millis - segment.start_time_utc_millis);\n\n    return segment;\n  });\n}\nfunction segmentsFromMetadata(segmentsData) {\n  var curSegment = null;\n  var curStopTime = null;\n  var curVideoStartOffset = null;\n  var segments = [];\n  segmentsData.forEach(function (segment) {\n    if (!segment.url) {\n      return;\n    }\n    if (!(segment.proc_log === 40 || segment.proc_qlog === 40)) {\n      return;\n    }\n    var segmentHasDriverCamera = segment.proc_dcamera >= 0;\n    var segmentHasDriverCameraStream = segment.proc_dcamera === 40;\n    var segmentHasVideo = segment.proc_camera === 40;\n    if (segmentHasVideo && curVideoStartOffset === null) {\n      curVideoStartOffset = segment.offset;\n    }\n\n    curStopTime = segment.start_time_utc_millis;\n    if (!curSegment || curSegment.route !== segment.canonical_route_name) {\n      if (curSegment) {\n        finishSegment(curSegment);\n      }\n      var url = segment.url;\n      var parts = url.split('/');\n\n      if ((0, _isFinite2.default)(Number(parts.pop()))) {\n        // url has a number at the end\n        url = parts.join('/');\n      }\n      curSegment = {\n        dongleId: segment.dongle_id,\n        offset: segment.offset - segment.segment * SEGMENT_LENGTH,\n        route: segment.canonical_route_name,\n        startTime: segment.start_time_utc_millis,\n        startCoord: [segment.start_lng, segment.start_lat],\n        duration: 0,\n        segments: 0,\n        url: url.replace('chffrprivate.blob.core.windows.net', 'chffrprivate-vzn.azureedge.net'),\n        events: [],\n        videoAvailableBetweenOffsets: [],\n        hasVideo: segmentHasVideo,\n        deviceType: segment.devicetype,\n        hpgps: segment.hpgps,\n        hasDriverCamera: segmentHasDriverCamera,\n        hasDriverCameraStream: segmentHasDriverCameraStream,\n        locStart: '',\n        locEnd: '',\n        distanceMiles: 0.0,\n        cameraStreamSegCount: 0,\n        driverCameraStreamSegCount: 0\n      };\n      segments.push(curSegment);\n    }\n    if (!segmentHasVideo && curVideoStartOffset !== null) {\n      curSegment.videoAvailableBetweenOffsets.push([curVideoStartOffset, segment.offset]);\n      curVideoStartOffset = null;\n    }\n    curSegment.hasVideo = curSegment.hasVideo || segmentHasVideo;\n    curSegment.hasDriverCamera = curSegment.hasDriverCamera || segmentHasDriverCamera;\n    curSegment.hasDriverCameraStream = curSegment.hasDriverCameraStream || segmentHasDriverCameraStream;\n    curSegment.hpgps = curSegment.hpgps || segment.hpgps;\n    curSegment.duration = segment.offset - curSegment.offset + segment.duration;\n    curSegment.segments = Math.max(curSegment.segments, Number(segment.canonical_name.split('--').pop()) + 1);\n    curSegment.events = curSegment.events.concat(segment.events);\n    curSegment.endCoord = [segment.end_lng, segment.end_lat];\n    curSegment.distanceMiles += segment.length;\n    curSegment.cameraStreamSegCount += Math.floor(segmentHasVideo);\n    curSegment.driverCameraStreamSegCount += Math.floor(segmentHasDriverCameraStream);\n  });\n\n  if (curSegment) {\n    finishSegment(curSegment);\n  }\n\n  return segments;\n\n  function finishSegment(segment) {\n    var lastEngage = null;\n\n    if (segment.hasVideo) {\n      var lastVideoRange = segment.videoAvailableBetweenOffsets[segment.videoAvailableBetweenOffsets.length - 1] || [segment.offset, segment.offset + segment.duration];\n      segment.videoAvailableBetweenOffsets = [].concat((0, _toConsumableArray3.default)(segment.videoAvailableBetweenOffsets.slice(0, segment.videoAvailableBetweenOffsets.length - 1)), [[lastVideoRange[0], segment.offset + segment.duration]]);\n    }\n  }\n}\n\nfunction hasSegmentMetadata(state) {\n  if (!state.segmentData) {\n    console.log('No segment data at all');\n    return false;\n  }\n  if (!state.segmentData.segments) {\n    console.log('Still loading...');\n    return false;\n  }\n  if (state.dongleId !== state.segmentData.dongleId) {\n    console.log('Bad dongle id');;\n    return false;\n  }\n  if (state.start < state.segmentData.start) {\n    console.log('Bad start offset');\n    return false;\n  }\n  if (state.end > state.segmentData.end) {\n    console.log('Bad end offset');\n    return false;\n  }\n  if (state.end > state.segmentData.end) {\n    console.log('Bad end offset');\n    return false;\n  }\n\n  return state.start >= state.segmentData.start && state.end <= state.segmentData.end;\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLeaderboard = getLeaderboard;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction getLeaderboard() {\n  return request.get('v2/leaderboard/');\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar getCached = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(endpoint, routeName, params) {\n    var path, data;\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!urlStore[routeName]) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt('return', urlStore[routeName]);\n\n          case 2:\n            path = 'v1/route/' + routeName + '/' + endpoint;\n\n            if (params !== undefined) {\n              path += '?' + _querystringify2.default.stringify(params);\n            }\n            _context.next = 6;\n            return request.get(path);\n\n          case 6:\n            data = _context.sent;\n\n\n            urlStore[routeName] = data;\n\n            setTimeout(function () {\n              delete urlStore[routeName];\n            }, 1000 * 60 * 45); // expires in 1h, lets reset in 45m\n\n            return _context.abrupt('return', urlStore[routeName]);\n\n          case 10:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function getCached(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.getRouteFiles = getRouteFiles;\nexports.getLogUrls = getLogUrls;\n\nvar _querystringify = require('querystringify');\n\nvar _querystringify2 = _interopRequireDefault(_querystringify);\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar urlStore = {};\nfunction getRouteFiles(routeName) {\n  return getCached('files', routeName);\n}\n\nfunction getLogUrls(routeName, params) {\n  return getCached('log_urls', routeName, params);\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchMakes = fetchMakes;\nexports.fetchModels = fetchModels;\nexports.fetchVehicle = fetchVehicle;\n\nvar _request = require('./request');\n\nvar request = _interopRequireWildcard(_request);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction fetchMakes() {\n  return request.get('v1/vehicles/makes/');\n} // Vehicle API\n// ~~~~~~~~~~~\n\nfunction fetchModels(make) {\n  return request.get('v1/vehicles/makes/' + make);\n}\n\nfunction fetchVehicle(vehicleId) {\n  return request.get('v1/vehicles/' + vehicleId.toString());\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nexports.default = videoApi;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _configRequestPromise = require('./config-request-promise');\n\nvar _configRequestPromise2 = _interopRequireDefault(_configRequestPromise);\n\nvar _config = require('./config');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction videoApi(routeSigUrl, videoServerHost) {\n  if (!videoServerHost) {\n    videoServerHost = _config.VIDEO_HOST;\n  }\n\n  var _routeSigUrl$split$sl = routeSigUrl.split('/').slice(5, 7),\n      _routeSigUrl$split$sl2 = (0, _slicedToArray3.default)(_routeSigUrl$split$sl, 2),\n      dongleId = _routeSigUrl$split$sl2[0],\n      routeSignature = _routeSigUrl$split$sl2[1];\n\n  var videoserverRequest = (0, _configRequestPromise2.default)();\n  var videoserverBaseUrl = videoServerHost + '/hls/' + dongleId + '/' + routeSignature + '/';\n  videoserverRequest.configure({\n    baseUrl: videoserverBaseUrl,\n    parse: null\n  });\n  var storageRequest = (0, _configRequestPromise2.default)();\n  storageRequest.configure({\n    baseUrl: routeSigUrl + '/',\n    parse: null\n  });\n\n  return {\n    getRearCameraStreamIndexUrl: function getRearCameraStreamIndexUrl() {\n      return (0, _urlJoin2.default)(videoserverBaseUrl, 'index.m3u8');\n    },\n    getFrontCameraStreamIndexUrl: function getFrontCameraStreamIndexUrl() {\n      return (0, _urlJoin2.default)(videoserverBaseUrl, 'dcamera/index.m3u8');\n    },\n    getQcameraStreamIndexUrl: function getQcameraStreamIndexUrl() {\n      return (0, _urlJoin2.default)(routeSigUrl, 'qcamera.m3u8');\n    },\n    getRearCameraStreamIndex: function getRearCameraStreamIndex() {\n      return videoserverRequest.get('index.m3u8');\n    },\n    getFrontCameraStreamIndexPath: function getFrontCameraStreamIndexPath() {\n      return videoserverRequest.get('dcamera/index.m3u8');\n    },\n    getQcameraStreamIndex: function getQcameraStreamIndex(max) {\n      return storageRequest.get('qcamera.m3u8');\n    }\n  };\n}","const Event = require('geval/event');\nconst LogReaderWorker = require('./logReader.worker');\n// const LogReaderSharedWorker = require('./logReader.sharedworker');\n\nconst DataEvent = Event();\n\nlet logReader = null;\n\nfunction handleMessage(msg) {\n  DataEvent.broadcast(msg);\n}\n\nfunction relayMessage(msg) {\n  const port = logReader.port || logReader;\n  port.postMessage(msg.data);\n}\n\nfunction getWorker() {\n  if (logReader) {\n    return logReader;\n  }\n  // if (typeof LogReaderSharedWorker === 'function' && typeof SharedWorker === 'function') {\n  // logReader = new LogReaderSharedWorker();\n  if (typeof LogReaderWorker === 'function') {\n    logReader = new LogReaderWorker();\n  } else {\n    throw new Error('Don\\'t');\n  }\n  const port = logReader.port || logReader;\n\n  const channel = new MessageChannel();\n  const logPort = channel.port1;\n  const apiPort = channel.port2;\n\n  logPort.onmessage = relayMessage;\n  port.onmessage = handleMessage;\n\n  return apiPort;\n}\n\nmodule.exports = getWorker;\n\ngetWorker.onData = DataEvent.listen;\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"032b768692a7b083f694.worker.js\");\n};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAPHXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZlpbiS5EUb/8xQ+ArcgGcfhCvgGPr5fMEsaqXt6Wj1twIBhFVRZSyaTjOVbWG7/65/H/YO/nEtzWWorWornL2vW2HnR/POn9zn4fJ/vn7x9Fz5/7t6/iHyUOKbnbe2v8zufyx8XvI8zPn/u2uub2F4Dvb54GzDZnSMv1sdJ8nl8Pg/5NZDu50XRVj9OdcTnOF8n3qm8/lO9Q78PYu/dxw9yJUpLOCvFuFNI/j63ZwbJ/kPqHBPP9i3zTfW+bo6DpPCaCQH5tLy3o/cfA/QpyG+v3LfRf3/1TfBjf32evollecWIF3/6RZA/D/4N8Ycbp/cZxW++2OH75bz+z1ntnP2srudCRMurorx7i45dw4mDkKd7WeFR+Rde1/tQHs13P0nO8tMPHjNoiMT9uJDDCj2csO9xhskUc9yxcoxxkij7rKUaNc5kecr2CCfWpGmlRi5n3I5U5hTf5xLuffXeb4bGnVfg1BgYLHDJDx/ur778lYc7Z1qIgm/vsWJe0SqXaVjm7JmzSEg4r7zJDfDb45V+/6F+KFUyKDfMjQV2P54hhoQ/aivdPCfOE45PVwRX12sAQsS9hcmERAZ8CUlCCb7GWEMgjo0EdWYeU46DDASRuJhkzCmV6Gps0e7NNTXcc6PEEu1jsIlESCr0UyNDnWTlLNRPzY0a6pIki0iRKs2JSi+p5CKllFoM5HpNNVeppdbaqtbeUstNWmm1taata9QEBooWrdpUtffoOjfqjNU5v/PJiCONPGSUUUcbOvqkfGaeMsuss02dfcWVFjCxyqqrLV19B7dBip237LLrblt3P9TaSScfOeXU046e/p61V1a/e/xC1sIra/Fmys6r71njU1fr2xDB4EQsZ2Qs5kDGq2WAgo6WM99CztEyZznzGmkKiUxSLDduBcsYKcw7RDnhPXd/ZO5LeYNFvpS3+LPMOUvdfyJzjtR9n7c/ydoynps3Y08XWkx9ovs4p8fm+Peep989/hcH2v7s2OrMaRQ6trQZY8nDjdBb6Ylo+FESMQ2Efkrsva0+z2htGwfqbrWHTXw9Xy8CuOj8nE8ch6yIMNDwJ420hXhuaimu02apgSHmBvtuKuc5hLXlfWawVwdUYOhzWgp2MBHR+1FPbs9mWtRjm3XPAYaf3uriDnOMM/WsOWvYa5HrdWrIpaYhtZ8ulRR7F07VTaWMYuWyxqBWrAKlC1/3LaFTUapFxC8jptytOQAx1jlF5g1aSK62OG7HnCZlU4ZLYh1Ze9VyhLVKp+pU6TKaY4Y1O3WvOa2x4hizmyK6WXu9+N3jXw1EeR+66ND+c0x/esmnWEtQ1nSccNYupCyjsdQFjRlkLyvSgdOH6St1ElZiGAUnysqdq6vo2Kx6h5JE9yk75tGUdz7HRq+7CG5NhSg07V5Gz6c1EthvuqUFBh11CdWSxp5h59XjGlVl16NDZxqj7LmXk7O5LjRuN6Em1JsE4QoL/4yV4qo7FjBgMq3JYgtBjnnR54eSHnPQ4dEXpz6PQIeLNpaHStipbRTzMVl7GOWLEXe/kSoKaJZxQqloE6TfHkyDGrzQJokZr9HXpLz6pCV7yCPF7feukkA0qnurLICUDsw03m6rpO66UNBteNlrzArU8870X98dVUMF0wu+goWIfqo4kdJ02h5Us9yE1L6OlOOI+BkkYNUyytpS9WwBBoj+IFGWLqWJ0+AEspDs4pFrpf3SpEjOZu40MrxGOLVw8800IlAy49qB4j8B5Gc8+H9APr7t3fego6uu1nKA63Tu3Hw+WRKYTXelTHczKdDKEzImtLvWioYgb11mppwlMA/UYmH05Nfu6dSSNA4NK9eFO8LAKBgvg6lweeuHKi4wCeEeo1KTO1qOyi5hlKIUO8EGx9YJJtJonJirW4ulQiiVfjl+snb6A4k8wmK1S08BJuOh5WDvSP0tckoCzhiaCB4rJU+SHbRjgm7VRo2Hvg1gC+SWt2qkIQFg5hK3sgwlDbRXFLN30OK0jDJrkjgdvVyfoZiIvzDaPcCk59AbpGPDlRQb4pqMDgvBTnIo/SmLUhgUBombDtz+kA74AZ29OnBdQYV2E2L5iD8jF/dLbNRh1boKyFTIceINuKFWgcMFKyuiGmvh5Mj0kJ9InbA1C6y9QHQtNYrRzJoBiTGgpcpV03SpTDxlQUMe7FxuIDZVBHhQ9zuORf8rlaMU2IL+dKMeytyCoCg3B4OODHQRuIjiRRo5c2IAe7LJlDAZxgN7U0BYgjqgQjoo5UK7ADM9E60NVoaCxTg7504zNrDPxT5qPBCsRE+drDpYIzLyM2hsVA0yMIQj7RgjFsvvnla5wUB4OZZOsRX60CYP/U0Q2mBTKQEqbYNtvpuqASf2QosBlmjMTCVTg4GKXGGO4pgwWjDQWQA78k+JVue2mUkowdbzMEpXCiedQCgTEd9cTK3NJL3nUEd3o296IM1AuTAO0pgQjphJdZY14dzN2FJbrhQwFbgBDfjIYH11yAkewVhWNyf6bE/wYuiyuCokv2B6GIlaH+18LqVh3QOQFuul1UAJ2iAMeg1FGiBi8oJllDzw93TS9qjP2Q6UkvezNuvFUWelxJAsuZC3Q+pNQMrKDuYIQDZNCdenSpDXHMhu5TlM8JOW7PX4U8CXFvjismsDVwBAoYzoq2qedioCXFDHVLR5KPgp7EpfAnbwNKSdrAeZ7PFAEMGcpwrcqpFb2ioXGkPcLmdtOpXrwT7uGJhS3bCm9fwyvjTs++nR/eALegkoy1L6MtLZEYG38N4LAw6Kw9Z5NvCJU1RbztvRVpl4RCAqn9kHKyWZyLCmC3XOwigfpF9DgkHs5wjKxEYFqLEnIlyU20H6GUHgOH1YlCEkSC1CYXdmXz5idByOhhZBX1wtY3SSmBUFRTUC88AssnEkrIRY/5hAhW8LcLkux6EVDFiN1yC4Q60uoJpCRHnehkx9hQ75dqAfEdPmQEMbm5azdzH5wiJJIq3eIDHkMVAxTBNNnDVdxrUT7KrLZEBKcH034j5aPdXMmM3cSYPGgYia3xHC/Q0dMhrsj25OFDSSsKIChjij2dEiOGjJ5JtaxIirCLgRFh1D70DN4uF76du4zfDIEui9QXZ/BPtCFRO1BbAtK5/55RJ8Owr+InS3Ugkm6kSYBqjkwdIJwNThCVdbQX1AipM0MDWD0cAH/gFEX55OQObkDuIDbFeXILyYHvb1yhK8YQQCW0U8oJdqRgJAsXjuiBZAaKWitCU3D0ha4xw/3bY9UFDmlwrw+2N1tmkGWyMQ8klXB5zh+7wBxO1KP8gmMg0cJmYPMxW9ZyG72vVMuO5xTU36G/cHaWjNozhAAn2zxu0Xr1Ah5LbuIckA3VQmNqGP3B65D3lFqhyF9Mh9ZI/k6q/a95il4LZBcdp7sA5w8pNS/bJQRaa63zBF8PdhXRRHXkDthg8enZ0PZWQ7VWjAK7NH7yMwgUlTDBqXJW0qDLDK+qCflSW9S7Sd2jNeQ8y6kLYx4OClZoFrFZRwnlKtFi+34DoasBYwf98kwX0FtqDKBy/GQrWvCxcVGxxIi3T0NHDhiKmYl7HNkUr8QIiYqFVEMHStGbEEF4EXf8VFUJH7ERclk7fM4YB4cKrsa9ONSqFI6J08alSMHBCRAQtXTZ3nWCe9gmO4qHW80m6g5FrkB8leNsVWTMpvxGtHogDQuDsSl43fAB2nklOBUwMiCkA2psbVE99f3On4KEZxI5OWoizUjCxeZFF6FLJiFvASM2GPMxNYtp9USOVJ/SohytPVXQTRv3da+Mpssg4/Afe9+xpyE6+WzgRxUFznWp89M0J6xA6p6P05o/U6pM6idzfipVfOA3LolStX0J8X5B65Ei7I+StXstUHgsX9enuYEwcAnh0MGmMkcK7iICd3R6FCBUMmTn8l5qvi4W/kqhkDVGGiMwzTl3+c39MQx0fsI5JEu6u2/4Jv7zoRbQFKR0Az+RN7vHh9VxDR9BhhIOVHeXNfTDAEmWxaT6v7YTWl4IxapwOusIjgcqD52edENQnqDirDKXbfgqo/Eg3UD6IUqYcyAeUWDkLwl/SdglUUawL8IfNocqESngEKImZM7+HJdcPiIBcL27vtSzBhWp0RSAQHKEDnpouH21WsriHo0EL7IDxGNcMVL5ykKz7aVATST3LpPmPeNmuH8wXIk22CYkDqTt5KbaSOybSb2RJwOAMal5A0qMXDIe8p+RsJE/JzInc2I+xGjQLZ09xJqBpoekiyBttBYfaUqMcnY8ZGCpCJi2aUs8l6mAXcwTX0bq4qzpPnSA1NBPRGb5u3DRUWYfAED4AZSAjYudkWlLozCSLRDr9Jte6Fphu6M9PHW6yHVky27WbFAmhOWn9uIw2MNzkbOOlYeojB9IWCPwFznMEJILNtWmUno10smcDLil8VMorXsQ6W6z+RcKWkKvBbLkj4aGyQzH4ijw92FR2XIV/IaOMruWpxP+5dF/A4GjRjW5VUjJgQYI7makgWpTURLpzv/Em7QxTohWdLzJQq1UPSD7WjxfxiPRgEJgxLk1kwtE2EEe613/ORIIo+YmJGdu3QLRT/bWzR0UyRxnOZboPyfpjLHGSvI8TQ5rmJzzAd9H8GeMRtj/lVSJ3uQGVd0eIV4jc7JuPMYRJ5KZawggqHNqgbt5X6xtHYpjKhxGYhP6CuDf0MHCRGDC8O7GRT2OhWDaGRSUQUhag5kiKYe+ZKgx+9xK3PRhR8Vp81S6Z1mRDYdoUWaG2MaoSKMxzl2M9aFwTtBwhYMORuRtG2gF2zDQW4Els3EDetjmfn2pSU7X8H0xw0mEfI38Td0mCC0PIyBlBKDTa/W6zHBPxpm849WHbCUggGxXBpIA/8AJ5u0Ws0ESsT24IX+3lD7ffOWqISowXsRGgWL26/u9yNAUQwLXtTS0gMp688nzcReBYrH9RdffbjihkAB9KhL0Tt9xrQCPNpgZCaaoK1EkEos28c8GbK98dxKh6gMzmxTGa/bup+eNexJmUhFioag3ZPOD2TMRMo6SFxU5ip5REmme+O5x7NUuNkYR/VyThVwBmzc8wbpIc36WazXR1ot12DQF/ABP12citLi4u0ETaODsfSgysJ76npUOhA+C/IePdbIPT/gf4HBjIzpu7fbhQC0iDJsKsAAAGEaUNDUElDQyBwcm9maWxlAAB4nH2RPUjDQBzFX9NKpdQPsIOIQ4bqZEFUxFGrUIQKoVZo1cHk0i9o0pCkuDgKrgUHPxarDi7Oujq4CoLgB4ibm5Oii5T4v6TQItaD4368u/e4ewcI9TLTrMA4oOm2mUrExUx2VQy+wo8Q+tGLgMwsY06Skug4vu7h4+tdjGd1Pvfn6FFzFgN8IvEsM0ybeIN4etM2OO8TR1hRVonPicdMuiDxI9cVj984F1wWeGbETKfmiSPEYqGNlTZmRVMjniKOqppO+ULGY5XzFmetXGXNe/IXhnP6yjLXaQ4jgUUsQYIIBVWUUIaNGK06KRZStB/v4B9y/RK5FHKVwMixgAo0yK4f/A9+d2vlJye8pHAc6HpxnI8RILgLNGqO833sOI0TwP8MXOktf6UOzHySXmtp0SOgbxu4uG5pyh5wuQMMPhmyKbuSn6aQzwPvZ/RNWWDgFgiteb0193H6AKSpq+QNcHAIjBYoe73Du7vbe/v3TLO/H+I6cm3phDCPAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QMKEBI1kCGtpQAAAzNJREFUeNrtnEtIVGEUx39m9n5ApGWWBBVUEBUuW4QoUbSoIImWtSra1a7HKiKhReCqqFwEBS0igyjpQbYIemlJbapNWtlUVBjmM70t7jcQMo7jjDNz7jf/H5ydjOPvO5577rnfd0EIIYQQQggRdRYBx4AHwFegREomh/nAeWAACP6LmVKTObXAp1FiA+CX1GTOjgRZG49n0pMZNcDgGHID4KQUpU8p8CWJ3ADYKE3pc24cufelKH2Wj1MaRoBN0pQ+x8fJ3rNSlBltSeQ2A9OlKH2Kgb9jyL0FzJCizFiaQGwPcAgokp7MWemkDgNvgaOuZTOLpVWfAsxyGZns+1YSDnL6x/iZMqDczSG6gQ9AXyFm4wJgv6udncCQy87vwGPgFLA2xbpcC1wAPicoIcPAa+AMsKYQxM4BTrsMDFKIF8ABYF6CclEPxFL8nHjcdL20l1QDXRMUEo9BoBW4BrxK8zPi0Qvs9U3uHsaefOUjRoDDvsitc39QYCxGgF1Rl7vCXc0Do/EwynKnAM8Ny70MTIt6abAq95IPtbfVqNwW1z9HviWzKPe3uxvMWY3MFtuNLnyDu3OMPG0Gs7ff3aJ7MWew2Pc256ONygarsTmfveOLYKsz2ne+CF5oVHBMGZxdenwRbJVyXwT/MSq4whfB3UYFr/NFcIdRwbt9qXWV2J2iVfkguAj4YVTwPV+yuMlwFuesVGSzTXtkePEb83HBm2yqDGdwQHhwJtKSi7H9sDNw368uypKvGhccjybCnUKRozoiggNgS1TbtfcRkBsjSw9Bsz3sCQh3PVqnkXAXZiQpw9aetNExkM0pWy7Gld+Ai4YT4ArhocZIU044wrSWvX1kea9wrna3xJ8k1Bhb+Hrghi+ziRLgjaHs/QjMxjM2GLngjQBb8ZQjBgQ34DFFwO08yn1JAZwInQu050FuJ7Ak19mULyqAJ4THY1Oh1y1KzNXQUmA94QuRUuEnsNldaAuGZSTfpD3kJl07SfyKrmJgG3Cd5O+QaAdWUaBMBQ4CT12/3EX4xpITE/x3Xkx4drmF8Kl2B3AX2Od+hxBCCCGEEEIIIYQQQgghhBBCCCEKi3+ZhGYIgLiZlwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.patch = exports.postForm = exports.post = exports.get = undefined;\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar get = exports.get = function () {\n  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.get(endpoint, {\n                query: data,\n                json: true\n              }, _errorHandlerFn(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function get(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar post = exports.post = function () {\n  var _ref2 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context2.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.post(endpoint, {\n                body: data,\n                json: true\n              }, _errorHandlerFn(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function post(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar postForm = exports.postForm = function () {\n  var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context3.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.post(endpoint, {\n                body: _querystringify2.default.stringify(data),\n                headers: {\n                  \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n              }, _errorHandlerFn(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this);\n  }));\n\n  return function postForm(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar patch = exports.patch = function () {\n  var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4(endpoint, data) {\n    return _regenerator2.default.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return ensureInit();\n\n          case 2:\n            return _context4.abrupt('return', new _promise2.default(function (resolve, reject) {\n              request.patch(endpoint, {\n                body: data,\n                json: true\n              }, _errorHandlerFn(resolve, reject));\n            }));\n\n          case 3:\n          case 'end':\n            return _context4.stop();\n        }\n      }\n    }, _callee4, this);\n  }));\n\n  return function patch(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexports.configure = configure;\n\nvar _instance = require('config-request/instance');\n\nvar _instance2 = _interopRequireDefault(_instance);\n\nvar _querystringify = require('querystringify');\n\nvar _querystringify2 = _interopRequireDefault(_querystringify);\n\nvar _errorHandler = require('./errorHandler');\n\nvar _errorHandler2 = _interopRequireDefault(_errorHandler);\n\nvar _config = require('./config');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar request = (0, _instance2.default)();\nvar _errorHandlerFn = _errorHandler2.default;\n\nvar initPromise;\nfunction ensureInit() {\n  if (!initPromise) {\n    initPromise = configure();\n  }\n  return initPromise;\n}\n\nfunction configure(accessToken, errorHandler) {\n  var config = {\n    baseUrl: _config.COMMA_URL_ROOT,\n    jwt: false,\n    parse: null\n  };\n\n  if (accessToken) {\n    config.token = 'JWT ' + accessToken;\n  }\n\n  if (errorHandler) {\n    _errorHandlerFn = errorHandler;\n  } else {\n    _errorHandlerFn = _errorHandler2.default;\n  }\n\n  request.configure(config);\n  initPromise = _promise2.default.resolve();\n  return initPromise;\n}","module.exports = __webpack_public_path__ + \"static/media/icon-chffr-wheel.368fbfd6.svg\";","// basic helper functions for controlling playback\n// we shouldn't want to edit the raw state most of the time, helper functions are better\n\nconst initialState = require('./initialState');\n\nconst ACTION_SEEK = 'action_seek';\nconst ACTION_PAUSE = 'action_pause';\nconst ACTION_PLAY = 'action_play';\nconst ACTION_LOOP = 'action_loop';\nconst ACTION_BUFFER_VIDEO = 'action_buffer_video';\nconst ACTION_BUFFER_DATA = 'action_buffer_data';\nconst ACTION_DISABLE_BUFFER = 'action_disable_buffer';\n\n// fetch current playback offset\nexport function currentOffset(state) {\n  let offset = state.offset + (Date.now() - state.startTime) * state.playSpeed;\n\n  if (state.loop && state.loop.startTime) {\n    // respect the loop\n    const loopOffset = state.loop.startTime - state.start;\n    if (offset > loopOffset + state.loop.duration) {\n      offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n    }\n  }\n\n  return offset;\n}\n\nexport function reducer(_state = initialState, action) {\n  let state = _state;\n  // console.log(action);\n  let loopOffset = null;\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n  }\n  switch (action.type) {\n    case ACTION_SEEK:\n      state = {\n        ...state,\n        offset: action.offset,\n        startTime: Date.now()\n      };\n\n      if (loopOffset !== null) {\n        if (state.offset < loopOffset || state.offset > (loopOffset + state.loop.duration)) {\n          // a seek outside of loop should break out of the loop\n          state.loop = { startTime: null, duration: null };\n          state.loopOffset = null;\n        } else {\n          if (state.offset > (loopOffset + state.loop.duration)) {\n            state.offset = (loopOffset + state.loop.duration) - 1000; // 1 second before end\n          }\n          // intentionally second in case we're in a sub-1-second loop (madness)\n          if (state.offset < loopOffset) {\n            state.offset = loopOffset;\n          }\n        }\n      }\n      break;\n    case ACTION_PAUSE:\n      state = {\n        ...state,\n        offset: currentOffset(state),\n        playSpeed: 0,\n        desiredPlaySpeed: 0\n      };\n      break;\n    case ACTION_PLAY:\n      if (action.speed !== state.desiredPlaySpeed) {\n        state = {\n          ...state,\n          offset: currentOffset(state),\n          desiredPlaySpeed: action.speed,\n          playSpeed: action.speed,\n          startTime: Date.now()\n        };\n      }\n      break;\n    case ACTION_LOOP:\n      state = {\n        ...state,\n        loop: {\n          startTime: action.startTime,\n          duration: action.duration\n        }\n      };\n      if (action.duration > 0 && action.startTime > 0) {\n        state.start = Math.min(action.startTime, state.start);\n        state.end = Math.max(action.startTime + action.duration, state.end);\n      }\n      break;\n    case ACTION_BUFFER_VIDEO:\n      state.bufferingVideo = action.buffering;\n      break;\n    case ACTION_BUFFER_DATA:\n      state.bufferingData = action.buffering;\n      break;\n    case ACTION_DISABLE_BUFFER:\n      state.shouldBuffer = false;\n      break;\n    default:\n      break;\n  }\n\n  const offset = state.offset + (Date.now() - state.startTime) * state.playSpeed;\n  // normalize over loop\n  if (state.loop && state.loop.startTime !== null) {\n    loopOffset = state.loop.startTime - state.start;\n    // has loop, trap offset within the loop\n    if (offset < loopOffset) {\n      state.startTime = Date.now();\n      state.offset = loopOffset;\n    } else if (offset > loopOffset + state.loop.duration) {\n      state.offset = ((offset - loopOffset) % state.loop.duration) + loopOffset;\n      state.startTime = Date.now();\n    }\n  }\n\n  state.bufferingVideo = !!state.bufferingVideo;\n  state.bufferingData = !!state.bufferingData;\n  state.isBuffering = state.shouldBuffer && (state.bufferingVideo || state.bufferingData);\n\n  if (state.isBuffering) {\n    if (state.playSpeed > 0) {\n      console.log('Entering buffer state, pausing things');\n      state.offset = currentOffset(state);\n      state.playSpeed = 0;\n    }\n  } else if (state.playSpeed !== state.desiredPlaySpeed) {\n    console.log('Exiting buffer state, resuming things');\n    state.offset = currentOffset(state);\n    state.startTime = Date.now();\n    state.playSpeed = state.desiredPlaySpeed;\n  }\n\n  return state;\n}\n\nexport function timestampToOffset(state, timestamp) {\n  return timestamp - state.start;\n}\n\n// seek to a specific offset\nexport function seek(offset) {\n  return {\n    type: ACTION_SEEK,\n    offset\n  };\n}\n\n// pause the playback\nexport function pause() {\n  return {\n    type: ACTION_PAUSE\n  };\n}\n\n// resume / change play speed\nexport function play(speed = 1) {\n  return {\n    type: ACTION_PLAY,\n    speed\n  };\n}\n\nexport function selectLoop(startTime, duration) {\n  return {\n    type: ACTION_LOOP,\n    startTime,\n    duration\n  };\n}\n\n// update video buffering state\nexport function bufferVideo(buffering = true) {\n  return {\n    type: ACTION_BUFFER_VIDEO,\n    buffering\n  };\n}\n\n// update data buffering state\nexport function bufferData(buffering = true) {\n  return {\n    type: ACTION_BUFFER_DATA,\n    buffering\n  };\n}\n\nexport function disableBuffer() {\n  return {\n    type: ACTION_DISABLE_BUFFER\n  };\n}\n","import Event from 'geval/event';\nimport { partial } from 'ap';\n// cache all of the data\n\nlet cachePort = null;\n\nconst ExpireEvent = Event();\nexport const onExpire = ExpireEvent.listen;\n\nfunction handleMessage(msg) {\n  if (!msg || !msg.data) {\n    return;\n  }\n  switch (msg.data.command) {\n    case 'expire':\n      ExpireEvent.broadcast(msg.data.data);\n      break;\n    default:\n      break;\n  }\n}\n\nexport function setCachePort(port) {\n  if (cachePort) {\n    cachePort.onmessage = null;\n  }\n  cachePort = port;\n  cachePort.onmessage = handleMessage;\n}\n\nfunction start(route, segment) {\n  cachePort.postMessage({\n    command: 'start',\n    data: { route, segment }\n  });\n}\n\nfunction touch(route, segment) {\n  cachePort.postMessage({\n    command: 'touch',\n    data: { route, segment }\n  });\n}\n\nexport function getEntry(route, segment) {\n  touch(route, segment);\n  return {\n    start: partial(start, route, segment)\n  };\n}\n","\nexport function getDongleID(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts[0] === 'auth') {\n    return null;\n  }\n\n  return parts[0] || null;\n}\n\nexport function getZoom(pathname) {\n  let parts = pathname.split('/');\n  parts = parts.filter((m) => m.length);\n\n  if (parts.length >= 3 && parts[0] !== 'auth') {\n    return {\n      start: Number(parts[1]),\n      end: Number(parts[2])\n    };\n  }\n  return {\n    start: null,\n    end: null\n  };\n}\n\nexport function getPathname(options) {\n  const path = [\n    options.dongleId\n  ];\n\n  if (options.start && options.end) {\n    path.push(options.start);\n    path.push(options.end);\n  }\n\n  return path.join('/');\n}\n","import initialState from './initialState';\nimport { currentOffset } from './playback';\n\nconst ACTION_UPDATE_SEGMENTS = 'update_segments';\nconst ACTION_LOAD_SEGMENT_METADATA = 'load_segment_metadata';\nconst ACTION_SEGMENT_METADATA = 'segment_metadata';\nconst ACTION_RESOLVE_ANNOTATION = 'resolve_annotation';\n\nconst SEGMENT_LENGTH = 1000 * 60;\n\n/*\nsegments look like, but can contain additional data if they want\nfor example, caching url metadata\n{\n  route: 'dongleid|date',\n  segment: 5\n}\n*/\n\nfunction getCurrentSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: segmentIndex,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset + segmentIndex * SEGMENT_LENGTH,\n        duration: thisSegment.duration,\n        events: thisSegment.events,\n        deviceType: thisSegment.deviceType,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n    }\n  }\n  return null;\n}\n\nfunction getNextSegment(state, o) {\n  const offset = o === undefined ? currentOffset(state) : o;\n  if (!state.segments) {\n    return null;\n  }\n\n  const { segments } = state;\n\n  for (let i = 0, len = segments.length; i < len; ++i) {\n    const thisSegment = segments[i];\n    // the next segment is after the offset, that means this offset is in a blank\n    if (thisSegment.offset > offset) {\n      return {\n        url: thisSegment.url,\n        route: thisSegment.route,\n        segment: 0,\n        routeOffset: thisSegment.offset,\n        startOffset: thisSegment.offset,\n        events: thisSegment.events,\n        videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n        deviceType: thisSegment.deviceType,\n        hpgps: thisSegment.hpgps,\n        hasVideo: thisSegment.hasVideo,\n        hasDriverCamera: thisSegment.hasDriverCamera,\n        hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n        cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n        driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n        distanceMiles: thisSegment.distanceMiles,\n      };\n      // already returned, unreachable code\n      // break;\n    }\n    if (thisSegment.offset + thisSegment.duration > offset) {\n      const segmentIndex = Math.floor((offset - thisSegment.offset) / SEGMENT_LENGTH);\n      if (segmentIndex + 1 < thisSegment.segments) {\n        return {\n          url: thisSegment.url,\n          route: thisSegment.route,\n          segment: segmentIndex + 1,\n          routeOffset: thisSegment.offset,\n          startOffset: thisSegment.offset + (segmentIndex + 1) * SEGMENT_LENGTH,\n          duration: thisSegment.duration,\n          events: thisSegment.events,\n          deviceType: thisSegment.deviceType,\n          videoAvailableBetweenOffsets: thisSegment.videoAvailableBetweenOffsets,\n          hpgps: thisSegment.hpgps,\n          hasVideo: thisSegment.hasVideo,\n          hasDriverCamera: thisSegment.hasDriverCamera,\n          hasDriverCameraStream: thisSegment.hasDriverCameraStream,\n          cameraStreamSegCount: thisSegment.cameraStreamSegCount,\n          driverCameraStreamSegCount: thisSegment.driverCameraStreamSegCount,\n          distanceMiles: thisSegment.distanceMiles,\n        };\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction finishSegment(segment) {\n  let lastEngage = null;\n\n  if (segment.hasVideo) {\n    const vidAvail = segment.videoAvailableBetweenOffsets;\n    let lastVideoRange = vidAvail[vidAvail.length - 1];\n    if (!lastVideoRange) {\n      lastVideoRange = [segment.offset, segment.offset + segment.duration];\n    }\n    segment.videoAvailableBetweenOffsets = [ // eslint-disable-line no-param-reassign\n      ...vidAvail.slice(0, vidAvail.length - 1),\n      [lastVideoRange[0], segment.offset + segment.duration]\n    ];\n  }\n  segment.events = segment.events.sort((a, b) => { // eslint-disable-line no-param-reassign\n    if (a.route_offset_millis === b.route_offset_millis) {\n      return a.route_offset_nanos - b.route_offset_nanos;\n    }\n    return a.route_offset_millis - b.route_offset_millis;\n  });\n  segment.events.forEach((event) => {\n    // NOTE sometimes theres 2 disengages in a row and that is NONSENSE\n    switch (event.type) {\n      case 'engage':\n        lastEngage = event;\n        break;\n      case 'disengage':\n        if (lastEngage) {\n          lastEngage.data = {\n            end_offset_nanos: event.offset_nanos,\n            end_offset_millis: event.offset_millis,\n            end_route_offset_nanos: event.route_offset_nanos,\n            end_route_offset_millis: event.route_offset_millis\n          };\n        }\n        break;\n      default:\n        break;\n    }\n  });\n}\n\nfunction segmentsFromMetadata(segmentsData) {\n  let curSegment = null;\n  let curVideoStartOffset = null;\n  const segments = [];\n  segmentsData.segments.forEach((segment) => {\n    if (!segment.url) {\n      return;\n    }\n    if (!(segment.proc_log === 40 || segment.proc_qlog === 40)) {\n      return;\n    }\n    const segmentHasDriverCamera = (segment.proc_dcamera >= 0);\n    const segmentHasDriverCameraStream = (segment.proc_dcamera === 40);\n    const segmentHasVideo = (segment.proc_camera >= 0);\n    if (segmentHasVideo && curVideoStartOffset === null) {\n      curVideoStartOffset = segment.offset;\n    }\n    /*\n      route: '99c94dc769b5d96e|2018-04-09--11-29-08',\n      offset: 41348000,\n      duration: 214000,\n      segments: 4\n    */\n    if (!curSegment || curSegment.route !== segment.canonical_route_name) {\n      if (curSegment) {\n        finishSegment(curSegment);\n      }\n      let { url } = segment;\n      const parts = url.split('/');\n\n      if (Number.isFinite(Number(parts.pop()))) {\n        // url has a number at the end\n        url = parts.join('/');\n      }\n      curSegment = {\n        offset: segment.offset - (segment.segment * SEGMENT_LENGTH),\n        route: segment.canonical_route_name,\n        startTime: segment.start_time_utc_millis,\n        startCoord: [segment.start_lng, segment.start_lat],\n        duration: 0,\n        segments: 0,\n        url: url.replace('chffrprivate.blob.core.windows.net', 'chffrprivate-vzn.azureedge.net'),\n        events: [],\n        videoAvailableBetweenOffsets: [],\n        hasVideo: segmentHasVideo,\n        deviceType: segment.devicetype,\n        hpgps: segment.hpgps,\n        hasDriverCamera: segmentHasDriverCamera,\n        hasDriverCameraStream: segmentHasDriverCameraStream,\n        locStart: '',\n        locEnd: '',\n        distanceMiles: 0.0,\n        cameraStreamSegCount: 0,\n        driverCameraStreamSegCount: 0,\n      };\n      segments.push(curSegment);\n    }\n    if (!segmentHasVideo && curVideoStartOffset !== null) {\n      curSegment.videoAvailableBetweenOffsets.push([curVideoStartOffset, segment.offset]);\n      curVideoStartOffset = null;\n    }\n    curSegment.hasVideo = (curSegment.hasVideo || segmentHasVideo);\n    curSegment.hasDriverCamera = (curSegment.hasDriverCamera || segmentHasDriverCamera);\n    if (!curSegment.hasDriverCameraStream) {\n      curSegment.hasDriverCameraStream = segmentHasDriverCameraStream;\n    }\n    curSegment.hpgps = (curSegment.hpgps || segment.hpgps);\n    curSegment.duration = (segment.offset - curSegment.offset) + segment.duration;\n    curSegment.segments = Math.max(curSegment.segments, Number(segment.canonical_name.split('--').pop()) + 1);\n    curSegment.events = curSegment.events.concat(segment.events);\n    curSegment.endCoord = [segment.end_lng, segment.end_lat];\n    curSegment.distanceMiles += segment.length;\n    curSegment.cameraStreamSegCount += Math.floor(segmentHasVideo);\n    curSegment.driverCameraStreamSegCount += Math.floor(segmentHasDriverCameraStream);\n  });\n\n  if (curSegment) {\n    finishSegment(curSegment);\n  }\n\n  return segments;\n}\n\nfunction reducer(_state = initialState, action) {\n  let state = _state;\n  let found = false;\n  switch (action.type) {\n    case ACTION_LOAD_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: {\n          promise: action.promise,\n          start: action.start,\n          end: action.end,\n          dongleId: state.dongleId\n        }\n      };\n      break;\n    case ACTION_SEGMENT_METADATA:\n      state = {\n        ...state,\n        segmentData: action.data,\n        segments: action.segments\n      };\n      break;\n    case ACTION_RESOLVE_ANNOTATION:\n      state = { ...state };\n      state.segments = state.segments.map((s) => {\n        let segment = s;\n        if (found || segment.route !== action.route) {\n          return segment;\n        }\n        segment = {\n          ...segment,\n          events: segment.events.map((e) => {\n            let event = e;\n            if (found || event.time !== action.event.time || event.type !== action.event.type) {\n              return event;\n            }\n            event = {\n              ...event,\n              id: action.annotation.id,\n              annotation: action.annotation\n            };\n            found = true;\n            return event;\n          })\n        };\n\n        return segment;\n      });\n      if (!found) {\n        console.warning('Resolving unknonwn annotation');\n      }\n      break;\n    default:\n      break;\n  }\n  const currentSegment = getCurrentSegment(state);\n  const nextSegment = getNextSegment(state);\n\n  if (currentSegment) {\n    state.route = currentSegment.route;\n    state.segment = currentSegment.segment;\n  } else {\n    state.route = false;\n    state.segment = 0;\n  }\n\n  state.currentSegment = currentSegment;\n  state.nextSegment = nextSegment;\n\n  state.range = state.end - state.start;\n\n  return state;\n}\n\nfunction updateSegments() {\n  return {\n    type: ACTION_UPDATE_SEGMENTS\n  };\n}\n\nfunction fetchSegmentMetadata(start, end, promise) {\n  return {\n    type: ACTION_LOAD_SEGMENT_METADATA,\n    start,\n    end,\n    promise\n  };\n}\n\nfunction insertSegmentMetadata(data) {\n  return {\n    type: ACTION_SEGMENT_METADATA,\n    segments: segmentsFromMetadata(data),\n    data\n  };\n}\n\nfunction resolveAnnotation(annotation, event, route) {\n  return {\n    type: ACTION_RESOLVE_ANNOTATION,\n    annotation,\n    event,\n    route\n  };\n}\n\nfunction parseSegmentMetadata(state, _segments, annotations) {\n  const routeStartTimes = {};\n  let segments = _segments;\n  segments = segments.map((_segment) => {\n    const segment = _segment;\n    segment.offset = Math.round(segment.start_time_utc_millis) - state.start;\n    if (!routeStartTimes[segment.canonical_route_name]) {\n      const segmentNum = Number(segment.canonical_name.split('--')[2]);\n      segment.segment = segmentNum;\n      routeStartTimes[segment.canonical_route_name] = segment.offset;\n      if (segmentNum > 0) {\n        routeStartTimes[segment.canonical_route_name] -= (SEGMENT_LENGTH * segmentNum);\n      }\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    } else {\n      segment.routeOffset = routeStartTimes[segment.canonical_route_name];\n    }\n\n    segment.duration = Math.round(segment.end_time_utc_millis - segment.start_time_utc_millis);\n    segment.events = JSON.parse(segment.events_json) || [];\n    const plannedDisengageEvents = segment.events.filter((event) => event.type === 'alert' && event.data && event.data.should_take_control);\n\n    segment.events.forEach((_event) => {\n      const event = _event;\n      event.timestamp = segment.start_time_utc_millis + event.offset_millis;\n      // segment.start_time_utc_millis + event.offset_millis\n      // segment.start_time_utc_millis - state.start + state.start\n\n      event.canonical_segment_name = segment.canonical_name;\n      annotations.forEach((annotation) => {\n        // debugger;\n        if (annotation.canonical_segment_name === event.canonical_segment_name\n          && annotation.offset_millis === event.offset_millis\n          && annotation.offset_nanos_part === event.offset_nanos) {\n          if (event.id) {\n            console.error('Server returned more than one matching annotation-to-event', event, annotation);\n            // debugger;\n          }\n          event.id = annotation.id;\n          event.annotation = annotation;\n        }\n      });\n\n      if (event.data && event.data.is_planned) {\n        let reason;\n\n        const alert = plannedDisengageEvents.reduce((closestAlert, nextAlert) => {\n          const closestAlertDiff = Math.abs(closestAlert.offset_millis - event.offset_millis);\n          if (Math.abs(nextAlert.offset_millis - event.offset_millis) < closestAlertDiff) {\n            return nextAlert;\n          }\n          return closestAlert;\n        }, plannedDisengageEvents[0]);\n        if (alert) {\n          reason = alert.data.alertText2;\n        } else {\n          console.warn('Expected alert corresponding to planned disengagement', event);\n          reason = 'Planned disengagement';\n        }\n\n        event.id = `planned_disengage_${event.time}`;\n        event.annotation = {\n          start_time_utc_millis: event.timestamp,\n          data: {\n            reason,\n          },\n          offset_nanos_part: event.offset_nanos,\n          end_time_utc_millis: event.timestamp,\n          canonical_segment_name: event.canonical_segment_name,\n          dongle_id: state.dongleId,\n          type: event.type,\n          id: event.id,\n          offset_millis: event.offset_millis\n        };\n      }\n    });\n    return segment;\n  });\n\n  return {\n    start: state.start,\n    dongleId: state.dongleId,\n    end: state.end,\n    segments\n  };\n}\n\nfunction hasSegmentMetadata(state) {\n  if (!state) {\n    return false;\n  }\n  if (state.devices && state.devices.length === 0) {\n    // new users without devices won't have segment metadata\n    return true;\n  }\n  if (!state.segmentData) {\n    console.log('No segment data at all');\n    return false;\n  }\n  if (!state.segmentData.segments) {\n    console.log('Still loading...');\n    return false;\n  }\n  if (state.dongleId !== state.segmentData.dongleId) {\n    console.log('Bad dongle id');\n    return false;\n  }\n  if (state.start < state.segmentData.start) {\n    console.log('Bad start offset');\n    return false;\n  }\n  if (state.end > state.segmentData.end) {\n    console.log('Bad end offset');\n    return false;\n  }\n\n  return true;\n}\n\nfunction hasCameraAtOffset(segment, offset) {\n  return segment.videoAvailableBetweenOffsets.some((int) => offset >= int[0] && offset <= int[1]);\n}\n\nconst API = {\n  // helpers\n  getCurrentSegment,\n  getNextSegment,\n  hasSegmentMetadata,\n  parseSegmentMetadata,\n  hasCameraAtOffset,\n\n  // actions\n  updateSegments,\n  fetchSegmentMetadata,\n  insertSegmentMetadata,\n  resolveAnnotation,\n\n  // constants\n  SEGMENT_LENGTH,\n\n  // reducer\n  reducer\n};\nexport default API;\n","import {\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_STARTUP_DATA,\n  ACTION_UPDATE_DEVICE,\n} from '../actions/types';\n\nconst initialState = {};\n\nexport default function reducer(_state = initialState, action) {\n  let state = _state;\n  let deviceIndex = null;\n  switch (action.type) {\n    case ACTION_STARTUP_DATA:\n      if (!state.dongleId && action.devices.length > 0) {\n        state = {\n          ...state,\n          dongleId: action.devices[0].dongle_id,\n          device: action.devices[0]\n        };\n      } else {\n        state = {\n          ...state,\n          device: action.devices.find((device) => device.dongle_id === state.dongleId)\n        };\n        if (!state.device) {\n          state.device = {\n            alias: null,\n            create_time: 1513041169,\n            device_type: 'unknown',\n            dongle_id: '0000000000000000',\n            imei: '000000000000000',\n            is_owner: false,\n            serial: '00000000'\n          };\n        }\n      }\n      state.devices = action.devices;\n      state.profile = action.profile;\n      break;\n    case ACTION_SELECT_DEVICE:\n      state = {\n        ...state,\n        dongleId: action.dongleId\n      };\n      if (state.devices) {\n        state.device = state.devices.find((device) => device.dongle_id === action.dongleId);\n      }\n      if (state.segmentData && state.segmentData.dongleId !== state.dongleId) {\n        state.segmentData = null;\n        state.segments = [];\n      }\n      break;\n    case ACTION_SELECT_TIME_RANGE:\n      state.start = action.start;\n      state.end = action.end;\n      state.segmentData = null;\n      state.segments = [];\n      break;\n    case ACTION_UPDATE_DEVICE:\n      deviceIndex = state.devices.findIndex((d) => d.dongle_id === action.device.dongle_id);\n      state.devices[deviceIndex] = action.device;\n      state.device = action.device;\n      break;\n    default:\n      return state;\n  }\n  return state;\n}\n","import globalState from './globalState';\n\nconst reducers = {\n  globalState,\n};\nexport default reducers;\n","import qs from 'query-string';\nimport window from 'global/window';\nimport localforage from 'localforage';\n\nlet isDemoCached;\nexport function isDemoQuery() {\n  return qs.parse(window.location.search).demo === '1';\n}\nexport async function init() {\n  if (isDemoCached !== undefined) return isDemoCached;\n\n  isDemoCached = await localforage.getItem('isDemo') === '1' || isDemoQuery();\n  return isDemoCached;\n}\nexport function isDemo() {\n  return isDemoQuery() || isDemoCached;\n}\n","// init\nexport const ACTION_STARTUP_DATA = 'ACTION_STARTUP_DATA';\n\n// global state management\nexport const ACTION_SELECT_DEVICE = 'ACTION_SELECT_DEVICE';\nexport const ACTION_SELECT_TIME_RANGE = 'ACTION_SELECT_TIME_RANGE';\nexport const ACTION_UPDATE_DEVICE = 'ACTION_UPDATE_DEVICE';\n","import { createStore } from 'redux';\nimport reduceReducers from 'reduce-reducers';\n\nimport { reducer as playbackReducer } from './playback';\nimport Segments from './segments';\nimport Reducers from './reducers';\n\nconst store = createStore(reduceReducers(playbackReducer, Segments.reducer, Reducers.globalState));\n\nexport default store;\n","import {\n  ACTION_SELECT_DEVICE,\n  ACTION_SELECT_TIME_RANGE,\n  ACTION_UPDATE_DEVICE,\n} from './types';\n\nexport function updateDevice(device) {\n  return {\n    type: ACTION_UPDATE_DEVICE,\n    device,\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return {\n    type: ACTION_SELECT_DEVICE,\n    dongleId\n  };\n}\n\nexport function selectTimeRange(start, end) {\n  return {\n    type: ACTION_SELECT_TIME_RANGE,\n    start,\n    end\n  };\n}\n","import { devices as Devices, account as Account } from '@commaai/comma-api';\n\nimport store from './store';\nimport { ACTION_STARTUP_DATA } from './actions/types';\n\nconst demoProfile = require('../demo/profile.json');\nconst demoDevices = require('../demo/devices.json');\n\nexport default async function init(isDemo) {\n  if (isDemo) {\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile: demoProfile,\n      devices: demoDevices,\n    });\n  } else {\n    console.log('Fetching devices!');\n    let devices = Devices.listDevices();\n    let profile = Account.getProfile();\n    devices = await devices;\n    profile = await profile;\n    console.log('Device list:', devices);\n\n    store.dispatch({\n      type: ACTION_STARTUP_DATA,\n      profile,\n      devices\n    });\n  }\n}\n","import CreateStore from 'weakmap-shim/create-store';\nimport Auth from '@commaai/my-comma-auth';\nimport { request as Request } from '@commaai/comma-api'; // eslint-disable-line\n\nimport {\n  selectDevice as selectDeviceAction,\n  selectTimeRange as selectTimeRangeAction,\n  updateDevice as updateDeviceAction,\n} from './actions';\nimport Segments from './segments';\nimport init from './startup';\nimport * as Playback from './playback';\nimport store from './store';\nimport * as Cache from './cache';\nimport * as Demo from '../demo';\n\nexport const PortState = CreateStore();\n\n// fire off init method / construct init promises\nexport const initAuthPromise = Auth.init().then((token) => {\n  Request.configure(token);\n});\nlet hasGottenSegmentData = null;\nconst hasGottenSegmentDataPromise = new Promise(((resolve) => {\n  hasGottenSegmentData = function segmentDataHandler() {\n    hasGottenSegmentData = null;\n    resolve();\n  };\n}));\n\nstore.subscribe(() => {\n  const state = store.getState();\n\n  if (hasGottenSegmentData && Segments.hasSegmentMetadata(state)) {\n    hasGottenSegmentData();\n  }\n});\n\nfunction close(port) {\n  if (PortState(port).unlisten) {\n    PortState(port).unlisten();\n  }\n  if (PortState(port).broadcastChannel) {\n    PortState(port).broadcastChannel.port1.close();\n  }\n  port.close();\n}\n\nfunction seek(offset) {\n  store.dispatch(Playback.seek(offset));\n}\n\nfunction pause(/* port */) {\n  store.dispatch(Playback.pause());\n}\n\nfunction play(speed) {\n  store.dispatch(Playback.play(speed));\n}\n\nfunction bufferVideo(isBuffering) {\n  store.dispatch(Playback.bufferVideo(isBuffering));\n}\n\nfunction bufferData(isBuffering) {\n  store.dispatch(Playback.bufferData(isBuffering));\n}\n\nfunction disableBuffer(data) {\n  store.dispatch(Playback.disableBuffer(data));\n}\n\nasync function hello(data) {\n  await Demo.init();\n  await initAuthPromise;\n  store.dispatch(selectDeviceAction(data.dongleId));\n\n  await Promise.all([\n    init(Demo.isDemo()),\n    hasGottenSegmentDataPromise\n  ]);\n\n  return 'hello';\n}\n\nfunction resolveAnnotation(data) {\n  const { annotation, event, route } = data;\n\n  store.dispatch(Segments.resolveAnnotation(annotation, event, route));\n}\n\nfunction selectDevice(dongleId) {\n  store.dispatch(selectDeviceAction(dongleId));\n}\n\nfunction updateDevice(device) {\n  store.dispatch(updateDeviceAction(device));\n}\n\nfunction selectTimeRange(data) {\n  const { start, end } = data;\n  store.dispatch(selectTimeRangeAction(start, end));\n}\n\nfunction selectLoop(data) {\n  const { startTime, duration } = data;\n  store.dispatch(Playback.selectLoop(startTime, duration));\n}\n\nfunction cachePort(data, ports) {\n  console.log('Was handed this port!', ports);\n  Cache.setCachePort(ports[0]);\n}\n\nfunction stop() {\n  console.log('Stopping worker!');\n  // if (SegmentTimerStore(state).stopTimer) {\n  //   SegmentTimerStore(state).stopTimer();\n  //   SegmentTimerStore(state).stopTimer = null;\n  // }\n}\n\nexport const commands = {\n  close,\n  play,\n  pause,\n  seek,\n  bufferVideo,\n  bufferData,\n  disableBuffer,\n  hello,\n  resolve: resolveAnnotation,\n  selectDevice,\n  selectTimeRange,\n  selectLoop,\n  updateDevice,\n  cachePort,\n  stop\n};\n","import Event from 'geval/event';\nimport CreateStore from 'weakmap-shim/create-store';\nimport { timeout } from 'thyming';\nimport Collector from 'collect-methods';\nimport { partial } from 'ap';\n\nimport { annotations as Annotations, drives as Drives } from '@commaai/comma-api'; // eslint-disable-line\n\nimport { currentOffset } from './playback';\nimport Segments from './segments';\nimport * as Cache from './cache';\nimport store from './store';\nimport * as Demo from '../demo';\nimport { commands, initAuthPromise } from './commands';\n\nconst demoSegments = require('../demo/segments.json');\n\nconst BroadcastEvent = Event();\nconst DataLogEvent = Event();\nconst SegmentTimerStore = CreateStore();\n\nlet segmentsRequest = null;\nlet annotationsRequest = null;\n\nexport function getState() {\n  return store.getState();\n}\n\nfunction scheduleSegmentUpdate(state) {\n  let timeUntilNext = 30000;\n  const offset = currentOffset(state);\n\n  if (SegmentTimerStore(state).stopTimer) {\n    SegmentTimerStore(state).stopTimer();\n    SegmentTimerStore(state).stopTimer = null;\n  }\n  if (state.nextSegment) {\n    timeUntilNext = state.nextSegment.startOffset - offset;\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.currentSegment) {\n    const time = (state.currentSegment.routeOffset + state.currentSegment.duration) - offset;\n    timeUntilNext = Math.min(time, timeUntilNext);\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n  if (state.loop && state.loop.startTime) {\n    const curTime = state.start + offset;\n    // curTime will be between start and end because we used currentOffset to get it\n    // currentOffset takes into account loops using modulo over duration\n    const timeUntilLoop = 1 + state.loop.startTime + state.loop.duration - curTime;\n    const loopStartOffset = state.loop.startTime - state.start;\n    const loopStartSegment = Segments.getCurrentSegment(state, loopStartOffset);\n    if (!state.currentSegment\n      || !loopStartSegment\n      || loopStartSegment.startOffset !== state.currentSegment.startOffset) {\n      timeUntilNext = Math.min(timeUntilLoop, timeUntilNext);\n    }\n  }\n  if (timeUntilNext < 0) {\n    // debugger;\n  }\n\n  if (timeUntilNext > 0) {\n    timeUntilNext = Math.max(200, timeUntilNext);\n    console.log('Waiting', timeUntilNext, 'for something to change...');\n    SegmentTimerStore(state).stopTimer = timeout(() => {\n      // empty action to churn the butter\n      store.dispatch(Segments.updateSegments());\n    }, timeUntilNext);\n  } else {\n    console.log('There is not task i think its worth waiting for...', timeUntilNext);\n    // debugger;\n  }\n}\n\nasync function checkSegmentMetadata(state) {\n  if (!state.dongleId) {\n    return;\n  }\n  if (Segments.hasSegmentMetadata(state)) {\n    // already has metadata, don't bother\n    return;\n  }\n  await Demo.init();\n  if (segmentsRequest || annotationsRequest) {\n    return;\n  }\n  console.log('We need to update the segment metadata...');\n  const { dongleId } = state;\n  const { start } = state;\n  const { end } = state;\n\n  let segmentData = null;\n  let annotationsData = null;\n  if (Demo.isDemo()) {\n    segmentsRequest = Promise.resolve(demoSegments);\n    annotationsRequest = Promise.resolve([]);\n  } else {\n    segmentsRequest = Drives.getSegmentMetadata(start, end, dongleId);\n    annotationsRequest = Annotations.listAnnotations(start, end, dongleId);\n  }\n  store.dispatch(Segments.fetchSegmentMetadata(start, end));\n\n  try {\n    segmentData = await segmentsRequest;\n    annotationsData = await annotationsRequest;\n  } catch (e) {\n    console.error('Failure fetching segment metadata', e.stack || e);\n    // /@TODO retry this call!\n    return;\n  } finally {\n    segmentsRequest = null;\n    annotationsRequest = null;\n  }\n  if (state.start !== start || state.end !== end || state.dongleId !== dongleId) {\n    checkSegmentMetadata(getState());\n    return;\n  }\n\n  segmentData = Segments.parseSegmentMetadata(state, segmentData, annotationsData);\n  // broken\n  store.dispatch(Segments.insertSegmentMetadata(segmentData));\n  // ensureSegmentData(getState());\n}\n\nlet ensureSegmentDataTimer = null;\nasync function ensureSegmentData(state) {\n  if (ensureSegmentDataTimer) {\n    ensureSegmentDataTimer();\n    ensureSegmentDataTimer = null;\n  }\n\n  let entry = null;\n  if (Date.now() - state.startTime < 1000) {\n    ensureSegmentDataTimer = timeout(() => {\n      ensureSegmentDataTimer = null;\n      return ensureSegmentData(getState());\n    }, 1100 - (Date.now() - state.startTime));\n    return;\n  }\n  if (state.route) {\n    entry = Cache.getEntry(state.route, state.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n    if (state.segment !== 0) {\n      entry = Cache.getEntry(state.route, 0, DataLogEvent.broadcast);\n      if (entry) {\n        entry.start();\n      }\n    }\n  }\n  const { nextSegment } = state;\n  if (nextSegment) {\n    entry = Cache.getEntry(nextSegment.route, nextSegment.segment, DataLogEvent.broadcast);\n    if (entry) {\n      entry.start();\n    }\n  }\n}\n\nexport function init() {\n  // set up initial schedules\n  initAuthPromise.then(() => {\n    scheduleSegmentUpdate(getState());\n    checkSegmentMetadata(getState());\n  });\n\n  store.subscribe(() => {\n    const state = getState();\n    checkSegmentMetadata(state);\n    scheduleSegmentUpdate(state);\n    ensureSegmentData(state);\n\n    BroadcastEvent.broadcast({\n      command: 'state',\n      data: state\n    });\n  });\n}\n\nexport async function handleMessage(port, msg) {\n  if (msg.data.command) {\n    if (!commands[msg.data.command]) {\n      console.error('Invalid command!', msg.data);\n      return;\n    }\n    let result = commands[msg.data.command](port, msg.data.data, msg.ports);\n    if (result && msg.data.requestId) {\n      result = await result;\n      if (result) {\n        port.postMessage({\n          requestId: msg.data.requestId,\n          command: 'return-value',\n          data: result\n        });\n      }\n    }\n  }\n}\n","/* eslint-disable class-methods-use-this */\nimport window from 'global/window';\nimport Event from 'geval/event';\nimport * as capnp from 'capnp-ts';\nimport { Event as CapnpEvent, Event_Which as EventWhich } from '@commaai/log_reader/capnp/log.capnp';\nimport toJSON from '@commaai/capnp-json';\n\nimport { storage as AuthStorage } from '@commaai/my-comma-auth';\nimport * as Playback from './playback';\nimport * as LogIndex from './logIndex';\nimport * as Cache from './cache';\nimport { getDongleID, getZoom } from '../url';\nimport { getState, init as initTimeline } from './timeline';\nimport { commands } from './commands';\nimport store from './store';\n\nconst LogReaderWorker = require('./logReader');\n\nconst UnloadEvent = Event();\nconst StateEvent = Event();\nconst IndexEvent = Event();\nconst InitEvent = Event();\nconst InitPromise = new Promise(((resolve) => {\n  InitEvent.listen(resolve);\n}));\n\nwindow.addEventListener('beforeunload', UnloadEvent.broadcast);\nconst startPath = window.location ? window.location.pathname : '';\n\n// helper functions\n\nexport class TimelineInterface {\n  constructor(options) {\n    this.options = options || {};\n    this.buffers = {};\n    this.requestId = 1;\n    this.openRequests = {};\n    this.initPromise = InitPromise;\n\n    this.expire = this.expire.bind(this);\n  }\n\n  onStateChange = StateEvent.listen\n\n  onIndexed = IndexEvent.listen\n\n  async init(isDemo) {\n    if (!this.hasInit) {\n      this.hasInit = true;\n      this.isDemo = isDemo;\n\n      initTimeline();\n\n      this.readyPromise = commands.hello({\n        dongleId: getDongleID(startPath),\n        zoom: getZoom(startPath),\n      });\n\n      const token = await AuthStorage.getCommaAccessToken();\n      if (!(token || isDemo)) {\n        return new Promise((resolve, reject) => reject(Error('No auth')));\n      }\n\n      // if (false && typeof TimelineSharedWorker === 'function') {\n      //   worker = new TimelineSharedWorker();\n      //   t.isShared = true;\n      //   t.logReader = new LogReaderWorker();\n      if (typeof LogReaderWorker === 'function') {\n        this.logReader = new LogReaderWorker();\n      }\n\n      // broadcast message\n      // handle message\n      // cache port\n      commands.cachePort(null, [this.logReader.port || this.logReader]);\n\n      LogReaderWorker.onData((msg) => {\n        this.handleData(msg);\n      });\n\n      UnloadEvent.listen(() => this.disconnect());\n      Cache.onExpire(this.expire);\n      this.setState(getState());\n      store.subscribe(() => {\n        const state = store.getState();\n        this.setState(state);\n      });\n\n      InitEvent.broadcast(token);\n    }\n    return this.readyPromise;\n  }\n\n  async stop() {\n    if (!this.hasInit) {\n      return;\n    }\n    await commands.stop();\n    this.hasInit = false;\n    if (this.logReader) {\n      this.logReader = null;\n    }\n  }\n\n  async getPort() {\n    await this.initPromise;\n    return this.port;\n  }\n\n  async disconnect() {\n    return commands.close();\n  }\n\n  async seek(offset) {\n    return commands.seek(Math.round(offset));\n  }\n\n  async play(speed = 1) {\n    return commands.play(speed);\n  }\n\n  async pause() {\n    return commands.pause();\n  }\n\n  async disableBuffer() {\n    return commands.disableBuffer(true);\n  }\n\n  async bufferVideo(isBuffering = true) {\n    return commands.bufferVideo(isBuffering);\n  }\n\n  async bufferData(isBuffering = true) {\n    return commands.bufferData(isBuffering);\n  }\n\n  async selectTimeRange(start, end) {\n    return commands.selectTimeRange({ start, end });\n  }\n\n  async selectLoop(startTime, duration) {\n    return commands.selectLoop({ startTime, duration });\n  }\n\n  async selectDevice(dongleId) {\n    await this.readyPromise;\n    if (this.state.dongleId === dongleId) {\n      return true;\n    }\n    return commands.selectDevice(dongleId);\n  }\n\n  async resolveAnnotation(annotation, event, route) {\n    return commands.resolve({ annotation, event, route });\n  }\n\n  async updateDevice(device) {\n    return commands.updateDevice(device,);\n  }\n\n  setState(state) {\n    this.state = state;\n    StateEvent.broadcast(state);\n    if (this.logReader) {\n      const port = this.logReader.port || this.logReader;\n      if (this.state.route) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.route,\n            segment: this.state.segment,\n          }\n        });\n      }\n      if (this.state.nextSegment) {\n        port.postMessage({\n          command: 'touch',\n          data: {\n            route: this.state.nextSegment.route,\n            segment: this.state.nextSegment.segment,\n          }\n        });\n      }\n    }\n  }\n\n  expire(data) {\n    console.log('Expiring cache entry', data);\n    if (this.buffers[data.route] && this.buffers[data.route][data.segment]) {\n      delete this.buffers[data.route][data.segment];\n    }\n  }\n\n  async handleData(msg) {\n    if (!this.buffers[msg.data.route]) {\n      this.buffers[msg.data.route] = {};\n    }\n    if (!this.buffers[msg.data.route][msg.data.segment]) {\n      this.buffers[msg.data.route][msg.data.segment] = LogIndex.createIndex(msg.data.data);\n    } else {\n      LogIndex.addToIndex(this.buffers[msg.data.route][msg.data.segment], msg.data.data);\n    }\n    IndexEvent.broadcast(msg.data.route);\n  }\n\n  getStartMonoTime(route, segment = 0) {\n    if (!this.buffers[route]\n      || !this.buffers[route][segment]\n      || !this.buffers[route][segment].index) {\n      return 0;\n    }\n    return this.buffers[route][segment].index[0][0];\n  }\n\n  getIndex() {\n    if (!this.state || !this.state.route) {\n      return [];\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return [];\n    }\n\n    return this.buffers[this.state.route][this.state.segment].index;\n  }\n\n  currentLogMonoTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    const logIndex = this.buffers[this.state.route][this.state.segment];\n    if (!segment) {\n      return null;\n    }\n    offset -= segment.offset;\n    const startTime = logIndex.index[0][0];\n\n    return offset + startTime;\n  }\n\n  lastEvents(_eventCount = 10) {\n    const logMonoTime = this.currentLogMonoTime();\n    if (!logMonoTime) {\n      return [];\n    }\n    const logIndex = this.getLogIndex();\n\n    const curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n    const eventCount = Math.min(_eventCount, curIndex);\n\n    return [...Array(eventCount)].map((u, i) => this.getEvent(curIndex - i, logIndex));\n  }\n\n  getLogIndex() {\n    return this.buffers[this.state.route]\n      ? this.buffers[this.state.route][this.state.segment]\n      : null;\n  }\n\n  getNextLogIndex() {\n    if (!this.state.nextSegment) {\n      return null;\n    }\n    return this.buffers[this.state.nextSegment.route]\n      ? this.buffers[this.state.nextSegment.route][this.state.nextSegment.segment]\n      : null;\n  }\n\n  getEvent(index, _logIndex) {\n    // millis, nanos, offset, len, buffer\n    const logIndex = _logIndex || this.buffers[this.state.route][this.state.segment];\n    if (index < 0 || index >= logIndex.index.length) {\n      // console.log('Invalid event index', index);\n      return null;\n    }\n    const entry = logIndex.index[index];\n    const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentOffset() {\n    if (this.state) {\n      return Playback.currentOffset(this.state);\n    }\n    return 0;\n  }\n\n  timestampToOffset(timestamp) {\n    if (this.state) {\n      return Playback.timestampToOffset(this.state, timestamp);\n    }\n    return 0;\n  }\n\n  firstFrameTime() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][0]) {\n      return null;\n    }\n\n    const logIndex = this.buffers[this.state.route][0];\n    for(let i = 0; i < logIndex.index.length; i++) {\n      const entry = logIndex.index[i];\n      if (entry[5] === EventWhich.FRAME) {\n        const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n        const msg = new capnp.Message(buffer, false);\n        const event = toJSON(msg.getRoot(CapnpEvent));\n        return event.Frame.TimestampEof / 1e9;\n      }\n    }\n    return null;\n  }\n\n  currentInitData() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    // check if any buffered logs have the initdata packet\n    const curSegLog = this.buffers[this.state.route][this.state.segment];\n    const entry = curSegLog.index[0];\n    if (entry[5] !== EventWhich.INIT_DATA) {\n      return null;\n    }\n\n    const buffer = curSegLog.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n    const msg = new capnp.Message(buffer, false);\n    const event = msg.getRoot(CapnpEvent);\n    return toJSON(event);\n  }\n\n  currentModel() {\n    return this.getEventByType(EventWhich.MODEL, 1000);\n  }\n\n  currentModelV2() {\n    return this.getEventByType(EventWhich.MODEL_V2, 1000);\n  }\n\n  currentRadarState() {\n    return this.getEventByType(EventWhich.RADAR_STATE, 1000);\n  }\n\n  currentMPC() {\n    return this.getEventByType(EventWhich.LIVE_MPC, 1000);\n  }\n\n  currentCarState() {\n    return this.getEventByType(EventWhich.CAR_STATE, 1000);\n  }\n\n  currentControlsState() {\n    return this.getEventByType(EventWhich.CONTROLS_STATE);\n  }\n\n  currentDriverMonitoring() {\n    return this.getEventByType(EventWhich.DRIVER_MONITORING, 1000);\n  }\n\n  currentThumbnail() {\n    return this.getEventByType(EventWhich.THUMBNAIL, 6000);\n  }\n\n  currentLiveCalibration() {\n    return this.getEventByType(EventWhich.LIVE_CALIBRATION, 1000);\n  }\n\n  getEventByType(which, maxTimeDiff = -1) {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    if (!this.buffers[this.state.route] || !this.buffers[this.state.route][this.state.segment]) {\n      return null;\n    }\n    const monoTime = this.currentLogMonoTime();\n    let offset = this.currentOffset();\n    const [segment] = this.state.segments.filter((a) => a.route === this.state.route);\n    if (!segment) {\n      return null;\n    }\n\n    for (let curSegNum = this.state.segment; curSegNum >= 0; --curSegNum) {\n      const logIndex = this.buffers[this.state.route][curSegNum];\n      if (!logIndex) {\n        return null;\n      }\n      offset -= segment.offset;\n      const startTime = logIndex.index[0][0];\n      const logMonoTime = offset + startTime;\n      let curIndex = logIndex.index.length - 1;\n      if (curSegNum === this.state.segment) {\n        curIndex = LogIndex.findMonoTime(logIndex, logMonoTime);\n      }\n\n      for (curIndex; curIndex >= 0; --curIndex) {\n        const entry = logIndex.index[curIndex];\n        if (maxTimeDiff !== -1 && monoTime - entry[0] > maxTimeDiff) {\n          return null;\n        }\n        if (entry[5] === which) {\n          const buffer = logIndex.buffers[entry[4]].slice(entry[2], entry[2] + entry[3]);\n          const msg = new capnp.Message(buffer, false);\n          const event = msg.getRoot(CapnpEvent);\n          return toJSON(event);\n        }\n      }\n    }\n\n    return null;\n  }\n\n  getCalibration() {\n    if (!this.state || !this.state.route) {\n      return null;\n    }\n    const indexes = this.buffers[this.state.route];\n\n    if (!indexes) {\n      return null;\n    }\n\n    for (let i = 0, keys = Object.keys(indexes), len = keys.length; i < len; ++i) {\n      const index = indexes[keys[i]];\n      if (index.calibrations && index.calibrations.length) {\n        return index.calibrations[index.calibrations.length - 1];\n      }\n    }\n    return null;\n  }\n}\n// create instance and expose it\nconst timeline = new TimelineInterface();\nexport default timeline;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Modal from '@material-ui/core/Modal';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\n\nimport { DateTimePicker } from 'material-ui-pickers';\n\nimport Timelineworker from '../../timeline';\n\nconst styles = (theme) => ({\n  root: {},\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    margin: '0 auto',\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)'\n  },\n  buttonGroup: {\n    textAlign: 'right'\n  },\n  headerDropdown: {\n    fontWeight: 500,\n    marginRight: 12,\n    minWidth: 310,\n    textAlign: 'center',\n  },\n});\n\nconst LOOKBACK_WINDOW_MILLIS = 365 * 24 * 3600 * 1000; // 30 days\n\nclass TimeSelect extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.changeStart = this.changeStart.bind(this);\n    this.changeEnd = this.changeEnd.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n\n    this.state = {\n      showPicker: false\n    };\n  }\n\n  handleSelectChange(e) {\n    const selection = e.target.value;\n    const d = new Date();\n    d.setHours(d.getHours() + 1, 0, 0, 0);\n\n    switch (selection) {\n      case '24-hours':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24), d.getTime());\n        break;\n      case '1-week':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 7), d.getTime());\n        break;\n      case '2-weeks':\n        Timelineworker.selectTimeRange(d.getTime() - (1000 * 60 * 60 * 24 * 14), d.getTime());\n        break;\n      case 'custom':\n        this.setState({\n          showPicker: true,\n          start: this.props.start,\n          end: this.props.end\n        });\n        break;\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showPicker: false\n    });\n  }\n\n  changeStart(value) {\n    this.setState({\n      start: value.getTime()\n    });\n  }\n\n  changeEnd(value) {\n    this.setState({\n      end: value.getTime()\n    });\n  }\n\n  handleSave() {\n    Timelineworker.selectTimeRange(this.state.start, this.state.end);\n    this.setState({\n      showPicker: false,\n      start: null,\n      end: null\n    });\n  }\n\n  selectedOption() {\n    const timeRange = this.props.end - this.props.start;\n\n    if (Math.abs(this.props.end - Date.now()) < 1000 * 60 * 60) {\n      // ends right around now\n      if (timeRange === 1000 * 60 * 60 * 24 * 14) {\n        return '2-weeks';\n      } if (timeRange === 1000 * 60 * 60 * 24 * 7) {\n        return '1-week';\n      } if (timeRange === 1000 * 60 * 60 * 24) {\n        return '24-hours';\n      }\n    }\n\n    return 'custom';\n  }\n\n  lastWeekText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const weekAgo = Date.now() - (1000 * 60 * 60 * 24 * 7);\n    return `Last Week${\n      fecha.format(new Date(weekAgo), ' (MMM Do - ')\n    }${fecha.format(new Date(), 'MMM Do)')}`;\n  }\n\n  last2WeeksText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n\n    const twoWeeksAgo = Date.now() - (1000 * 60 * 60 * 24 * 14);\n    return `2 Weeks${\n      fecha.format(new Date(twoWeeksAgo), ' (M/D - ')\n    }${fecha.format(new Date(), 'M/D)')}`;\n  }\n\n  last24HoursText() {\n    if (!this.props.start || !this.props.end) {\n      return '--';\n    }\n    return 'Last 24 Hours';\n  }\n\n  render() {\n    const minDate = new Date(Date.now() - LOOKBACK_WINDOW_MILLIS).toISOString().substr(0, 10);\n\n    return (\n      <>\n        <FormControl>\n          <Select\n            name=\"timerange\"\n            value={this.selectedOption()}\n            onChange={this.handleSelectChange}\n            className={this.props.classes.headerDropdown}\n          >\n            <MenuItem value=\"custom\">Custom</MenuItem>\n            <MenuItem value=\"24-hours\">{ this.last24HoursText() }</MenuItem>\n            <MenuItem value=\"1-week\">{ this.lastWeekText() }</MenuItem>\n            <MenuItem value=\"2-weeks\">{ this.last2WeeksText() }</MenuItem>\n          </Select>\n        </FormControl>\n        <Modal\n          aria-labelledby=\"simple-modal-title\"\n          aria-describedby=\"simple-modal-description\"\n          open={this.state.showPicker}\n          onClose={this.handleClose}\n        >\n          <Paper className={this.props.classes.modal}>\n            <DateTimePicker\n              minDate={minDate}\n              value={new Date(this.state.start || this.props.start || 0)}\n              onChange={this.changeStart}\n              label=\"Start time\"\n              showTodayButton\n            />\n            <DateTimePicker\n              minDate={minDate}\n              value={new Date(this.state.end || this.props.end || 0)}\n              onChange={this.changeEnd}\n              label=\"End time\"\n              showTodayButton\n            />\n            <br />\n            <br />\n            <Divider />\n            <br />\n            <div className={this.props.classes.buttonGroup}>\n              <Button variant=\"contained\" onClick={this.handleClose}>\n                Cancel\n              </Button>\n              &nbsp;\n              <Button variant=\"contained\" color=\"secondary\" onClick={this.handleSave}>\n                Save\n              </Button>\n            </div>\n          </Paper>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  end: 'workerState.end',\n  start: 'workerState.start'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeSelect));\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport const auth_apple = require('./auth_apple.png');\nexport const auth_github = require('./auth_github.png');\nexport const auth_google = require('./auth_google.png');\n\nexport function AccountIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"translate(-198.000000, -189.000000)\">\n        <path d=\"M210,189 C203.381053,189 198,194.381053 198,201 C198,207.618947 203.381053,213 210,213 C216.618947,213 222,207.618947 222,201 C222,194.381053 216.618947,189 210,189 Z M216.724916,207.352941 C216.374763,206.716762 215.824522,206.182371 215.099204,205.902453 L212.623121,204.808224 C211.972836,204.553753 211.522639,203.917573 211.472617,203.205053 L211.422595,202.747004 C212.573099,201.856353 213.348438,200.125945 213.348438,198.293749 C213.348438,195.647243 211.697716,193.815047 209.671829,193.815047 C207.645942,193.815047 205.99522,195.647243 205.99522,198.293749 C205.99522,200.125945 206.770559,201.830905 207.921063,202.747004 L207.871041,203.205053 C207.821019,203.917573 207.370822,204.528305 206.720537,204.808224 L204.244453,205.902453 C203.544147,206.182371 202.968895,206.716762 202.618742,207.352941 C201.068063,205.622534 200.117647,203.332288 200.117647,200.813019 C200.117647,195.469113 204.394519,191.117647 209.646818,191.117647 C214.899117,191.117647 219.175989,195.469113 219.175989,200.813019 C219.201,203.332288 218.250584,205.622534 216.724916,207.352941 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nexport function HistoryBackIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n      <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n    </SvgIcon>\n  );\n}\nexport function HistoryForwardIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"matrix(-1, 0, 0, 1, 0, 0)\" transform-origin=\"center\">\n        <path d=\"M16.8880175,1.0391027 C13.9587286,-0.258687148 10.6253998,-0.358517136 7.5951009,0.839442723 C5.57490164,1.63808263 3.75672231,2.93587248 2.44359279,4.63298228 L1.93854298,2.83604249 C1.83753301,2.23706256 1.3324832,1.93757259 0.726423422,2.03740258 C0.221373607,2.23706256 -0.0816562816,2.7362125 0.0193536814,3.23536244 L1.02945331,7.32839196 C1.13046327,7.8275419 1.53450313,8.12703187 2.03955294,8.12703187 C2.1405629,8.12703187 2.24157287,8.12703187 2.24157287,8.12703187 L6.38298135,7.12873198 C6.88803116,7.028902 7.29207101,6.42992207 7.09005109,5.93077212 C7.09005109,5.3317922 6.48399131,5.03230223 5.9789415,5.23196221 L4.26177213,5.63128216 C5.37288172,4.33349231 6.68601124,3.33519243 8.30217064,2.7362125 C10.8274197,1.73791262 13.5546887,1.83774261 16.0799378,2.93587248 C18.5041769,4.03400235 20.4233662,5.93077212 21.4334658,8.42652183 C22.4435655,10.9222715 22.3425555,13.6176812 21.2314459,16.1134309 C20.1203363,18.6091806 18.201147,20.4061204 15.6758979,21.4044203 C12.1405492,22.7022102 8.20116068,22.1032302 5.37288172,19.6074805 C4.16076216,18.5093506 3.15066253,17.2115608 2.54460276,15.714111 C2.34258283,15.214961 1.73652305,14.9154711 1.23147324,15.115131 C0.726423422,15.314791 0.423393533,15.913771 0.625413459,16.4129209 C1.3324832,18.2098607 2.54460276,19.9069705 3.95874224,21.1049303 C6.18096142,23.0017001 9.00924038,24 11.9385293,24 C13.4536788,24 14.8678182,23.70051 16.2819577,23.2013601 C19.3122566,22.0034002 21.6354858,19.8071405 22.9486153,16.9120708 C24.2617448,14.0170012 24.3627548,10.7226116 23.1506352,7.72771191 C21.9385156,4.73281227 19.9183164,2.33689255 16.8880175,1.0391027 Z\" />\n        <path d=\"M11.7081415,6.22222222 C11.0832566,6.22222222 10.6666667,6.61010101 10.6666667,7.19191919 L10.6666667,13.010101 C10.6666667,13.3010101 10.7708142,13.5919192 11.0832566,13.7858586 L15.2491561,16.6949495 C15.4574511,16.7919192 15.6657461,16.8888889 15.8740411,16.8888889 C16.1864835,16.8888889 16.498926,16.7919192 16.707221,16.5010101 C17.0196634,16.1131313 16.9155159,15.4343434 16.498926,15.1434343 L12.7496164,12.5252525 L12.7496164,7.19191919 C12.7496164,6.61010101 12.3330265,6.22222222 11.7081415,6.22222222 Z\" />\n      </g>\n    </SvgIcon>\n  );\n}\nexport function CommaIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <g transform=\"scale(0.35, 0.35)\" transform-origin=\"center\">\n        <path d=\"M2.3325273,44 C2.3325273,42.9819019 2.25294268,42.1290181 2.37000751,41.3070321 C2.41990001,40.9564305 2.82901847,40.5810595 3.16268975,40.3693706 C4.78942848,39.3369727 6.55659633,38.5126886 8.07113779,37.32861 C12.9769087,33.4931864 15.8847893,28.4440632 16.0437152,21.8852845 C16.0887401,20.0229846 15.4041177,19.5577289 13.8399272,20.2831908 C9.32477801,22.3776079 4.46938637,21.1496084 1.87814052,17.2574961 C-0.947721751,13.012484 -0.549798677,7.36046894 2.83607643,3.65221184 C7.16090397,-1.08410221 14.2770341,-1.22582393 19.1842653,3.29752453 C22.1237851,6.00709044 23.5205316,9.50570155 23.8688055,13.4851451 C25.0365333,26.8169447 18.349722,37.8056121 6.17936039,42.6328324 C4.97488253,43.1103451 3.73973905,43.5025696 2.3325273,44\" />\n      </g>\n    </SvgIcon>\n  );\n}\n\nfunction chevronPath(rotation = 270) {\n  return (\n    <path d=\"M16.8625817,0.35528597 C16.3546389,-0.125475313 15.550396,-0.125475313 15.0847818,0.398991541 L5.3492107,11.1068565 C4.88359643,11.6313233 4.88359643,12.4180236 5.3492107,12.8987849 L15.0847818,23.6066499 C15.3387532,23.8688833 15.6773817,24 16.0160103,24 C16.3123103,24 16.6509389,23.8688833 16.9049103,23.6503554 C17.4128531,23.1695941 17.4551817,22.3391883 16.9472388,21.8147214 L7.97358203,12.0246735 L16.9049103,2.19091996 C17.3705245,1.66645311 17.3705245,0.836047253 16.8625817,0.35528597 Z\" transform={`rotate(${rotation})`} transform-origin=\"center\" />\n  );\n}\n\nexport function ChevronIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(270) }\n    </SvgIcon>\n  );\n}\nexport const DownArrow = ChevronIcon;\n\nexport function UpArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(90) }\n    </SvgIcon>\n  );\n}\n\nexport function RightArrow(props) {\n  return (\n    <SvgIcon {...props}>\n      { chevronPath(180) }\n    </SvgIcon>\n  );\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport fecha from 'fecha';\nimport { partial } from 'ap';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Pause from '@material-ui/icons/Pause';\n\nimport {\n  DownArrow, UpArrow, HistoryForwardIcon, HistoryBackIcon\n} from '../../icons';\n\nimport TimelineWorker from '../../timeline';\n\nconst timerSteps = [\n  0.1,\n  0.25,\n  0.5,\n  1,\n  2,\n  3,\n  4,\n  5\n];\n\nfunction jumpBack(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() - amount);\n}\n\nfunction jumpForward(amount) {\n  TimelineWorker.seek(TimelineWorker.currentOffset() + amount);\n}\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: theme.palette.grey[999],\n    height: '64px',\n    borderRadius: '32px',\n    padding: theme.spacing.unit,\n    maxWidth: 510,\n    margin: '0 auto',\n    minWidth: 450,\n    opacity: 0,\n    pointerEvents: 'none',\n    transition: 'opacity 0.1s ease-in-out',\n    '&.isExpanded': {\n      opacity: 1,\n      pointerEvents: 'auto',\n    },\n    '&.isThin': {\n      height: 50,\n      paddingBottom: 0,\n      paddingTop: 0,\n    },\n  },\n  icon: {\n    width: '98%',\n    height: '98%',\n    '&.dim': {\n      color: theme.palette.grey[700]\n    },\n    '&.small': {\n      width: '60%',\n      height: '60%',\n    },\n    '&.circle': {\n      border: `1px solid ${theme.palette.grey[900]}`,\n      borderRadius: '50%'\n    }\n  },\n  tinyArrow: {\n    display: 'flex',\n    height: 12,\n  },\n  tinyArrowIcon: {\n    width: 12,\n    height: 12,\n    color: theme.palette.grey[700]\n  },\n  iconButton: {\n    maxWidth: '100%',\n    maxHeight: '100%'\n  },\n  iconBox: {\n    display: 'inline-block',\n    borderRight: `1px solid ${theme.palette.grey[900]}`\n  },\n  dateTime: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  currentTime: {\n    fontSize: 15,\n    fontWeight: 500,\n    display: 'block',\n    marginTop: 4,\n  }\n});\n\nclass TimeDisplay extends Component {\n  static getDerivedStateFromProps(props, state) {\n    if (props.playSpeed !== 0 && props.playSpeed !== state.playSpeed) {\n      return {\n        ...state,\n        playSpeed: props.playSpeed\n      };\n    }\n    return state;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.textHolder = React.createRef();\n\n    this.updateTime = this.updateTime.bind(this);\n    this.togglePause = this.togglePause.bind(this);\n    this.increaseSpeed = this.increaseSpeed.bind(this);\n    this.decreaseSpeed = this.decreaseSpeed.bind(this);\n\n    this.state = {\n      playSpeed: 1,\n      displayTime: this.getDisplayTime()\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.updateTime);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getDisplayTime() {\n    const currentOffset = TimelineWorker.currentOffset();\n    const { start } = this.props;\n    if (!Number.isFinite(start)) {\n      return '...';\n    }\n    const now = new Date(currentOffset + start);\n    const dateString = fecha.format(now, 'ddd, D MMM, YYYY @ HH:mm:ss');\n    // var dateString = fecha.format(now, 'MMM D @ HH:mm:ss');\n\n    return dateString;\n  }\n\n  updateTime() {\n    if (!this.mounted || !this.textHolder.current) {\n      return;\n    }\n    const newDisplayTime = this.getDisplayTime();\n    const { displayTime } = this.state;\n    if (newDisplayTime !== displayTime) {\n      this.setState({ displayTime: newDisplayTime });\n    }\n\n    raf(this.updateTime);\n  }\n\n  decreaseSpeed() {\n    const { playSpeed } = this.state;\n    let curIndex = timerSteps.indexOf(playSpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.max(0, curIndex - 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  increaseSpeed() {\n    const { playSpeed } = this.state;\n    let curIndex = timerSteps.indexOf(playSpeed);\n    if (curIndex === -1) {\n      curIndex = timerSteps.indexOf(1);\n    }\n    curIndex = Math.min(timerSteps.length - 1, curIndex + 1);\n    TimelineWorker.play(timerSteps[curIndex]);\n  }\n\n  togglePause(e) {\n    const { playSpeed } = this.props;\n    if (playSpeed === 0) {\n      TimelineWorker.play(this.state.playSpeed);\n    } else {\n      TimelineWorker.pause();\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const isPaused = this.props.playSpeed === 0;\n    return (\n      <div\n        className={cx(classes.base, {\n          isExpanded: this.props.expanded,\n          isThin: this.props.isThin,\n        })}\n      >\n        <Grid container>\n          <Grid item xs={3}>\n            <Grid container>\n              <Grid item align=\"center\" xs={6} className={classes.iconBox}>\n                <IconButton\n                  onClick={partial(jumpBack, 10000)}\n                  aria-label=\"Jump back 10 seconds\"\n                >\n                  <HistoryBackIcon className={`${classes.icon} small dim`} />\n                </IconButton>\n              </Grid>\n              <Grid item align=\"center\" xs={6} className={classes.iconBox}>\n                <IconButton\n                  onClick={partial(jumpForward, 10000)}\n                  aria-label=\"Jump forward 10 seconds\"\n                >\n                  <HistoryForwardIcon className={`${classes.icon} small dim`} />\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6} className={classes.dateTime}>\n            { !this.props.isThin && (\n              <Typography variant=\"caption\" align=\"center\" style={{ paddingTop: 4 }}>\n                CURRENT PLAYBACK TIME\n              </Typography>\n            )}\n            <Typography variant=\"body1\" align=\"center\">\n              <span ref={this.textHolder} className={classes.currentTime}>\n                { this.state.displayTime }\n              </span>\n            </Typography>\n          </Grid>\n          <Grid item xs={3}>\n            <Grid container>\n              <Grid item align=\"center\" xs={4} className={classes.iconBox}>\n                <Grid container alignItems=\"center\" direction=\"column\">\n                  <Grid item className={classes.tinyArrow}>\n                    <IconButton\n                      className={classes.tinyArrowIcon}\n                      onClick={this.increaseSpeed}\n                      aria-label=\"Increase play speed by 1 step\"\n                    >\n                      <UpArrow className={classes.tinyArrowIcon} />\n                    </IconButton>\n                  </Grid>\n                  <Grid item>\n                    <Typography variant=\"body2\" align=\"center\">\n                      { this.state.playSpeed }\nx\n                    </Typography>\n                  </Grid>\n                  <Grid item className={classes.tinyArrow}>\n                    <IconButton\n                      className={classes.tinyArrowIcon}\n                      onClick={this.decreaseSpeed}\n                      aria-label=\"Decrease play speed by 1 step\"\n                    >\n                      <DownArrow className={classes.tinyArrowIcon} />\n                    </IconButton>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item align=\"center\" xs={8}>\n                <IconButton\n                  onClick={this.togglePause}\n                  aria-label={isPaused ? 'Unpause' : 'Pause'}\n                >\n                  { isPaused\n                    ? (<PlayArrow className={`${classes.icon} circle`} />)\n                    : (<Pause className={`${classes.icon} circle`} />)}\n                </IconButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nTimeDisplay.propTypes = {\n  classes: PropTypes.object.isRequired,\n  playSpeed: PropTypes.number.isRequired,\n  start: PropTypes.number.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  playSpeed: 'workerState.desiredPlaySpeed',\n  start: 'workerState.start',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(TimeDisplay));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport Obstruction from 'obstruction';\nimport fecha from 'fecha';\nimport localforage from 'localforage';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItem from '@material-ui/core/ListItem';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport MyCommaAuth from '@commaai/my-comma-auth';\n\nimport TimeFilter from './TimeFilter';\nimport TimeDisplay from '../TimeDisplay';\nimport { AccountIcon } from '../../icons';\n\nimport Timelineworker from '../../timeline';\n\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: '#1D2225',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    display: 'flex',\n    width: '100%',\n  },\n  logo: {\n    alignItems: 'center',\n    display: 'flex',\n    maxWidth: 200,\n    textDecoration: 'none',\n  },\n  logoImg: {\n    height: '34px',\n    margin: '0px 28px',\n    width: 'auto',\n  },\n  logoText: {\n    fontFamily: 'MaisonNeueExtended',\n    fontSize: 18,\n    fontWeight: 600,\n  },\n  timeDisplay: {\n    alignItems: 'center',\n  },\n  selectArea: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'flex-end',\n    marginLeft: 'auto',\n    paddingRight: 28,\n  },\n  accountIcon: {\n    color: '#272D30',\n    height: 34,\n    width: 34,\n  },\n  userMeta: {\n    outline: 'none',\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\n    borderBottom: `1px solid ${theme.palette.white[12]}`,\n  },\n  userMetaLink: {\n    textDecoration: 'none',\n    color: '#fff',\n  },\n});\n\nclass AppHeader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickedAccount = this.handleClickedAccount.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogOut = this.handleLogOut.bind(this);\n\n    this.state = {\n      anchorEl: null,\n    };\n  }\n\n  handleClickedAccount(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  handleClose() {\n    this.setState({ anchorEl: null });\n  }\n\n  handleLogOut() {\n    this.handleClose();\n    localforage.removeItem('isDemo');\n    MyCommaAuth.logOut();\n  }\n\n  render() {\n    const { profile, classes } = this.props;\n    const { auth, anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    if (!profile) {\n      return [];\n    }\n\n    return (\n      <header className={classes.base}>\n        <Grid container spacing={0}>\n          <Grid item container xs={2} lg={4}>\n            <Link to=\"/\" className={classes.logo}>\n              <img src=\"/images/comma-white.png\" className={classes.logoImg} />\n              <Typography className={classes.logoText}>\n                explorer\n              </Typography>\n            </Link>\n          </Grid>\n          <Grid item container xs={6} lg={4} className={classes.timeDisplay}>\n            <TimeDisplay isThin />\n          </Grid>\n          <Grid\n            item\n            xs={4}\n            align=\"right\"\n            className={classes.selectArea}\n          >\n            <TimeFilter />\n            <IconButton\n              aria-owns={open ? 'menu-appbar' : null}\n              aria-haspopup=\"true\"\n              onClick={this.handleClickedAccount}\n            >\n              <AccountIcon className={classes.accountIcon} />\n            </IconButton>\n            <Menu\n              id=\"menu-appbar\"\n              open={open}\n              onClose={this.handleClose}\n              anchorEl={anchorEl}\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n            >\n              <ListItem classes={{ root: classes.userMeta }} disableGutters>\n                <div>\n                  <Typography variant=\"body2\" paragraph>\n                    { profile.email }\n                  </Typography>\n                  <Typography variant=\"body1\" paragraph>\n                    { profile.points }\n                    {' '}\npoints\n                  </Typography>\n                </div>\n              </ListItem>\n              <li>\n                <MenuItem\n                  component=\"a\"\n                  href=\"/useradmin/\"\n                  target=\"_blank\"\n                >\nManage Account\n                </MenuItem>\n              </li>\n              <MenuItem onClick={this.handleLogOut}>Log out</MenuItem>\n            </Menu>\n          </Grid>\n        </Grid>\n      </header>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  dongleId: 'workerState.dongleId',\n  start: 'workerState.start',\n  end: 'workerState.end',\n  profile: 'workerState.profile',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AppHeader));\n","import { push } from 'connected-react-router';\nimport document from 'global/document';\nimport * as Types from './types';\nimport Timelineworker from '../timeline';\nimport { getDongleID } from '../url';\n\nexport function updateState(data) {\n  return {\n    type: Types.WORKER_STATE_UPDATE,\n    data\n  };\n}\n\nexport function selectRange(start, end) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (!state.workerState.dongleId) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n      return;\n    }\n    const curPath = document.location.pathname;\n    const dongleId = getDongleID(curPath) || state.workerState.dongleId;\n    const desiredPath = urlForState(dongleId, start, end);\n\n    if (state.zoom.start !== start || state.zoom.end !== end) {\n      dispatch({\n        type: Types.TIMELINE_SELECTION_CHANGED,\n        start,\n        end\n      });\n    }\n\n    if (!state.workerState.loop.startTime\n      || !state.workerState.loop.duration\n      || state.workerState.loop.startTime < start\n      || state.workerState.loop.startTime + state.workerState.loop.duration > end\n      || state.workerState.loop.duration < end - start) {\n      Timelineworker.selectLoop(start, end - start);\n    }\n\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nexport function selectDevice(dongleId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    if (state.workerState.dongleId !== dongleId) {\n      Timelineworker.selectDevice(dongleId);\n    }\n    const curPath = document.location.pathname;\n    const desiredPath = urlForState(dongleId, state.zoom.start, state.zoom.end);\n\n    if (curPath !== desiredPath) {\n      dispatch(push(desiredPath));\n    }\n  };\n}\n\nfunction urlForState(dongleId, start, end) {\n  const path = [dongleId];\n\n  if (start && end) {\n    path.push(start);\n    path.push(end);\n  }\n\n  return `/${path.join('/')}`;\n}\n","export const WORKER_STATE_UPDATE = 'workerstate';\nexport const TIMELINE_SELECTION_CHANGED = 'timeline_selection_changed';\n","export function filterEvent(event) {\n  return (event.type === 'disengage' || event.type === 'disengage_steer');\n}\n\nexport function formatDriveDuration(duration) {\n  const milliseconds = Math.floor((duration % 1000) / 100);\n  let seconds = Math.floor((duration / 1000) % 60);\n  let minutes = Math.floor((duration / (1000 * 60)) % 60);\n  let hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n  hours = (hours < 10) ? hours : hours;\n  minutes = (minutes < 10) ? minutes : minutes;\n  seconds = (seconds < 10) ? seconds : seconds;\n  return {\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n  };\n}\n\nexport function getDrivePoints(duration) {\n  const minutes = Math.floor(duration / (1000 * 60));\n  const points = Math.floor(minutes * 1.5); // panda\n  return points;\n}\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = (theme) => ({\n  shopLink: {\n    textDecoration: 'none',\n  }\n});\n\nclass ShopButton extends Component {\n  render() {\n    return (\n      <a href={this.props.link} target=\"_blank\" className={this.props.classes.shopLink}>\n        <Button variant=\"outlined\">\n          Shop\n        </Button>\n      </a>\n    );\n  }\n}\n\nexport default withStyles(styles)(ShopButton);\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport ShopButton from './shopButton';\n\nconst styles = (theme) => ({\n  root: {\n    display: 'flex',\n    paddingTop: '48px'\n  },\n  eon: {\n    display: 'block',\n    width: '100%',\n    paddingTop: '30px',\n  },\n  content: {\n    padding: '20px 12px',\n    textAlign: 'center'\n  },\n  imageContainer: {\n    display: 'flex',\n    alignItems: 'center',\n  }\n});\n\nclass CommaTwoUpsell extends Component {\n  render() {\n    return (\n      <div className={this.props.classes.root}>\n        <Grid item xs={6} className={this.props.classes.imageContainer}>\n          <img\n            src=\"https://comma.ai/two-onroad-transparent-01.png\"\n            className={this.props.classes.eon}\n          />\n        </Grid>\n        <Grid item xs={6} className={this.props.classes.content}>\n          <Typography>{ this.props.hook }</Typography>\n          <ShopButton link=\"https://comma.ai/shop/products/comma-two-devkit/?ref=explorer\" />\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(CommaTwoUpsell);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport Raven from 'raven-js';\nimport cx from 'classnames';\n\nimport {\n  withStyles,\n  Grid,\n  Button,\n  Typography,\n  FormHelperText,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  LinearProgress,\n  FormControl,\n  TextField,\n} from '@material-ui/core';\nimport Pencil from '@material-ui/icons/Edit';\n\nimport { devices as Devices } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\nimport CommaTwoUpsell from '../Annotations/commaTwoUpsell';\n\nconst styles = (theme) => ({\n  base: {\n    height: '100%',\n    overflowY: 'scroll',\n  },\n  device: {\n    alignItems: 'center',\n    cursor: 'pointer',\n    display: 'flex',\n    padding: 32,\n    paddingTop: 16,\n    paddingBottom: 16,\n    '&.isSelected': {\n      backgroundColor: '#171B1D',\n    }\n  },\n  deviceAvatar: {\n    backgroundColor: '#1D2225',\n    borderRadius: 30,\n    height: 46,\n    width: 46,\n  },\n  deviceInfo: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    marginLeft: 16,\n  },\n  deviceAlias: {},\n  deviceId: {\n    color: '#525E66',\n    fontFamily: 'MaisonNeueMono',\n  },\n\n  editDeviceIcon: {\n    color: 'white',\n    '&:hover': {\n      color: theme.palette.grey[100]\n    }\n  },\n  nameField: {\n    marginRight: theme.spacing.unit,\n  },\n  saveButton: {\n    marginRight: theme.spacing.unit,\n  },\n  textField: {\n    marginBottom: theme.spacing.unit\n  },\n});\n\nclass DeviceList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      editingDevice: null,\n      deviceAlias: '',\n      isWaitingForApi: false,\n      error: null,\n    };\n\n    this.handleAliasChange = this.handleAliasChange.bind(this);\n    this.handleAliasFieldKeyPress = this.handleAliasFieldKeyPress.bind(this);\n    this.renderDevice = this.renderDevice.bind(this);\n    this.setDeviceAlias = this.setDeviceAlias.bind(this);\n    this.toggleDeviceEdit = this.toggleDeviceEdit.bind(this);\n    this.cancelEdit = this.cancelEdit.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.selectedDevice !== this.props.selectedDevice\n        && nextProps.selectedDevice !== this.state.editingDevice) {\n      this.setState({ editingDevice: null });\n    }\n  }\n\n  toggleDeviceEdit(device) {\n    if (this.state.editingDevice === device.dongle_id) {\n      this.setState({ editingDevice: null });\n    } else {\n      this.props.handleDeviceSelected(device.dongle_id);\n      this.setState({ editingDevice: device.dongle_id, deviceAlias: device.alias });\n    }\n  }\n\n  cancelEdit() {\n    this.setState({ editingDevice: null });\n  }\n\n  handleAliasChange(e) {\n    this.setState({ deviceAlias: e.target.value });\n  }\n\n  handleAliasFieldKeyPress(dongle_id, e) {\n    if (e.key === 'Enter' && !this.state.isWaitingForApi) {\n      this.setDeviceAlias(dongle_id);\n    }\n  }\n\n  async setDeviceAlias(dongle_id) {\n    this.setState({ isWaitingForApi: true });\n    try {\n      const device = await Devices.setDeviceAlias(dongle_id, this.state.deviceAlias.trim());\n      Timelineworker.updateDevice(device);\n      this.setState({ isWaitingForApi: false, editingDevice: null });\n    } catch (e) {\n      Raven.captureException(e);\n      this.setState({ error: e.message, isWaitingForApi: false });\n    }\n  }\n\n  deviceTypePretty(deviceType) {\n    if (deviceType === 'neo') {\n      return 'EON';\n    } else if (deviceType === 'two') {\n      return 'comma two';\n    }\n    return deviceType;\n  }\n\n  render() {\n    let { devices } = this.props;\n    const dongleId = this.props.selectedDevice;\n    let found = devices.some((device) => device.dongle_id === dongleId);\n    let onlyHasAppDevice = (devices.length === 0);\n\n    if (!found) {\n      devices = [{\n        dongle_id: dongleId,\n        shared: true,\n        alias: 'Shared device',\n      }].concat(devices);\n    }\n\n    return (\n      <div className={this.props.classes.base}>\n        { devices.filter(this.filterDrivingDevice).map(this.renderDevice) }\n        { onlyHasAppDevice && <CommaTwoUpsell hook=\"Get started with comma two\" /> }\n      </div>\n    );\n  }\n\n  renderDevice(device) {\n    const { classes } = this.props;\n    const isSelected = (this.props.selectedDevice === device.dongle_id);\n    const alias = device.alias || this.deviceTypePretty(device.device_type);\n    return (\n      <div\n        key={device.dongle_id}\n        onClick={partial(this.props.handleDeviceSelected, device.dongle_id)}\n        className={cx(classes.device, [{ isSelected }])}\n      >\n        <div className={classes.deviceAvatar} />\n        <div className={classes.deviceInfo}>\n          <Typography variant=\"body2\" className={classes.deviceAlias}>\n            { alias }\n          </Typography>\n          <Typography variant=\"caption\" className={classes.deviceId}>\n            (\n            { device.dongle_id }\n)\n          </Typography>\n        </div>\n      </div>\n    );\n\n    const oldRender = (\n      <ExpansionPanel\n        classes={{ expanded: classes.expanded }}\n        key={device.dongle_id}\n        expanded={this.props.selectedDevice === device.dongle_id}\n        onChange={partial(this.props.handleDeviceSelected, device.dongle_id)}\n        className={classes.expansion}\n      >\n        <ExpansionPanelSummary>\n          <Grid container>\n            <Grid item xs={10}>\n              { this.state.editingDevice === device.dongle_id\n                ? (\n                  <>\n                    { this.state.isWaitingForApi && <LinearProgress /> }\n                    { this.state.error !== null && <FormHelperText error>{ this.state.error }</FormHelperText> }\n                    <TextField\n                      id=\"name\"\n                      label=\"Name\"\n                      className={classes.textField}\n                      value={this.state.deviceAlias}\n                      onChange={this.handleAliasChange}\n                      onKeyPress={partial(this.handleAliasFieldKeyPress, device.dongle_id)}\n                    />\n                  </>\n                )\n                : (\n                  <Typography className={classes.deviceListItemName}>\n                    { (`${alias} (${device.dongle_id})`) }\n                  </Typography>\n                )}\n            </Grid>\n            { (!device.shared && (device.is_owner || this.props.isSuperUser))\n              && (\n              <Grid item xs={2}>\n                <Pencil className={classes.editDeviceIcon} onClick={partial(this.toggleDeviceEdit, device)} />\n              </Grid>\n              )}\n            { this.state.editingDevice === device.dongle_id\n              && (\n                <>\n                  <Grid item xs={6}>\n                    <Button\n                      variant=\"outlined\"\n                      onClick={partial(this.setDeviceAlias, device.dongle_id)}\n                      className={classes.saveButton}\n                    >\n                    Save\n                    </Button>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Button variant=\"outlined\" onClick={this.cancelEdit}>\n                    Cancel\n                    </Button>\n                  </Grid>\n                </>\n              )}\n          </Grid>\n        </ExpansionPanelSummary>\n      </ExpansionPanel>\n    );\n  }\n\n  filterDrivingDevice(device) {\n    return device.device_type !== 'panda';\n  }\n}\n\nconst stateToProps = Obstruction({\n  devices: 'workerState.devices',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceList));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport Raven from 'raven-js';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport Modal from '@material-ui/core/Modal';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport SaveIcon from '@material-ui/icons/Save';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { devices as Devices } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\n\nconst styles = (theme) => ({\n  modal: {\n    position: 'absolute',\n    padding: theme.spacing.unit * 2,\n    width: theme.spacing.unit * 50,\n    left: '50%',\n    top: '40%',\n    transform: 'translate(-50%, -50%)'\n  },\n  textField: {\n  },\n  buttonGroup: {\n    textAlign: 'right'\n  },\n  form: {\n    paddingTop: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit\n  },\n  formRow: {\n    minHeight: 75\n  },\n  fabProgress: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    zIndex: 1,\n  },\n  wrapper: {\n    margin: theme.spacing.unit,\n    position: 'relative',\n    display: 'inline-block'\n  }\n});\n\nclass DeviceSettingsModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deviceAlias: '',\n      loadingDeviceAlias: false,\n      loadingDeviceShare: false,\n      hasSavedAlias: false,\n      shareEmail: ''\n    };\n\n    this.handleAliasChange = this.handleAliasChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.callOnEnter = this.callOnEnter.bind(this);\n    this.setDeviceAlias = this.setDeviceAlias.bind(this);\n    this.shareDevice = this.shareDevice.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.device && nextProps.device.alias !== this.state.deviceAlias) {\n      this.setState({ deviceAlias: nextProps.device.alias });\n    }\n  }\n\n  handleAliasChange(e) {\n    this.setState({\n      deviceAlias: e.target.value,\n      hasSavedAlias: e.target.value === this.props.device.dongle_id ? this.state.hasSavedAlias : false\n    });\n  }\n\n  handleEmailChange(e) {\n    this.setState({\n      shareEmail: e.target.value,\n      hasShared: false\n    });\n  }\n\n  callOnEnter(method, e) {\n    if (e.key === 'Enter') {\n      method();\n    }\n  }\n\n  async setDeviceAlias() {\n    const { dongle_id } = this.props.device;\n\n    if (this.state.loadingDeviceAlias) {\n      return;\n    }\n\n    this.setState({\n      loadingDeviceAlias: true,\n      hasSavedAlias: false\n    });\n    try {\n      const device = await Devices.setDeviceAlias(dongle_id, this.state.deviceAlias.trim());\n      Timelineworker.updateDevice(device);\n      this.setState({\n        loadingDeviceAlias: false,\n        hasSavedAlias: true\n      });\n    } catch (e) {\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceAlias: false });\n    }\n  }\n\n  async shareDevice() {\n    if (this.state.loadingDeviceShare) {\n      return;\n    }\n\n    const { dongle_id } = this.props.device;\n    const email = this.state.shareEmail;\n\n    this.setState({\n      loadingDeviceShare: true,\n      hasShared: false\n    });\n    try {\n      await Devices.grantDeviceReadPermission(dongle_id, this.state.shareEmail.trim());\n      this.setState({\n        loadingDeviceShare: false,\n        shareEmail: '',\n        hasShared: true\n      });\n    } catch (e) {\n      const err = e;\n      console.log(e, err);\n      console.log(err.statusCode);\n      debugger;\n      Raven.captureException(e);\n      this.setState({ error: e.message, loadingDeviceShare: false });\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Modal\n        aria-labelledby=\"device-settings-modal\"\n        aria-describedby=\"device-settings-modal-description\"\n        open={this.props.isOpen}\n        onClose={this.props.onClose}\n      >\n        <Paper className={classes.modal}>\n          <Typography variant=\"title\">\n            Edit Device\n          </Typography>\n          <Divider />\n          <div className={classes.form}>\n            <div className={classes.formRow}>\n              <TextField\n                id=\"device_alias\"\n                label=\"Device Name\"\n                className={classes.textField}\n                value={this.state.deviceAlias}\n                onChange={this.handleAliasChange}\n                onKeyPress={partial(this.callOnEnter, this.setDeviceAlias)}\n              />\n              { (this.props.device.alias !== this.state.deviceAlias || this.state.hasSavedAlias)\n                  && (\n                  <div className={classes.wrapper}>\n                    <IconButton\n                      variant=\"fab\"\n                      onClick={this.setDeviceAlias}\n                    >\n                      { this.state.hasSavedAlias && <CheckIcon /> || <SaveIcon /> }\n                    </IconButton>\n                    {this.state.loadingDeviceAlias && <CircularProgress size={48} className={classes.fabProgress} />}\n                  </div>\n                  )}\n            </div>\n            <div className={classes.formRow}>\n              <TextField\n                id=\"device_share\"\n                label=\"Share by Email\"\n                className={classes.textField}\n                value={this.state.shareEmail}\n                onChange={this.handleEmailChange}\n                onKeyPress={partial(this.callOnEnter, this.shareDevice)}\n              />\n              { (this.state.shareEmail.length > 0 || this.state.hasShared)\n                  && (\n                  <div className={classes.wrapper}>\n                    <IconButton\n                      variant=\"fab\"\n                      onClick={this.shareDevice}\n                    >\n                      { this.state.hasShared && <CheckIcon /> || <ShareIcon /> }\n                    </IconButton>\n                    {this.state.loadingDeviceShare && <CircularProgress size={48} className={classes.fabProgress} />}\n                  </div>\n                  )}\n            </div>\n          </div>\n          <div className={classes.buttonGroup}>\n            <Button variant=\"contained\" onClick={this.props.onClose}>\n              Close\n            </Button>\n            &nbsp;\n          </div>\n        </Paper>\n      </Modal>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DeviceSettingsModal));\n","import Raven from 'raven-js';\n\nexport const MAPBOX_TOKEN = process.env.REACT_APP_MAPBOX_TOKEN;\n\nconst mbxGeocoding = require('@mapbox/mapbox-sdk/services/geocoding');\n\nlet geocodingClient = null;\nif (MAPBOX_TOKEN) {\n  geocodingClient = mbxGeocoding({\n    accessToken: MAPBOX_TOKEN\n  });\n} else {\n  console.warn('Missing mapbox token');\n}\n\nexport default function geocodeApi() {\n  function getNeighborhood(context) {\n    return (context.id.indexOf('neighborhood') !== -1);\n  }\n\n  function getLocality(context) {\n    return (context.id.indexOf('place') !== -1);\n  }\n\n  function getRegion(context) {\n    return (context.id.indexOf('region') !== -1);\n  }\n\n  return {\n    async reverseLookup(coords) {\n      if (geocodingClient === null) {\n        return null;\n      }\n\n      const response = await geocodingClient.reverseGeocode({\n        query: [coords[0], coords[1]],\n        limit: 1,\n      }).send();\n\n      try {\n        const { features } = response.body;\n        if (features[0].context) {\n          let region = features[0].context.filter(getRegion)[0].short_code;\n          if (region.indexOf('US-') !== -1) { region = region.substr(3); }\n          const locality = features[0].context.filter(getLocality)[0].text;\n          const _neighborhood = features[0].context.filter(getNeighborhood)[0];\n          const neighborhood = _neighborhood ? _neighborhood.text : locality;\n\n          return {\n            region,\n            locality,\n            neighborhood,\n          };\n        }\n      } catch (err) {\n        Raven.captureException(err);\n      }\n    }\n  };\n}\n","import React from 'react';\nimport { partial } from 'ap';\n\nconst gutter = 0;\n\nfunction renderImage(imgStyles, data, i) {\n  if (data.blank) {\n    return (\n      <div\n        key={i}\n        className=\"thumbnailImage blank\"\n        style={{\n          ...imgStyles,\n          width: imgStyles.width * data.length,\n        }}\n      />\n    );\n  }\n  return (\n    <div\n      key={i}\n      className=\"thumbnailImage images\"\n      style={{\n        ...imgStyles,\n        width: imgStyles.width * data.length,\n        marginLeft: gutter,\n        backgroundSize: `auto ${imgStyles.height}px`,\n        backgroundRepeat: 'repeat-x',\n        backgroundImage: `url(${data.url})`,\n        backgroundPosition: `${data.startImage * imgStyles.width}px`\n      }}\n    />\n  );\n}\n\nexport default function Thumbnails(props) {\n  const { thumbnail } = props;\n  const imgStyles = {\n    display: 'inline-block',\n    height: thumbnail.height,\n    width: (1164 / 874) * thumbnail.height,\n  };\n  // console.log('Thumbnail props', props);\n  const imgCount = Math.ceil(thumbnail.width / imgStyles.width);\n  imgStyles.marginRight = gutter / 2;\n\n  const imgArr = [];\n  let currentSegment = null;\n\n  if (!Number.isFinite(imgCount)) {\n    return [];\n  }\n  for (let i = 0; i < imgCount; ++i) {\n    const offset = props.percentToOffset((i + 0.5) / imgCount);\n    const segment = props.getCurrentSegment(offset);\n    if (!segment) {\n      if (currentSegment && !currentSegment.blank) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n      if (!currentSegment) {\n        currentSegment = {\n          blank: true,\n          length: 0\n        };\n      }\n      currentSegment.length += 1;\n    } else {\n      // 12 per file, 5s each\n      let seconds = Math.floor((offset - segment.routeOffset) / 1000);\n      const url = `${segment.url}/${segment.segment}/sprite.jpg`;\n      seconds %= 60;\n\n      if (currentSegment && (currentSegment.blank || currentSegment.segment !== segment.segment)) {\n        imgArr.push(currentSegment);\n        currentSegment = null;\n      }\n\n      const imageIndex = Math.floor(seconds / 5);\n\n      if (currentSegment) {\n        if (imageIndex === currentSegment.endImage + 1) {\n          currentSegment.endImage = imageIndex;\n        } else {\n          imgArr.push(currentSegment);\n          currentSegment = null;\n        }\n      }\n\n      if (!currentSegment) {\n        currentSegment = {\n          segment: segment.segment,\n          startOffset: seconds,\n          startImage: imageIndex,\n          endImage: imageIndex,\n          length: 0,\n          url\n        };\n      }\n\n      currentSegment.length += 1;\n      currentSegment.endOffset = seconds;\n    }\n  }\n\n  if (currentSegment) {\n    imgArr.push(currentSegment);\n  }\n\n  return imgArr.map(partial(renderImage, imgStyles));\n}\n","const Colors = {\n  transparent: 'transparent',\n  white: '#fff',\n  white10: 'rgba(255, 255, 255, 0.1)',\n  white12: 'rgba(255, 255, 255, 0.12)',\n  white20: 'rgba(255, 255, 255, 0.2)',\n  white30: 'rgba(255, 255, 255, 0.3)',\n  white40: 'rgba(255, 255, 255, 0.4)',\n  white50: 'rgba(255, 255, 255, 0.5)',\n  black: '#030404',\n  blue50: '#258FDA',\n  blue100: '#2284c9',\n  blue200: '#1f79b8',\n  blue300: '#1c6ea8',\n  blue400: '#1a6397',\n  blue500: '#175886',\n  blue600: '#144d75',\n  blue700: '#114265',\n  blue800: '#0e3754',\n  blue900: '#0b2c43',\n  blue950: '#061622',\n  blue999: '#030b11',\n  lightBlue50: '#eef6fc',\n  lightBlue100: '#ddeef9',\n  lightBlue200: '#cde5f6',\n  lightBlue300: '#bcddf4',\n  lightBlue400: '#abd4f1',\n  lightBlue500: '#9acbee',\n  lightBlue600: '#8ac3eb',\n  lightBlue700: '#79bae8',\n  lightBlue800: '#68b1e5',\n  lightBlue900: '#57a9e3',\n  desatBlue800: '#657f92',\n  red50: '#da2535',\n  red100: '#c92231',\n  red200: '#b81f2d',\n  red300: '#971a25',\n  red400: '#861721',\n  red500: '#75141d',\n  red600: '#651118',\n  red700: '#540e14',\n  red800: '#430b10',\n  red900: '#32090c',\n  lightRed50: '#fceeef',\n  lightRed100: '#f9dde0',\n  lightRed200: '#f6cdd0',\n  lightRed300: '#f4bcc1',\n  lightRed400: '#f1abb1',\n  lightRed500: '#ee9aa2',\n  lightRed600: '#eb8a92',\n  lightRed700: '#e87983',\n  lightRed800: '#e56873',\n  lightRed900: '#e35764',\n  lightRed950: '#e04754',\n  lightRed999: '#dd3645',\n  green50: '#22c967',\n  green100: '#20b85f',\n  green200: '#1da756',\n  green300: '#1a974e',\n  green400: '#178645',\n  green500: '#14753c',\n  green600: '#116534',\n  green700: '#0e542b',\n  green800: '#0c4323',\n  green900: '#09321a',\n  lightGreen50: '#eefcf4',\n  lightGreen100: '#def9e9',\n  lightGreen200: '#cdf6de',\n  lightGreen300: '#bcf4d3',\n  lightGreen400: '#abf1c8',\n  lightGreen500: '#9beebd',\n  lightGreen600: '#8aebb2',\n  lightGreen700: '#79e8a7',\n  lightGreen800: '#68e59c',\n  lightGreen900: '#25da70',\n  orange50: '#da6f25',\n  orange100: '#c96722',\n  orange200: '#b85e1f',\n  orange300: '#a7551c',\n  orange400: '#964d19',\n  orange500: '#864417',\n  orange600: '#753c14',\n  orange700: '#643311',\n  orange800: '#532b0e',\n  orange900: '#42220b',\n  lightOrange50: '#fcf4ee',\n  lightOrange100: '#f9e8dd',\n  lightOrange200: '#f6ddcc',\n  lightOrange200: '#f4d2bb',\n  lightOrange300: '#f1c7aa',\n  lightOrange400: '#eebc9a',\n  lightOrange500: '#ebb189',\n  lightOrange600: '#e8a678',\n  lightOrange700: '#e59b67',\n  lightOrange800: '#e08546',\n  lightOrange900: '#dd7a35',\n  yellow50: '#f1ebaa',\n  yellow100: '#eee79a',\n  yellow200: '#ebe389',\n  yellow300: '#e8df78',\n  yellow400: '#e5db67',\n  yellow500: '#e3d756',\n  yellow600: '#e0d346',\n  yellow700: '#ddcf35',\n  yellow800: '#daca25',\n  yellow900: '#c9bb22',\n  grey50: '#6e7d84',\n  grey100: '#65737a',\n  grey200: '#5c696f',\n  grey300: '#535f64',\n  grey400: '#4b5559',\n  grey500: '#424a4f',\n  grey600: '#394044',\n  grey700: '#303639',\n  grey800: '#272c2f',\n  grey900: '#1e2224',\n  grey950: '#151819',\n  grey999: '#0c0e0f',\n  lightGrey50: '#f8f9f9',\n  lightGrey100: '#eeeff0',\n  lightGrey200: '#e3e6e8',\n  lightGrey300: '#d8dcdf',\n  lightGrey400: '#cdd3d6',\n  lightGrey500: '#c3c9cd',\n  lightGrey600: '#b8c0c4',\n  lightGrey700: '#adb6bb',\n  lightGrey800: '#a3adb2',\n  lightGrey900: '#98a3a9',\n  lightGrey950: '#8d9aa1',\n  lightGrey999: '#77878f',\n};\n\nexport default Colors;\n","import { createMuiTheme } from '@material-ui/core/styles';\nimport Colors from './colors';\nimport { ChevronIcon } from './icons';\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: 'MaisonNeue',\n  },\n  overrides: {\n    MuiPaper: {\n      root: {\n        backgroundColor: '#30373B'\n      },\n    },\n    MuiSelect: {\n      select: {\n        padding: '12px',\n        paddingRight: '48px',\n        margin: '0px',\n        '&>div': {\n          margin: '0',\n        }\n      },\n      selectMenu: {\n        paddingRight: 54,\n      },\n      icon: {\n        marginRight: 20,\n        color: '#272D30'\n      }\n    },\n    MuiInput: {\n      root: {\n        position: 'relative',\n        border: `1px solid ${Colors.grey800}`,\n        borderRadius: 20,\n        overflow: 'hidden'\n      },\n      input: {\n        padding: '12px 16px',\n        '&::placeholder': {\n          opacity: 1,\n          color: Colors.white30\n        }\n      }\n    },\n    MuiFormLabel: {\n      root: {\n        marginLeft: 16,\n        marginTop: 4\n      }\n    },\n    MuiTab: {\n      root: {\n        minHeight: 40,\n      }\n    },\n  },\n  props: {\n    MuiSelect: {\n      disableUnderline: true,\n      IconComponent: ChevronIcon\n    },\n    MuiInput: {\n      disableUnderline: true\n    }\n  },\n  palette: {\n    type: 'dark',\n    placeholder: Colors.white30,\n    background: {\n      default: Colors.grey999\n    },\n    primary: {\n      light: Colors.grey50,\n      main: Colors.grey900,\n      dark: Colors.grey999\n    },\n    states: {\n      drivingBlue: Colors.blue500,\n      engagedGreen: Colors.green400,\n      alertOrange: Colors.orange50,\n      alertRed: Colors.red100,\n    },\n    grey: {\n      50: Colors.grey50,\n      100: Colors.grey100,\n      200: Colors.grey200,\n      300: Colors.grey300,\n      400: Colors.grey400,\n      500: Colors.grey500,\n      600: Colors.grey600,\n      700: Colors.grey700,\n      800: Colors.grey800,\n      900: Colors.grey900,\n      950: Colors.grey950,\n      999: Colors.grey999\n    },\n    lightGrey: {\n      200: Colors.lightGrey200,\n    },\n    white: {\n      10: Colors.white10,\n      12: Colors.white12,\n      20: Colors.white20,\n      30: Colors.white30,\n      40: Colors.white40,\n      50: Colors.white50,\n    },\n    error: {\n      main: 'rgba(209,106,35,0.72)'\n    }\n  }\n});\n\nexport default theme;\n","// timeline minimap\n// rapidly change high level timeline stuff\n// rapid seeking, etc\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport debounce from 'debounce';\nimport document from 'global/document';\nimport fecha from 'fecha';\nimport cx from 'classnames';\nimport { partial } from 'ap';\nimport PropTypes from 'prop-types';\n\nimport Measure from 'react-measure';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport Thumbnails from './thumbnails';\nimport theme from '../../theme';\nimport TimelineWorker from '../../timeline';\nimport Segments from '../../timeline/segments';\nimport { selectRange } from '../../actions';\n\nconst styles = (/* theme */) => ({\n  base: {\n    backgroundColor: '#1D2225',\n    minHeight: '32px',\n    overflow: 'hidden',\n    position: 'relative',\n    width: '100%',\n    '&.hasThumbnails.hasRuler': {\n      minHeight: '80px',\n    },\n  },\n  rounded: {\n    borderRadius: '10px 10px 0px 0px'\n  },\n  segments: {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    width: '100%',\n    height: '100%',\n    '&.hasThumbnails': {\n      height: '40%'\n    },\n    '&.hasThumbnails.hasRuler': {\n      height: '100%',\n    },\n  },\n  segment: {\n    position: 'relative',\n    height: '100%',\n    background: theme.palette.states.drivingBlue,\n  },\n  ruler: {\n    background: '#272D30d9',\n    bottom: 0,\n    position: 'absolute',\n    top: 12,\n    width: '100%',\n  },\n  rulerRemaining: {\n    background: '#1D2225',\n    borderLeft: '1px solid #D8DDDF',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    opacity: 0.45,\n    pointerEvents: 'none',\n    width: '100%',\n  },\n  statusGradient: {\n    background: 'linear-gradient(rgba(0, 0, 0, 0.0) 4%, rgba(255, 255, 255, 0.025) 10%, rgba(0, 0, 0, 0.1) 25%, rgba(0, 0, 0, 0.4))',\n    height: 12,\n    left: 0,\n    pointerEvents: 'none',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  segmentColor: {\n    position: 'absolute',\n    display: 'inline-block',\n    height: '100%',\n    width: '100%',\n    '&.active': {},\n    '&.engage': {\n      background: theme.palette.states.engagedGreen,\n    },\n    '&.alert': {\n      '&.userPrompt': {\n        background: theme.palette.states.alertOrange,\n      },\n      '&.critical': {\n        background: theme.palette.states.alertRed,\n      }\n    }\n  },\n  uncoloredSegment: {\n    background: theme.palette.states.drivingBlue,\n    height: '100%',\n    width: '100%',\n  },\n  hoverBead: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: 50,\n    height: '100%'\n  },\n  dragHighlight: {\n    background: 'rgba(255, 255, 255, 0.1)',\n    position: 'absolute',\n    height: '100%',\n  },\n  thumbnails: {\n    position: 'absolute',\n    height: '60%',\n    top: 12,\n    width: '100%',\n    whiteSpace: 'nowrap',\n    userSelect: 'none',\n    '& img': {\n      pointerEvents: 'none',\n    },\n    '&.hasRuler': {\n      height: '30%',\n    },\n    '& > div': {\n      display: 'inline-block'\n    }\n  },\n});\n\nconst AlertStatusCodes = [\n  'normal',\n  'userPrompt',\n  'critical'\n];\n\nfunction percentFromMouseEvent(e) {\n  const boundingBox = e.currentTarget.getBoundingClientRect();\n  const x = e.pageX - boundingBox.left;\n  return x / boundingBox.width;\n}\n\nclass Timeline extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getOffset = this.getOffset.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseLeave = this.handleMouseLeave.bind(this);\n    this.percentToOffset = this.percentToOffset.bind(this);\n    this.renderSegment = this.renderSegment.bind(this);\n    this.sendSeek = debounce(this.sendSeek.bind(this), 1000 / 60);\n\n\n    this.offsetValue = React.createRef();\n    this.rulerRemaining = React.createRef();\n    this.rulerRemainingHovered = React.createRef();\n    this.dragBar = React.createRef();\n    this.hoverBead = React.createRef();\n    // this.canvas_speed = React.createRef();\n    const { zoomOverride, zoom } = this.props;\n    this.state = {\n      dragStart: null,\n      zoom: zoomOverride || zoom,\n      mouseX: 0,\n      hoverPercent: 0,\n      isHovered: false,\n      thumbnail: {\n        height: 0,\n        width: 0\n      }\n    };\n  }\n\n  componentWillMount() {\n    document.addEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening = TimelineWorker.onIndexed(() => this.forceUpdate());\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    raf(this.getOffset);\n  }\n\n  componentWillReceiveProps(props) {\n    this.setState({\n      zoom: props.zoomOverride || props.zoom\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    document.removeEventListener('mouseup', this.handleMouseUp, false);\n    this.stopListening();\n  }\n\n  getOffset() {\n    if (!this.mounted) {\n      return;\n    }\n    raf(this.getOffset);\n    let offset = TimelineWorker.currentOffset();\n    if (this.seekIndex) {\n      offset = this.seekIndex;\n    }\n    offset = Math.floor(offset);\n    const percent = this.offsetToPercent(offset);\n    if (this.rulerRemaining.current && this.rulerRemaining.current.parentElement) {\n      this.rulerRemaining.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n    const { isHovered } = this.state;\n    if (!isHovered\n      && this.rulerRemainingHovered.current\n      && this.rulerRemainingHovered.current.parentElement) {\n      this.rulerRemainingHovered.current.style.left = `${Math.floor(10000 * percent) / 100}%`;\n    }\n  }\n\n  handleClick(e) {\n    if (this.isDragSelecting) {\n      console.log('Is a drag event');\n      this.isDragSelecting = false;\n      return;\n    }\n    const { noseek } = this.props;\n    if (noseek) {\n      return;\n    }\n    const percent = percentFromMouseEvent(e);\n\n    TimelineWorker.seek(this.percentToOffset(percent));\n  }\n\n  handleMouseDown(e) {\n    const { classes, dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    // make sure they're clicking & dragging and not just moving the mouse around\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return;\n    }\n\n    const percent = percentFromMouseEvent(e);\n    this.setState({\n      dragStart: percent,\n      dragEnd: percent\n    });\n  }\n\n  handleMouseUp(e) {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection } = this.props;\n    if (!dragSelection) {\n      return;\n    }\n    if (!dragStart) {\n      return;\n    }\n    const selectedArea = Math.abs(dragStart - dragEnd) * 100;\n    const startPercent = Math.min(dragStart, dragEnd);\n    const endPercent = Math.max(dragStart, dragEnd);\n    const startOffset = Math.round(this.percentToOffset(startPercent));\n    const endOffset = Math.round(this.percentToOffset(endPercent));\n\n    if (selectedArea > 0.1) {\n      const currentOffset = TimelineWorker.currentOffset();\n      if (currentOffset < startOffset || currentOffset > endOffset) {\n        TimelineWorker.seek(startOffset);\n      }\n      const { start, dispatch } = this.props;\n      const startTime = startOffset + start;\n      const endTime = endOffset + start;\n\n      this.isDragSelecting = true;\n      setTimeout(() => { this.isDragSelecting = false; });\n      dispatch(selectRange(startTime, endTime));\n    } else if (e.currentTarget !== document) {\n      this.handleClick(e);\n    }\n\n    this.setState({\n      dragStart: null,\n      dragEnd: null\n    });\n  }\n\n  handleMouseMove(e) {\n    const boundingBox = e.currentTarget.getBoundingClientRect();\n    const x = e.pageX - boundingBox.left;\n    const percent = x / boundingBox.width;\n\n    this.setState({\n      mouseX: x,\n      hoverPercent: percent,\n      isHovered: true,\n    });\n\n    // mouseover highlight\n    if (this.rulerRemainingHovered.current && this.rulerRemainingHovered.current.parentElement) {\n      let { hoverPercent } = this.state;\n      hoverPercent = (hoverPercent * 100).toFixed(2);\n      this.rulerRemainingHovered.current.style.left = `${hoverPercent}%`;\n    }\n\n    const { classes, dragSelection } = this.props;\n    const { dragStart } = this.state;\n    // drag highlight\n    if (e.currentTarget.parentElement.querySelector(`.${classes.base}:active`) !== e.currentTarget) {\n      return; // ignore mouseover\n    }\n    if (!dragSelection) {\n      this.seekIndex = this.percentToOffset(percent);\n      this.sendSeek();\n    } if (dragStart) {\n      this.setState({\n        dragEnd: percent\n      });\n    }\n    // do other things for drag selection!\n  }\n\n  handleMouseLeave() {\n    this.setState({ isHovered: false });\n  }\n\n  percentToOffset(perc) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return perc * (zoom.end - zoom.start) + (zoom.start - start);\n    }\n    return perc * range;\n  }\n\n  offsetToPercent(offset) {\n    const { zoom } = this.state;\n    const { zoomed, range, start } = this.props;\n    if (zoomed) {\n      return (offset - (zoom.start - start)) / (zoom.end - zoom.start);\n    }\n    return offset / range;\n  }\n\n  sendSeek() {\n    if (this.seekIndex) {\n      TimelineWorker.seek(this.seekIndex);\n      this.seekIndex = null;\n    }\n  }\n\n  renderDragger() {\n    const { dragStart, dragEnd } = this.state;\n    const { dragSelection, classes } = this.props;\n    if (!dragSelection || !dragStart) {\n      return [];\n    }\n    const draggerStyle = {\n      left: `${100 * Math.min(dragStart, dragEnd)}%`,\n      width: `${100 * Math.abs(dragStart - dragEnd)}%`,\n    };\n    return (\n      <div\n        ref={this.dragBar}\n        className={classes.dragHighlight}\n        style={draggerStyle}\n      />\n    );\n  }\n\n  renderZoom() {\n    const {\n      zoom, dragSelection, zoomed, start, range\n    } = this.props;\n    if (!dragSelection || !zoom.expanded || zoomed) {\n      return [];\n    }\n    const color = `${theme.palette.grey[50]}cc`;\n    const endColor = `${theme.palette.grey[200]}aa`;\n    const zoomStart = (zoom.start - start) / range;\n    const zoomEnd = (zoom.end - start) / range;\n    const barStyle = {\n      background: `linear-gradient(to left,${color},${endColor},${color})`,\n      left: `${100 * Math.min(zoomStart, zoomEnd)}%`,\n      width: `${100 * Math.abs(zoomStart - zoomEnd)}%`,\n    };\n    return (\n      <div\n        style={barStyle}\n      />\n    );\n  }\n\n  renderSegment(segment) {\n    const {\n      classes, range, zoomed, start, colored\n    } = this.props;\n    const { zoom } = this.state;\n    let startPerc = (100 * segment.offset) / range;\n    let widthPerc = (100 * segment.duration) / range;\n    if (zoomed) {\n      const startOffset = zoom.start - start;\n      const endOffset = zoom.end - start;\n      const zoomDuration = endOffset - startOffset;\n      if (segment.offset > endOffset) {\n        return [];\n      }\n      if (segment.offset + segment.duration < startOffset) {\n        return [];\n      }\n      startPerc = (100 * (segment.offset - startOffset)) / zoomDuration;\n      widthPerc = (100 * segment.duration) / zoomDuration;\n    }\n    const style = {\n      position: 'absolute',\n      width: `${widthPerc}%`,\n      left: `${startPerc}%`,\n    };\n    return (\n      <div\n        key={segment.route + segment.offset}\n        className={classes.segment}\n        style={style}\n      >\n        { colored ? this.renderSegmentEvents(segment) : (\n          <div className={classes.uncoloredSegment} />\n        ) }\n      </div>\n    );\n  }\n\n  renderSegmentEvents(segment) {\n    const { classes } = this.props;\n    return segment.events\n      .filter((event) => event.data && event.data.end_route_offset_millis)\n      .map((event) => {\n        const style = {\n          left: `${(event.route_offset_millis / segment.duration) * 100}%`,\n          width: `${((event.data.end_route_offset_millis - event.route_offset_millis) / segment.duration) * 100}%`,\n        };\n        if (localStorage.showCurrentEvent) {\n          const time = TimelineWorker.currentOffset();\n          const eventStart = event.route_offset_millis + segment.offset;\n          const eventEnd = event.data.end_route_offset_millis + segment.offset;\n          if (time > eventStart && time < eventEnd) {\n            console.log('Current event:', event);\n          }\n        }\n        return (\n          <div\n            key={segment.route + event.time + event.type}\n            style={style}\n            className={cx(classes.segmentColor, event.type, {\n              [`${AlertStatusCodes[event.data.alertStatus]}`]: event.data.alertStatus,\n            })}\n          />\n        );\n      });\n  }\n\n  render() {\n    const {\n      classes,\n      hasThumbnails,\n      tooltipped,\n      hasRuler,\n      start,\n      className,\n      style,\n      rounded,\n      segments,\n      hasGradient\n    } = this.props;\n    const { hoverPercent, thumbnail, mouseX } = this.state;\n    const hoverOffset = this.percentToOffset(hoverPercent);\n    let timeString = null;\n    if (tooltipped) {\n      if (Number.isNaN(hoverOffset)) {\n        timeString = 'N/A';\n      } else {\n        const timestampAtOffset = start + hoverOffset;\n        timeString = fecha.format(timestampAtOffset, 'M/D HH:mm:ss');\n      }\n    }\n    return (\n      <div\n        className={className}\n        style={style}\n      >\n        <div\n          role=\"presentation\"\n          className={cx(classes.base, {\n            rounded,\n            hasRuler,\n            hasThumbnails,\n          })}\n          onMouseDown={this.handleMouseDown}\n          onMouseUp={this.handleMouseUp}\n          onMouseMove={this.handleMouseMove}\n          onMouseLeave={this.handleMouseLeave}\n          onClick={this.handleClick}\n        >\n          <div className={cx(classes.segments, { hasThumbnails, hasRuler })}>\n            { segments && segments.map(this.renderSegment) }\n            { hasRuler && (\n              <div className={classes.ruler}>\n                <div\n                  ref={this.rulerRemaining}\n                  className={classes.rulerRemaining}\n                />\n                <div\n                  ref={this.rulerRemainingHovered}\n                  className={classes.rulerRemaining}\n                />\n              </div>\n            ) }\n            { hasGradient && (\n              <div\n                className={cx(classes.statusGradient, {\n                  hasRuler,\n                })}\n              />\n            ) }\n            { this.renderDragger() }\n            { this.renderZoom() }\n          </div>\n          { tooltipped\n            && (\n            <Tooltip title={timeString}>\n              <div\n                ref={this.hoverBead}\n                className={classes.hoverBead}\n                style={{ left: mouseX - 25 }}\n              />\n            </Tooltip>\n            )}\n          { hasThumbnails\n            && (\n            <Measure\n              bounds\n              onResize={(rect) => this.setState({ thumbnail: rect.bounds })}\n            >\n              { (options) => (\n                <div\n                  ref={options.measureRef}\n                  className={cx(classes.thumbnails, {\n                    hasRuler,\n                  })}\n                >\n                  <Thumbnails\n                    getCurrentSegment={partial(Segments.getCurrentSegment, this.props)}\n                    percentToOffset={this.percentToOffset}\n                    thumbnail={thumbnail}\n                    className={classes.thumbnail}\n                    hasRuler={hasRuler}\n                  />\n                </div>\n              )}\n            </Measure>\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n\nTimeline.propTypes = {\n  zoom: PropTypes.object.isRequired,\n  zoomOverride: PropTypes.object,\n  zoomed: PropTypes.bool,\n  colored: PropTypes.bool,\n  start: PropTypes.number.isRequired,\n  range: PropTypes.number.isRequired,\n  classes: PropTypes.object.isRequired,\n  dragSelection: PropTypes.bool,\n  hasThumbnails: PropTypes.bool,\n  hasRuler: PropTypes.bool,\n  tooltipped: PropTypes.bool,\n  hasGradient: PropTypes.bool,\n  rounded: PropTypes.bool,\n  segments: PropTypes.array.isRequired,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  dispatch: PropTypes.func.isRequired,\n  noseek: PropTypes.bool,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    ...state.workerState,\n    zoom: state.zoom\n  };\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(Timeline));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\nimport { classNames } from 'react-extras';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\n\nimport { selectRange } from '../../actions';\nimport { formatDriveDuration, getDrivePoints } from '../../utils';\nimport GeocodeApi from '../../api/geocode';\nimport Timeline from '../Timeline';\nimport { RightArrow } from '../../icons';\nimport { KM_PER_MI } from '../../utils/conversions';\n\nconst styles = (theme) => ({\n  drive: {\n    background: 'rgba(255, 255, 255, 0.0)',\n    background: 'linear-gradient(to bottom, #30373B 0%, #1D2225 100%)',\n    borderTop: '1px solid rgba(255, 255, 255, .05)',\n    borderRadius: 8,\n    cursor: 'pointer',\n    display: 'flex',\n    flexDirection: 'column',\n    marginBottom: 12,\n    overflow: 'hidden',\n    padding: 0,\n    transition: 'background .2s',\n    '&:hover': {}\n  },\n  driveHeader: {\n    alignItems: 'center',\n    padding: 18,\n    paddingLeft: 24,\n    paddingRight: 24,\n  },\n  driveHeaderIntro: {\n    display: 'flex',\n  },\n  driveAvatar: {\n    alignItems: 'center',\n    background: '#404B4F',\n    borderRadius: 30,\n    color: '#fff',\n    display: 'flex',\n    fontWeight: 600,\n    height: 52,\n    justifyContent: 'center',\n    margin: '0px 3%',\n    width: 52,\n  },\n  driveTitle: {\n    marginLeft: '10%',\n  },\n  driveTimeline: {},\n  driveArrow: {\n    color: '#404B4F',\n    height: '100%',\n    marginLeft: '25%',\n    width: 32,\n  },\n});\n\nclass DriveListDrive extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startLocation: null,\n      endLocation: null,\n    };\n\n    this.handleDriveClicked = this.handleDriveClicked.bind(this);\n  }\n\n  componentDidMount() {\n    const { drive } = this.props;\n    this.mounted = true;\n    GeocodeApi().reverseLookup(drive.startCoord).then((startLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ startLocation });\n    });\n    GeocodeApi().reverseLookup(drive.endCoord).then((endLocation) => {\n      if (!this.mounted) {\n        return;\n      }\n      this.setState({ endLocation });\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleDriveClicked(drive) {\n    const startTime = drive.startTime - 1000;\n    const endTime = drive.startTime + drive.duration + 1000;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  render() {\n    const { drive, deviceAlias, classes } = this.props;\n    const { startLocation, endLocation } = this.state;\n    const startTime = fecha.format(new Date(drive.startTime), 'HH:mm');\n    const startDate = fecha.format(new Date(drive.startTime), 'ddd, MMM D');\n    const endTime = fecha.format(new Date(drive.startTime + drive.duration + 1000), 'HH:mm');\n    const duration = formatDriveDuration(drive.duration);\n    const points = getDrivePoints(drive.duration);\n    return (\n      <li\n        key={drive.startTime}\n        className={classNames(classes.drive, 'DriveEntry')}\n        onClick={partial(this.handleDriveClicked, drive)}\n      >\n        <div className={classes.driveHeader}>\n          <Grid container>\n            <Grid item xs={4} className={classes.driveHeaderIntro}>\n              <div className={classes.driveAvatar}>\n                { drive.annotations }\n              </div>\n              <div className={classes.driveTitle}>\n                <Typography variant=\"body2\">\n                  { `${startDate} @ ${startTime} to ${endTime}` }\n                </Typography>\n                <Typography>\n                  { deviceAlias }\n                </Typography>\n              </div>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { duration.hours > 0 && `${duration.hours.toString()}hr ` }\n                { `${duration.minutes} min` }\n              </Typography>\n              <Typography>\n                { `${points} points` }\n              </Typography>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { startLocation && startLocation.neighborhood }\n              </Typography>\n              <Typography>\n                { startLocation && (`${startLocation.locality}, ${startLocation.region}`) }\n              </Typography>\n            </Grid>\n            <Grid item xs={2}>\n              <Typography variant=\"body2\">\n                { endLocation && endLocation.neighborhood }\n              </Typography>\n              <Typography>\n                { endLocation && (`${endLocation.locality}, ${endLocation.region}`) }\n              </Typography>\n            </Grid>\n            <Grid item xs={1}>\n              <Typography variant=\"body2\">\n                { `${+drive.distanceMiles.toFixed(1)} mi` }\n              </Typography>\n              <Typography>\n                { `${+(drive.distanceMiles * KM_PER_MI).toFixed(1)} km` }\n              </Typography>\n            </Grid>\n            <Grid item xs={1}>\n              <RightArrow className={classes.driveArrow} />\n            </Grid>\n          </Grid>\n        </div>\n        <Timeline\n          className={classes.driveTimeline}\n          zoomed\n          colored\n          hasThumbnails\n          hasGradient\n          zoomOverride={{\n            start: drive.startTime,\n            end: drive.startTime + drive.duration\n          }}\n        />\n      </li>\n    );\n  }\n}\n\nexport default connect(() => ({}))(withStyles(styles)(DriveListDrive));\n","export const KM_PER_MI = 1.60934;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\n\nimport {\n  withStyles,\n  Typography,\n  Grid,\n  Menu,\n  MenuItem,\n  ListItem,\n  IconButton,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport { filterEvent } from '../../utils';\nimport { selectRange } from '../../actions';\nimport DeviceSettingsModal from './DeviceSettingsModal';\nimport DriveListItem from './DriveListItem';\n\nconst MIN_TIME_BETWEEN_ROUTES = 60000; // 1 minute\n\nconst styles = (theme) => ({\n  header: {\n    alignItems: 'center',\n    borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\n    padding: 16,\n    paddingLeft: 48,\n    paddingRight: 60,\n  },\n  headerLabel: {\n    cursor: 'default',\n    textTransform: 'uppercase',\n  },\n  drives: {\n    height: '100%',\n    margin: 0,\n    overflowY: 'scroll',\n    padding: 16,\n    paddingLeft: 24,\n    paddingRight: 24,\n  },\n  zeroState: {\n    padding: '16px 48px',\n  },\n  settingsArea: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  settingsButton: {\n    border: '1px solid #272D30'\n  },\n  settingsButtonIcon: {\n    color: '#272D30',\n  },\n});\n\nclass DriveList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.goToAnnotation = this.goToAnnotation.bind(this);\n    this.filterShortDrives = this.filterShortDrives.bind(this);\n    this.renderDriveListHeader = this.renderDriveListHeader.bind(this);\n    this.renderDriveListSettings = this.renderDriveListSettings.bind(this);\n    this.handleClickedSettings = this.handleClickedSettings.bind(this);\n    this.handleClosedSettings = this.handleClosedSettings.bind(this);\n    this.handleOpenedSettingsModal = this.handleOpenedSettingsModal.bind(this);\n    this.handleCanceledSettings = this.handleCanceledSettings.bind(this);\n    this.handleClosedSettingsModal = this.handleClosedSettingsModal.bind(this);\n\n    this.state = {\n      anchorEl: null,\n      showDeviceSettingsModal: false\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.device && !this.state.deviceAliasSaved) {\n      this.setState({ deviceAliasSaved: props.device.alias });\n    }\n  }\n\n  filterShortDrives(ride) {\n    return ride.duration > 60000;\n  }\n\n  goToAnnotation(segment) {\n    const startTime = segment.startTime - this.props.zoomBuffer;\n    const endTime = segment.startTime + segment.duration + this.props.zoomBuffer;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  handleClickedSettings(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  handleClosedSettings() {\n    this.setState({ anchorEl: null });\n  }\n\n  handleOpenedSettingsModal(device) {\n    this.setState({ showDeviceSettingsModal: true });\n  }\n\n  handleClosedSettingsModal() {\n    this.setState({ showDeviceSettingsModal: false });\n  }\n\n  handleCanceledSettings() {\n    this.setState({\n      anchorEl: null,\n      showDeviceSettingsModal: false,\n    });\n  }\n\n  handleClose() {\n    this.setState({\n      showPicker: false\n    });\n  }\n\n  render() {\n    const { classes, device, segments } = this.props;\n\n    if (!device) {\n      return [];\n    }\n\n    const driveList = [];\n    let lastEnd = 0;\n    let lastSegmentEnd = 0;\n    let curRideChunk = null;\n    this.props.segments.forEach((segment) => {\n      if (!curRideChunk || segment.startTime - lastEnd > MIN_TIME_BETWEEN_ROUTES) {\n        curRideChunk = {\n          segments: 0,\n          startTime: segment.startTime,\n          offset: segment.offset,\n          duration: 0,\n          annotations: 0,\n          startCoord: segment.startCoord,\n          endCoord: segment.endCoord,\n          distanceMiles: segment.distanceMiles,\n        };\n        driveList.unshift(curRideChunk);\n        lastSegmentEnd = segment.startTime;\n      }\n      curRideChunk.duration += segment.startTime - lastSegmentEnd;\n      curRideChunk.duration += segment.duration;\n      lastSegmentEnd = segment.startTime + segment.duration;\n      curRideChunk.segments++;\n      lastEnd = segment.startTime + segment.duration;\n      curRideChunk.annotations += segment.events.filter(filterEvent)\n        .reduce((memo, event) => (event.id ? memo : memo + 1), 0);\n    });\n\n    return (\n      <>\n        { this.renderDriveListHeader() }\n        { driveList.length === 0 && this.renderZeroRides() }\n        <ul className={classes.drives}>\n          { driveList.filter(this.filterShortDrives).map((drive) => (\n            <DriveListItem\n              key={drive.startTime}\n              drive={drive}\n              deviceAlias={device.alias}\n            />\n          ))}\n        </ul>\n      </>\n    );\n  }\n\n  renderZeroRides() {\n    const { classes } = this.props;\n    let zeroRidesEle = null;\n    const { device, segmentData } = this.props;\n\n    if (device && (segmentData === null || typeof segmentData.segments === 'undefined')) {\n      zeroRidesEle = <Typography>Loading...</Typography>;\n    } else if (segmentData && segmentData.segments && segmentData.segments.length === 0) {\n      zeroRidesEle = (\n        <Typography>\nLooks like you haven\n          {'\\''}\nt driven in the selected time range.\n        </Typography>\n      );\n    }\n\n    return (\n      <div className={classes.zeroState}>\n        <Grid container>\n          { zeroRidesEle }\n        </Grid>\n      </div>\n    );\n  }\n\n  renderDriveListHeader() {\n    const { classes, device } = this.props;\n    return (\n      <div className={classes.header}>\n        <Grid container alignItems=\"center\">\n          <Grid item xs={4}>\n            <Typography variant=\"title\">\n              { device.alias }\n              {' '}\nDrives\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Duration\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Origin\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Destination\n            </Typography>\n          </Grid>\n          <Grid item xs={1}>\n            <Typography variant=\"caption\" className={classes.headerLabel}>\n              Distance\n            </Typography>\n          </Grid>\n          <Grid item xs={1} className={classes.settingsArea}>\n            { ((device && !device.shared && device.is_owner) || this.props.isSuperUser)\n              && this.renderDriveListSettings()}\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n\n  renderDriveListSettings() {\n    const { classes, device } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n    return (\n      <>\n        <IconButton\n          className={classes.settingsButton}\n          onClick={partial(this.handleOpenedSettingsModal, device)}\n        >\n          <SettingsIcon className={classes.settingsButtonIcon} />\n        </IconButton>\n        <DeviceSettingsModal\n          isOpen={this.state.showDeviceSettingsModal}\n          onClose={this.handleClosedSettingsModal}\n          onCancel={this.handleCanceledSettings}\n        />\n      </>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  segmentData: 'workerState.segmentData',\n  start: 'workerState.start',\n  device: 'workerState.device',\n  isSuperUser: 'workerState.profile.superuser',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveList));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Modal from '@material-ui/core/Modal';\n\nimport { selectRange, selectDevice } from '../../actions';\nimport { filterEvent } from '../../utils';\nimport DeviceList from './DeviceList';\nimport DriveList from './DriveList';\nimport Timelineworker from '../../timeline';\n\nconst ZOOM_BUFFER = 1000; // 1 second on either end\n\nconst styles = (theme) => ({\n  base: {\n    background: 'linear-gradient(180deg, #1D2225 0%, #16181A 100%)',\n    display: 'flex',\n    overflow: 'hidden',\n    flexGrow: 1,\n    minWidth: '100%',\n  },\n  sidebar: {\n    background: 'linear-gradient(180deg, #1B2023 0%, #111516 100%)',\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: 280,\n    width: '20%',\n  },\n  sidebarHeader: {\n    alignItems: 'center',\n    padding: 24,\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n  },\n  annotateButton: {\n    background: '#fff',\n    borderRadius: 30,\n    color: '#404B4F',\n    height: 50,\n    textTransform: 'none',\n    width: '80%',\n    '&:hover': {\n      background: '#fff',\n      color: '#404B4F',\n    }\n  },\n});\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDeviceSelected = this.handleDeviceSelected.bind(this);\n    this.goToAnnotation = this.goToAnnotation.bind(this);\n  }\n\n  handleDeviceSelected(dongleId) {\n    this.props.dispatch(selectDevice(dongleId));\n  }\n\n  goToAnnotation(segment) {\n    if (segment == null) { return; }\n    const startTime = segment.startTime - ZOOM_BUFFER;\n    const endTime = segment.startTime + segment.duration + ZOOM_BUFFER;\n    this.props.dispatch(selectRange(startTime, endTime));\n  }\n\n  render() {\n    const { classes } = this.props;\n    let firstAnnotationSegment = null;\n    const newAnnotations = this.props.segments.reduce((count, segment) => {\n      const segCount = segment.events.filter(filterEvent).reduce((memo, event) => (event.id ? memo : memo + 1), 0);\n      if (!firstAnnotationSegment && segCount > 0) {\n        firstAnnotationSegment = segment;\n      }\n      return count + segCount;\n    }, 0);\n\n    return (\n      <div className={classes.base}>\n        <div className={classes.sidebar}>\n          <div className={classes.sidebarHeader}>\n            <Button\n              size=\"large\"\n              variant=\"outlined\"\n              className={classes.annotateButton}\n              onClick={partial(this.goToAnnotation, firstAnnotationSegment)}\n            >\n              Annotate\n            </Button>\n          </div>\n          <DeviceList\n            selectedDevice={this.props.selectedDongleId}\n            handleDeviceSelected={this.handleDeviceSelected}\n          />\n        </div>\n        <div className={classes.window}>\n          <DriveList />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  segments: 'workerState.segments',\n  selectedDongleId: 'workerState.dongleId',\n  device: 'workerState.device',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Dashboard));\n","import React, { PureComponent } from 'react';\nimport fecha from 'fecha';\nimport Raven from 'raven-js';\nimport { classNames } from 'react-extras';\n\nimport {\n  withStyles,\n  Grid,\n  Typography,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  ExpansionPanelActions,\n  Divider,\n  Select,\n  MenuItem,\n  Button,\n  TextField,\n  Tooltip,\n  FormHelperText,\n  LinearProgress,\n} from '@material-ui/core';\n\nimport { annotations as Annotations } from '@commaai/comma-api';\nimport Timelineworker from '../../timeline';\n\nconst DISENGAGEMENT_REASONS = [\n  { value: 'arbitrary', title: 'I wanted to take over', header: true },\n  { value: 'different-way', title: 'Go a different way' },\n  { value: 'lanes', title: 'Change lanes' },\n  { value: 'too-slow', title: 'Accelerate quicker' },\n  { value: 'exit', title: 'Take an exit' },\n  { value: 'stop-light', title: 'Stop at light' },\n  { value: 'stop-sign', title: 'Stop at sign' },\n  { value: 'other-desire', title: 'Other (explain in comment)' },\n\n  { value: 'danger', title: 'I needed to take over for safety', header: true },\n  { value: 'sharp-turn', title: 'Turn too sharp' },\n  { value: 'bad-lanes', title: 'Lanes misidentified' },\n  { value: 'bad-lead-car', title: 'Lead car misidentified' },\n  { value: 'other-safety', title: 'Other (explain in comment)' },\n];\n\nconst styles = (theme) => ({\n  base: {\n    backgroundColor: '#272D30',\n  },\n  isExpanded: {\n    minHeight: 'initial',\n    margin: '0px 0',\n    backgroundColor: '#1D2225',\n  },\n  bubble: {\n    background: 'linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.55) 100%)',\n    border: '1px solid rgba(255, 255, 255, 0.2)',\n    borderRadius: 60,\n    height: 28,\n    width: 28,\n  },\n  heading: {\n    fontWeight: 500,\n    paddingLeft: '5%',\n  },\n  date: {\n    color: theme.palette.grey[100],\n    fontWeight: 500,\n  },\n  pillBody: {\n    textAlign: 'center',\n  },\n  pillText: {\n    color: '#65737a',\n    border: '1px solid #65737a57',\n    borderRadius: 15,\n    display: 'inline-block',\n    fontWeight: 500,\n    margin: '0 auto',\n    padding: '6px 10px',\n  },\n  summaryContent: {\n    padding: '0px',\n    '&>:last-child': {\n      padding: '0px'\n    }\n  },\n  formField: {\n    alignItems: 'center',\n    display: 'flex',\n    marginBottom: 12,\n    width: '100%',\n  },\n  formLabel: {\n    paddingRight: '24px'\n  },\n  formLabelText: {\n    fontWeight: 500,\n    textAlign: 'right',\n  },\n  select: {\n    margin: 0,\n    width: '100%',\n  },\n  placeholder: {\n    color: theme.palette.placeholder\n  },\n  panelActions: {\n    justifyContent: 'flex-start',\n    paddingBottom: 36,\n    paddingLeft: '27%',\n    paddingRight: 24,\n    paddingTop: 0,\n  },\n  resolveButton: {\n    background: 'linear-gradient(to bottom, rgb(82, 94, 102) 0%, rgb(64, 75, 79) 100%)',\n    borderRadius: 30,\n    color: '#fff',\n    padding: '12px 24px',\n    textTransform: 'none',\n  },\n  cancelButton: {\n    background: 'transparent',\n    border: '1px solid #272D30',\n    borderRadius: 30,\n    padding: '12px 24px',\n    textTransform: 'none',\n  },\n  reasonDetailed: {\n    paddingLeft: '30px',\n    color: theme.palette.lightGrey[200],\n  }\n});\n\nclass AnnotationEntry extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleComment = this.handleComment.bind(this);\n    this.validate = this.validate.bind(this);\n\n    if (this.props.event.annotation) {\n      this.state = {\n        ...this.props.event.annotation.data,\n        saving: false,\n        id: this.props.event.id\n      };\n    } else {\n      this.state = {\n        saving: false\n      };\n    }\n  }\n\n  componentWillReceiveProps(props) {\n    if (props.event.annotation) {\n      this.setState({\n        ...props.event.annotation.data,\n        saving: false,\n        id: props.event.id\n      });\n    } else {\n      this.setState({\n        saving: false\n      });\n    }\n  }\n\n  handleChange(e) {\n    this.setState({\n      reason: e.target.value\n    });\n  }\n\n  handleComment(e) {\n    this.setState({\n      comment: e.target.value\n    });\n  }\n\n  async validate() {\n    const { event, segment } = this.props;\n    if (this.state.saving) {\n      return false;\n    }\n    if (!this.state.reason || this.state.reason === '') {\n      this.setState({\n        error: 'You must select a reason',\n        errorElem: 'reason'\n      });\n      return;\n    }\n\n    if (this.state.reason === 'other' && !this.state.comment.length) {\n      this.setState({\n        error: 'You must describe your reason',\n        errorElem: 'comment'\n      });\n      return;\n    }\n\n    // no error\n    this.setState({\n      error: false,\n      errorElem: false,\n      saving: true\n    });\n\n    let data = null;\n\n    try {\n      if (!this.state.id) {\n        data = await Annotations.createAnnotation({\n          canonical_segment_name: event.canonical_segment_name,\n          offset_nanos_part: event.offset_nanos,\n          offset_millis: event.offset_millis,\n          start_time_utc_millis: event.timestamp,\n          end_time_utc_millis: event.timestamp,\n          type: event.type,\n          data: {\n            reason: this.state.reason,\n            comment: this.state.comment\n          }\n        });\n        Timelineworker.resolveAnnotation(data, event, segment.route);\n      } else {\n        data = await Annotations.updateAnnotation(this.state.id, {\n          reason: this.state.reason,\n          comment: this.state.comment\n        });\n      }\n\n      Timelineworker.selectLoop(null, null);\n    } catch (e) {\n      Raven.captureException(e);\n      // no error\n      const error = e;\n      const { message } = error;\n      if (!error.isJoi) {\n        this.setState({\n          error: message,\n          errorElem: 'reason',\n          saving: false\n        });\n      } else {\n        this.setState({\n          error: message,\n          errorElem: 'reason',\n          saving: false\n        });\n      }\n      return;\n    }\n\n    this.setState({\n      id: data.id,\n      error: false,\n      errorElem: false,\n      saving: false\n    });\n  }\n\n  render() {\n    const {\n      event, eventId, segment, classes, style\n    } = this.props;\n    const dateString = fecha.format(new Date(event.timestamp), 'MMM D @ HH:mm:ss');\n    const reason = this.state.reason || '';\n    const comment = this.state.comment || '';\n    let selectClassName = this.props.classes.select;\n    if (!reason.length) {\n      selectClassName += ` ${this.props.classes.placeholder}`;\n    }\n\n    return (\n      <ExpansionPanel\n        style={style}\n        classes={{ expanded: classes.isExpanded }}\n        className={classNames(classes.base, 'AnnotationListEntry')}\n        key={eventId}\n        expanded={this.props.expanded}\n        onChange={this.props.onChange}\n        defaultExpanded={this.props.defaultExpanded}\n      >\n        <ExpansionPanelSummary\n          classes={{ content: classes.summaryContent }}\n        >\n          <Grid container alignItems=\"center\">\n            <Grid item xs={1}>\n              <div className={classes.bubble} />\n            </Grid>\n            <Grid item xs={5}>\n              <Typography className={classes.heading}>\n                { this.getTitle() }\n              </Typography>\n            </Grid>\n            <Grid item xs={3}>\n              <Typography className={classes.date}>\n                [\n                { dateString }\n]\n              </Typography>\n            </Grid>\n            <Grid item xs={3} className={classes.pillBody}>\n              <Typography className={classes.pillText}>\n                Disengaged\n              </Typography>\n            </Grid>\n          </Grid>\n        </ExpansionPanelSummary>\n        { !this.state.saving && <Divider style={{ marginBottom: 4 }} /> }\n        { this.state.saving && <LinearProgress /> }\n        <ExpansionPanelDetails>\n          <Grid container alignContent=\"center\" alignItems=\"center\">\n            { this.renderFormField('Reason', (\n              <Select\n                disabled={this.state.saving}\n                displayEmpty\n                error={this.state.errorElem === 'reason'}\n                value={reason}\n                onChange={this.handleChange}\n                className={selectClassName}\n                inputProps={{ name: 'reason', id: 'reason-simple' }}\n              >\n                { reason === ''\n                  && (\n                  <MenuItem disabled value=\"\">\n                    Choose one\n                  </MenuItem>\n                  )}\n                { this.isPlanned()\n                  && (\n                  <MenuItem value={event.annotation.data.reason}>\n                    { event.annotation.data.reason }\n                  </MenuItem>\n                  )}\n                { DISENGAGEMENT_REASONS.map((disengagementReason) => (\n                  <MenuItem\n                    key={disengagementReason.value}\n                    value={disengagementReason.value}\n                    className={!disengagementReason.header ? this.props.classes.reasonDetailed : ''}\n                  >\n                    { disengagementReason.title }\n                  </MenuItem>\n                ))}\n              </Select>\n            ))}\n            { this.renderFormField('Comment', (\n              <TextField\n                onChange={this.handleComment}\n                placeholder=\"Add a comment...\"\n                className={classes.select}\n                error={this.state.errorElem === 'Comment'}\n                disabled={this.state.saving}\n                value={comment}\n              />\n            ))}\n          </Grid>\n        </ExpansionPanelDetails>\n        <ExpansionPanelActions className={classes.panelActions}>\n          <Tooltip\n            id=\"tooltip-annot\"\n            title=\"Grey Panda required to annotate\"\n            disableFocusListener={segment.hpgps || this.isPlanned()}\n            disableHoverListener={segment.hpgps || this.isPlanned()}\n          >\n            <div>\n              <Button\n                onClick={this.validate}\n                size=\"large\"\n                disabled={this.state.saving || this.isPlanned() || !segment.hpgps}\n                className={classes.resolveButton}\n              >\n                Resolve Annotation\n              </Button>\n            </div>\n          </Tooltip>\n          <Button\n            size=\"large\"\n            disabled={this.state.saving}\n            onClick={this.props.onChange}\n            className={classes.cancelButton}\n          >\n            Cancel\n          </Button>\n        </ExpansionPanelActions>\n      </ExpansionPanel>\n    );\n  }\n\n  renderFormField(label, form) {\n    const { classes } = this.props;\n    return (\n      <div className={classes.formField}>\n        { this.state.errorElem === label.toLowerCase() && (\n        <Grid item xs={12}>\n          <FormHelperText error>\n            { this.state.error }\n          </FormHelperText>\n        </Grid>\n        )}\n        <Grid item xs={3} className={classes.formLabel}>\n          <Typography className={classes.formLabelText}>\n            { label }\n:\n          </Typography>\n        </Grid>\n        <Grid item xs={9} style={{ paddingRight: 40 }}>\n          { form }\n        </Grid>\n      </div>\n    );\n  }\n\n  getTitle() {\n    if (this.isPlanned()) {\n      return 'Planned Disengagement';\n    } if (this.props.event.type === 'disengage_steer') {\n      return 'Steering Override';\n    } if (this.props.event.type === 'disengage') {\n      return 'Disengagement';\n    }\n  }\n\n  isPlanned() {\n    const { event } = this.props;\n    return (event.data && event.annotation && event.data.is_planned);\n  }\n}\n\nexport default withStyles(styles)(AnnotationEntry);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\nimport { withStyles } from '@material-ui/core/styles';\nimport { AutoSizer, List } from 'react-virtualized';\nimport memoize from 'memoize-one';\n\nimport AnnotationListItem from './AnnotationListItem';\nimport Timelineworker from '../../timeline';\nimport { selectRange } from '../../actions';\nimport { filterEvent } from '../../utils';\n\nconst LOOP_DURATION = 10000;\n\nconst styles = (theme) => ({\n  base: {\n    border: '1px solid rgba(255,255,255,0.04)',\n    borderRadius: 5,\n    overflow: 'hidden'\n  }\n});\n\nclass AnnotationList extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      expanded: false\n    };\n  }\n\n  // TODO: Migrate deprecated lifecycle method\n  componentWillReceiveProps(nextProps) {\n    if (this.state.expanded) {\n      if (nextProps.loop.startTime === null || nextProps.resolved !== this.props.resolved) {\n        this.setState({ expanded: false }, () => {\n          this.recomputeList();\n        });\n      }\n    }\n  }\n\n  list = null\n\n  filter = memoize((resolved, unresolved, list) => list.filter(this.filterEntry));\n\n  recomputeList = () => {\n    if (this.list) {\n      this.list.recomputeRowHeights();\n      this.list.forceUpdateGrid();\n    }\n  }\n\n  handleExpanded = (eventId, timestamp) => {\n    const { zoom } = this.props;\n    const isExpanded = this.state.expanded !== eventId && eventId;\n    this.setState({\n      expanded: isExpanded ? eventId : null\n    });\n\n    this.recomputeList();\n\n    if (isExpanded) {\n      const loopStartTime = timestamp - LOOP_DURATION / 2;\n      const loopEndTime = loopStartTime + LOOP_DURATION;\n      if (zoom && (loopStartTime < zoom.start || loopEndTime > zoom.end)) {\n        this.props.dispatch(selectRange(loopStartTime, loopEndTime));\n      } else {\n        // 5 seconds before, 5 seconds after...\n        Timelineworker.selectLoop(loopStartTime, LOOP_DURATION);\n      }\n    } else if (zoom && zoom.expanded) {\n      Timelineworker.selectLoop(zoom.start, zoom.end - zoom.start);\n    }\n  }\n\n  getEvent(index) {\n    const { segment } = this.props;\n    const events = (segment || {}).events || [];\n    const filteredList = this.filter(this.props.resolved, this.props.unresolved, events);\n\n    return filteredList[index];\n  }\n\n  getRowHeight = ({ index }) => {\n    const event = this.getEvent(index);\n\n    const eventId = `${event.time}:${index}`;\n\n    const expanded = this.state.expanded === eventId;\n\n    return !expanded ? 64 : 314; // TODO: is 314 safe?\n  }\n\n  render() {\n    const {\n      segment, classes, resolved, unresolved\n    } = this.props;\n    const events = (segment || {}).events || [];\n\n    return (\n      <div className={classes.base} style={{ height: '100%' }}>\n        <AutoSizer>\n          {({ height, width }) => (\n            <List\n              ref={(ref) => this.list = ref}\n              height={height}\n              width={width}\n              overscanRowCount={10}\n              // noRowsRenderer={this.noRowsRenderer}\n              rowCount={this.filter(resolved, unresolved, events).length}\n              rowHeight={this.getRowHeight}\n              rowRenderer={this.renderEntry}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    );\n  }\n\n  filterEntry = (event) => {\n    if (this.props.resolved && !event.id) {\n      return false;\n    }\n    if (this.props.unresolved && event.id) {\n      return false;\n    }\n    return filterEvent(event);\n  }\n\n  renderEntry = ({ index, key, style }) => {\n    const { segment } = this.props;\n    const event = this.getEvent(index);\n    const eventId = `${event.time}:${index}`;\n    return (\n      <AnnotationListItem\n        key={eventId}\n        style={style}\n        segment={segment}\n        eventId={eventId}\n        event={event}\n        expanded={this.state.expanded === eventId}\n        disabled={!segment.hpgps}\n        onChange={partial(this.handleExpanded, eventId, event.timestamp)}\n      />\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  start: 'workerState.start',\n  loop: 'workerState.loop',\n  zoom: 'zoom'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AnnotationList));\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\nimport { partial } from 'ap';\nimport fecha from 'fecha';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Badge from '@material-ui/core/Badge';\n\nimport AnnotationList from './AnnotationList';\nimport { filterEvent } from '../../utils';\n\nconst styles = (theme) => ({\n  root: {\n  },\n  annotationsViewer: {\n    display: 'flex',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden',\n    flexDirection: 'column',\n  },\n  annotationsViewerTabs: {\n    marginBottom: 12,\n    width: '100%',\n  },\n  tabLabelBadge: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: 24,\n    marginRight: 24,\n    minWidth: 28,\n    top: -4,\n  },\n  tabLabelText: {\n    fontWeight: 500,\n    paddingLeft: 24,\n    textTransform: 'none',\n  },\n  annotationsViewerTabIndicator: {\n    backgroundColor: theme.palette.grey[100],\n    borderRadius: 8,\n    height: 6,\n  },\n  annotationsViewerList: {\n    height: '100%',\n    overflowY: 'scroll',\n  },\n});\n\nclass AnnotationTabs extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n\n    this.state = {\n      selectedTab: 0\n    };\n  }\n\n  handleChange(event, selectedTab) {\n    this.setState({ selectedTab });\n  }\n\n  count(resolved) {\n    return this.props.segment.events.filter((event) => {\n      if (!filterEvent(event)) {\n        return false;\n      }\n      if (resolved && event.id) {\n        return true;\n      }\n      if (!resolved && !event.id) {\n        return true;\n      }\n    }).length;\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div style={{ position: 'relative', height: '100%' }}>\n        <div className={classes.annotationsViewer}>\n          <Tabs\n            value={this.state.selectedTab}\n            onChange={this.handleChange}\n            classes={{\n              indicator: classes.annotationsViewerTabIndicator\n            }}\n            className={classes.annotationsViewerTabs}\n          >\n            <Tab label={(\n              <Typography className={classes.tabLabelText}>\n                <Badge classes={{ badge: classes.tabLabelBadge }} badgeContent={this.count(false)}>\n                  &nbsp;\n                </Badge>\n                Annotations Unresolved\n              </Typography>\n            )}\n            />\n            <Tab label={(\n              <Typography className={classes.tabLabelText}>\n                <Badge classes={{ badge: classes.tabLabelBadge }} badgeContent={this.count(true)}>\n                  &nbsp;\n                </Badge>\n                Resolved\n              </Typography>\n            )}\n            />\n          </Tabs>\n          <div className={`${classes.annotationsViewerList} x-scrollbar`}>\n            { this.renderTab(this.state.selectedTab) }\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderTab(index) {\n    switch (index) {\n      case 0:\n        return (\n          <AnnotationList\n            segment={this.props.segment}\n            unresolved\n          />\n        );\n      case 1:\n        return (<AnnotationList segment={this.props.segment} resolved />);\n    }\n  }\n}\n\nexport default withStyles(styles)(AnnotationTabs);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport raf from 'raf';\nimport Measure from 'react-measure';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport { LngLatBounds } from 'mapbox-gl';\nimport ReactMapGL, { LinearInterpolator } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\n\nimport { derived as DerivedDataApi } from '@commaai/comma-api';\nimport TimelineWorker from '../../timeline';\nimport { MAPBOX_TOKEN } from '../../api/geocode';\n\nconst MAP_STYLE = 'mapbox://styles/commaai/cjj4yzqk201c52ss60ebmow0w';\n\nconst styles = {\n  mapContainer: {\n    width: '100%',\n    cursor: 'default !important'\n  }\n};\n\nclass DriveMap extends Component {\n  constructor(props) {\n    super(props);\n\n    this.initMap = this.initMap.bind(this);\n    this.populateMap = this.populateMap.bind(this);\n    this.posAtOffset = this.posAtOffset.bind(this);\n    this.setPath = this.setPath.bind(this);\n    this.updateMarkerPos = this.updateMarkerPos.bind(this);\n\n    const nextRoute = props.currentSegment && props.currentSegment.route;\n\n    this.isLoadingCoords = false;\n    this.state = {\n      viewport: {\n        width: 640,\n        height: 480,\n        latitude: 37.7577,\n        longitude: -122.4376,\n        zoom: 15\n      },\n      route: nextRoute,\n      coords: [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const nextRoute = nextProps.currentSegment && nextProps.currentSegment.route;\n    if (nextRoute !== this.state.route) {\n      if (this.state.coords.length > 0) {\n        this.setPath([]);\n      }\n    }\n\n    const coordsNeedRefresh = nextRoute !== this.state.route || this.state.coords.length === 0;\n    const shouldRefreshMap = coordsNeedRefresh && this.map != null && !this.isLoadingCoords;\n    if (shouldRefreshMap) {\n      this.setState({ route: nextRoute }, this.populateMap.bind(this, nextProps));\n    }\n\n    if (nextProps.startTime !== this.props.startTime) {\n      this.shouldFlyTo = true;\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.updateMarkerPos();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  getMarkerSource() {\n    return this.map && this.map.getMap().getSource('seekPoint');\n  }\n\n  updateMarkerPos() {\n    if (!this.mounted) {\n      return;\n    }\n\n    const markerSource = this.getMarkerSource();\n    if (markerSource) {\n      if (this.props.currentSegment && this.state.coords.length > 0) {\n        const { routeOffset } = this.props.currentSegment;\n        const offset = TimelineWorker.currentOffset();\n\n        const pos = this.posAtOffset(offset - routeOffset);\n        if (pos) {\n          markerSource.setData({\n            type: 'Point',\n            coordinates: pos\n          });\n          this.moveViewportTo(pos);\n        }\n      } else if (markerSource._data && markerSource._data.coordinates.length > 0) {\n        markerSource.setData({\n          type: 'Point',\n          coordinates: []\n        });\n      }\n    }\n\n    raf(this.updateMarkerPos);\n  }\n\n  moveViewportTo(pos) {\n    const viewport = {\n      ...this.state.viewport,\n      longitude: pos[0],\n      latitude: pos[1]\n    };\n    if (this.shouldFlyTo) {\n      viewport.transitionDuration = 200;\n      viewport.transitionInterpolator = new LinearInterpolator();\n      this.shouldFlyTo = false;\n    }\n\n    this.setState({ viewport });\n  }\n\n  populateMap = async (props) => {\n    if (!props) props = this.props;\n\n    if (!this.map || !props.currentSegment || !this.state.route) {\n      return;\n    }\n    this.isLoadingCoords = true;\n\n    const { route } = this.state;\n    const routeSigUrl = props.currentSegment.url;\n\n    try {\n      const coords = await DerivedDataApi(routeSigUrl).getCoords();\n\n      if (this.state.route !== route) {\n        // handle race, if route changes while coords request was in flight\n        return;\n      }\n\n      const coordsArr = coords.map((coord) => [coord.lng, coord.lat]);\n      this.setPath(coordsArr);\n    } finally {\n      this.isLoadingCoords = false;\n    }\n  }\n\n  setPath(coords) {\n    const map = this.map && this.map.getMap();\n    this.setState({ coords });\n\n    if (map) {\n      map.getSource('route').setData({\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'LineString',\n          coordinates: coords,\n        }\n      });\n    }\n  }\n\n  posAtOffset(offset) {\n    const offsetSeconds = Math.floor(offset / 1e3);\n    const offsetFractionalPart = (offset % 1e3) / 1000.0;\n    const coordIdx = Math.min(\n      offsetSeconds,\n      this.state.coords.length - 1\n    );\n    const nextCoordIdx = Math.min(\n      offsetSeconds + 1,\n      this.state.coords.length - 1\n    );\n    if (!this.state.coords[coordIdx]) {\n      return null;\n    }\n\n    const [floorLng, floorLat] = this.state.coords[coordIdx];\n    const [ceilLng, ceilLat] = this.state.coords[nextCoordIdx];\n\n    return [\n      floorLng + ((ceilLng - floorLng) * offsetFractionalPart),\n      floorLat + ((ceilLat - floorLat) * offsetFractionalPart)\n    ];\n  }\n\n  initMap(mapComponent) {\n    if (!mapComponent) {\n      this.map = null;\n      return;\n    }\n\n    const map = mapComponent.getMap();\n\n    map.on('load', () => {\n      map.addSource('route', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          properties: {},\n          geometry: {\n            type: 'LineString',\n            coordinates: [],\n          }\n        }\n      });\n      map.addSource('seekPoint', {\n        type: 'geojson',\n        data: {\n          type: 'Point',\n          coordinates: []\n        }\n      });\n\n      const lineGeoJson = {\n        id: 'routeLine',\n        type: 'line',\n        source: 'route',\n        layout: {\n          'line-join': 'round',\n          'line-cap': 'round'\n        },\n        paint: {\n          'line-color': '#888',\n          'line-width': 8\n        }\n      };\n      map.addLayer(lineGeoJson);\n\n      const markerGeoJson = {\n        id: 'marker',\n        type: 'circle',\n        paint: {\n          'circle-radius': 10,\n          'circle-color': '#007cbf'\n        },\n        source: 'seekPoint'\n      };\n\n      map.addLayer(markerGeoJson);\n\n      this.map = mapComponent;\n\n      if (this.state.route && this.props.currentSegment) {\n        this.populateMap();\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Measure\n        bounds\n        onResize={(contentRect) => {\n          this.setState({ viewport: { ...this.state.viewport, width: contentRect.bounds.width } });\n        }}\n      >\n        {({ measureRef }) => (\n          <div ref={measureRef} className={this.props.classes.mapContainer}>\n            <ReactMapGL\n              {...this.state.viewport}\n              mapStyle={MAP_STYLE}\n              onViewportChange={(viewport) => this.setState({ viewport })}\n              mapboxApiAccessToken={MAPBOX_TOKEN}\n              attributionControl={false}\n              ref={this.initMap}\n              dragPan={false}\n            />\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  offset: 'workerState.offset',\n  route: 'workerState.route',\n  segments: 'workerState.segments',\n  segmentNum: 'workerState.segment',\n  currentSegment: 'workerState.currentSegment',\n  startTime: 'workerState.startTime'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(DriveMap));\n","// https://video-react.js.org/customize/customize-source/\nimport React, { Component } from 'react';\nimport Hls from '@commaai/hls.js';\n\nexport default class HLSSource extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.hls = new Hls({\n      enableWorker: false,\n      disablePtsDtsCorrectionInMp4Remux: false\n    });\n    this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n      this.props.video.play();\n    });\n    this.hls.on(Hls.Events.BUFFER_APPENDED, (eventName, data) => {\n      if (this.props.onBufferAppend) {\n        this.props.onBufferAppend();\n      }\n    });\n\n    this.hls.on(Hls.Events.ERROR, (event, data) => {\n      if (data.fatal) {\n        switch (data.type) {\n          case Hls.ErrorTypes.NETWORK_ERROR:\n          // try to recover network error\n            console.log('fatal network error encountered, try to recover');\n            this.hls.startLoad();\n            break;\n          case Hls.ErrorTypes.MEDIA_ERROR:\n            console.log('fatal media error encountered, try to recover');\n            this.hls.recoverMediaError();\n            break;\n          default:\n          // cannot recover\n            this.hls.destroy();\n            this.hls = null;\n            break;\n        }\n      }\n    });\n\n    this.state = {\n      src: ''\n    };\n    // this.hls.on(Hls.Events.STREAM_STATE_TRANSITION, (eventName, data) => {\n    // });\n  }\n\n  componentDidMount() {\n    this.setState({\n      src: this.props.src\n    });\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.src !== nextState.src) {\n      // console.log('Loading media source!', nextProps.src);\n      if (this.state.src && this.state.src.length) {\n        // console.log('this.hls.detachMedia();');\n        this.hls.detachMedia();\n      }\n      this.setState({\n        src: nextProps.src\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { src } = this.state;\n    if (src !== prevState.src && src && src.length) {\n      // console.log('this.hls.loadSource(src);');\n      this.hls.loadSource(src);\n      // console.log('this.hls.attachMedia(this.props.video);');\n      this.hls.attachMedia(this.props.video);\n\n      if (this.props.onSourceLoaded) {\n        this.props.onSourceLoaded();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    // destroy hls video source\n    if (this.hls) {\n      // console.log('this.hls.destroy();');\n      this.hls.destroy();\n      this.hls = null;\n    }\n  }\n\n  render() {\n    return (\n      <source src={this.state.src} type={this.props.type || 'application/x-mpegURL'} />\n    );\n  }\n}\n","export function strokeRoundedRect(ctx, left, top, width, height, radius, strokeWidth, strokeStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n\n  ctx.lineWidth = strokeWidth;\n  ctx.strokeStyle = strokeStyle;\n  ctx.stroke();\n  ctx.closePath();\n}\n\nexport function fillRoundedRect(ctx, left, top, width, height, radius, fillStyle) {\n  roundedRectPath(ctx, left, top, width, height, radius);\n  ctx.fillStyle = fillStyle;\n  ctx.fill();\n  ctx.closePath();\n}\n\nfunction roundedRectPath(ctx, left, top, width, height, radius) {\n  const right = left + width;\n  const bottom = top + height;\n  const K = 4 * (Math.SQRT2 - 1) / 3;\n\n  ctx.beginPath();\n  ctx.moveTo(left + radius, top);\n  ctx.lineTo(right - radius, top);\n  ctx.bezierCurveTo(right + radius * (K - 1), top, right, top + radius * (1 - K), right, top + radius);\n  ctx.lineTo(right, bottom - radius);\n  ctx.bezierCurveTo(right, bottom + radius * (K - 1), right + radius * (K - 1), bottom, right - radius, bottom);\n  ctx.lineTo(left + radius, bottom);\n  ctx.bezierCurveTo(left + radius * (1 - K), bottom, left, bottom + radius * (K - 1), left, bottom - radius);\n  ctx.lineTo(left, top + radius);\n  ctx.bezierCurveTo(left, top + radius * (1 - K), left + radius * (1 - K), top, left + radius, top);\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\n\nexport default function Buffering(props) {\n  const parts = [];\n  if (props.bufferingVideo) {\n    parts.push('video');\n  }\n  if (props.bufferingData) {\n    parts.push('data');\n  }\n  const message = `Buffering ${parts.join(' and ')}`;\n  return (\n    <div\n      style={{\n        zIndex: 50,\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        backgroundColor: '#16181Aaa',\n      }}\n    >\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: 'calc(50% - 25px)'\n      }}\n      >\n        <CircularProgress\n          color=\"secondary\"\n          thickness={6}\n          size={50}\n        />\n      </div>\n      <div style={{\n        position: 'relative',\n        textAlign: 'center',\n        top: '50%',\n      }}\n      >\n        <Typography>\n          { message }\n        </Typography>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable camelcase */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport raf from 'raf';\nimport { classNames } from 'react-extras';\nimport { multiply } from 'mathjs';\nimport debounce from 'debounce';\nimport PropTypes from 'prop-types';\n\nimport { Player, ControlBar } from 'video-react';\nimport 'video-react/dist/video-react.css'; // CSS for video\nimport { video as VideoApi } from '@commaai/comma-api';\n\nimport theme from '../../theme';\nimport HLSSource from './hlsSource';\nimport TimelineWorker from '../../timeline';\nimport * as LogIndex from '../../timeline/logIndex';\nimport { strokeRoundedRect, fillRoundedRect } from './canvas';\nimport Buffering from './buffering';\n\n// UI Assets\nconst wheelImg = new Image();\nwheelImg.src = require('../../icons/icon-chffr-wheel.svg');\n\n// these constants are named this way so that the names are the same in python and js\n// do not refactor them to have js style or more descriptive names\n// UI Measurements\n\nconst tici_vwp_w = 1928;\nconst tici_vwp_h = 1208;\nconst tici_focal = 2648;\nconst tici_video_height = 530;\n\nconst eon_vwp_w = 1164;\nconst eon_vwp_h = 874;\nconst eon_focal = 910;\nconst eon_video_height = 640;\n\nconst tici_intrinsic = [\n  tici_focal, 0, tici_vwp_w/2, 0,\n  0, tici_focal, tici_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\nconst eon_intrinsic = [\n  eon_focal, 0, eon_vwp_w/2, 0,\n  0, eon_focal, eon_vwp_h/2, 0,\n  0, 0, 1, 0,\n  0, 0, 0, 0,\n];\n\n\n\nconst bdr_s = 30;\n// driver monitoring constants\nconst _PITCH_NATURAL_OFFSET = 0.12; // eslint-disable-line no-underscore-dangle\nconst _YAW_NATURAL_OFFSET = 0.08; // eslint-disable-line no-underscore-dangle\nconst _PITCH_POS_ALLOWANCE = 0.04; // eslint-disable-line no-underscore-dangle\nconst _PITCH_WEIGHT = 1.35; // eslint-disable-line no-underscore-dangle\nconst _METRIC_THRESHOLD = 0.4; // eslint-disable-line no-underscore-dangle\nconst W = 160;\nconst H = 320;\nconst RESIZED_FOCAL = 320.0;\nconst FULL_W = 426;\nconst DM_FACE_THRESHOLD = 0.4; // probs below this disappear\nconst DM_EYE_THRESHOLD = 0.4; // probs below which blink is masked\nconst DM_BLINK_THRESHOLD = 0.5; // probs above this count as blinking\n\n// cache break index files\nconst STREAM_VERSION = 2;\n\nconst styles = (theme) => ({\n  hidden: {\n    display: 'none'\n  },\n  videoContainer: {\n    position: 'relative',\n    width: 850,\n  },\n  videoImage: {\n    height: 'auto',\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n    zIndex: 1\n  },\n  videoUiCanvas: {\n    height: '100%',\n    left: 0,\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  thumbnail: {\n    height: '100%',\n    left: 0,\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  }\n});\n\nfunction is_tici(init_data) {\n  return init_data.InitData.DeviceType == 4;\n}\n\nclass VideoPreview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updatePreview = this.updatePreview.bind(this);\n    this.onSourceLoaded = this.onSourceLoaded.bind(this);\n    this.onDisableBuffering = this.onDisableBuffering.bind(this);\n    // this.checkVideoBuffer = this.checkVideoBuffer.bind(this);\n\n    this.imageRef = React.createRef();\n    this.videoPlayer = React.createRef();\n    this.canvas_road = React.createRef();\n    this.canvas_lead = React.createRef();\n    this.canvas_carstate = React.createRef();\n    this.canvas_maxspeed = React.createRef();\n    this.canvas_speed = React.createRef();\n    this.canvas_face = React.createRef();\n\n    this.intrinsic = eon_intrinsic;\n    this.vwp_w = eon_vwp_w;\n    this.vwp_h = eon_vwp_h;\n    this.video_height = eon_video_height;\n\n    this.frame = 0;\n\n    this.state = {\n      bufferTime: 4,\n      src: '',\n    };\n  }\n\n  componentDidMount() {\n    const { playSpeed } = this.props;\n    this.mounted = true;\n    if (this.videoPlayer.current) {\n      this.videoPlayer.current.playbackRate = playSpeed || 1;\n    }\n    this.rafLoop = raf(this.updatePreview);\n    this.checkVideoBuffer();\n    this.stopListening = TimelineWorker.onIndexed(() => this.checkDataBuffer());\n  }\n\n  componentDidUpdate(prevProps) {\n    // play state\n    this.checkVideoBuffer();\n    this.updateVideoSource(prevProps);\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.rafLoop) {\n      raf.cancel(this.rafLoop);\n      this.rafLoop = null;\n    }\n    if (this.stopListening) {\n      this.stopListening();\n      this.stopListening = null;\n    }\n    if (this.stopListeningToVideo) {\n      this.stopListeningToVideo();\n      this.stopListeningToVideo = null;\n    }\n  }\n\n  updateVideoSource(prevProps) {\n    const { props } = this;\n    let segment = props.currentSegment;\n    if (!segment && props.nextSegment) {\n      const offset = TimelineWorker.currentOffset();\n      if (props.nextSegment.startOffset - offset < 5000) {\n        segment = props.nextSegment;\n      }\n    }\n    if (!segment) {\n      if (this.state.src !== '') {\n        this.setState({ src: '' });\n      }\n      return;\n    }\n\n    if (props.front) {\n      let base = `${process.env.REACT_APP_VIDEO_CDN}/hls/${props.dongleId}/${segment.url.split('/').pop()}`;\n      base += '/dcamera';\n      // We append count of segments with stream available as a cache-busting method\n      // on stream indexes served before route is fully uploaded\n      let segCount = segment.driverCameraStreamSegCount;\n      let src = `${base}/index.m3u8?v=${STREAM_VERSION}&s=${segCount}`;\n      if (this.state.src !== src) {\n        this.setState({ src });\n      }\n    } else if (this.state.src === '' || !prevProps.currentSegment || prevProps.currentSegment.route !== segment.route) {\n      let videoApi = VideoApi(segment.url, process.env.REACT_APP_VIDEO_CDN);\n      videoApi.getQcameraStreamIndex().then(() => {\n        let src = videoApi.getQcameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`\n        if (src !== this.state.src) {\n          this.setState({src});\n        }\n      }).catch(() => {\n        let src = videoApi.getRearCameraStreamIndexUrl() + `?s=${segment.cameraStreamSegCount}`;\n        if (src !== this.state.src) {\n          this.setState({src});\n        }\n      });\n    }\n  }\n\n  onSourceLoaded() {\n    if (this.videoPlayer.current) {\n      console.log('Calling load with media change');\n      this.videoPlayer.current.load();\n    }\n  }\n\n  onDisableBuffering() {\n    TimelineWorker.disableBuffer();\n  }\n\n  updatePreview() {\n    // schedule next run right away so that we can return early\n    this.rafLoop = raf(this.updatePreview);\n\n    this.frame++;\n    if (this.frame >= 60) {\n      this.frame = 0;\n      this.checkVideoBuffer();\n    }\n\n    // 10 fps\n    if (this.frame % 6 === 0) {\n      this.checkDataBuffer();\n    }\n    if (this.frame % 6 === 3) {\n      this.renderCanvas();\n    }\n  }\n\n  checkDataBuffer = debounce(() => {\n    let isDataBuffering = true;\n    if (this.props.currentSegment) {\n      const monoTime = TimelineWorker.currentLogMonoTime();\n      const monoTimeLength = (`${monoTime}`).length;\n      const logIndex = TimelineWorker.getLogIndex();\n      if (logIndex) {\n        const curIndex = LogIndex.findMonoTime(logIndex, monoTime);\n        const lastEvent = TimelineWorker.getEvent(curIndex, logIndex);\n        let nextEvent = TimelineWorker.getEvent(curIndex + 1, logIndex);\n\n        if (!nextEvent) {\n          nextEvent = TimelineWorker.getEvent(0, TimelineWorker.getNextLogIndex());\n        }\n\n        if (nextEvent && nextEvent.LogMonoTime) {\n          const nextEventTime = Number(nextEvent.LogMonoTime.substr(0, monoTimeLength));\n          const timeDiff = Math.abs(nextEventTime - monoTime);\n\n          isDataBuffering = timeDiff > 1000;\n        }\n        if (isDataBuffering && lastEvent && lastEvent.LogMonoTime) {\n          const monSec = lastEvent.LogMonoTime.substr(0, monoTimeLength);\n          const timeDiff = Math.abs(monoTime - Number(monSec));\n          // 3 seconds of grace\n          isDataBuffering = timeDiff > 3000;\n        }\n      }\n    } else {\n      isDataBuffering = false;\n\n      if (this.props.bufferVideo) {\n        console.log('Exited segment while buffering, exiting buffer state');\n        TimelineWorker.bufferVideo(false);\n      }\n    }\n\n    if (isDataBuffering !== this.props.bufferingData) {\n      console.log('Changing data buffer state to', isDataBuffering);\n      TimelineWorker.bufferData(isDataBuffering);\n    }\n  }, 100)\n\n  checkVideoBuffer = debounce(() => {\n    const videoPlayer = this.videoPlayer.current;\n    const { front } = this.props;\n\n    if (videoPlayer && !videoPlayer.wasConnected) {\n      videoPlayer.wasConnected = true;\n      if (this.stopListeningToVideo) {\n        this.stopListeningToVideo();\n        this.stopListeningToVideo = null;\n      }\n      this.stopListeningToVideo = videoPlayer.subscribeToStateChange(this.checkVideoBuffer);\n    }\n\n    const offset = TimelineWorker.currentOffset();\n    let shouldShowPreview = true;\n    const { bufferTime } = this.state;\n    const { playSpeed } = this.props;\n    let { desiredPlaySpeed } = this.props;\n\n    if (videoPlayer) {\n      const playerState = videoPlayer.getState().player;\n      if (!playerState.buffered || Number.isNaN(playerState.duration)) {\n        return;\n      }\n      let desiredVideoTime = this.currentVideoTime(offset);\n      const curVideoTime = playerState.currentTime;\n      if (desiredPlaySpeed && this.props.currentSegment) {\n        const timeDiff = desiredVideoTime - curVideoTime;\n\n        let desiredBufferedVideoTime = desiredVideoTime;\n        if (this.props.bufferingVideo) {\n          // if we're currently already paused buffering for video\n          // then wait for another few seconds of video t oload\n          desiredBufferedVideoTime += 3 * desiredPlaySpeed;\n        }\n        // clip the duration down slightly to handle rounding errors near the end of video\n        desiredVideoTime = Math.min(playerState.duration - 0.4, desiredVideoTime);\n        desiredBufferedVideoTime = Math.min(playerState.duration - 0.4, desiredBufferedVideoTime);\n\n        let isBuffering = true;\n        let remainingTime = desiredBufferedVideoTime;\n\n        for (let i = 0, buf = playerState.buffered, len = buf.length; i < len; ++i) {\n          let start = buf.start(i);\n          // if we seek to a spot **right** at the start of an already loaded segment then\n          // HLS doesn't actually load that segment. it just expects to jump forwards a bit and be fine\n          // because of this, the first 4 seconds of a given video is almost never available\n          // additionally, sometimes even in the middle of the video it can be off and not load due to rounding errors\n          // we check if we're in the first 5 seconds or if we're *right* before the start\n          // \"stuck seeking\" errors are handled below\n          if (start < 6 && desiredVideoTime < 6) {\n            start = desiredVideoTime;\n            desiredBufferedVideoTime = desiredVideoTime;\n          }\n          if (start > desiredVideoTime && start - desiredVideoTime < 0.5) {\n            start = desiredVideoTime;\n          }\n          if (start <= desiredVideoTime) {\n            if (buf.end(i) >= desiredBufferedVideoTime) {\n              isBuffering = false;\n            } else {\n              remainingTime = Math.min(remainingTime, desiredBufferedVideoTime - buf.end(i));\n            }\n          }\n        }\n\n        if (isBuffering) {\n          // console.log('We need', remainingTime, 'more time buffered...');\n        }\n\n        if (desiredVideoTime > 5 && (playerState.waiting || playerState.seeking)) {\n          isBuffering = true;\n        }\n\n        const timeDiffAbs = Math.abs(timeDiff);\n        if (Number.isFinite(timeDiff) && timeDiffAbs > 0) {\n          if (this.props.isBuffering && playerState.paused && !playerState.seeking && timeDiffAbs > 1.0) {\n            // console.log('SEEK paused', timeDiff);\n            videoPlayer.seek(desiredVideoTime);\n            isBuffering = true;\n          } else if (timeDiffAbs > 1.0) {\n            // console.log('Seeking video', timeDiff, desiredVideoTime, curVideoTime);\n            videoPlayer.seek(desiredVideoTime);\n            if (desiredVideoTime > 5) {\n              isBuffering = true;\n            }\n          } else if (timeDiffAbs > 0.2) {\n            desiredPlaySpeed += timeDiff;\n          // } else {\n          }\n        }\n\n        if (isBuffering && !front) {\n          isBuffering = this.updatePreviewImage(playerState.seeking ? null : timeDiff);\n        } else if (this.state.shouldShowThumbnail) {\n          this.setState({\n            shouldShowThumbnail: false\n          });\n        }\n\n        if (this.props.bufferingVideo !== isBuffering) {\n          // console.log('Changing video buffer state to', isBuffering);\n          TimelineWorker.bufferVideo(isBuffering);\n        }\n\n        shouldShowPreview = isBuffering;\n\n        desiredPlaySpeed = Math.round(desiredPlaySpeed * 5) / 5;\n\n        if (videoPlayer.playbackRate !== desiredPlaySpeed) {\n          videoPlayer.playbackRate = desiredPlaySpeed;\n        }\n\n        if (!isBuffering && !this.props.bufferingData && this.props.currentSegment && playerState.paused) {\n          console.log('Play');\n          videoPlayer.play();\n        }\n        if (!isBuffering && this.props.isBuffering && !playerState.paused) {\n          console.log('Pause for buffering...');\n          videoPlayer.pause();\n        }\n      } else {\n        // desired player speed is 0 or there's no segment\n        // either way, no video to load\n        if (this.props.bufferingVideo) {\n          TimelineWorker.bufferVideo(false);\n        }\n        if (this.props.currentSegment) {\n          if (front || this.updatePreviewImage()) {\n            // no image\n            if (Math.abs(curVideoTime - desiredVideoTime) > 1) {\n              videoPlayer.seek(desiredVideoTime);\n            }\n          }\n        }\n        shouldShowPreview = !this.props.currentSegment || !playerState.buffered.length;\n        if (!playerState.paused && !playerState.seeking && playerState.buffered.length) {\n          console.log('Pause');\n          videoPlayer.pause();\n        }\n      }\n    }\n    if (this.imageRef.current) {\n      if (shouldShowPreview && this.imageRef.current.src !== this.nearestImageFrame(offset)) {\n        this.imageRef.current.src = this.nearestImageFrame(offset);\n      }\n      this.imageRef.current.style.opacity = shouldShowPreview ? 1 : 0;\n    }\n  }, 100)\n\n  updatePreviewImage(timeDiff) {\n    const { shouldShowThumbnail } = this.state;\n    const thumbnail = TimelineWorker.currentThumbnail();\n    const monoTime = TimelineWorker.currentLogMonoTime();\n    const monoTimeLength = (`${monoTime}`).length;\n    let retVal = true;\n    if (thumbnail) {\n      const { thumbnailMonoTime } = this.state;\n      const thumbnailTime = Number(thumbnail.LogMonoTime.substr(0, monoTimeLength));\n      const thumbnailTimeDiff = thumbnailTime;\n\n      if (Number.isFinite(timeDiff) && timeDiff > 0 && timeDiff < thumbnailTimeDiff) {\n        retVal = false;\n        // the video is closer than we are\n      } else if (thumbnailMonoTime !== thumbnail.LogMonoTime || !shouldShowThumbnail) {\n        const base64 = btoa(String.fromCharCode(...new Uint8Array(thumbnail.Thumbnail.Thumbnail)));\n        this.setState({\n          thumbnailData: base64,\n          thumbnailMonoTime: thumbnail.LogMonoTime,\n          shouldShowThumbnail: true\n        });\n      }\n      retVal = false;\n    } else if (shouldShowThumbnail) {\n      this.setState({\n        shouldShowThumbnail: false\n      });\n    }\n\n    return retVal;\n  }\n\n  renderCanvas() {\n    const calibration = TimelineWorker.getCalibration(this.props.route);\n    if (!calibration) {\n      this.lastCalibrationTime = false;\n      return;\n    }\n\n    if (this.props.front) {\n      if (this.canvas_face.current) {\n        const params = { calibration, shouldScale: true };\n        const events = {\n          driverMonitoring: TimelineWorker.currentDriverMonitoring\n        };\n        this.renderEventToCanvas(\n          this.canvas_face.current, params, events, this.renderDriverMonitoring\n        );\n      }\n    }\n\n    if (!this.props.shouldShowUI) {\n      return;\n    }\n\n    if (calibration) {\n      if (this.lastCalibrationTime !== calibration.LogMonoTime) {\n        this.extrinsic = [...calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n      }\n      this.lastCalibrationTime = calibration.LogMonoTime;\n    }\n    let init_data = TimelineWorker.currentInitData();\n    if (init_data){\n      if (is_tici(init_data)) {\n        this.intrinsic = tici_intrinsic;\n        this.vwp_w = tici_vwp_w;\n        this.vwp_h = tici_vwp_h;\n        this.video_height = tici_video_height;\n      }\n    }\n\n    let live_calibration = TimelineWorker.currentLiveCalibration();\n    if (live_calibration) {\n      this.extrinsic = [...live_calibration.LiveCalibration.ExtrinsicMatrix, 0, 0, 0, 1];\n    }\n\n    if (this.canvas_road.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        model: TimelineWorker.currentModel,\n        modelv2: TimelineWorker.currentModelV2,\n        mpc: TimelineWorker.currentMPC,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_road.current, params, events, this.drawLaneFull\n      );\n    }\n    if (this.canvas_lead.current) {\n      const params = { calibration, shouldScale: true };\n      const events = { radarState: TimelineWorker.currentRadarState };\n      this.renderEventToCanvas(\n        this.canvas_lead.current, params, events, this.renderLeadCars\n      );\n    }\n    if (this.canvas_carstate.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        controlsState: TimelineWorker.currentControlsState,\n      };\n      this.renderEventToCanvas(\n        this.canvas_carstate.current, params, events, this.renderCarState\n      );\n    }\n    if (this.canvas_maxspeed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        controlsState: TimelineWorker.currentControlsState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_maxspeed.current, params, events, this.renderMaxSpeed\n      );\n    }\n    if (this.canvas_speed.current) {\n      const params = { calibration, shouldScale: true };\n      const events = {\n        carState: TimelineWorker.currentCarState,\n        initData: TimelineWorker.currentInitData,\n      };\n      this.renderEventToCanvas(\n        this.canvas_speed.current, params, events, this.renderSpeed\n      );\n    }\n  }\n\n  renderEventToCanvas(canvas, params, events, renderEvent) {\n    const { width, height } = canvas.getBoundingClientRect();\n\n    if (!params.calibration) {\n      const ctx = canvas.getContext('2d');\n      ctx.setTransform(1, 0, 0, 1, 0, 0);\n      ctx.clearRect(0, 0, width, height);\n      return; // loading calibration from logs still...\n    }\n\n    let logTime; let\n      monoIndex;\n    const _events = {};\n    let needsRender = false;\n    const eventsSig = Object.keys(events).join(',');\n    Object.keys(events).map((key) => {\n      const event = events[key].apply(TimelineWorker);\n      monoIndex = `${events[key].name}MonoTime${eventsSig}`;\n\n      if (!event) {\n        if (this[monoIndex]) {\n          this[monoIndex] = false;\n          const ctx = canvas.getContext('2d');\n          ctx.setTransform(1, 0, 0, 1, 0, 0);\n          ctx.clearRect(0, 0, width, height);\n          // we have to force re-render when one is missing\n          // this is because there's more than one event being rendered through this flow\n          // this should be re-broken apart such that this isn't an issue\n          // fixing that will also reduce the rendering complexity\n          needsRender = true;\n        }\n      } else {\n        logTime = event ? event.LogMonoTime : null;\n        needsRender = needsRender || logTime !== this[monoIndex];\n        this[monoIndex] = logTime;\n        _events[key] = event;\n      }\n    });\n\n    if (!needsRender) {\n      return;\n    }\n    // will render!\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // reset transform before anything, just in case\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    // clear all the data\n    ctx.clearRect(0, 0, width, height);\n    // scale original coords onto our current size\n    if (params.shouldScale) {\n      ctx.scale(width / this.vwp_w, height / this.vwp_h);\n    }\n\n    renderEvent.apply(this, [{ width, height, ctx }, _events]);\n  }\n\n  renderLeadCars(options, events) {\n    if (!events.radarState) {\n      return;\n    }\n    this.lastRadarStateMonoTime = events.radarState.LogMonoTime;\n    const { width, height, ctx } = options;\n\n    const leadOne = events.radarState.RadarState.LeadOne;\n    const leadTwo = events.radarState.RadarState.LeadTwo;\n\n    if (leadOne.Status) {\n      this.renderLeadCar(options, leadOne);\n    }\n    if (leadTwo.Status) {\n      this.renderLeadCar(options, leadTwo, true);\n    }\n  }\n\n  renderLeadCar(options, leadData, is2ndCar) {\n    const { width, height, ctx } = options;\n\n    const drel = leadData.DRel;\n    const vrel = leadData.VRel;\n    const yrel = leadData.YRel;\n\n    var x = drel + 2.7;\n    var y = yrel;\n\n    var [x, y, z] = this.carSpaceToImageSpace([drel + 2.7, yrel, 0, 1]);\n\n    if (x < 0 || y < 0) {\n      return;\n    }\n\n    let sz = 25 * 30;\n    sz /= ((drel + 2.7) / 3 + 30);\n    sz = Math.min(Math.max(sz, 15), 30);\n    if (is2ndCar) {\n      sz /= 1.2;\n    }\n\n    let fillAlpha = 0;\n    const speedBuff = 10;\n    const leadBuff = 40;\n\n    if (drel < leadBuff) {\n      fillAlpha = 255 * (1 - (drel / leadBuff));\n      if (vrel < 0) {\n        fillAlpha += 255 * (-1 * (vrel / speedBuff));\n      }\n      fillAlpha = Math.min(fillAlpha, 255) / 255;\n    }\n\n    // glow\n    if (is2ndCar) {\n      ctx.fillStyle = 'rgba(218, 202, 37, 0.5)';\n    } else {\n      ctx.fillStyle = 'rgb(218, 202, 37)';\n    }\n    ctx.lineWidth = 5;\n    const g_xo = sz / 5;\n    const g_yo = sz / 10;\n    ctx.beginPath();\n    ctx.moveTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.lineTo(x, y - g_xo);\n    ctx.lineTo(x - (sz * 1.35) - g_xo, y + sz + g_yo);\n    ctx.lineTo(x + (sz * 1.35) + g_xo, y + sz + g_yo);\n    ctx.fill();\n\n    if (fillAlpha > 0) {\n      if (is2ndCar) {\n        fillAlpha /= 1.5;\n      }\n      ctx.fillStyle = `rgba(201, 34, 49, ${fillAlpha})`;\n\n      ctx.beginPath();\n      ctx.moveTo(x + (sz * 1.25), y + sz);\n      ctx.lineTo(x, y);\n      ctx.lineTo(x - (sz * 1.25), y + sz);\n      ctx.lineTo(x + (sz * 1.25), y + sz);\n      ctx.fill();\n    }\n  }\n\n  drawLaneFull(options, events) { // ui_draw_vision_lanes\n    const { ctx } = options;\n    if (events) {\n      if (events.modelv2) {\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.LaneLines, events.modelv2.ModelV2.LaneLineProbs, false);\n        this.drawLaneBoundaryV2(ctx, events.modelv2.ModelV2.RoadEdges, events.modelv2.ModelV2.RoadEdgeStds, true);\n        this.drawLaneTrackV2(ctx, events.modelv2.ModelV2.Position);\n      } else if (events.model) {\n        this.drawLaneBoundary(ctx, events.model.Model.LeftLane);\n        this.drawLaneBoundary(ctx, events.model.Model.RightLane);\n        this.drawLaneTrack(options, events.model.Model.Path);\n      } else if (events.mpc && events.controlsState) {\n        this.drawLaneTrack(options, events.mpc.LiveMpc, {\n          isMpc: true,\n          isEnabled: events.controlsState.ControlsState.Enabled,\n        });\n      }\n    }\n  }\n\n  drawLaneBoundary(ctx, lane) { // ui_draw_lane\n    let color = `rgba(255, 255, 255,${lane.Prob})`;\n\n    let points;\n    if (lane.Points.length > 0) {\n      points = lane.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(lane.Poly[0] * (i * i * i) + lane.Poly[1] * (i * i) + lane.Poly[2] * i + lane.Poly[3]);\n      }\n    }\n    this.drawLaneLine(ctx, points, 0.035 * lane.Prob, color, false);\n    const offset = Math.min(lane.Std, 0.7);\n    color = `rgba(255, 255, 255,${lane.Prob})`;\n    this.drawLaneLine(ctx, points, -offset, color, true);\n    this.drawLaneLine(ctx, points, offset, color, true);\n  }\n\n  drawLaneLine(ctx, points, off, color, isGhost) { // ui_draw_lane_line\n    ctx.beginPath();\n    let started = false;\n    const line_height = 49;\n    for (let i = 0; i < line_height; i++) {\n      const px = i;\n      const py = points[i] - off;\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = line_height; i > 0; i--) {\n      const px = i == line_height ? line_height : i;\n      const py = isGhost ? (points[i] - off) : (points[i] + off);\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneBoundaryV2(ctx, lines, certainty, isStds) {\n    for (let i = 0; i < lines.length; i++) {\n      const opacity = !isStds ? certainty[i] : 1.0 - certainty[i];\n      const color = !isStds ? \"255, 255, 255\" : \"255, 0, 0\";\n      const rgba = `rgba(${color}, ${Math.min(Math.max(opacity, 0.0), 1.0)})`;\n      this.drawLaneLineV2(ctx, lines[i], 0.035, rgba);\n    }\n  }\n\n  drawLaneLineV2(ctx, points, off, color, isGhost) {\n    ctx.beginPath();\n    let started = false;\n    let z_off = 1.22;\n\n    for (let i = 0; i < points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - off;\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = isGhost ? (-points.Y[i] - off) : (-points.Y[i] + off);\n      const pz = -points.Z[i];\n      const [x, y, z] = this.carSpaceToImageSpace([px, py, pz + z_off, 1.0]);\n      if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    if (!isGhost) {\n      ctx.fillStyle = color;\n      ctx.fill();\n    } else {\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n  }\n\n  drawLaneTrack(options, path, params) {\n    const { ctx } = options;\n    let isMpc; let\n      isEnabled;\n    if (params) {\n      isMpc = params.isMpc;\n      isEnabled = params.isEnabled;\n    }\n    ctx.beginPath();\n    let started = false;\n    const offset = isMpc ? 0.3 : 0.5;\n    const path_height = isMpc ? 20 : 49;\n    let points;\n    if (path.Points.length > 0) {\n      points = path.Points;\n    } else {\n      points = [];\n      for (let i = 0; i < 192; i++) {\n        points.push(path.Poly[0] * (i * i * i) + path.Poly[1] * (i * i) + path.Poly[2] * i + path.Poly[3]);\n      }\n    }\n    for (let i = 0; i <= path_height; i++) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] - offset;\n      } else {\n        px = i;\n        py = points[i] - offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = path_height; i >= 0; i--) {\n      let px; let\n        py;\n      if (isMpc) {\n        px = path.X[i];\n        py = path.Y[i] + offset;\n      } else {\n        px = i;\n        py = points[i] + offset;\n      }\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, 0.0, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n    let track_bg;\n    if (isMpc) {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h - 40, this.vwp_w, this.vwp_h * 0.4);\n      if (isEnabled) {\n        track_bg.addColorStop(0, 'rgba(23, 134, 68, 0.8)');\n        track_bg.addColorStop(1, 'rgba(14, 89, 45, 0.8)');\n      } else {\n        track_bg.addColorStop(0, 'rgba(23, 88, 134, 0.6)');\n        track_bg.addColorStop(1, 'rgba(15, 58, 89, 0.6)');\n      }\n    } else {\n      track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n      track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n      track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    }\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  drawLaneTrackV2(ctx, points) {\n    ctx.beginPath();\n    let started = false;\n    const offset = 0.5;\n\n    for (let i = 0; i <= points.X.length; i++) {\n      const px = points.X[i];\n      const py = -points.Y[i] - offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n\n      if (!started) {\n        ctx.moveTo(x, y);\n        started = true;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    for (let i = points.X.length-1; i >= 0; i--) {\n      const px = points.X[i];\n      const py = -points.Y[i] + offset;\n      const pz = -points.Z[i];\n      let [x, y, z] = this.carSpaceToImageSpace([px, py, pz, 1.0]);\n      if (i === 0) {\n        y = this.vwp_h;\n      } else if (y < 0) {\n        continue;\n      }\n      ctx.lineTo(x, y);\n    }\n    ctx.closePath();\n\n    let track_bg;\n    track_bg = ctx.createLinearGradient(this.vwp_w, this.vwp_h, this.vwp_w, this.vwp_h * 0.5);\n    track_bg.addColorStop(0, 'rgba(255, 255, 255, 0.8)');\n    track_bg.addColorStop(1, 'rgba(255, 255, 255, 0.0)');\n    ctx.fillStyle = track_bg;\n    ctx.fill();\n  }\n\n  renderCarState(options, events) {\n    if (events && events.carState && events.controlsState) {\n      this.drawCarStateBorder(options, events.controlsState.ControlsState);\n      this.drawCarStateWheel(options, events.carState.CarState, events.controlsState.ControlsState);\n    }\n  }\n\n  renderSpeed(options, events) {\n    if (events && events.carState && events.initData) {\n      this.drawSpeed(options, events.carState.CarState, events.initData.InitData);\n    }\n  }\n\n  drawSpeed(options, CarState, InitData) {\n    const { ctx } = options;\n\n    let speed = CarState.VEgo;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    const isMetric = metricParam.Value === '1';\n    if (isMetric) {\n      speed = Math.floor(speed * 3.6 + 0.5);\n    } else {\n      speed = Math.floor(speed * 2.2369363 + 0.5);\n    }\n\n    const x = this.vwp_w / 2;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.font = '700 128px Open Sans';\n    ctx.fillStyle = 'rgb(255,255,255)';\n    ctx.fillText(speed, x, 140);\n\n    ctx.font = '400 48px Open Sans';\n    ctx.fillStyle = 'rgba(255,255,255,200)';\n    if (isMetric) {\n      ctx.fillText('kph', x, 210);\n    } else {\n      ctx.fillText('mph', x, 210);\n    }\n  }\n\n  renderMaxSpeed(options, events) {\n    if (events && events.controlsState && events.initData) {\n      this.drawMaxSpeed(options, events.controlsState.ControlsState, events.initData.InitData);\n    }\n  }\n\n  drawMaxSpeed(options, ControlsState, InitData) {\n    const { ctx } = options;\n\n    const maxSpeed = ControlsState.VCruise;\n    let maxSpeedCalc = maxSpeed * 0.6225 + 0.5;\n\n    const metricParam = InitData.Params.Entries.find((entry) => entry.Key === 'IsMetric');\n    if (metricParam.Value === '1') {\n      maxSpeedCalc = maxSpeed + 0.5;\n    }\n\n    const isCruiseSet = !isNaN(ControlsState.VCruise) && ControlsState.VCruise != 0 && ControlsState.VCruise != 255;\n\n    const width = Math.floor(184 * (2 / 3));\n    let height = Math.floor(202 * (2 / 3));\n\n    let left = bdr_s * 2;\n    let top = bdr_s * 2;\n\n    // background\n    fillRoundedRect(ctx, left, top, width, height, 30, 'rgba(0, 0, 0, 0.392)');\n\n    // border\n    strokeRoundedRect(ctx, left, top, width, height, 30, 10, 'rgba(255, 255, 255, 0.392)');\n\n    const textTopY = top + (26 * 4 / 3);\n    const textBottomY = textTopY + (48 * (4 / 3));\n    // MAX text\n    ctx.font = `${26 * (4 / 3)}px Open Sans`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    if (isCruiseSet) {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.784)';\n    } else {\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n    }\n\n    ctx.fillText('MAX', left + width / 2, textTopY);\n\n    // max speed text\n    if (isCruiseSet) {\n      ctx.font = `700 ${48 * (4 / 3)}px Open Sans`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';\n      ctx.fillText(Math.floor(maxSpeedCalc), 2 + left + width / 2, textBottomY);\n    } else {\n      ctx.font = `600 ${42 * (4 / 3)}px Open Sans`;\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.392)';\n      ctx.fillText('N/A', left + width / 2, textBottomY);\n    }\n\n    if (ControlsState.DecelForTurnDEPRECATED && ControlsState.Enabled) {\n      const turnSpeed = ControlsState.VCurvatureDEPRECATED * 2.2369363 + 0.5;\n      ctx.fillStyle = 'rgba(255, 255, 255, 1.0)';\n      ctx.font = `700 ${25 * (4 / 3)}px Open Sans`;\n      ctx.fillText('TURN', 200 * (2 / 3) + left + width / 2, textTopY);\n      ctx.font = `700 ${50 * (4 / 3)}px Open Sans`;\n      ctx.fillText(Math.floor(turnSpeed), 200 * (2 / 3) + left + width / 2, textBottomY);\n    }\n  }\n\n  drawCarStateWheel(options, CarState, ControlsState) {\n    const { ctx } = options;\n\n    const radius = 80;\n    const x = this.vwp_w - (radius + (bdr_s * 2));\n    const y = radius + (bdr_s * 2);\n\n    // Wheel Background\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, 2 * Math.PI, false);\n    if (ControlsState.Enabled) {\n      ctx.fillStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.fillStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.closePath();\n    ctx.fill();\n\n    // Rotate Wheel\n    ctx.translate(x, y);\n    ctx.rotate(0 - CarState.SteeringAngle * Math.PI / 180);\n    ctx.save();\n    ctx.translate(-x, -y);\n\n    // Wheel Image\n    ctx.beginPath();\n    ctx.arc(x, y, radius - (bdr_s / 2), 0, 2 * Math.PI, false);\n    const wheelImgPattern = ctx.createPattern(wheelImg, 'repeat');\n    ctx.fillStyle = wheelImgPattern;\n    ctx.closePath();\n    ctx.translate(this.vwp_w - ((bdr_s * 2) + bdr_s / 2), (bdr_s * 2) + bdr_s / 2);\n    ctx.fill();\n  }\n\n  drawCarStateBorder(options, ControlsState) {\n    const { ctx } = options;\n    ctx.lineWidth = bdr_s * 2;\n\n    if (ControlsState.Enabled) {\n      ctx.strokeStyle = theme.palette.states.engagedGreen;\n    } else {\n      ctx.strokeStyle = theme.palette.states.drivingBlue;\n    }\n    ctx.strokeRect(0, 0, this.vwp_w, this.vwp_h);\n  }\n\n  renderDriverMonitoring(options, events) {\n    if (!events.driverMonitoring) {\n      return;\n    }\n\n    const { ctx } = options;\n    const driverMonitoring = events.driverMonitoring.DriverMonitoring;\n\n    if (driverMonitoring.FaceProb < 0.8) {\n      return;\n    }\n\n    const xW = this.vwp_h / 2;\n    const xOffset = this.vwp_w - xW;\n    let noseSize = 20;\n    ctx.translate(xOffset, 0);\n\n    const isDistracted = this.isDistracted(driverMonitoring);\n\n    const opacity = (driverMonitoring.FaceProb - DM_FACE_THRESHOLD) / (1 - DM_FACE_THRESHOLD) * 255;\n    noseSize *= 1 / (driverMonitoring.FaceProb);\n    let [x, y] = driverMonitoring.FacePosition.map((v) => v + 0.5);\n    x = toX(x);\n    y = toY(y);\n\n    const flatMatrix = this.rot_matrix(...driverMonitoring.FaceOrientation)\n      .reduce((m, v) => m.concat([...v, 1]), [])\n      .concat([0, 0, 0, 1]);\n    flatMatrix[3] = x;\n    flatMatrix[7] = y;\n\n    const p1 = this.matmul(flatMatrix, [0, 0, 0, 1]);\n    const p2 = this.matmul(flatMatrix, [0, 0, 100, 1]);\n\n    let isBlinking = false;\n\n    if (\n      driverMonitoring.LeftBlinkProb + driverMonitoring.RightBlinkProb > 2 * DM_BLINK_THRESHOLD\n      && driverMonitoring.LeftEyeProb > DM_EYE_THRESHOLD\n      && driverMonitoring.RightEyeProb > DM_EYE_THRESHOLD\n    ) {\n      isBlinking = true;\n    }\n\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    if (isDistracted) {\n      ctx.strokeStyle = `rgba(255, 0, 0, ${opacity})`;\n    } else if (isBlinking) {\n      ctx.strokeStyle = `rgba(255, 255, 0, ${opacity})`;\n    } else {\n      ctx.strokeStyle = `rgba(0, 255, 0, ${opacity})`;\n    }\n    ctx.arc(x, y, noseSize, 0, 2 * Math.PI);\n    ctx.stroke();\n    ctx.closePath();\n\n    // print raw and converted values, useful for debugging but super not pretty\n    // ctx.fillStyle = 'rgb(255,255,255)';\n    // ctx.font = '800 14px Open Sans';\n    // ctx.fillText(driverMonitoring.FaceOrientation[2], x + noseSize * 2, y);\n    // ctx.fillText(driverMonitoring.FaceOrientation[1], x, y + noseSize * 2);\n\n    // let pose = this.getDriverPose(driverMonitoring);\n\n    // ctx.fillText(pose.yaw, x + noseSize * 2, y + noseSize / 2);\n    // ctx.fillText(pose.pitch, x, y + noseSize * 2.5);\n\n    ctx.beginPath();\n    ctx.lineWidth = 3;\n    ctx.strokeStyle = theme.palette.states.drivingBlue;\n    ctx.moveTo((p1[0]), (p1[1]));\n    ctx.strokeStyle = `rgba(255, 255, 255, ${opacity})`;\n    ctx.lineTo((p2[0]), (p2[1]));\n    ctx.stroke();\n    ctx.closePath();\n\n    function toX(x) {\n      return (x * xW);\n    }\n    function toY(y) {\n      return (y * this.vwp_h);\n    }\n  }\n\n  isDistracted(driverMonitoring) {\n    const pose = this.getDriverPose(driverMonitoring);\n\n    let pitch_error = pose.pitch - _PITCH_NATURAL_OFFSET;\n    const yaw_error = pose.yaw - _YAW_NATURAL_OFFSET;\n    if (pitch_error > 0) {\n      pitch_error = Math.max(pitch_error - _PITCH_POS_ALLOWANCE, 0);\n    }\n\n    pitch_error *= _PITCH_WEIGHT;\n    const pose_metric = Math.sqrt(Math.pow(yaw_error, 2) + Math.pow(pitch_error, 2));\n    if (pose_metric > _METRIC_THRESHOLD) {\n      return true;\n    }\n    return false;\n  }\n\n  getDriverPose(driverMonitoring) {\n    // use driver monitoring units instead of canvas units\n    // that way code can be nearly identical\n    const angles_desc = driverMonitoring.FaceOrientation;\n    const pos_desc = driverMonitoring.FacePosition;\n\n    const pitch_net = angles_desc[0];\n    const yaw_net = angles_desc[1];\n    const roll_net = angles_desc[2];\n\n    const face_pixel_position = [(pos_desc[0] + 0.5) * W - W + FULL_W, (pos_desc[1] + 0.5) * H];\n    const yaw_focal_angle = Math.atan2(face_pixel_position[0] - FULL_W / 2, RESIZED_FOCAL);\n    const pitch_focal_angle = Math.atan2(face_pixel_position[1] - H / 2, RESIZED_FOCAL);\n\n    const roll = roll_net;\n    const pitch = pitch_net + pitch_focal_angle;\n    const yaw = -yaw_net + yaw_focal_angle;\n    return { roll, pitch, yaw };\n  }\n\n  carSpaceToImageSpace(coords) {\n    coords = this.matmul(this.extrinsic, coords);\n    coords = this.matmul(this.intrinsic, coords);\n\n    // project onto 3d with Z\n    coords[0] /= coords[2];\n    coords[1] /= coords[2];\n    return coords;\n  }\n\n  rot_matrix(roll, pitch, yaw) {\n    const cr = Math.cos(roll);\n    const sr = Math.sin(roll);\n    const cp = Math.cos(pitch);\n    const sp = Math.sin(pitch);\n    const cy = Math.cos(yaw);\n    const sy = Math.sin(yaw);\n\n    const rr = [\n      [1, 0, 0],\n      [0, cr, -sr],\n      [0, sr, cr]\n    ];\n    const rp = [\n      [cp, 0, sp],\n      [0, 1, 0],\n      [-sp, 0, cp]\n    ];\n    const ry = [\n      [cy, -sy, 0],\n      [sy, cy, 0],\n      [0, 0, 1]\n    ];\n    return multiply(ry, multiply(rp, rr));\n  }\n\n  matmul(matrix, coord) {\n    const b0 = coord[0]; const b1 = coord[1]; const b2 = coord[2]; const\n      b3 = coord[3];\n\n    coord[0] = b0 * matrix[0] + b1 * matrix[1] + b2 * matrix[2] + b3 * matrix[3];\n    coord[1] = b0 * matrix[4] + b1 * matrix[5] + b2 * matrix[6] + b3 * matrix[7];\n    coord[2] = b0 * matrix[8] + b1 * matrix[9] + b2 * matrix[10] + b3 * matrix[11];\n    coord[3] = b0 * matrix[12] + b1 * matrix[13] + b2 * matrix[14] + b3 * matrix[15];\n\n    return coord;\n  }\n\n  currentVideoTime(offset = TimelineWorker.currentOffset()) {\n    if (!this.props.currentSegment) {\n      return 0;\n    }\n    offset -= this.props.currentSegment.routeOffset;\n    offset = offset / 1000;\n\n    if (!this.props.front) {\n      let initData = TimelineWorker.currentInitData();\n      let firstFrameTime = TimelineWorker.firstFrameTime();\n\n      if (initData !== null && firstFrameTime !== null) {\n        offset -= (firstFrameTime - initData.LogMonoTime/1e9);\n      }\n    }\n\n    return offset;\n  }\n\n  // nearest cache-worthy frame of the video\n  // always show a frame before the current offset so that data is what happened\n  // after this frame was seen, that way you can't see things it hasn't reacted to\n  nearestImageFrame(offset = TimelineWorker.currentOffset()) {\n    const segment = this.props.currentSegment || this.props.nextSegment;\n    if (!segment) {\n      return '';\n    }\n    offset -= segment.routeOffset;\n    const seconds = Math.max(1, Math.floor(offset / 1000) * 1);\n\n    return `${segment.url}/sec${seconds}.jpg`;\n  }\n\n  render() {\n    const { classes } = this.props;\n    if (this.props.playSpeed !== this.props.desiredPlaySpeed && !this.props.isBuffering) {\n      console.log(this.props);\n      debugger;\n    }\n    return (\n      <div\n        className={classNames(classes.videoContainer, {\n          [classes.hidden]: false\n        })}\n      >\n        { this.props.isBuffering\n          && (\n          <Buffering\n            bufferingVideo={this.props.bufferingVideo}\n            bufferingData={this.props.bufferingData}\n            onDisableBuffering={this.onDisableBuffering}\n          />\n          )}\n        { this.state.shouldShowThumbnail\n          && (\n          <img\n            style={{ zIndex: 2 }}\n            className={this.props.classes.thumbnail}\n            src={`data:image/jpeg;base64,${this.state.thumbnailData}`}\n          />\n          )}\n        <Player\n          ref={this.videoPlayer}\n          style={{ zIndex: 1 }}\n          autoPlay={!!this.props.currentSegment}\n          muted\n          fluid={false}\n          src={this.state.src}\n          startTime={this.currentVideoTime()}\n          playbackRate={this.props.startTime > Date.now() ? 0 : this.props.playSpeed}\n          width={850}\n          height={this.video_height}\n        >\n          <HLSSource\n            onBufferAppend={this.checkVideoBuffer}\n            onSourceLoaded={this.onSourceLoaded}\n            isVideoChild\n          />\n          <ControlBar disabled disableCompletely />\n        </Player>\n        { this.props.shouldShowUI\n          && (\n            <>\n              <canvas\n                ref={this.canvas_road}\n                className={classNames(classes.videoUiCanvas, 'hudRoadCanvas')}\n                style={{ zIndex: 3 }}\n              />\n              <canvas\n                ref={this.canvas_lead}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 4 }}\n              />\n              <canvas\n                ref={this.canvas_carstate}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 5 }}\n              />\n              <canvas\n                ref={this.canvas_maxspeed}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 6 }}\n              />\n              <canvas\n                ref={this.canvas_speed}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 7 }}\n              />\n            </>\n          )}\n        { this.props.front\n          && (\n            <>\n              <canvas\n                ref={this.canvas_face}\n                className={classes.videoUiCanvas}\n                style={{ zIndex: 3 }}\n              />\n            </>\n          )}\n      </div>\n    );\n  }\n}\n\nVideoPreview.propTypes = {\n  playSpeed: PropTypes.number.isRequired\n};\n\nfunction mapStateToProps(state) {\n  return state.workerState;\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(VideoPreview));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport Obstruction from 'obstruction';\nimport { classNames } from 'react-extras';\n\nimport {\n  withStyles,\n  Grid,\n  FormControl,\n  Select,\n  MenuItem,\n  Typography,\n} from '@material-ui/core';\n\nimport DriveMap from '../DriveMap';\nimport DriveVideo from '../DriveVideo';\n\nconst styles = (theme) => ({\n  mediaOptions: {\n    alignItems: 'center',\n    border: '1px solid rgba(255,255,255,.1)',\n    borderRadius: 50,\n    display: 'flex',\n    marginLeft: 'auto',\n    marginBottom: 12,\n  },\n  mediaOption: {\n    alignItems: 'center',\n    borderRight: '1px solid rgba(255,255,255,.1)',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    minHeight: 32,\n    minWidth: 44,\n    opacity: '0.6',\n    '&.disabled': {\n      cursor: 'default',\n    },\n    '&:last-child': {\n      borderRight: 'none',\n    },\n  },\n  mediaOptionDisabled: {\n    cursor: 'auto',\n  },\n  mediaOptionIcon: {\n    backgroundColor: '#fff',\n    borderRadius: 3,\n    height: 20,\n    margin: '2px 0',\n    width: 30,\n  },\n  mediaOptionText: {\n    fontSize: 12,\n    fontWeight: 500,\n    textAlign: 'center',\n    textTransform: 'uppercase',\n  },\n  mediaSource: {\n    width: '100%',\n  },\n  mediaSourceSelect: {\n    width: '100%',\n  },\n});\n\nconst MediaType = {\n  VIDEO: 'video',\n  DRIVER_VIDEO: 'dcamera',\n  HUD: 'hud',\n  MAP: 'map'\n};\n\nclass Media extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderMediaOptions = this.renderMediaOptions.bind(this);\n\n    this.state = {\n      inView: MediaType.HUD,\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { inView } = this.state;\n    return (\n      <>\n        { this.renderMediaOptions() }\n        { inView === MediaType.MAP && <DriveMap /> }\n        { (inView !== MediaType.MAP)\n          && (\n          <DriveVideo\n            shouldShowUI={inView === MediaType.HUD}\n            front={inView === MediaType.DRIVER_VIDEO}\n            onVideoChange={(noVideo) => {\n              this.setState({ inView: noVideo ? MediaType.MAP : inView });\n            }}\n          />\n          )}\n      </>\n    );\n  }\n\n  renderMediaOptions() {\n    const { classes, currentSegment } = this.props;\n    const { inView } = this.state;\n    const mediaSource = 'eon-road-camera';\n    const hasDriverCameraStream = this.props.currentSegment && this.props.currentSegment.hasDriverCameraStream;\n    return (\n      <Grid container>\n        <Grid\n          item\n          xs={hasDriverCameraStream ? 5 : 7}\n        />\n        <Grid\n          item\n          xs={hasDriverCameraStream ? 7 : 5}\n          className={classes.mediaOptions}\n        >\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.HUD ? { opacity: 1 } : { }}\n            onClick={() => this.setState({ inView: MediaType.HUD })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              HUD\n            </Typography>\n          </Grid>\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.VIDEO ? { opacity: 1 } : {}}\n            onClick={() => this.setState({ inView: MediaType.VIDEO })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              Video\n            </Typography>\n          </Grid>\n          { hasDriverCameraStream\n            && (\n            <Grid\n              item\n              xs={3}\n              className={cx(classes.mediaOption, { disabled: !hasDriverCameraStream })}\n              style={inView === MediaType.DRIVER_VIDEO ? { opacity: 1 } : {}}\n              onClick={() => hasDriverCameraStream && this.setState({ inView: MediaType.DRIVER_VIDEO })}\n            >\n              <Typography className={classes.mediaOptionText}>\n                Driver Video\n              </Typography>\n            </Grid>\n            )}\n          <Grid\n            item\n            xs={hasDriverCameraStream ? 3 : 4}\n            className={classes.mediaOption}\n            style={inView === MediaType.MAP ? { opacity: 1 } : { }}\n            onClick={() => this.setState({ inView: MediaType.MAP })}\n          >\n            <Typography className={classes.mediaOptionText}>\n              Map\n            </Typography>\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  currentSegment: 'workerState.currentSegment',\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Media));\n","import React, { Component } from 'react';\nimport Obstruction from 'obstruction';\nimport { classNames } from 'react-extras';\nimport PropTypes from 'prop-types';\nimport document from 'global/document';\nimport { timeout } from 'thyming';\nimport { partial } from 'ap';\nimport raf from 'raf';\nimport qs from 'querystringify';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nimport { raw as RawApi } from '@commaai/comma-api';\nimport TimelineWorker from '../../timeline';\nimport * as Demo from '../../demo';\nconst demoFiles = require('../../demo/files.json');\n\nconst styles = (theme) => ({\n  root: {\n    width: '100%',\n    height: '100%',\n    paddingTop: theme.spacing.unit,\n    background: 'transparent',\n    textAlign: 'right'\n  },\n  footerButton: {\n    display: 'inline-block',\n    border: `1px solid ${theme.palette.grey[800]}`,\n    color: theme.palette.grey[50],\n    textDecoration: 'none',\n    borderRadius: 20,\n    padding: '10px 20px',\n    margin: '0px 10px',\n    cursor: 'pointer'\n  }\n});\n\nclass AnnotationsFooter extends Component {\n  constructor(props) {\n    super(props);\n\n    this.copySegmentName = this.copySegmentName.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.downloadSegmentFile = this.downloadSegmentFile.bind(this);\n    this.openInCabana = this.openInCabana.bind(this);\n\n    this.state = {\n      showCopiedSnack: false,\n    };\n  }\n\n  copySegmentName(e) {\n    const { segment } = this.props;\n    if (!segment) {\n      return;\n    }\n    const el = document.createElement('textarea');\n    el.value = `${segment.route}--${segment.segment}`;\n    el.setAttribute('readonly', '');\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand('copy');\n    document.body.removeChild(el);\n\n    this.setState({\n      showCopiedSnack: true\n    });\n    this.snackTimer = timeout(this.handleClose, 1000);\n  }\n\n  async downloadSegmentFile(type) {\n    if (!this.props.segment) {\n      return;\n    }\n\n    const seg = this.props.segment;\n    const segmentKeyPath = `${seg.route.replace('|', '/')}/${seg.segment}`;\n\n    let files;\n    if (Demo.isDemo()) {\n      files = demoFiles;\n    } else {\n      files = (await RawApi.getRouteFiles(this.props.segment.route));\n    }\n    const url = files[type].find((url) => url.indexOf(segmentKeyPath) !== -1);\n\n    if (url) {\n      window.location.href = url;\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      showCopiedSnack: false\n    });\n    this.snackTimer();\n  }\n\n  openInCabana() {\n    const { segment, loop, start } = this.props;\n    const currentOffset = TimelineWorker.currentOffset();\n    const params = {\n      route: segment.route,\n      url: segment.url,\n      seekTime: Math.floor((currentOffset - segment.routeOffset) / 1000)\n    };\n    const routeStartTime = (start + segment.routeOffset);\n\n    if (loop.startTime && loop.startTime > routeStartTime && loop.duration < 180000) {\n      const startTime = Math.floor((loop.startTime - routeStartTime) / 1000);\n      params.segments = [startTime, Math.floor(startTime + (loop.duration / 1000))].join(',');\n    }\n\n    const win = window.open(`https://my.comma.ai/cabana/${qs.stringify(params, true)}`, '_blank');\n    if (win.focus) {\n      win.focus();\n    }\n  }\n\n  render() {\n    return (\n      <Paper className={this.props.classes.root}>\n        { this.props.segment && this.props.segment.hasVideo\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'cameras')}>\n            Download Camera Segment\n          </a>\n          )}\n        { this.props.segment && this.props.segment.hasDriverCamera\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'dcameras')}>\n            Download Front Camera Segment\n          </a>\n          )}\n        { this.props.segment\n          && (\n          <a className={this.props.classes.footerButton} onClick={partial(this.downloadSegmentFile, 'logs')}>\n            Download Log Segment\n          </a>\n          )}\n        <a className={classNames(this.props.classes.footerButton, 'openInCabana')} onClick={this.openInCabana} href=\"#\">\n          View CAN Data in Cabana\n        </a>\n        <a className={this.props.classes.footerButton} onClick={this.copySegmentName} target=\"_blank\">\n          Copy Current Segment\n        </a>\n        <Snackbar\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center'\n          }}\n          open={this.state.showCopiedSnack}\n          onClose={this.handleClose}\n          ContentProps={{\n            'aria-describedby': 'message-id',\n          }}\n          variant=\"success\"\n          message={<span id=\"message-id\">Copied segment name!</span>}\n        />\n      </Paper>\n    );\n  }\n}\n\nAnnotationsFooter.propTypes = {\n  segment: PropTypes.object.isRequired,\n  loop: PropTypes.object.isRequired,\n  start: PropTypes.number.isRequired\n};\n\nexport default withStyles(styles)(AnnotationsFooter);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\n\nimport {\n  withStyles,\n  Grid,\n  Slide,\n  Paper,\n  Typography,\n  IconButton,\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport KeyboardBackspaceIcon from '@material-ui/icons/KeyboardBackspace';\n\nimport AnnotationTabs from './AnnotationTabs';\nimport Media from './Media';\nimport Timeline from '../Timeline';\nimport TimeDisplay from '../TimeDisplay';\nimport AnnotationsFooter from './footer';\n\nimport { selectRange } from '../../actions';\nimport { DeviceType } from '../../defs/segments';\n\nconst styles = (theme) => ({\n  base: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n  },\n  window: {\n    background: 'linear-gradient(to bottom, #30373B 0%, #272D30 10%, #1D2225 100%)',\n    borderRadius: 8,\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    overflowY: 'scroll',\n    margin: 18,\n  },\n  header: {},\n  headerContext: {\n    alignItems: 'center',\n    display: 'flex',\n    padding: 12,\n    paddingLeft: 18,\n    paddingRight: 24,\n  },\n  headerTitle: {\n    fontSize: 22,\n    fontWeight: 700,\n    paddingLeft: 12,\n  },\n  headerActions: {\n    marginLeft: 'auto',\n  },\n  headerTimeline: {},\n  viewer: {\n    padding: theme.spacing.unit * 4,\n  },\n  footer: {\n    alignItems: 'center',\n    background: 'linear-gradient(to bottom, #30373B 0%, #272D30 10%, #1D2225 100%)',\n    display: 'flex',\n    marginTop: 'auto',\n    width: '100%',\n  },\n});\n\nclass Annotations extends Component {\n  constructor(props) {\n    super(props);\n\n    this.close = this.close.bind(this);\n  }\n\n  close() {\n    this.props.dispatch(selectRange(null, null));\n  }\n\n  renderAnnotationsElement(visibleSegment) {\n    return (<AnnotationTabs segment={visibleSegment} />);\n  }\n\n  render() {\n    const {\n      classes,\n      device,\n      loop,\n      currentSegment,\n      nextSegment,\n      start\n    } = this.props;\n    const visibleSegment = (currentSegment || nextSegment);\n    const routeName = visibleSegment ? visibleSegment.route : 'Nothing visible';\n    const shortName = routeName.split('|')[1];\n    return (\n      <div className={classes.base}>\n        <div className={classes.window}>\n          <div className={classes.header}>\n            <div className={classes.headerContext}>\n              <IconButton aria-label=\"Go Back\" onClick={() => window.history.back()}>\n                <KeyboardBackspaceIcon />\n              </IconButton>\n              <Typography className={classes.headerTitle}>\n                { this.props.device.alias }\n              </Typography>\n              <div className={classes.headerActions}>\n                <IconButton onClick={this.close} aria-label=\"Close\">\n                  <CloseIcon />\n                </IconButton>\n              </div>\n            </div>\n            <Timeline\n              className={classes.headerTimeline}\n              zoomed\n              colored\n              hasThumbnails\n              hasRuler\n              hasGradient\n              tooltipped\n              dragSelection\n            />\n          </div>\n          <div className={classes.viewer}>\n            <Grid container spacing={32}>\n              <Grid item xs={6}>\n                { visibleSegment && this.renderAnnotationsElement(visibleSegment) }\n              </Grid>\n              <Grid item xs={6}>\n                <Media />\n              </Grid>\n            </Grid>\n          </div>\n        </div>\n        <div className={classes.footer}>\n          { visibleSegment && <AnnotationsFooter segment={visibleSegment} loop={loop} start={start} /> }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst stateToProps = Obstruction({\n  currentSegment: 'workerState.currentSegment',\n  nextSegment: 'workerState.nextSegment',\n  device: 'workerState.device',\n  loop: 'workerState.loop',\n  start: 'workerState.start'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(Annotations));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport 'mapbox-gl/src/css/mapbox-gl.css';\n\nimport AppHeader from './AppHeader';\nimport Dashboard from './Dashboard';\nimport Annotations from './Annotations';\n\nimport Timelineworker from '../timeline';\nimport { selectRange, selectDevice } from '../actions';\nimport { getDongleID, getZoom } from '../url';\n\nconst styles = (/* theme */) => ({\n  base: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  header: {\n    display: 'flex',\n    height: 64,\n    minHeight: 64,\n  },\n  window: {\n    display: 'flex',\n    flexGrow: 1,\n    minHeight: 0,\n  },\n});\n\nclass ExplorerApp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settingDongle: null\n    };\n  }\n\n  componentWillMount() {\n    this.checkProps(this.props);\n  }\n\n  componentWillReceiveProps(props) {\n    this.checkProps(props);\n\n    const isZoomed = props.expanded;\n    const { expanded } = this.props;\n    const wasZoomed = expanded;\n\n    if (isZoomed && !wasZoomed) {\n      Timelineworker.play();\n    }\n    if (!isZoomed && wasZoomed) {\n      Timelineworker.pause();\n    }\n  }\n\n  checkProps(props) {\n    const dongleId = getDongleID(props.pathname);\n    const zoom = getZoom(props.pathname);\n\n    const { settingDongle } = this.state;\n    const curDongle = settingDongle || props.dongleId;\n    const { dispatch } = this.props;\n\n    if (dongleId) {\n      if (curDongle !== dongleId) {\n        if (!settingDongle) {\n          Timelineworker.selectDevice(dongleId);\n          this.setState({\n            settingDongle: dongleId\n          });\n        }\n      } else {\n        this.setState({\n          settingDongle: null\n        });\n      }\n    }\n    dispatch(selectRange(zoom.start, zoom.end));\n  }\n\n  render() {\n    const { classes, expanded } = this.props;\n    return (\n      <div className={classes.base}>\n        <div className={classes.header}>\n          <AppHeader />\n        </div>\n        <div className={classes.window}>\n          { expanded ? (<Annotations />) : (<Dashboard />) }\n        </div>\n      </div>\n    );\n  }\n}\n\nExplorerApp.propTypes = {\n  expanded: PropTypes.bool.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  expanded: 'zoom.expanded',\n  pathname: 'router.location.pathname',\n  dongleId: 'workerState.dongleId'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(ExplorerApp));\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Obstruction from 'obstruction';\nimport window from 'global/window';\nimport PropTypes from 'prop-types';\nimport qs from 'querystringify';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport { config as AuthConfig } from '@commaai/my-comma-auth';\n\nimport { CommaIcon, auth_apple, auth_github, auth_google } from '../icons';\n\nconst styles = (/* theme */) => ({\n  base: {\n    height: '60px',\n    margin: '0 auto',\n    marginTop: '30vh',\n    maxWidth: '560px',\n  },\n  title: {\n    display: 'inline',\n    fontFamily: 'MaisonNeueExtended',\n    fontSize: '24px',\n    fontWeight: 600,\n    lineHeight: '60px',\n    verticalAlign: 'top',\n  },\n  tagline: {\n    padding: '20px 0 52px',\n    fontSize: '18px',\n  },\n  logInButton: {\n    alignItems: 'center',\n    background: '#ffffff',\n    display: 'flex',\n    borderRadius: '100px',\n    fontSize: '21px',\n    height: '80px',\n    justifyContent: 'center',\n    textDecoration: 'none',\n    width: '100%',\n    marginBottom: '0.5em',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'left 15% center',\n    backgroundSize: '40px',\n  },\n  logInText: {\n    fontFamily: 'MaisonNeue',\n    fontSize: '18px',\n    color: 'black',\n    fontWeight: 600,\n  },\n  demoLink: {\n    textDecoration: 'none',\n    justifyContent: 'center',\n    width: '100%',\n    height: '40px',\n    display: 'flex',\n  },\n  demoLinkText: {\n    fontSize: '18px',\n  },\n});\n\nconst DEMO_LINK = `${window.location.origin}/?demo=1`;\n\nclass AnonymousLanding extends Component {\n  componentWillMount() {\n    if (typeof window.sessionStorage !== 'undefined') {\n      const { pathname } = this.props;\n      sessionStorage.redirectURL = pathname;\n    }\n  }\n\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    document.body.appendChild(script);\n    script.onload = () => {\n      AppleID.auth.init({\n        clientId : AuthConfig.APPLE_CLIENT_ID,\n        scope : AuthConfig.APPLE_SCOPES,\n        redirectURI : AuthConfig.APPLE_REDIRECT_URI,\n        usePopup : true,\n      });\n    };\n    script.src = \"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js\";\n    script.async = true;\n    document.addEventListener('AppleIDSignInOnSuccess', (data) => {\n      window.location = [AuthConfig.APPLE_REDIRECT_PATH,\n        qs.stringify({code: data.detail.authorization.code})].join('?');\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.base}>\n        <Typography className={classes.title}>\n          <CommaIcon style={{ fontSize: '2em' }} />\n          explorer\n        </Typography>\n        <Typography className={classes.tagline}>\n          Review and annotate your comma.ai driving data.\n        </Typography>\n        <a href={AuthConfig.GOOGLE_REDIRECT_LINK}\n           className={classes.logInButton}\n           style={{backgroundImage: \"url(\" + auth_google + \")\"}}>\n          <Typography className={classes.logInText}>\n            Sign in with Google\n          </Typography>\n        </a>\n        <a onClick={ () => AppleID.auth.signIn() }\n           className={classes.logInButton}\n           style={ { backgroundImage: \"url(\" + auth_apple + \")\", cursor: 'pointer' } }>\n          <Typography className={classes.logInText}>\n            Sign in with Apple\n          </Typography>\n        </a>\n        <a href={AuthConfig.GITHUB_REDIRECT_LINK}\n           className={classes.logInButton}\n           style={{backgroundImage: \"url(\" + auth_github + \")\"}}>\n          <Typography className={classes.logInText}>\n            Sign in with GitHub\n          </Typography>\n        </a>\n        <a href={DEMO_LINK} className={classes.demoLink}>\n          <Typography className={classes.demoLinkText}>\n            or try the demo\n          </Typography>\n        </a>\n      </div>\n    );\n  }\n}\n\nAnonymousLanding.propTypes = {\n  pathname: PropTypes.string.isRequired,\n  classes: PropTypes.object.isRequired\n};\n\nconst stateToProps = Obstruction({\n  pathname: 'router.location.pathname'\n});\n\nexport default connect(stateToProps)(withStyles(styles)(AnonymousLanding));\n","import extend from 'xtend';\nimport { WORKER_STATE_UPDATE } from '../actions/types';\n\nconst initialState = {\n};\n\nexport default function workerState(_state = initialState, action) {\n  let state = _state;\n  switch (action.type) {\n    case WORKER_STATE_UPDATE:\n      state = extend(state, action.data);\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import { TIMELINE_SELECTION_CHANGED } from '../actions/types';\n\nconst initialState = {\n  start: 0,\n  end: 0,\n  expanded: false\n};\n\nexport default function zoom(_state = initialState, action) {\n  let state = _state;\n  switch (action.type) {\n    case TIMELINE_SELECTION_CHANGED:\n      state = {\n        start: action.start,\n        end: action.end,\n        expanded: !!(action.start && action.end)\n      };\n      break;\n    default:\n      return state;\n  }\n\n  return state;\n}\n","import workerState from './workerState';\nimport zoom from './zoom';\n\nconst reducers = {\n  workerState,\n  zoom\n};\n\nexport default reducers;\n","import window from 'global/window';\nimport { compose } from 'redux';\nimport * as Actions from './actions';\n\nfunction getComposeEnhancers() {\n  if (process.env.NODE_ENV !== 'production' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) {\n    return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n      actionCreators: Object.values(Actions).filter((f) => f.name !== 'updateState')\n    });\n  }\n  return compose;\n}\n\nconst composeEnhancers = getComposeEnhancers();\n\nexport default composeEnhancers;\n","import * as Redux from 'redux';\nimport { connectRouter, routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { createBrowserHistory } from 'history';\nimport reducers from './reducers';\nimport compose from './devtools';\n\nexport const history = createBrowserHistory();\n\nexport function createStore() {\n  const store = Redux.createStore(\n    connectRouter(history)(\n      Redux.combineReducers(reducers)\n    ),\n    compose(Redux.applyMiddleware(thunk, routerMiddleware(history)))\n  );\n\n  return store;\n}\n","/* global gtag */\n\nconst GA_TRACKING_ID = 'UA-80079182-7';\n\nexport function initGoogleAnalytics(history) {\n  history.listen((location) => {\n    if (typeof gtag === 'function') {\n      gtag('config', GA_TRACKING_ID, {\n        page_title: document.title,\n        page_location: window.location.href,\n        page_path: location.pathname\n      });\n    }\n  });\n}\n","import React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport { Route, Switch, Redirect } from 'react-router';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { timeout } from 'thyming';\nimport document from 'global/document';\nimport qs from 'query-string';\nimport localforage from 'localforage';\nimport Jepsen from 'carly';\nimport Collector from 'collect-methods';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nimport MyCommaAuth, { config as AuthConfig, storage as AuthStorage } from '@commaai/my-comma-auth';\nimport { auth as AuthApi, request as Request } from '@commaai/comma-api';\n\nimport Explorer from './components/explorer';\nimport AnonymousLanding from './components/anonymous';\n\nimport TimelineWorker from './timeline';\nimport { history, createStore } from './store';\nimport { updateState } from './actions';\nimport { initGoogleAnalytics } from './analytics';\nimport * as Demo from './demo';\n\ninitGoogleAnalytics(history);\nconst store = createStore();\n\nTimelineWorker.onStateChange((data) => {\n  store.dispatch(updateState(data));\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      initialized: false,\n      demo: false,\n    };\n\n    this.cancelInit = Collector();\n\n    const initDemoTimeline = Jepsen(() => {\n      TimelineWorker.init(true).then(initDemoState.callback);\n    });\n\n    const checkDemo = Jepsen((isDemo) => {\n      if (isDemo) {\n        return localforage.setItem('isDemo', '1')\n          .then(initDemoTimeline.callback);\n      }\n      return this.auth();\n    });\n\n    const initDemoState = Jepsen(() => {\n      TimelineWorker.selectTimeRange(1564443025000, Date.now());\n      this.setState({\n        initialized: true,\n        demo: true,\n      });\n    });\n\n    this.cancelInit(checkDemo.cancel);\n    this.cancelInit(initDemoTimeline.cancel);\n    this.cancelInit(initDemoState.cancel);\n\n    Demo.init().then(checkDemo.callback);\n  }\n\n  componentWillUnmount() {\n    this.cancelInit();\n    TimelineWorker.stop();\n  }\n\n  async auth() {\n    if (document.location) {\n      if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH ||\n          document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH)\n        {\n        const { code } = qs.parse(document.location.search);\n        try {\n          let token = null;\n          if (document.location.pathname == AuthConfig.GOOGLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GOOGLE_REDIRECT_URI, 'google');\n          } else if (document.location.pathname == AuthConfig.APPLE_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.APPLE_REDIRECT_URI, 'apple');\n          } else if (document.location.pathname == AuthConfig.GITHUB_REDIRECT_PATH) {\n            token = await AuthApi.refreshAccessToken(code, AuthConfig.GItHUB_REDIRECT_URI, 'github');\n          }\n          if (token) {\n            AuthStorage.setCommaAccessToken(token);\n          }\n          // done authing!!\n        } catch (e) {\n          console.log(e);\n        }\n      }\n    }\n\n    const token = await MyCommaAuth.init();\n    Request.configure(token);\n\n    if (MyCommaAuth.isAuthenticated()) {\n      await TimelineWorker.init();\n    }\n\n    this.setState({ initialized: true });\n  }\n\n  redirectLink() {\n    let url = '/';\n    if (typeof window.sessionStorage !== 'undefined') {\n      url = sessionStorage.redirectURL || '/';\n    }\n    return url;\n  }\n\n  authRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to={this.redirectLink()} />} />\n        <Route path=\"/\" component={Explorer} />\n      </Switch>\n    );\n  }\n\n  ananymousRoutes() {\n    return (\n      <Switch>\n        <Route path=\"/auth/\" render={() => <Redirect to=\"/\" />} />\n        <Route path=\"/\" component={AnonymousLanding} />\n      </Switch>\n    );\n  }\n\n  renderLoading() {\n    return (\n      <Grid container alignItems=\"center\" style={{ width: '100%', height: '100%' }}>\n        <Grid item align=\"center\" xs={12}>\n          <CircularProgress size=\"10vh\" style={{ color: '#525E66' }} />\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    if (!this.state.initialized) {\n      return this.renderLoading();\n    }\n    return (\n      <Provider store={store}>\n        <ConnectedRouter history={history}>\n          { (MyCommaAuth.isAuthenticated() || this.state.demo) ? this.authRoutes() : this.ananymousRoutes() }\n        </ConnectedRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import Raven from 'raven-js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport document from 'global/document';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport MuiPickersUtilsProvider from 'material-ui-pickers/MuiPickersUtilsProvider';\nimport DateFnsUtils from 'material-ui-pickers/utils/date-fns-utils';\n\nimport './index.css';\nimport 'react-virtualized/styles.css';\nimport App from './App';\nimport Theme from './theme';\nimport { unregister } from './registerServiceWorker';\n\nif (process.env.NODE_ENV === 'production') {\n  Raven.config(\n    'https://6a242abfa01b4660aa34f150e87de018@sentry.io/1234624',\n    { environment: process.env.NODE_ENV }\n  ).install();\n\n  unregister();\n}\n\nReactDOM.render((\n  <MuiThemeProvider theme={Theme}>\n    <CssBaseline />\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <App />\n    </MuiPickersUtilsProvider>\n  </MuiThemeProvider>\n), document.getElementById('root'));\n"],"sourceRoot":""}